<!DOCTYPE html><html lang="zh-TW" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Hands-On Practice: Amazon SNS Fan out to Amazon SQS | Kevin Liu's éƒ¨è½æ ¼ || Technical || Travel</title><meta name="author" content="Kevin Liu"><meta name="copyright" content="Kevin Liu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="IntroductionAmazon SNS offen works well with Amazon SQS, by subscribing SQS to SNS, the SNS service can push messages to SQS. This may eliminating the need to periodically check or â€œpollâ€ for updates.">
<meta property="og:type" content="article">
<meta property="og:title" content="Hands-On Practice: Amazon SNS Fan out to Amazon SQS">
<meta property="og:url" content="https://leozzmc.github.io/posts/efc78ef4.html">
<meta property="og:site_name" content="Kevin Liu&#39;s éƒ¨è½æ ¼ || Technical || Travel">
<meta property="og:description" content="IntroductionAmazon SNS offen works well with Amazon SQS, by subscribing SQS to SNS, the SNS service can push messages to SQS. This may eliminating the need to periodically check or â€œpollâ€ for updates.">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://leozzmc.github.io/img/pepe5.jpeg">
<meta property="article:published_time" content="2023-10-24T02:18:53.000Z">
<meta property="article:modified_time" content="2025-10-26T12:28:30.615Z">
<meta property="article:author" content="Kevin Liu">
<meta property="article:tag" content="AWS">
<meta property="article:tag" content="SNS">
<meta property="article:tag" content="SQS">
<meta property="article:tag" content="Publish-Subscribe-Model">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://leozzmc.github.io/img/pepe5.jpeg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Hands-On Practice: Amazon SNS Fan out to Amazon SQS",
  "url": "https://leozzmc.github.io/posts/efc78ef4.html",
  "image": "https://leozzmc.github.io/img/pepe5.jpeg",
  "datePublished": "2023-10-24T02:18:53.000Z",
  "dateModified": "2025-10-26T12:28:30.615Z",
  "author": [
    {
      "@type": "Person",
      "name": "Kevin Liu",
      "url": "https://leozzmc.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/kevin3.png"><link rel="canonical" href="https://leozzmc.github.io/posts/efc78ef4.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-T4SFRRLLZ0"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-T4SFRRLLZ0')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-T4SFRRLLZ0', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=LXGW+WenKai+TC&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"æ‰¾ä¸åˆ°ç¬¦åˆæ‚¨æŸ¥è©¢çš„å…§å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: 'è¤‡è£½æˆåŠŸ',
    error: 'è¤‡è£½å¤±æ•—',
    noSupport: 'ç€è¦½å™¨ä¸æ”¯æ´'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'å‰›å‰›',
    min: 'åˆ†é˜å‰',
    hour: 'å°æ™‚å‰',
    day: 'å¤©å‰',
    month: 'å€‹æœˆå‰'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: 'è¼‰å…¥æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Hands-On Practice: Amazon SNS Fan out to Amazon SQS',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg" style="background-color: #f5f1ed;"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/me.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">183</div></a><a href="/tags/"><div class="headline">æ¨™ç±¤</div><div class="length-num">119</div></a><a href="/categories/"><div class="headline">åˆ†é¡</div><div class="length-num">9</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é </span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> æ‰¾æ–‡ç« </span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ­¸æª”</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ¨™ç±¤</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†é¡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> éˆçµ</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-language"></i><span> èªè¨€:</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/"><i class="fa-fw fas fa-e"></i><span> English</span></a></li><li><a class="site-page child" href="https://leozzmc.github.io/"><i class="fa-fw fas fa-c"></i><span> ä¸­æ–‡</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/pepe5.jpeg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="https://i.imgur.com/P19VCm0.png" alt="Logo"><span class="site-name">Kevin Liu's éƒ¨è½æ ¼ || Technical || Travel</span></a><a class="nav-page-title" href="/"><span class="site-name">Hands-On Practice: Amazon SNS Fan out to Amazon SQS</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  è¿”å›é¦–é </span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœå°‹</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é </span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> æ‰¾æ–‡ç« </span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ­¸æª”</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ¨™ç±¤</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†é¡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> éˆçµ</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-language"></i><span> èªè¨€:</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/"><i class="fa-fw fas fa-e"></i><span> English</span></a></li><li><a class="site-page child" href="https://leozzmc.github.io/"><i class="fa-fw fas fa-c"></i><span> ä¸­æ–‡</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Hands-On Practice: Amazon SNS Fan out to Amazon SQS</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">ç™¼è¡¨æ–¼</span><time class="post-meta-date-created" datetime="2023-10-24T02:18:53.000Z" title="ç™¼è¡¨æ–¼ 2023-10-24 10:18:53">2023-10-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°æ–¼</span><time class="post-meta-date-updated" datetime="2025-10-26T12:28:30.615Z" title="æ›´æ–°æ–¼ 2025-10-26 20:28:30">2025-10-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AF%A6%E4%BD%9C%E7%B4%80%E9%8C%84/">å¯¦ä½œç´€éŒ„</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">ç¸½å­—æ•¸:</span><span class="word-count">932</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é–±è®€æ™‚é–“:</span><span>5åˆ†é˜</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">ç€è¦½é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Amazon SNS offen works well with Amazon SQS, by subscribing SQS to SNS, the SNS service can push messages to SQS. <strong>This may eliminating the need to periodically check or â€œpollâ€ for updates.</strong></p>
<h3 id="What-is-Amazon-SQS"><a href="#What-is-Amazon-SQS" class="headerlink" title="What is Amazon SQS?"></a>What is Amazon SQS?</h3><p>By official definition</p>
<blockquote>
<p>Amazon SQS is a message queue service used by distributed applications to exchange messages through a polling model, and can be used to decouple sending and receiving componentsâ€”without requiring each component to be concurrently available. </p>
</blockquote>
<h2 id="Scenario"><a href="#Scenario" class="headerlink" title="Scenario"></a>Scenario</h2><blockquote>
<p>The <strong>Fanout</strong> scenario is when a message published to an SNS topic is replicated and pushed to multiple endpoints, such as Kinesis Data Firehose delivery streams, Amazon SQS queues, HTTP(S) endpoints, and Lambda functions. This allows for parallel asynchronous processing.<br>For example, you can develop an application that publishes a message to an SNS topic whenever an order is placed for a product. Then, SQS queues that are subscribed to the SNS topic receive identical notifications for the new order. An Amazon Elastic Compute Cloud (Amazon EC2) server instance attached to one of the SQS queues can handle the processing or fulfillment of the order. And you can attach another Amazon EC2 server instance to a data warehouse for analysis of all orders received.[1]</p>
</blockquote>
<h2 id="Steps"><a href="#Steps" class="headerlink" title="Steps"></a>Steps</h2><p>Here we will go through each step of fan out to Amazon SQS.</p>
<p>The initial step is to remember both SNS arn and SQS arn.</p>
<h3 id="Create-SQS-Queue"><a href="#Create-SQS-Queue" class="headerlink" title="Create SQS Queue"></a>Create SQS Queue</h3><p>First, youâ€™ll need to create a standard queue in SQS console</p>
<p><img src="https://i.imgur.com/RRffWm5.png" alt="Imgur"></p>
<p>After creating the standard queue, it will shows the arn.</p>
<p>Make sure noted this arn, youâ€™ll need to provide this arn when creating the subscriptions</p>
<h3 id="Create-SNS-Topic"><a href="#Create-SNS-Topic" class="headerlink" title="Create SNS Topic"></a>Create SNS Topic</h3><p>Second, you need to create a SNS topic in the SNS console..</p>
<p><img src="https://i.imgur.com/ygA6g1P.png" alt="Imgur"></p>
<p>And again, youâ€™ll need to note the topic arn.</p>
<h3 id="Provide-Permission-to-SNS-to-send-messages-to-SQS"><a href="#Provide-Permission-to-SNS-to-send-messages-to-SQS" class="headerlink" title="Provide Permission to SNS to send messages to SQS"></a>Provide Permission to SNS to send messages to SQS</h3><p>By default, SNS will not have permission to send messages to SQS, so you need to provide permission to SNS for sending messages.</p>
<ul>
<li>Go to SQS Console</li>
<li>Press â€œEditâ€ in the top corner</li>
<li>Scroll down to the â€œAccess Policyâ€</li>
</ul>
<p><img src="https://i.imgur.com/keRSRlR.png" alt="Imgur"></p>
<ul>
<li>Append new statement in the Access Policy</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Principal&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Service&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sns.amazonaws.com&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;sqs:DeleteMessage&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;sqs:ReceiveMessage&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;sqs:SendMessage&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arn:aws:sqs:us-east-1:xxxxxxxxxxxx:QueueforSNS&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Condition&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;ArnEquals&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;aws:SourceArn&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arn:aws:sns:us-east-1:xxxxxxxxxxxx:StandardTopicforSQS&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/UWjKND7.png" alt="Imgur"></p>
<h3 id="Subscribe-SQS-queue-to-SNS-topic"><a href="#Subscribe-SQS-queue-to-SNS-topic" class="headerlink" title="Subscribe SQS queue to SNS topic"></a>Subscribe SQS queue to SNS topic</h3><p>Now youâ€™ll need to subscribe the SQS queue to the SNS topic.</p>
<ul>
<li>Go to SNS console</li>
<li>Scroll down and choose â€œCreate Subscriptionâ€</li>
</ul>
<p><img src="https://i.imgur.com/qTEPbQb.png" alt="Imgur"></p>
<ul>
<li>Choose your topic arn</li>
<li>Set the protocal to SQS</li>
<li>Choose the SQS arn</li>
</ul>
<p><img src="https://i.imgur.com/voJqHuB.png" alt="Imgur"></p>
<p>Once complete, you will notice that the subscripe confirmation also completes. If you create a SQS type subscription by using console, you donâ€™t need confirm the subscription manually.</p>
<p><img src="https://i.imgur.com/Jr4Brob.png" alt="Imgur"></p>
<blockquote>
<p><strong>But if you create a cross-account subscription, you will receive the confirmation url in the SQS queue, and you will need to click the confirmation URL. [3]</strong></p>
</blockquote>
<h3 id="Provide-Permission-to-User-for-topic-x2F-queue-operations"><a href="#Provide-Permission-to-User-for-topic-x2F-queue-operations" class="headerlink" title="Provide Permission to User for topic&#x2F;queue operations"></a>Provide Permission to User for topic&#x2F;queue operations</h3><p>You can add permissions to an IAM User to publish SNS messages to a topic.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Statement&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sns:Publish&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arn:aws:sns:us-east-2:XXXXXXXXXXXX:MyTopic&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>And you also need to provide permissions to SQS queue to recieve and delete messages</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Statement&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;sqs:ReceiveMessage&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;sqs:DeleteMessage&quot;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;arn:aws:sqs:us-east-2:XXXXXXXXXXXX:MyQueue1&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;arn:aws:sqs:us-east-2:XXXXXXXXXXXX:MyQueue2&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>However,if you want to perform cross-account operations, you will need to provide permissions to the other account.</p>
<p>For example, if you want to let acount: 111122223333 to publish messages to SNS topic in your account, here is an example policy.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Statement&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Principal&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;AWS&quot;</span><span class="punctuation">:</span> <span class="string">&quot;111122223333&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sns:Publish&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arn:aws:sns:us-east-2:XXXXXXXXXXXXX:MyTopic&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>if you want to let acount: 111122223333 to perform receive abd delete messages to queue in your account, here is an example policy.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Statement&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Principal&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;AWS&quot;</span><span class="punctuation">:</span> <span class="string">&quot;111122223333&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;sqs:DeleteMessage&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;sqs:ReceiveMessage&quot;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;arn:aws:sqs:us-east-2:XXXXXXXXXXXX:MyQueue&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="Test-subscription"><a href="#Test-subscription" class="headerlink" title="Test subscription"></a>Test subscription</h3><p>Now we can test the message delivery to the queue.</p>
<ul>
<li>Go to the SNS console</li>
<li>Press â€œPush Messageâ€ in the top right corner </li>
<li>Enter the message subject and meesage body</li>
</ul>
<p><img src="https://i.imgur.com/iu7VJVX.png" alt="Imgur"><br><img src="https://i.imgur.com/ppgfOf0.png" alt="Imgur"></p>
<ul>
<li>Go to the SQS console</li>
<li>Press â€œSend and Receive Messageâ€ in the top right corner</li>
<li>Scroll down , and press the â€œPoll for all messagesâ€</li>
<li>And youâ€™ll find the messages are in polling progress.</li>
</ul>
<p><img src="https://i.imgur.com/aYWXVIE.png" alt="Imgur"></p>
<ul>
<li>Then the test meesages showed in the console</li>
</ul>
<p><img src="https://i.imgur.com/Vj3cCc9.png" alt="Imgur"></p>
<h2 id="Conclusions"><a href="#Conclusions" class="headerlink" title="Conclusions"></a>Conclusions</h2><p>We successfully fan out the message from the Amazon SNS to the Amazon SQS. </p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>[1] <a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/sns/latest/dg/sns-common-scenarios.html#SNSFanoutScenario">https://docs.aws.amazon.com/sns/latest/dg/sns-common-scenarios.html#SNSFanoutScenario</a><br>[2] <a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/zh_tw/sns/latest/dg/sns-sqs-as-subscriber.html">https://docs.aws.amazon.com/zh_tw/sns/latest/dg/sns-sqs-as-subscriber.html</a><br>[3]<a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/zh_tw/sns/latest/dg/sns-send-message-to-sqs-cross-account.html">https://docs.aws.amazon.com/zh_tw/sns/latest/dg/sns-send-message-to-sqs-cross-account.html</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://leozzmc.github.io">Kevin Liu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é€£çµ: </span><span class="post-copyright-info"><a href="https://leozzmc.github.io/posts/efc78ef4.html">https://leozzmc.github.io/posts/efc78ef4.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæ¬Šè²æ˜: </span><span class="post-copyright-info">æœ¬éƒ¨è½æ ¼æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ¥è²æ˜å¤–ï¼Œå‡æ¡ç”¨<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> æˆæ¬Šå”è­°ã€‚è½‰è¼‰è«‹è¨»æ˜ä¾†æº <a href="https://leozzmc.github.io" target="_blank">Kevin Liu's éƒ¨è½æ ¼ || Technical || Travel</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/AWS/">AWS</a><a class="post-meta__tags" href="/tags/SNS/">SNS</a><a class="post-meta__tags" href="/tags/SQS/">SQS</a><a class="post-meta__tags" href="/tags/Publish-Subscribe-Model/">Publish-Subscribe-Model</a></div><div class="post-share"><div class="social-share" data-image="/img/pepe5.jpeg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/e7e295f6.html" title="Hands-On Practice: S3 Gateway Endpoints"><img class="cover" src="/img/pepe4.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">Hands-On Practice: S3 Gateway Endpoints</div></div><div class="info-2"><div class="info-item-1">What is S3 Gateway Endpoints? Letâ€™s consider a scenario  How could your Lambda function access the content in the S3 bucket?  If you want a service to access the content in the S3 bucket, it usually go through VPC endpoint. S3 supports two types of VPC endpoint,each of which is Gateway endpoint and Interface endpoint   The diffeences between two types of VPC endpoints are listed below    S3 Gateway Endpoints S3 Interface Endpoints    Use S3 Public IP Address Use Private IP Address in VPC to a...</div></div></div></a><a class="pagination-related" href="/posts/aws-iot-device-shadow.html" title="Hands-On Practice: AWS IoT Device Shadow"><img class="cover" src="/img/pepe_shadow.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">Hands-On Practice: AWS IoT Device Shadow</div></div><div class="info-2"><div class="info-item-1">Intro - What is AWS IoT Device Shadow?In real world, sometime it is difficult to get the actual device state in real time in such IoT scenarios. A device shadow can overcome this challenge, Device Shadow can consider a virtual  virtual representation of a device which managed by the IoT Things resource created in AWS IoT Core.  The Shadow document is a JSON or a JavaScript notation doc that is used to store and retrieve the current state information for a device. You can use the shadow to get...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸é—œæ¨è–¦</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/c0ef3a5f.html" title="è¿‘ä¸€å¹´åŠçš„ AWS Cloud Support Engineer å¿ƒå¾—è¨˜éŒ„"><img class="cover" src="/img/AWS/CSE/aws3.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-03</div><div class="info-item-2">è¿‘ä¸€å¹´åŠçš„ AWS Cloud Support Engineer å¿ƒå¾—è¨˜éŒ„</div></div><div class="info-2"><div class="info-item-1">èƒŒæ™¯ ç›®å‰åœ¨å°ç£äºé¦¬éœç¶²è·¯æœå‹™å…¬å¸ (Amazon Web Services) æ“”ä»» é›²ç«¯æ”¯æ´å·¥ç¨‹å¸« (Cloud Support Engineer) ï¼Œä½†å…©å¤©å¾Œå°±è¦é›¢è·äº†ï¼Œå› æ­¤æƒ³èªªè¶é›¢è·å‰ç´€éŒ„ä¸¦å›é¡§ä¸€ä¸‹é€™ä¸€å¹´åŠä»¥ä¾†çš„å·¥ä½œä»¥åŠç”Ÿæ´»ã€‚  æˆ‘æ˜¯åœ¨æˆ‘ç¢©äºŒä¸Šçš„æ™‚å€™(2021å¹´10æœˆ)æŠ•éAWS Cloud Support æ ¡åœ’æ‹›è˜çš„è·ç¼ºï¼Œç•¶æ™‚åŸæœ¬åœ¨æ‰¾ç ”ç™¼æ›¿ä»£å½¹ï¼Œå¾Œä¾†å› ç‚ºçŸ¥é“AWSæœ‰é–‹ç¼ºï¼ŒæŠ±æŒè‘—è©¦è©¦çœ‹çš„å¿ƒæƒ…æŠ•éäº†å±¥æ­·ã€‚å¤§æ¦‚éš”å¤©å°±æ”¶åˆ°äº†Online Assessment çš„é€šçŸ¥ã€‚OAå…¶å¯¦å°±æ˜¯ç°¡å–®çš„é›»è…¦åŸºç¤çŸ¥è­˜ï¼Œæ‡‰è©²åªæ˜¯æ‹¿ä¾†ç¯©æœ¬ç§‘éæœ¬ç§‘çš„(?)ï¼Œæ¥è‘—å°±æ˜¯Phone Interviewï¼Œç•¶æ™‚çš„æ ¡æ‹›å¯ä»¥æ’å¿—é¡˜åºï¼Œæˆ‘åŸæœ¬æƒ³å»çš„æ˜¯ Security æˆ–è€… Deployment Profileï¼Œä½†æˆ‘åœ¨é¢è©¦éç¨‹ä¸­ï¼Œç™¼ç¾å•é¡Œå¤§å¤šæœƒè·Ÿ Troubleshooting ç›¸é—œï¼Œå› æ­¤Security Failäº†ï¼Œç„¶å¾ŒDeployment é€²åˆ°æœ€å¾Œçš„loop çš„æœ€å¾Œä¸€é—œæŠ€è¡“é—œä¹Ÿè¢«å•çˆ†ï¼Œå¾Œä¾†è½‰é¢ DMS(Developer and Mobile Services) ï¼Œé›–ç„¶æ˜¯è‡ªå·±å®Œå…¨ä¸å¤ªç†Ÿæ‚‰çš„é ˜åŸŸï¼Œä½†å¥½éšªæœ€å¾Œé€šéé¢è©¦äº†ã€‚...</div></div></div></a><a class="pagination-related" href="/posts/dce71546.html" title="DevOpsæŠ€èƒ½æ¨¹çŸ¥è­˜æ•´ç† |ã€ç­†è¨˜ç›®éŒ„ã€‘"><img class="cover" src="/img/devops/cover3.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2060-11-05</div><div class="info-item-2">DevOpsæŠ€èƒ½æ¨¹çŸ¥è­˜æ•´ç† |ã€ç­†è¨˜ç›®éŒ„ã€‘</div></div><div class="info-2"><div class="info-item-1">å‰è¨€é€™è£¡ç´€éŒ„ DevOps é¢è©¦å¸¸è¦‹çš„çŸ¥è­˜é»ï¼Œä¸»è¦æ˜¯åƒè€ƒäº†é€™å€‹ github repository: DevOps Exercises å’Œ ByteByteGo çš„ GitHub Repo æ‰€åšçš„ç­†è¨˜æ•´ç†  å¯èƒ½æœƒèŠ±å¾ˆä¹…æ™‚é–“æ‰èƒ½å¤ å…¨éƒ¨æ•´ç†å®Œæˆ~  DevOps GeneralPython Basic Data Types OOP &#x2F; Class Raise Exceptions Regex Async File Manipulation OS lambda decorator Flask   æ–‡ç« ï¼š Python for DevOps |ã€DevOpsæŠ€èƒ½æ¨¹ã€‘  Networking TCP&#x2F;UDP OSI Model CIDR Mac Addr. CSMA&#x2F;CD NAT DNS ICMP TLS&#x2F;SSL Handshake Route Table ARP DHCP VLAN  SDN  Configuration ..etc  Linux Basic Commands Filesystem Hierarchy Standard Permi...</div></div></div></a><a class="pagination-related" href="/posts/c79cef2b.html" title="Lambda åŸºæœ¬èªè­˜ feat.å®¹å™¨é‡ç”¨å°å¯¦é©—"><img class="cover" src="/img/PEPE1.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-16</div><div class="info-item-2">Lambda åŸºæœ¬èªè­˜ feat.å®¹å™¨é‡ç”¨å°å¯¦é©—</div></div><div class="info-2"><div class="info-item-1">å‰è¨€é¦–å…ˆï¼Œç‚ºä»€éº¼è«‡åˆ°ç„¡ä¼ºæœå™¨ç¸½æ˜¯æœƒæœ‰äººæåˆ° Lambda ? ä»¥ä¸‹å°±é–‹å§‹ä¾†ä»‹ç´¹é€™å€‹æœå‹™ FaaS (Function as a Service)ä¸€æ—¦è«‡åˆ°ç„¡ä¼ºæœå™¨é‹ç®—ï¼Œå°±æœƒæåˆ°ä»–çš„æ ¸å¿ƒæ¦‚å¿µï¼ŒåŠŸèƒ½å³æœå‹™(Function as a Service) ï¼Œé€™è£¡å¼•ç”¨ç¶­åŸºç™¾ç§‘å°æ–¼ FaaS çš„è§£é‡‹  FaaS æ˜¯é›²ç«¯é‹ç®—çš„ä¸€ç¨®æ¨¡å‹ã€‚ä»¥å¹³å°å³æœå‹™ï¼ˆPaaSï¼‰ç‚ºåŸºç¤ï¼Œç„¡ä¼ºæœå™¨é‹ç®—æä¾›ä¸€å€‹å¾®å‹çš„æ¶æ§‹ï¼Œçµ‚ç«¯å®¢æˆ¶ä¸éœ€è¦éƒ¨ç½²ã€é…ç½®æˆ–ç®¡ç†ä¼ºæœå™¨æœå‹™ï¼Œç¨‹å¼ç¢¼é‹è¡Œæ‰€éœ€è¦çš„ä¼ºæœå™¨æœå‹™çš†ç”±é›²ç«¯å¹³å°ä¾†æä¾›ã€‚  æ²’éŒ¯ï¼Œé€™å€‹æ¦‚å¿µçš„æ ¸å¿ƒå°±æ˜¯è®“ä½¿ç”¨è€…å°ˆæ³¨åœ¨è¨­è¨ˆç”¢å“æˆ–æ¥­å‹™é‚è¼¯ï¼Œè€Œä¸éœ€è²»å¿ƒåœ¨éƒ¨ç½²é…ç½®æˆ–æ˜¯è¨­å®šä¼ºæœå™¨ã€‚ è€Œæœ€æ—©å¯¦è¸é€™å€‹æ¦‚å¿µä¸¦æ¨å‡ºæœå‹™çš„ï¼Œå°±æ˜¯ AWS åœ¨ 2014 å¹´æ¨å‡ºçš„ Lambda æœå‹™ã€‚ï¼ˆç•¶ç„¶å¾ŒçºŒä¹Ÿæœ‰ Microsoft çš„ Azure Functionï¼‰ Lambda å‡½æ•¸ Lambda åœ¨é«˜å¯ç”¨æ€§çš„é‹ç®—åŸºç¤è¨­æ–½ä¸ŠåŸ·è¡Œæ‚¨çš„ç¨‹å¼ç¢¼ï¼Œä¸¦åŸ·è¡Œæ‰€æœ‰é‹ç®—è³‡æºçš„ç®¡ç†ï¼ŒåŒ…æ‹¬ä¼ºæœå™¨èˆ‡ä½œæ¥­ç³»çµ±ç¶­è­·ã€å®¹é‡ä½ˆå»ºèˆ‡è‡ªå‹•æ“´å±•ä»¥åŠè¨˜éŒ„ã€‚ä½¿ç”¨ Lambdaï¼Œæ‚¨å”¯ä¸€éœ€è¦åšçš„å°±æ˜¯åœ¨ Lambda æ”¯æ´çš„å…¶ä¸­ä¸€ç¨®èªè¨€åŸ·è¡ŒæœŸä¸­æä¾›æ‚¨çš„ç¨‹å¼ç¢¼ [...</div></div></div></a><a class="pagination-related" href="/posts/421a206a.html" title="å»ºç«‹ Lambda å‡½æ•¸ URL çš„æ­¥é©Ÿ"><img class="cover" src="/img/AWS/Lambda_URL/cover.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-01-03</div><div class="info-item-2">å»ºç«‹ Lambda å‡½æ•¸ URL çš„æ­¥é©Ÿ</div></div><div class="info-2"><div class="info-item-1">ç”šéº¼æ˜¯ Lambda URL ? å®˜æ–¹å®šç¾©: å‡½æ•¸ URL æ˜¯ Lambda å‡½æ•¸å°ˆç”¨çš„ HTTP(S) ç«¯é»ã€‚æ‚¨å¯ä»¥é€é Lambda ä¸»æ§å°æˆ– Lambda API å»ºç«‹åŠè¨­å®šå‡½æ•¸ URLã€‚ç•¶æ‚¨å»ºç«‹å‡½æ•¸ URL æ™‚ï¼ŒLambda æœƒè‡ªå‹•ç‚ºæ‚¨ç”¢ç”Ÿä¸é‡è¤‡çš„ URL ç«¯é»ã€‚å‡½æ•¸ URL ä¸€æ—¦å»ºç«‹ï¼Œå…¶ URL ç«¯é»ä¾¿æ°¸é ä¸æœƒè®Šæ›´ã€‚  å‡½æ•¸ URL ç«¯é»çš„æ ¼å¼å¦‚ä¸‹ï¼š 1https://&lt;url-id&gt;.lambda-url.&lt;region&gt;.on.aws  è¦ç‰¹åˆ¥æ³¨æ„çš„æ˜¯ï¼ŒæŸäº›regionä¸¦ä¸æ”¯æ´ä½¿ç”¨ function URLï¼Œé€™æ™‚å¯èƒ½å°±è¦ç”¨è€æ–¹æ³•: API Gateway + Lambda Integration å­˜å–æ§åˆ¶åœ¨å»ºç«‹ function URL çš„æ™‚å€™å¯ä»¥é€é AuthType åƒæ•¸ï¼Œä¾†æ±ºå®š Lambda å¦‚ä½•å° funcion URL çš„è«‹æ±‚åŸ·è¡Œèº«åˆ†é©—è­‰æˆ–æˆæ¬Š AuthType é¸é …:  AWS_IAM : ã€€å¦‚æœæƒ³è®“å·²å®Œæˆèº«åˆ†é©—è­‰çš„ä½¿ç”¨è€…æˆ–Roleé€éfunction URL å‘¼å«ä½ çš„å‡½æ•¸ï¼Œå°±è¦é¸ AWS_IAM NONE:   Lambda ä¸...</div></div></div></a><a class="pagination-related" href="/posts/aws-iot-device-shadow.html" title="Hands-On Practice: AWS IoT Device Shadow"><img class="cover" src="/img/pepe_shadow.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-08</div><div class="info-item-2">Hands-On Practice: AWS IoT Device Shadow</div></div><div class="info-2"><div class="info-item-1">Intro - What is AWS IoT Device Shadow?In real world, sometime it is difficult to get the actual device state in real time in such IoT scenarios. A device shadow can overcome this challenge, Device Shadow can consider a virtual  virtual representation of a device which managed by the IoT Things resource created in AWS IoT Core.  The Shadow document is a JSON or a JavaScript notation doc that is used to store and retrieve the current state information for a device. You can use the shadow to get...</div></div></div></a><a class="pagination-related" href="/posts/f40d2e89.html" title="Lambda_layer æ¦‚å¿µå’Œå¯¦ä½œ"><img class="cover" src="/img/pepe3.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-20</div><div class="info-item-2">Lambda_layer æ¦‚å¿µå’Œå¯¦ä½œ</div></div><div class="info-2"><div class="info-item-1">å‰è¨€é‡å° Lambda è¨­å®šï¼Œçµ•å¤§å¤šæ•¸äººä¸€å®šç¢°é ImportModuleError  æ‰€ä»¥å„ä½å¯ä»¥è·Ÿè‘—ä»¥ä¸‹çš„æƒ…å¢ƒï¼Œé–‹ä¸€å€‹ä¸€æ¨£çš„ Lambda ç’°å¢ƒé€æ­¥æ“ä½œã€‚ æƒ…å¢ƒ Region: IAD(us-east-1) Runtime: Python3.11 Lambda Name: â€œITHomeLambdaFunctionâ€ Lambda code1234567891011import json requestsdef lambda_handler(event, context):    # TODO implement    x = requests.get(&#x27;https://www.ntust.edu.tw/&#x27;)    print(x.text)    return &#123;        &#x27;statusCode&#x27;: 200,        &#x27;body&#x27;: json.dumps(&#x27;Hello from Lambda!&#x27;)    &#125;  [Error]: Runtime.ImportModu...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è©•è«–</span></div></div><div class="comment-wrap"><div><div id="utterances-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/me.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Kevin Liu</div><div class="author-info-description">ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">183</div></a><a href="/tags/"><div class="headline">æ¨™ç±¤</div><div class="length-num">119</div></a><a href="/categories/"><div class="headline">åˆ†é¡</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/leozzmc"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/leozzmc" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:zzmczzmczzmc870125@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #e0ad5a;"></i></a><a class="social-icon" href="https://www.linkedin.com/in/kevin-liu087" target="_blank" title="LinkedIn"><i class="fa-brands fa-linkedin" style="color: #0373fc;"></i></a><a class="social-icon" href="https://www.youtube.com/channel/UC2AU_vpxPu0oKcgZl3UJSNg" target="_blank" title="Youtube"><i class="fa-brands fa-youtube" style="color: #dc1e1e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">ä¸å®šæœŸæ›´æ–°ä¸­</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®éŒ„</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What-is-Amazon-SQS"><span class="toc-number">1.1.</span> <span class="toc-text">What is Amazon SQS?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Scenario"><span class="toc-number">2.</span> <span class="toc-text">Scenario</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Steps"><span class="toc-number">3.</span> <span class="toc-text">Steps</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-SQS-Queue"><span class="toc-number">3.1.</span> <span class="toc-text">Create SQS Queue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Create-SNS-Topic"><span class="toc-number">3.2.</span> <span class="toc-text">Create SNS Topic</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Provide-Permission-to-SNS-to-send-messages-to-SQS"><span class="toc-number">3.3.</span> <span class="toc-text">Provide Permission to SNS to send messages to SQS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Subscribe-SQS-queue-to-SNS-topic"><span class="toc-number">3.4.</span> <span class="toc-text">Subscribe SQS queue to SNS topic</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Provide-Permission-to-User-for-topic-x2F-queue-operations"><span class="toc-number">3.5.</span> <span class="toc-text">Provide Permission to User for topic&#x2F;queue operations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Test-subscription"><span class="toc-number">3.6.</span> <span class="toc-text">Test subscription</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusions"><span class="toc-number">4.</span> <span class="toc-text">Conclusions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">5.</span> <span class="toc-text">Reference</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/d0fc136d.html" title="LeetCode åˆ·é¡ŒçŸ¥è­˜ç¸½æ•´ç†">LeetCode åˆ·é¡ŒçŸ¥è­˜ç¸½æ•´ç†</a><time datetime="2100-11-29T01:08:02.000Z" title="ç™¼è¡¨æ–¼ 2100-11-29 09:08:02">2100-11-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/dce71546.html" title="DevOpsæŠ€èƒ½æ¨¹çŸ¥è­˜æ•´ç† |ã€ç­†è¨˜ç›®éŒ„ã€‘"><img src="/img/devops/cover3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DevOpsæŠ€èƒ½æ¨¹çŸ¥è­˜æ•´ç† |ã€ç­†è¨˜ç›®éŒ„ã€‘"/></a><div class="content"><a class="title" href="/posts/dce71546.html" title="DevOpsæŠ€èƒ½æ¨¹çŸ¥è­˜æ•´ç† |ã€ç­†è¨˜ç›®éŒ„ã€‘">DevOpsæŠ€èƒ½æ¨¹çŸ¥è­˜æ•´ç† |ã€ç­†è¨˜ç›®éŒ„ã€‘</a><time datetime="2060-11-05T13:45:50.000Z" title="ç™¼è¡¨æ–¼ 2060-11-05 21:45:50">2060-11-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/22911275.html" title="Git for DevOps ç­†è¨˜ |ã€DevOpsæŠ€èƒ½æ¨¹ã€‘"><img src="/img/devops/git/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Git for DevOps ç­†è¨˜ |ã€DevOpsæŠ€èƒ½æ¨¹ã€‘"/></a><div class="content"><a class="title" href="/posts/22911275.html" title="Git for DevOps ç­†è¨˜ |ã€DevOpsæŠ€èƒ½æ¨¹ã€‘">Git for DevOps ç­†è¨˜ |ã€DevOpsæŠ€èƒ½æ¨¹ã€‘</a><time datetime="2025-11-11T03:45:46.000Z" title="ç™¼è¡¨æ–¼ 2025-11-11 11:45:46">2025-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/85addf17.html" title="åˆæ³•æ‹¬è™Ÿå­—ä¸² | Medium | LeetCode#678. Valid Parenthesis String"><img src="/img/LeetCode/678/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="åˆæ³•æ‹¬è™Ÿå­—ä¸² | Medium | LeetCode#678. Valid Parenthesis String"/></a><div class="content"><a class="title" href="/posts/85addf17.html" title="åˆæ³•æ‹¬è™Ÿå­—ä¸² | Medium | LeetCode#678. Valid Parenthesis String">åˆæ³•æ‹¬è™Ÿå­—ä¸² | Medium | LeetCode#678. Valid Parenthesis String</a><time datetime="2025-10-26T07:05:24.000Z" title="ç™¼è¡¨æ–¼ 2025-10-26 15:05:24">2025-10-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/8a835d3b.html" title="Pow(x, n) | Medium | LeetCode#50. Pow(x, n)"><img src="/img/LeetCode/50/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Pow(x, n) | Medium | LeetCode#50. Pow(x, n)"/></a><div class="content"><a class="title" href="/posts/8a835d3b.html" title="Pow(x, n) | Medium | LeetCode#50. Pow(x, n)">Pow(x, n) | Medium | LeetCode#50. Pow(x, n)</a><time datetime="2025-10-23T06:03:36.000Z" title="ç™¼è¡¨æ–¼ 2025-10-23 14:03:36">2025-10-23</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2019 - 2025 By Kevin Liu</span><span class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 6.3.0</a><span class="footer-separator">|</span><span>ä¸»é¡Œ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.1</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é–±è®€æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥å¤œæ¨¡å¼åˆ‡æ›"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å–®æ¬„å’Œé›™æ¬„åˆ‡æ›"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è¨­å®š"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®éŒ„"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="å‰å¾€è©•è«–"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é ‚ç«¯"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.1"></script><script src="/js/main.js?v=5.5.1"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        loader: {
          load: [
            // Four font extension packages (optional)
            //- '[tex]/bbm',
            //- '[tex]/bboldx',
            //- '[tex]/dsfont',
            '[tex]/mhchem'
          ],
          paths: {
            'mathjax-newcm': '[mathjax]/../@mathjax/mathjax-newcm-font',

            //- // Four font extension packages (optional)
            //- 'mathjax-bbm-extension': '[mathjax]/../@mathjax/mathjax-bbm-font-extension',
            //- 'mathjax-bboldx-extension': '[mathjax]/../@mathjax/mathjax-bboldx-font-extension',
            //- 'mathjax-dsfont-extension': '[mathjax]/../@mathjax/mathjax-dsfont-font-extension',
            'mathjax-mhchem-extension': '[mathjax]/../@mathjax/mathjax-mhchem-font-extension'
          }
        },
        output: {
          font: 'mathjax-newcm',
        },
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
          packages: {
            '[+]': [
              'mhchem'
            ]
          }
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          menuOptions: {
            settings: {
              enrich: false  // Turn off Braille and voice narration text automatic generation
            }
          },
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }

      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax@4.0.0/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'dark'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.0/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null
  const getUtterancesTheme = theme => theme === 'dark' ? 'photon-dark' : 'github-light'

  const loadUtterances = (el = document, key) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyUtterances = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    const config = {
      src: 'https://utteranc.es/client.js',
      repo: 'leozzmc/Blog_Reply',
      theme: getUtterancesTheme(document.documentElement.getAttribute('data-theme')),
      crossorigin: 'anonymous',
      async: true,
      ...option,
      'issue-term': isShuoshuo ? key : (option && option['issue-term']) || 'pathname'
    }

    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => ele.setAttribute(key, value))
    el.querySelector('#utterances-wrap').appendChild(ele)
  }

  const changeUtterancesTheme = theme => {
    const iframe = document.querySelector('#utterances-wrap iframe')
    if (iframe) {
      const message = {
        type: 'set-theme',
        theme: getUtterancesTheme(theme)
      };
      iframe.contentWindow.postMessage(message, 'https://utteranc.es')
    }
  }

  btf.addGlobalFn('themeChange', changeUtterancesTheme, 'utterances')

  if (isShuoshuo) {
    'Utterances' === 'Utterances'
      ? window.shuoshuoComment = { loadComment: loadUtterances }
      : window.loadOtherComment = loadUtterances
    return
  }
  
  if ('Utterances' === 'Utterances' || !false) {
    if (false) btf.loadComment(document.getElementById('utterances-wrap'), loadUtterances)
    else loadUtterances()
  } else {
    window.loadOtherComment = loadUtterances
  }
})()</script></div><script data-pjax src="/self/btf.js"></script><script data-pjax src="/self/tw_en.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script data-pjax src="/self/calendar.js"></script><script data-pjax src="/self/languages.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/click-show-text.min.js" data-mobile="false" data-text="ğŸ‘,ğŸ‘¾,ğŸ’Š,ğŸ§ª,ğŸ‘ï¸" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœå°‹</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  è³‡æ–™è¼‰å…¥ä¸­</span></div><div class="local-search-input"><input placeholder="æœå°‹æ–‡ç« " type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.1"></script></div></div></body></html>